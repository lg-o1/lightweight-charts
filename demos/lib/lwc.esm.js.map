{
  "version": 3,
  "sources": ["../../lib/prod/src/api/options/series-options-defaults.js", "../../lib/prod/src/renderers/draw-line.js", "../../lib/prod/src/helpers/assertions.js", "../../lib/prod/src/helpers/delegate.js", "../../lib/prod/src/helpers/strict-type-checks.js", "../../lib/prod/src/helpers/make-font.js", "../../lib/prod/src/renderers/price-axis-renderer-options-provider.js", "../../lib/prod/src/model/colors.js", "../../lib/prod/src/renderers/composite-renderer.js", "../../lib/prod/src/renderers/bitmap-coordinates-pane-renderer.js", "../../lib/prod/src/renderers/marks-renderer.js", "../../lib/prod/src/views/pane/crosshair-marks-pane-view.js", "../../lib/prod/src/renderers/crosshair-renderer.js", "../../lib/prod/src/views/pane/crosshair-pane-view.js", "../../lib/prod/src/helpers/canvas-helpers.js", "../../lib/prod/src/renderers/price-axis-view-renderer.js", "../../lib/prod/src/views/price-axis/price-axis-view.js", "../../lib/prod/src/views/price-axis/crosshair-price-axis-view.js", "../../lib/prod/src/renderers/time-axis-view-renderer.js", "../../lib/prod/src/views/time-axis/crosshair-time-axis-view.js", "../../lib/prod/src/model/data-source.js", "../../lib/prod/src/model/crosshair.js", "../../lib/prod/src/model/default-price-scale.js", "../../lib/prod/src/model/invalidate-mask.js", "../../lib/prod/src/formatters/formatter-base.js", "../../lib/prod/src/formatters/price-formatter.js", "../../lib/prod/src/formatters/percentage-formatter.js", "../../lib/prod/src/formatters/volume-formatter.js", "../../lib/prod/src/model/text-width-cache.js", "../../lib/prod/src/views/pane/pane-price-axis-view.js", "../../lib/prod/src/renderers/horizontal-line-renderer.js", "../../lib/prod/src/views/pane/series-horizontal-line-pane-view.js", "../../lib/prod/src/views/pane/series-horizontal-base-line-pane-view.js", "../../lib/prod/src/renderers/series-last-price-animation-renderer.js", "../../lib/prod/src/views/pane/series-last-price-animation-pane-view.js", "../../lib/prod/src/views/pane/series-price-line-pane-view.js", "../../lib/prod/src/views/price-axis/series-price-axis-view.js", "../../lib/prod/src/model/price-range-impl.js", "../../lib/prod/src/model/autoscale-info-impl.js", "../../lib/prod/src/model/conflation/constants.js", "../../lib/prod/src/views/pane/custom-price-line-pane-view.js", "../../lib/prod/src/views/price-axis/custom-price-line-price-axis-view.js", "../../lib/prod/src/model/custom-price-line.js", "../../lib/prod/src/model/data-conflater.js", "../../lib/prod/src/model/price-data-source.js", "../../lib/prod/src/model/series-bar-colorer.js", "../../lib/prod/src/helpers/algorithms.js", "../../lib/prod/src/model/plot-list.js", "../../lib/prod/src/model/series-data.js", "../../lib/prod/src/model/primitive-drawing-utils.js", "../../lib/prod/src/model/pane-primitive-wrapper.js", "../../lib/prod/src/model/series-primitive-wrapper.js", "../../lib/prod/src/model/series.js", "../../lib/prod/src/model/magnet.js", "../../lib/prod/src/helpers/mathex.js", "../../lib/prod/src/renderers/grid-renderer.js", "../../lib/prod/src/views/pane/grid-pane-view.js", "../../lib/prod/src/model/grid.js", "../../lib/prod/src/model/price-scale-conversions.js", "../../lib/prod/src/model/price-tick-span-calculator.js", "../../lib/prod/src/model/price-tick-mark-builder.js", "../../lib/prod/src/model/sort-sources.js", "../../lib/prod/src/model/price-scale.js", "../../lib/prod/src/model/pane.js", "../../lib/prod/src/model/pane-hit-test.js", "../../lib/prod/src/model/formatted-labels-cache.js", "../../lib/prod/src/model/range-impl.js", "../../lib/prod/src/model/tick-marks.js", "../../lib/prod/src/model/time-scale-visible-range.js", "../../lib/prod/src/model/time-scale.js", "../../lib/prod/src/model/chart-model.js", "../../lib/prod/src/model/series-options.js", "../../lib/prod/src/model/layout-options.js", "../../lib/prod/src/model/horz-scale-behavior-time/types.js", "../../lib/prod/src/formatters/format-date.js", "../../lib/prod/src/formatters/date-formatter.js", "../../lib/prod/src/formatters/time-formatter.js", "../../lib/prod/src/formatters/date-time-formatter.js", "../../lib/prod/src/model/horz-scale-behavior-time/default-tick-mark-formatter.js", "../../lib/prod/src/model/horz-scale-behavior-time/time-scale-point-weight-generator.js", "../../lib/prod/src/model/horz-scale-behavior-time/time-utils.js", "../../lib/prod/src/model/horz-scale-behavior-time/horz-scale-behavior-time.js", "../../node_modules/fancy-canvas/size.mjs", "../../node_modules/fancy-canvas/device-pixel-ratio.mjs", "../../node_modules/fancy-canvas/canvas-element-bitmap-size.mjs", "../../node_modules/fancy-canvas/canvas-rendering-target.mjs", "../../lib/prod/src/helpers/is-running-on-client-side.js", "../../lib/prod/src/helpers/browsers.js", "../../lib/prod/src/helpers/logger.js", "../../lib/prod/src/gui/internal-layout-sizes-hints.js", "../../lib/prod/src/helpers/events.js", "../../lib/prod/src/gui/mouse-event-handler.js", "../../lib/prod/src/gui/pane-separator.js", "../../lib/prod/src/model/kinetic-animation.js", "../../lib/prod/src/gui/attribution-logo-widget.js", "../../lib/prod/src/gui/canvas-utils.js", "../../lib/prod/src/gui/draw-functions.js", "../../lib/prod/src/gui/price-axis-widget.js", "../../lib/prod/src/gui/pane-widget.js", "../../lib/prod/src/gui/price-axis-stub.js", "../../lib/prod/src/gui/time-axis-widget.js", "../../lib/prod/src/gui/chart-widget.js", "../../lib/prod/src/model/data-consumer.js", "../../lib/prod/src/model/get-series-plot-row-creator.js", "../../lib/prod/src/model/data-layer.js", "../../lib/prod/src/model/time-data.js", "../../lib/prod/src/model/series/series-pane-view-base.js", "../../lib/prod/src/model/series/custom-pane-view.js", "../../lib/prod/src/model/series/custom-series.js", "../../lib/prod/src/model/series/series-def.js", "../../lib/prod/src/api/get-series-data-creator.js", "../../lib/prod/src/api/options/crosshair-options-defaults.js", "../../lib/prod/src/api/options/grid-options-defaults.js", "../../lib/prod/src/api/options/layout-options-defaults.js", "../../lib/prod/src/api/options/price-scale-options-defaults.js", "../../lib/prod/src/api/options/time-scale-options-defaults.js", "../../lib/prod/src/api/options/chart-options-defaults.js", "../../lib/prod/src/api/price-scale-api.js", "../../lib/prod/src/api/pane-api.js", "../../lib/prod/src/model/data-validators.js", "../../lib/prod/src/api/options/price-line-options-defaults.js", "../../lib/prod/src/api/price-line-api.js", "../../lib/prod/src/api/series-api.js", "../../lib/prod/src/api/time-scale-api.js", "../../lib/prod/src/api/chart-api.js", "../../lib/prod/src/api/create-chart.js", "../../lib/prod/src/model/series/line-pane-view-base.js", "../../lib/prod/src/renderers/draw-series-point-markers.js", "../../lib/prod/src/renderers/walk-line.js", "../../lib/prod/src/renderers/line-renderer-base.js", "../../lib/prod/src/renderers/line-renderer.js", "../../lib/prod/src/model/series/line-pane-view.js", "../../lib/prod/src/model/series/line-series.js", "../../lib/prod/src/model/yield-curve-horz-scale-behavior/yield-curve-horz-scale-behavior.js", "../../lib/prod/src/api/options/yield-curve-chart-options-defaults.js", "../../lib/prod/src/api/yield-chart-api.js", "../../lib/prod/src/api/create-yield-curve-chart.js", "../../lib/prod/src/model/horz-scale-behavior-price/horz-scale-behaviour-price.js", "../../lib/prod/src/api/create-options-chart.js", "../../lib/prod/src/renderers/area-renderer-base.js", "../../lib/prod/src/renderers/gradient-style-cache.js", "../../lib/prod/src/renderers/baseline-renderer-area.js", "../../lib/prod/src/renderers/baseline-renderer-line.js", "../../lib/prod/src/model/series/baseline-pane-view.js", "../../lib/prod/src/model/series/baseline-series.js", "../../lib/prod/src/renderers/area-renderer.js", "../../lib/prod/src/model/series/area-pane-view.js", "../../lib/prod/src/model/series/area-series.js", "../../lib/prod/src/renderers/optimal-bar-width.js", "../../lib/prod/src/renderers/bars-renderer.js", "../../lib/prod/src/model/series/bars-pane-view-base.js", "../../lib/prod/src/model/series/bars-pane-view.js", "../../lib/prod/src/model/series/bar-series.js", "../../lib/prod/src/renderers/candlesticks-renderer.js", "../../lib/prod/src/model/series/candlesticks-pane-view.js", "../../lib/prod/src/model/series/candlestick-series.js", "../../lib/prod/src/renderers/histogram-renderer.js", "../../lib/prod/src/model/series/histogram-pane-view.js", "../../lib/prod/src/model/series/histogram-series.js", "../../lib/prod/src/plugins/pane-primitive-wrapper.js", "../../lib/prod/src/plugins/text-watermark/options.js", "../../lib/prod/src/plugins/text-watermark/pane-renderer.js", "../../lib/prod/src/plugins/text-watermark/pane-view.js", "../../lib/prod/src/plugins/text-watermark/primitive.js", "../../lib/prod/src/plugins/image-watermark/options.js", "../../lib/prod/src/plugins/image-watermark/pane-renderer.js", "../../lib/prod/src/plugins/image-watermark/pane-view.js", "../../lib/prod/src/plugins/image-watermark/primitive.js", "../../lib/prod/src/plugins/series-primitive-adapter.js", "../../lib/prod/src/plugins/series-markers/options.js", "../../lib/prod/src/plugins/series-markers/utils.js", "../../lib/prod/src/plugins/series-markers/series-markers-arrow.js", "../../lib/prod/src/plugins/series-markers/series-markers-circle.js", "../../lib/prod/src/plugins/series-markers/series-markers-square.js", "../../lib/prod/src/plugins/series-markers/series-markers-text.js", "../../lib/prod/src/plugins/series-markers/renderer.js", "../../lib/prod/src/plugins/series-markers/pane-view.js", "../../lib/prod/src/plugins/series-markers/primitive.js", "../../lib/prod/src/plugins/series-markers/wrapper.js", "../../lib/prod/src/plugins/up-down-markers-plugin/expiring-markers-manager.js", "../../lib/prod/src/plugins/up-down-markers-plugin/options.js", "../../lib/prod/src/plugins/up-down-markers-plugin/renderer.js", "../../lib/prod/src/plugins/up-down-markers-plugin/view.js", "../../lib/prod/src/plugins/up-down-markers-plugin/primitive.js", "../../lib/prod/src/plugins/up-down-markers-plugin/wrapper.js", "../../lib/prod/src/drawing/internal/TTLCache.js", "../../lib/prod/src/drawing/internal/PointerEventUtils.js", "../../lib/prod/src/drawing/internal/ChartSubscriptions.js", "../../lib/prod/src/drawing/handles/handle-controller.js", "../../lib/prod/src/drawing/state/state-machine.js", "../../lib/prod/src/drawing/drawing-primitive-base.js", "../../lib/prod/src/drawing/handles/base-handle.js", "../../lib/prod/src/drawing/handles/default-handle-style.js", "../../lib/prod/src/drawing/controller/drawing-tool-controller.js", "../../lib/prod/src/drawing/tools/__generated__/rectangle.js", "../../lib/prod/src/drawing/runtime/geometry.js", "../../lib/prod/src/drawing/tools/rectangle.impl.js", "../../lib/prod/src/index.js"],
  "sourcesContent": ["export const customStyleDefaults = {\n    color: '#2196f3',\n};\nexport const seriesOptionsDefaults = {\n    title: '',\n    visible: true,\n    lastValueVisible: true,\n    priceLineVisible: true,\n    priceLineSource: 0 /* PriceLineSource.LastBar */,\n    priceLineWidth: 1,\n    priceLineColor: '',\n    priceLineStyle: 2 /* LineStyle.Dashed */,\n    baseLineVisible: true,\n    baseLineWidth: 1,\n    baseLineColor: '#B2B5BE',\n    baseLineStyle: 0 /* LineStyle.Solid */,\n    priceFormat: {\n        type: 'price',\n        precision: 2,\n        minMove: 0.01,\n    },\n};\n", "/**\n * Represents the possible line types.\n */\nexport var LineType;\n(function (LineType) {\n    /**\n     * A line.\n     */\n    LineType[LineType[\"Simple\"] = 0] = \"Simple\";\n    /**\n     * A stepped line.\n     */\n    LineType[LineType[\"WithSteps\"] = 1] = \"WithSteps\";\n    /**\n     * A curved line.\n     */\n    LineType[LineType[\"Curved\"] = 2] = \"Curved\";\n})(LineType || (LineType = {}));\n/**\n * Represents the possible line styles.\n */\nexport var LineStyle;\n(function (LineStyle) {\n    /**\n     * A solid line.\n     */\n    LineStyle[LineStyle[\"Solid\"] = 0] = \"Solid\";\n    /**\n     * A dotted line.\n     */\n    LineStyle[LineStyle[\"Dotted\"] = 1] = \"Dotted\";\n    /**\n     * A dashed line.\n     */\n    LineStyle[LineStyle[\"Dashed\"] = 2] = \"Dashed\";\n    /**\n     * A dashed line with bigger dashes.\n     */\n    LineStyle[LineStyle[\"LargeDashed\"] = 3] = \"LargeDashed\";\n    /**\n     * A dotted line with more space between dots.\n     */\n    LineStyle[LineStyle[\"SparseDotted\"] = 4] = \"SparseDotted\";\n})(LineStyle || (LineStyle = {}));\nexport function setLineStyle(ctx, style) {\n    const dashPatterns = {\n        [0 /* LineStyle.Solid */]: [],\n        [1 /* LineStyle.Dotted */]: [ctx.lineWidth, ctx.lineWidth],\n        [2 /* LineStyle.Dashed */]: [2 * ctx.lineWidth, 2 * ctx.lineWidth],\n        [3 /* LineStyle.LargeDashed */]: [6 * ctx.lineWidth, 6 * ctx.lineWidth],\n        [4 /* LineStyle.SparseDotted */]: [ctx.lineWidth, 4 * ctx.lineWidth],\n    };\n    const dashPattern = dashPatterns[style];\n    ctx.setLineDash(dashPattern);\n}\nexport function drawHorizontalLine(ctx, y, left, right) {\n    ctx.beginPath();\n    const correction = (ctx.lineWidth % 2) ? 0.5 : 0;\n    ctx.moveTo(left, y + correction);\n    ctx.lineTo(right, y + correction);\n    ctx.stroke();\n}\nexport function drawVerticalLine(ctx, x, top, bottom) {\n    ctx.beginPath();\n    const correction = (ctx.lineWidth % 2) ? 0.5 : 0;\n    ctx.moveTo(x + correction, top);\n    ctx.lineTo(x + correction, bottom);\n    ctx.stroke();\n}\nexport function strokeInPixel(ctx, drawFunction) {\n    ctx.save();\n    if (ctx.lineWidth % 2) {\n        ctx.translate(0.5, 0.5);\n    }\n    drawFunction();\n    ctx.restore();\n}\n", "/**\n * Checks an assertion. Throws if the assertion is failed.\n *\n * @param condition - Result of the assertion evaluation\n * @param message - Text to include in the exception message\n */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error('Assertion failed' + (message ? ': ' + message : ''));\n    }\n}\nexport function ensureDefined(value) {\n    if (value === undefined) {\n        throw new Error('Value is undefined');\n    }\n    return value;\n}\nexport function ensureNotNull(value) {\n    if (value === null) {\n        throw new Error('Value is null');\n    }\n    return value;\n}\nexport function ensure(value) {\n    return ensureNotNull(ensureDefined(value));\n}\n/**\n * Compile time check for never\n */\nexport function ensureNever(value) { }\n", "export class Delegate {\n    constructor() {\n        this._listeners = [];\n    }\n    subscribe(callback, linkedObject, singleshot) {\n        const listener = {\n            callback,\n            linkedObject,\n            singleshot: singleshot === true,\n        };\n        this._listeners.push(listener);\n    }\n    unsubscribe(callback) {\n        const index = this._listeners.findIndex((listener) => callback === listener.callback);\n        if (index > -1) {\n            this._listeners.splice(index, 1);\n        }\n    }\n    unsubscribeAll(linkedObject) {\n        this._listeners = this._listeners.filter((listener) => listener.linkedObject !== linkedObject);\n    }\n    fire(param1, param2, param3) {\n        const listenersSnapshot = [...this._listeners];\n        this._listeners = this._listeners.filter((listener) => !listener.singleshot);\n        listenersSnapshot.forEach((listener) => listener.callback(param1, param2, param3));\n    }\n    hasListeners() {\n        return this._listeners.length > 0;\n    }\n    destroy() {\n        this._listeners = [];\n    }\n}\n", "// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function merge(dst, ...sources) {\n    for (const src of sources) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const i in src) {\n            if (src[i] === undefined ||\n                !Object.prototype.hasOwnProperty.call(src, i) ||\n                ['__proto__', 'constructor', 'prototype'].includes(i)) {\n                continue;\n            }\n            if ('object' !== typeof src[i] || dst[i] === undefined || Array.isArray(src[i])) {\n                dst[i] = src[i];\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                merge(dst[i], src[i]);\n            }\n        }\n    }\n    return dst;\n}\nexport function isNumber(value) {\n    return (typeof value === 'number') && (isFinite(value));\n}\nexport function isInteger(value) {\n    return (typeof value === 'number') && ((value % 1) === 0);\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isBoolean(value) {\n    return typeof value === 'boolean';\n}\nexport function clone(object) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const o = object;\n    if (!o || 'object' !== typeof o) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return o;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let c;\n    if (Array.isArray(o)) {\n        c = [];\n    }\n    else {\n        c = {};\n    }\n    let p;\n    let v;\n    // eslint-disable-next-line no-restricted-syntax\n    for (p in o) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-call,no-prototype-builtins\n        if (o.hasOwnProperty(p)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            v = o[p];\n            if (v && 'object' === typeof v) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                c[p] = clone(v);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                c[p] = v;\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return c;\n}\nexport function notNull(t) {\n    return t !== null;\n}\nexport function undefinedIfNull(t) {\n    return (t === null) ? undefined : t;\n}\n", "/**\n * Default font family.\n * Must be used to generate font string when font is not specified.\n */\nexport const defaultFontFamily = `-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif`;\n/**\n * Generates a font string, which can be used to set in canvas' font property.\n * If no family provided, {@link defaultFontFamily} will be used.\n *\n * @param size - Font size in pixels.\n * @param family - Optional font family.\n * @param style - Optional font style.\n * @returns The font string.\n */\nexport function makeFont(size, family, style) {\n    if (style !== undefined) {\n        style = `${style} `;\n    }\n    else {\n        style = '';\n    }\n    if (family === undefined) {\n        family = defaultFontFamily;\n    }\n    return `${style}${size}px ${family}`;\n}\n", "import { makeFont } from '../helpers/make-font';\nvar RendererConstants;\n(function (RendererConstants) {\n    RendererConstants[RendererConstants[\"BorderSize\"] = 1] = \"BorderSize\";\n    RendererConstants[RendererConstants[\"TickLength\"] = 5] = \"TickLength\";\n})(RendererConstants || (RendererConstants = {}));\nexport class PriceAxisRendererOptionsProvider {\n    constructor(chartModel) {\n        this._rendererOptions = {\n            borderSize: 1 /* RendererConstants.BorderSize */,\n            tickLength: 5 /* RendererConstants.TickLength */,\n            fontSize: NaN,\n            font: '',\n            fontFamily: '',\n            color: '',\n            paneBackgroundColor: '',\n            paddingBottom: 0,\n            paddingInner: 0,\n            paddingOuter: 0,\n            paddingTop: 0,\n            baselineOffset: 0,\n        };\n        this._chartModel = chartModel;\n    }\n    options() {\n        const rendererOptions = this._rendererOptions;\n        const currentFontSize = this._fontSize();\n        const currentFontFamily = this._fontFamily();\n        if (rendererOptions.fontSize !== currentFontSize || rendererOptions.fontFamily !== currentFontFamily) {\n            rendererOptions.fontSize = currentFontSize;\n            rendererOptions.fontFamily = currentFontFamily;\n            rendererOptions.font = makeFont(currentFontSize, currentFontFamily);\n            rendererOptions.paddingTop = 2.5 / 12 * currentFontSize; // 2.5 px for 12px font\n            rendererOptions.paddingBottom = rendererOptions.paddingTop;\n            rendererOptions.paddingInner = currentFontSize / 12 * rendererOptions.tickLength;\n            rendererOptions.paddingOuter = currentFontSize / 12 * rendererOptions.tickLength;\n            rendererOptions.baselineOffset = 0;\n        }\n        rendererOptions.color = this._textColor();\n        rendererOptions.paneBackgroundColor = this._paneBackgroundColor();\n        return this._rendererOptions;\n    }\n    _textColor() {\n        return this._chartModel.options()['layout'].textColor;\n    }\n    _paneBackgroundColor() {\n        return this._chartModel.backgroundTopColor();\n    }\n    _fontSize() {\n        return this._chartModel.options()['layout'].fontSize;\n    }\n    _fontFamily() {\n        return this._chartModel.options()['layout'].fontFamily;\n    }\n}\n", "function normalizeRgbComponent(component) {\n    if (component < 0) {\n        return 0;\n    }\n    if (component > 255) {\n        return 255;\n    }\n    // NaN values are treated as 0\n    return (Math.round(component) || 0);\n}\nfunction normalizeAlphaComponent(component) {\n    if (component <= 0 || component > 1) {\n        return Math.min(Math.max(component, 0), 1);\n    }\n    // limit the precision of all numbers to at most 4 digits in fractional part\n    return (Math.round(component * 10000) / 10000);\n}\nfunction rgbaToGrayscale(rgbValue) {\n    // Originally, the NTSC RGB to YUV formula\n    // perfected by @eugene-korobko's black magic\n    const redComponentGrayscaleWeight = 0.199;\n    const greenComponentGrayscaleWeight = 0.687;\n    const blueComponentGrayscaleWeight = 0.114;\n    return (redComponentGrayscaleWeight * rgbValue[0] +\n        greenComponentGrayscaleWeight * rgbValue[1] +\n        blueComponentGrayscaleWeight * rgbValue[2]);\n}\n/**\n * For colors which fall within the sRGB space, the browser can\n * be used to convert the color string into a rgb /rgba string.\n *\n * For other colors, it will be returned as specified (i.e. for\n * newer formats like display-p3)\n *\n * See: https://www.w3.org/TR/css-color-4/#serializing-sRGB-values\n */\nfunction getRgbStringViaBrowser(color) {\n    const element = document.createElement('div');\n    element.style.display = 'none';\n    // We append to the body as it is the most reliable way to get a color reading\n    // appending to the chart container or similar element can result in the following\n    // getComputedStyle returning empty strings on each check.\n    document.body.appendChild(element);\n    element.style.color = color;\n    const computed = window.getComputedStyle(element).color;\n    document.body.removeChild(element);\n    return computed;\n}\nexport class ColorParser {\n    constructor(customParsers, initialCache) {\n        this._rgbaCache = new Map();\n        this._customParsers = customParsers;\n        if (initialCache) {\n            this._rgbaCache = initialCache;\n        }\n    }\n    /**\n     * We fallback to RGBA here since supporting alpha transformations\n     * on wider color gamuts would currently be a lot of extra code\n     * for very little benefit due to actual usage.\n     */\n    applyAlpha(color, alpha) {\n        // special case optimization\n        if (color === 'transparent') {\n            return color;\n        }\n        const originRgba = this._parseColor(color);\n        const originAlpha = originRgba[3];\n        return `rgba(${originRgba[0]}, ${originRgba[1]}, ${originRgba[2]}, ${alpha * originAlpha})`;\n    }\n    generateContrastColors(background) {\n        const rgba = this._parseColor(background);\n        return {\n            background: `rgb(${rgba[0]}, ${rgba[1]}, ${rgba[2]})`, // no alpha\n            foreground: rgbaToGrayscale(rgba) > 160 ? 'black' : 'white',\n        };\n    }\n    colorStringToGrayscale(background) {\n        return rgbaToGrayscale(this._parseColor(background));\n    }\n    gradientColorAtPercent(topColor, bottomColor, percent) {\n        const [topR, topG, topB, topA] = this._parseColor(topColor);\n        const [bottomR, bottomG, bottomB, bottomA] = this._parseColor(bottomColor);\n        const resultRgba = [\n            normalizeRgbComponent((topR + percent * (bottomR - topR))),\n            normalizeRgbComponent((topG + percent * (bottomG - topG))),\n            normalizeRgbComponent((topB + percent * (bottomB - topB))),\n            normalizeAlphaComponent((topA + percent * (bottomA - topA))),\n        ];\n        return `rgba(${resultRgba[0]}, ${resultRgba[1]}, ${resultRgba[2]}, ${resultRgba[3]})`;\n    }\n    _parseColor(color) {\n        const cached = this._rgbaCache.get(color);\n        if (cached) {\n            return cached;\n        }\n        const computed = getRgbStringViaBrowser(color);\n        const match = computed.match(/^rgba?\\s*\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d*\\.?\\d+))?\\)$/);\n        if (!match) {\n            if (this._customParsers.length) {\n                for (const parser of this._customParsers) {\n                    const result = parser(color);\n                    if (result) {\n                        this._rgbaCache.set(color, result);\n                        return result;\n                    }\n                }\n            }\n            throw new Error(`Failed to parse color: ${color}`);\n        }\n        const rgba = [\n            parseInt(match[1], 10),\n            parseInt(match[2], 10),\n            parseInt(match[3], 10),\n            (match[4] ? parseFloat(match[4]) : 1),\n        ];\n        this._rgbaCache.set(color, rgba);\n        return rgba;\n    }\n}\n", "export class CompositeRenderer {\n    constructor() {\n        this._renderers = [];\n    }\n    setRenderers(renderers) {\n        this._renderers = renderers;\n    }\n    draw(target, isHovered, hitTestData) {\n        this._renderers.forEach((r) => {\n            r.draw(target, isHovered, hitTestData);\n        });\n    }\n}\n", "export class BitmapCoordinatesPaneRenderer {\n    draw(target, isHovered, hitTestData) {\n        target.useBitmapCoordinateSpace((scope) => this._drawImpl(scope, isHovered, hitTestData));\n    }\n}\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nexport class PaneRendererMarks extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    _drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null || this._data.visibleRange === null) {\n            return;\n        }\n        const visibleRange = this._data.visibleRange;\n        const data = this._data;\n        const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n        const correction = (tickWidth % 2) / 2;\n        const draw = (radiusMedia) => {\n            ctx.beginPath();\n            for (let i = visibleRange.to - 1; i >= visibleRange.from; --i) {\n                const point = data.items[i];\n                const centerX = Math.round(point.x * horizontalPixelRatio) + correction; // correct x coordinate only\n                const centerY = point.y * verticalPixelRatio;\n                const radius = radiusMedia * verticalPixelRatio + correction;\n                ctx.moveTo(centerX, centerY);\n                ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\n            }\n            ctx.fill();\n        };\n        if (data.lineWidth > 0) {\n            ctx.fillStyle = data.backColor;\n            draw(data.radius + data.lineWidth);\n        }\n        ctx.fillStyle = data.lineColor;\n        draw(data.radius);\n    }\n}\n", "import { CompositeRenderer } from '../../renderers/composite-renderer';\nimport { PaneRendererMarks } from '../../renderers/marks-renderer';\nfunction createEmptyMarkerData() {\n    return {\n        items: [{\n                x: 0,\n                y: 0,\n                time: 0,\n                price: 0,\n            }],\n        lineColor: '',\n        backColor: '',\n        radius: 0,\n        lineWidth: 0,\n        visibleRange: null,\n    };\n}\nconst rangeForSinglePoint = { from: 0, to: 1 };\nexport class CrosshairMarksPaneView {\n    constructor(chartModel, crosshair, pane) {\n        this._compositeRenderer = new CompositeRenderer();\n        this._markersRenderers = [];\n        this._markersData = [];\n        this._invalidated = true;\n        this._chartModel = chartModel;\n        this._crosshair = crosshair;\n        this._pane = pane;\n        this._compositeRenderer.setRenderers(this._markersRenderers);\n    }\n    update(updateType) {\n        this._createMarkerRenderersIfNeeded();\n        this._invalidated = true;\n    }\n    renderer() {\n        if (this._invalidated) {\n            this._updateImpl();\n            this._invalidated = false;\n        }\n        return this._compositeRenderer;\n    }\n    _createMarkerRenderersIfNeeded() {\n        const serieses = this._pane.orderedSources();\n        if (serieses.length !== this._markersRenderers.length) {\n            this._markersData = serieses.map(createEmptyMarkerData);\n            this._markersRenderers = this._markersData.map((data) => {\n                const res = new PaneRendererMarks();\n                res.setData(data);\n                return res;\n            });\n            this._compositeRenderer.setRenderers(this._markersRenderers);\n        }\n    }\n    _updateImpl() {\n        const forceHidden = this._crosshair.options().mode === 2 /* CrosshairMode.Hidden */ || !this._crosshair.visible();\n        const serieses = this._pane.orderedSeries();\n        const timePointIndex = this._crosshair.appliedIndex();\n        const timeScale = this._chartModel.timeScale();\n        this._createMarkerRenderersIfNeeded();\n        serieses.forEach((s, index) => {\n            const data = this._markersData[index];\n            const seriesData = s.markerDataAtIndex(timePointIndex);\n            const firstValue = s.firstValue();\n            if (forceHidden || seriesData === null || !s.visible() || firstValue === null) {\n                data.visibleRange = null;\n                return;\n            }\n            data.lineColor = seriesData.backgroundColor;\n            data.radius = seriesData.radius;\n            data.lineWidth = seriesData.borderWidth;\n            data.items[0].price = seriesData.price;\n            data.items[0].y = s.priceScale().priceToCoordinate(seriesData.price, firstValue.value);\n            data.backColor = seriesData.borderColor ?? this._chartModel.backgroundColorAtYPercentFromTop(data.items[0].y / s.priceScale().height());\n            data.items[0].time = timePointIndex;\n            data.items[0].x = timeScale.indexToCoordinate(timePointIndex);\n            data.visibleRange = rangeForSinglePoint;\n        });\n    }\n}\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { drawHorizontalLine, drawVerticalLine, setLineStyle } from './draw-line';\nexport class CrosshairRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor(data) {\n        super();\n        this._data = data;\n    }\n    _drawImpl({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null) {\n            return;\n        }\n        const vertLinesVisible = this._data.vertLine.visible;\n        const horzLinesVisible = this._data.horzLine.visible;\n        if (!vertLinesVisible && !horzLinesVisible) {\n            return;\n        }\n        const x = Math.round(this._data.x * horizontalPixelRatio);\n        const y = Math.round(this._data.y * verticalPixelRatio);\n        ctx.lineCap = 'butt';\n        if (vertLinesVisible && x >= 0) {\n            ctx.lineWidth = Math.floor(this._data.vertLine.lineWidth * horizontalPixelRatio);\n            ctx.strokeStyle = this._data.vertLine.color;\n            ctx.fillStyle = this._data.vertLine.color;\n            setLineStyle(ctx, this._data.vertLine.lineStyle);\n            drawVerticalLine(ctx, x, 0, bitmapSize.height);\n        }\n        if (horzLinesVisible && y >= 0) {\n            ctx.lineWidth = Math.floor(this._data.horzLine.lineWidth * verticalPixelRatio);\n            ctx.strokeStyle = this._data.horzLine.color;\n            ctx.fillStyle = this._data.horzLine.color;\n            setLineStyle(ctx, this._data.horzLine.lineStyle);\n            drawHorizontalLine(ctx, y, 0, bitmapSize.width);\n        }\n    }\n}\n", "import { CrosshairRenderer } from '../../renderers/crosshair-renderer';\nexport class CrosshairPaneView {\n    constructor(source, pane) {\n        this._invalidated = true;\n        this._rendererData = {\n            vertLine: {\n                lineWidth: 1,\n                lineStyle: 0,\n                color: '',\n                visible: false,\n            },\n            horzLine: {\n                lineWidth: 1,\n                lineStyle: 0,\n                color: '',\n                visible: false,\n            },\n            x: 0,\n            y: 0,\n        };\n        this._renderer = new CrosshairRenderer(this._rendererData);\n        this._source = source;\n        this._pane = pane;\n    }\n    update() {\n        this._invalidated = true;\n    }\n    renderer(pane) {\n        if (this._invalidated) {\n            this._updateImpl();\n            this._invalidated = false;\n        }\n        return this._renderer;\n    }\n    _updateImpl() {\n        const visible = this._source.visible();\n        const crosshairOptions = this._pane.model().options().crosshair;\n        const data = this._rendererData;\n        if (crosshairOptions.mode === 2 /* CrosshairMode.Hidden */) {\n            data.horzLine.visible = false;\n            data.vertLine.visible = false;\n            return;\n        }\n        data.horzLine.visible = visible && this._source.horzLineVisible(this._pane);\n        data.vertLine.visible = visible && this._source.vertLineVisible();\n        data.horzLine.lineWidth = crosshairOptions.horzLine.width;\n        data.horzLine.lineStyle = crosshairOptions.horzLine.style;\n        data.horzLine.color = crosshairOptions.horzLine.color;\n        data.vertLine.lineWidth = crosshairOptions.vertLine.width;\n        data.vertLine.lineStyle = crosshairOptions.vertLine.style;\n        data.vertLine.color = crosshairOptions.vertLine.color;\n        data.x = this._source.appliedX();\n        data.y = this._source.appliedY();\n    }\n}\n", "/**\n * Fills rectangle's inner border (so, all the filled area is limited by the [x, x + width]*[y, y + height] region)\n * ```\n * (x, y)\n * O***********************|*****\n * |        border         |  ^\n * |   *****************   |  |\n * |   |               |   |  |\n * | b |               | b |  h\n * | o |               | o |  e\n * | r |               | r |  i\n * | d |               | d |  g\n * | e |               | e |  h\n * | r |               | r |  t\n * |   |               |   |  |\n * |   *****************   |  |\n * |        border         |  v\n * |***********************|*****\n * |                       |\n * |<------- width ------->|\n * ```\n *\n * @param ctx - Context to draw on\n * @param x - Left side of the target rectangle\n * @param y - Top side of the target rectangle\n * @param width - Width of the target rectangle\n * @param height - Height of the target rectangle\n * @param borderWidth - Width of border to fill, must be less than width and height of the target rectangle\n */\nexport function fillRectInnerBorder(ctx, x, y, width, height, borderWidth) {\n    // horizontal (top and bottom) edges\n    ctx.fillRect(x + borderWidth, y, width - borderWidth * 2, borderWidth);\n    ctx.fillRect(x + borderWidth, y + height - borderWidth, width - borderWidth * 2, borderWidth);\n    // vertical (left and right) edges\n    ctx.fillRect(x, y, borderWidth, height);\n    ctx.fillRect(x + width - borderWidth, y, borderWidth, height);\n}\nexport function clearRect(ctx, x, y, w, h, clearColor) {\n    ctx.save();\n    ctx.globalCompositeOperation = 'copy';\n    ctx.fillStyle = clearColor;\n    ctx.fillRect(x, y, w, h);\n    ctx.restore();\n}\nfunction changeBorderRadius(borderRadius, offset) {\n    return borderRadius.map((x) => x === 0 ? x : x + offset);\n}\nexport function drawRoundRect(\n// eslint:disable-next-line:max-params\nctx, x, y, w, h, radii) {\n    /**\n     * As of May 2023, all of the major browsers now support ctx.roundRect() so we should\n     * be able to switch to the native version soon.\n     */\n    ctx.beginPath();\n    if (ctx.roundRect) {\n        ctx.roundRect(x, y, w, h, radii);\n        return;\n    }\n    /*\n     * Deprecate the rest in v5.\n     */\n    ctx.lineTo(x + w - radii[1], y);\n    if (radii[1] !== 0) {\n        ctx.arcTo(x + w, y, x + w, y + radii[1], radii[1]);\n    }\n    ctx.lineTo(x + w, y + h - radii[2]);\n    if (radii[2] !== 0) {\n        ctx.arcTo(x + w, y + h, x + w - radii[2], y + h, radii[2]);\n    }\n    ctx.lineTo(x + radii[3], y + h);\n    if (radii[3] !== 0) {\n        ctx.arcTo(x, y + h, x, y + h - radii[3], radii[3]);\n    }\n    ctx.lineTo(x, y + radii[0]);\n    if (radii[0] !== 0) {\n        ctx.arcTo(x, y, x + radii[0], y, radii[0]);\n    }\n}\n/**\n * Draws a rounded rect with a border.\n *\n * This function assumes that the colors will be solid, without\n * any alpha. (This allows us to fix a rendering artefact.)\n *\n * @param outerBorderRadius - The radius of the border (outer edge)\n */\n// eslint-disable-next-line max-params\nexport function drawRoundRectWithBorder(ctx, left, top, width, height, backgroundColor, borderWidth = 0, outerBorderRadius = [0, 0, 0, 0], borderColor = '') {\n    ctx.save();\n    if (!borderWidth || !borderColor || borderColor === backgroundColor) {\n        drawRoundRect(ctx, left, top, width, height, outerBorderRadius);\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n        ctx.restore();\n        return;\n    }\n    const halfBorderWidth = borderWidth / 2;\n    const radii = changeBorderRadius(outerBorderRadius, -halfBorderWidth);\n    drawRoundRect(ctx, left + halfBorderWidth, top + halfBorderWidth, width - borderWidth, height - borderWidth, radii);\n    if (backgroundColor !== 'transparent') {\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n    }\n    if (borderColor !== 'transparent') {\n        ctx.lineWidth = borderWidth;\n        ctx.strokeStyle = borderColor;\n        ctx.closePath();\n        ctx.stroke();\n    }\n    ctx.restore();\n}\n// eslint-disable-next-line max-params\nexport function clearRectWithGradient(ctx, x, y, w, h, topColor, bottomColor) {\n    ctx.save();\n    ctx.globalCompositeOperation = 'copy';\n    const gradient = ctx.createLinearGradient(0, 0, 0, h);\n    gradient.addColorStop(0, topColor);\n    gradient.addColorStop(1, bottomColor);\n    ctx.fillStyle = gradient;\n    ctx.fillRect(x, y, w, h);\n    ctx.restore();\n}\n", "import { drawRoundRectWithBorder } from '../helpers/canvas-helpers';\nexport class PriceAxisViewRenderer {\n    constructor(data, commonData) {\n        this.setData(data, commonData);\n    }\n    setData(data, commonData) {\n        this._data = data;\n        this._commonData = commonData;\n    }\n    height(rendererOptions, useSecondLine) {\n        if (!this._data.visible) {\n            return 0;\n        }\n        return rendererOptions.fontSize + rendererOptions.paddingTop + rendererOptions.paddingBottom;\n    }\n    draw(target, rendererOptions, textWidthCache, align) {\n        if (!this._data.visible || this._data.text.length === 0) {\n            return;\n        }\n        const textColor = this._data.color;\n        const backgroundColor = this._commonData.background;\n        const geometry = target.useBitmapCoordinateSpace((scope) => {\n            const ctx = scope.context;\n            ctx.font = rendererOptions.font;\n            const geom = this._calculateGeometry(scope, rendererOptions, textWidthCache, align);\n            const gb = geom.bitmap;\n            /*\n             draw label. backgroundColor will always be a solid color (no alpha) [see generateContrastColors in color.ts].\n             Therefore we can draw the rounded label using simplified code (drawRoundRectWithBorder) that doesn't need to ensure the background and the border don't overlap.\n            */\n            if (geom.alignRight) {\n                drawRoundRectWithBorder(ctx, gb.xOutside, gb.yTop, gb.totalWidth, gb.totalHeight, backgroundColor, gb.horzBorder, [gb.radius, 0, 0, gb.radius], backgroundColor);\n            }\n            else {\n                drawRoundRectWithBorder(ctx, gb.xInside, gb.yTop, gb.totalWidth, gb.totalHeight, backgroundColor, gb.horzBorder, [0, gb.radius, gb.radius, 0], backgroundColor);\n            }\n            // draw tick\n            if (this._data.tickVisible) {\n                ctx.fillStyle = textColor;\n                ctx.fillRect(gb.xInside, gb.yMid, gb.xTick - gb.xInside, gb.tickHeight);\n            }\n            // draw separator\n            if (this._data.borderVisible) {\n                ctx.fillStyle = rendererOptions.paneBackgroundColor;\n                ctx.fillRect(geom.alignRight ? gb.right - gb.horzBorder : 0, gb.yTop, gb.horzBorder, gb.yBottom - gb.yTop);\n            }\n            return geom;\n        });\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            const gm = geometry.media;\n            ctx.font = rendererOptions.font;\n            ctx.textAlign = geometry.alignRight ? 'right' : 'left';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = textColor;\n            ctx.fillText(this._data.text, gm.xText, (gm.yTop + gm.yBottom) / 2 + gm.textMidCorrection);\n        });\n    }\n    _calculateGeometry(scope, rendererOptions, textWidthCache, align) {\n        const { context: ctx, bitmapSize, mediaSize, horizontalPixelRatio, verticalPixelRatio } = scope;\n        const tickSize = (this._data.tickVisible || !this._data.moveTextToInvisibleTick) ? rendererOptions.tickLength : 0;\n        const horzBorder = this._data.separatorVisible ? rendererOptions.borderSize : 0;\n        const paddingTop = rendererOptions.paddingTop + this._commonData.additionalPaddingTop;\n        const paddingBottom = rendererOptions.paddingBottom + this._commonData.additionalPaddingBottom;\n        const paddingInner = rendererOptions.paddingInner;\n        const paddingOuter = rendererOptions.paddingOuter;\n        const text = this._data.text;\n        const actualTextHeight = rendererOptions.fontSize;\n        const textMidCorrection = textWidthCache.yMidCorrection(ctx, text);\n        const textWidth = Math.ceil(textWidthCache.measureText(ctx, text));\n        const totalHeight = actualTextHeight + paddingTop + paddingBottom;\n        const totalWidth = rendererOptions.borderSize + paddingInner + paddingOuter + textWidth + tickSize;\n        const tickHeightBitmap = Math.max(1, Math.floor(verticalPixelRatio));\n        let totalHeightBitmap = Math.round(totalHeight * verticalPixelRatio);\n        if (totalHeightBitmap % 2 !== tickHeightBitmap % 2) {\n            totalHeightBitmap += 1;\n        }\n        const horzBorderBitmap = horzBorder > 0 ? Math.max(1, Math.floor(horzBorder * horizontalPixelRatio)) : 0;\n        const totalWidthBitmap = Math.round(totalWidth * horizontalPixelRatio);\n        // tick overlaps scale border\n        const tickSizeBitmap = Math.round(tickSize * horizontalPixelRatio);\n        const yMid = this._commonData.fixedCoordinate ?? this._commonData.coordinate;\n        const yMidBitmap = Math.round(yMid * verticalPixelRatio) - Math.floor(verticalPixelRatio * 0.5);\n        const yTopBitmap = Math.floor(yMidBitmap + tickHeightBitmap / 2 - totalHeightBitmap / 2);\n        const yBottomBitmap = yTopBitmap + totalHeightBitmap;\n        const alignRight = align === 'right';\n        const xInside = alignRight ? mediaSize.width - horzBorder : horzBorder;\n        const xInsideBitmap = alignRight ? bitmapSize.width - horzBorderBitmap : horzBorderBitmap;\n        let xOutsideBitmap;\n        let xTickBitmap;\n        let xText;\n        if (alignRight) {\n            // 2               1\n            //\n            //              6  5\n            //\n            // 3               4\n            xOutsideBitmap = xInsideBitmap - totalWidthBitmap;\n            xTickBitmap = xInsideBitmap - tickSizeBitmap;\n            xText = xInside - tickSize - paddingInner - horzBorder;\n        }\n        else {\n            // 1               2\n            //\n            // 6  5\n            //\n            // 4               3\n            xOutsideBitmap = xInsideBitmap + totalWidthBitmap;\n            xTickBitmap = xInsideBitmap + tickSizeBitmap;\n            xText = xInside + tickSize + paddingInner;\n        }\n        return {\n            alignRight,\n            bitmap: {\n                yTop: yTopBitmap,\n                yMid: yMidBitmap,\n                yBottom: yBottomBitmap,\n                totalWidth: totalWidthBitmap,\n                totalHeight: totalHeightBitmap,\n                // TODO: it is better to have different horizontal and vertical radii\n                radius: 2 * horizontalPixelRatio,\n                horzBorder: horzBorderBitmap,\n                xOutside: xOutsideBitmap,\n                xInside: xInsideBitmap,\n                xTick: xTickBitmap,\n                tickHeight: tickHeightBitmap,\n                right: bitmapSize.width,\n            },\n            media: {\n                yTop: yTopBitmap / verticalPixelRatio,\n                yBottom: yBottomBitmap / verticalPixelRatio,\n                xText,\n                textMidCorrection,\n            },\n        };\n    }\n}\n", "import { PriceAxisViewRenderer } from '../../renderers/price-axis-view-renderer';\nexport class PriceAxisView {\n    constructor(ctor) {\n        this._commonRendererData = {\n            coordinate: 0,\n            background: '#000',\n            additionalPaddingBottom: 0,\n            additionalPaddingTop: 0,\n        };\n        this._axisRendererData = {\n            text: '',\n            visible: false,\n            tickVisible: true,\n            moveTextToInvisibleTick: false,\n            borderColor: '',\n            color: '#FFF',\n            borderVisible: false,\n            separatorVisible: false,\n        };\n        this._paneRendererData = {\n            text: '',\n            visible: false,\n            tickVisible: false,\n            moveTextToInvisibleTick: true,\n            borderColor: '',\n            color: '#FFF',\n            borderVisible: true,\n            separatorVisible: true,\n        };\n        this._invalidated = true;\n        this._axisRenderer = new (ctor || PriceAxisViewRenderer)(this._axisRendererData, this._commonRendererData);\n        this._paneRenderer = new (ctor || PriceAxisViewRenderer)(this._paneRendererData, this._commonRendererData);\n    }\n    text() {\n        this._updateRendererDataIfNeeded();\n        return this._axisRendererData.text;\n    }\n    coordinate() {\n        this._updateRendererDataIfNeeded();\n        return this._commonRendererData.coordinate;\n    }\n    update() {\n        this._invalidated = true;\n    }\n    height(rendererOptions, useSecondLine = false) {\n        return Math.max(this._axisRenderer.height(rendererOptions, useSecondLine), this._paneRenderer.height(rendererOptions, useSecondLine));\n    }\n    getFixedCoordinate() {\n        return this._commonRendererData.fixedCoordinate || 0;\n    }\n    setFixedCoordinate(value) {\n        this._commonRendererData.fixedCoordinate = value;\n    }\n    isVisible() {\n        this._updateRendererDataIfNeeded();\n        return this._axisRendererData.visible || this._paneRendererData.visible;\n    }\n    isAxisLabelVisible() {\n        this._updateRendererDataIfNeeded();\n        return this._axisRendererData.visible;\n    }\n    renderer(priceScale) {\n        this._updateRendererDataIfNeeded();\n        // force update tickVisible state from price scale options\n        // because we don't have and we can't have price axis in other methods\n        // (like paneRenderer or any other who call _updateRendererDataIfNeeded)\n        this._axisRendererData.tickVisible = this._axisRendererData.tickVisible && priceScale.options().ticksVisible;\n        this._paneRendererData.tickVisible = this._paneRendererData.tickVisible && priceScale.options().ticksVisible;\n        this._axisRenderer.setData(this._axisRendererData, this._commonRendererData);\n        this._paneRenderer.setData(this._paneRendererData, this._commonRendererData);\n        return this._axisRenderer;\n    }\n    paneRenderer() {\n        this._updateRendererDataIfNeeded();\n        this._axisRenderer.setData(this._axisRendererData, this._commonRendererData);\n        this._paneRenderer.setData(this._paneRendererData, this._commonRendererData);\n        return this._paneRenderer;\n    }\n    _updateRendererDataIfNeeded() {\n        if (this._invalidated) {\n            this._axisRendererData.tickVisible = true;\n            this._paneRendererData.tickVisible = false;\n            this._updateRendererData(this._axisRendererData, this._paneRendererData, this._commonRendererData);\n        }\n    }\n}\n", "import { PriceAxisView } from './price-axis-view';\nexport class CrosshairPriceAxisView extends PriceAxisView {\n    constructor(source, priceScale, valueProvider) {\n        super();\n        this._source = source;\n        this._priceScale = priceScale;\n        this._valueProvider = valueProvider;\n    }\n    _updateRendererData(axisRendererData, paneRendererData, commonRendererData) {\n        axisRendererData.visible = false;\n        if (this._source.options().mode === 2 /* CrosshairMode.Hidden */) {\n            return;\n        }\n        const options = this._source.options().horzLine;\n        if (!options.labelVisible) {\n            return;\n        }\n        const firstValue = this._priceScale.firstValue();\n        if (!this._source.visible() || this._priceScale.isEmpty() || (firstValue === null)) {\n            return;\n        }\n        const colors = this._priceScale.colorParser().generateContrastColors(options.labelBackgroundColor);\n        commonRendererData.background = colors.background;\n        axisRendererData.color = colors.foreground;\n        const additionalPadding = 2 / 12 * this._priceScale.fontSize();\n        commonRendererData.additionalPaddingTop = additionalPadding;\n        commonRendererData.additionalPaddingBottom = additionalPadding;\n        const value = this._valueProvider(this._priceScale);\n        commonRendererData.coordinate = value.coordinate;\n        axisRendererData.text = this._priceScale.formatPrice(value.price, firstValue);\n        axisRendererData.visible = true;\n    }\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nconst optimizationReplacementRe = /[1-9]/g;\nconst radius = 2;\nexport class TimeAxisViewRenderer {\n    constructor() {\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    draw(target, rendererOptions) {\n        if (this._data === null || this._data.visible === false || this._data.text.length === 0) {\n            return;\n        }\n        const textWidth = target.useMediaCoordinateSpace(({ context: ctx }) => {\n            ctx.font = rendererOptions.font;\n            return Math.round(rendererOptions.widthCache.measureText(ctx, ensureNotNull(this._data).text, optimizationReplacementRe));\n        });\n        if (textWidth <= 0) {\n            return;\n        }\n        const horzMargin = rendererOptions.paddingHorizontal;\n        const labelWidth = textWidth + 2 * horzMargin;\n        const labelWidthHalf = labelWidth / 2;\n        const timeScaleWidth = this._data.width;\n        let coordinate = this._data.coordinate;\n        let x1 = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        if (x1 < 0) {\n            coordinate = coordinate + Math.abs(0 - x1);\n            x1 = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        }\n        else if (x1 + labelWidth > timeScaleWidth) {\n            coordinate = coordinate - Math.abs(timeScaleWidth - (x1 + labelWidth));\n            x1 = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        }\n        const x2 = x1 + labelWidth;\n        const y1 = 0;\n        const y2 = Math.ceil(y1 +\n            rendererOptions.borderSize +\n            rendererOptions.tickLength +\n            rendererOptions.paddingTop +\n            rendererOptions.fontSize +\n            rendererOptions.paddingBottom);\n        target.useBitmapCoordinateSpace(({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) => {\n            const data = ensureNotNull(this._data);\n            ctx.fillStyle = data.background;\n            const x1scaled = Math.round(x1 * horizontalPixelRatio);\n            const y1scaled = Math.round(y1 * verticalPixelRatio);\n            const x2scaled = Math.round(x2 * horizontalPixelRatio);\n            const y2scaled = Math.round(y2 * verticalPixelRatio);\n            const radiusScaled = Math.round(radius * horizontalPixelRatio);\n            ctx.beginPath();\n            ctx.moveTo(x1scaled, y1scaled);\n            ctx.lineTo(x1scaled, y2scaled - radiusScaled);\n            ctx.arcTo(x1scaled, y2scaled, x1scaled + radiusScaled, y2scaled, radiusScaled);\n            ctx.lineTo(x2scaled - radiusScaled, y2scaled);\n            ctx.arcTo(x2scaled, y2scaled, x2scaled, y2scaled - radiusScaled, radiusScaled);\n            ctx.lineTo(x2scaled, y1scaled);\n            ctx.fill();\n            if (data.tickVisible) {\n                const tickX = Math.round(data.coordinate * horizontalPixelRatio);\n                const tickTop = y1scaled;\n                const tickBottom = Math.round((tickTop + rendererOptions.tickLength) * verticalPixelRatio);\n                ctx.fillStyle = data.color;\n                const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n                const tickOffset = Math.floor(horizontalPixelRatio * 0.5);\n                ctx.fillRect(tickX - tickOffset, tickTop, tickWidth, tickBottom - tickTop);\n            }\n        });\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            const data = ensureNotNull(this._data);\n            const yText = y1 +\n                rendererOptions.borderSize +\n                rendererOptions.tickLength +\n                rendererOptions.paddingTop +\n                rendererOptions.fontSize / 2;\n            ctx.font = rendererOptions.font;\n            ctx.textAlign = 'left';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = data.color;\n            const textYCorrection = rendererOptions.widthCache.yMidCorrection(ctx, 'Apr0');\n            ctx.translate(x1 + horzMargin, yText + textYCorrection);\n            ctx.fillText(data.text, 0, 0);\n        });\n    }\n}\n", "import { ensureNotNull } from '../../helpers/assertions';\nimport { TimeAxisViewRenderer } from '../../renderers/time-axis-view-renderer';\nexport class CrosshairTimeAxisView {\n    constructor(crosshair, model, valueProvider) {\n        this._invalidated = true;\n        this._renderer = new TimeAxisViewRenderer();\n        this._rendererData = {\n            visible: false,\n            background: '#4c525e',\n            color: 'white',\n            text: '',\n            width: 0,\n            coordinate: NaN,\n            tickVisible: true,\n        };\n        this._crosshair = crosshair;\n        this._model = model;\n        this._valueProvider = valueProvider;\n    }\n    update() {\n        this._invalidated = true;\n    }\n    renderer() {\n        if (this._invalidated) {\n            this._updateImpl();\n            this._invalidated = false;\n        }\n        this._renderer.setData(this._rendererData);\n        return this._renderer;\n    }\n    _updateImpl() {\n        const data = this._rendererData;\n        data.visible = false;\n        if (this._crosshair.options().mode === 2 /* CrosshairMode.Hidden */) {\n            return;\n        }\n        const options = this._crosshair.options().vertLine;\n        if (!options.labelVisible) {\n            return;\n        }\n        const timeScale = this._model.timeScale();\n        if (timeScale.isEmpty()) {\n            return;\n        }\n        data.width = timeScale.width();\n        const value = this._valueProvider();\n        if (value === null) {\n            return;\n        }\n        data.coordinate = value.coordinate;\n        const currentTime = timeScale.indexToTimeScalePoint(this._crosshair.appliedIndex());\n        data.text = timeScale.formatDateTime(ensureNotNull(currentTime));\n        data.visible = true;\n        const colors = this._model.colorParser().generateContrastColors(options.labelBackgroundColor);\n        data.background = colors.background;\n        data.color = colors.foreground;\n        data.tickVisible = timeScale.options().ticksVisible;\n    }\n}\n", "export class DataSource {\n    constructor() {\n        this._priceScale = null;\n        this._zorder = 0;\n    }\n    zorder() {\n        return this._zorder;\n    }\n    setZorder(zorder) {\n        this._zorder = zorder;\n    }\n    priceScale() {\n        return this._priceScale;\n    }\n    setPriceScale(priceScale) {\n        this._priceScale = priceScale;\n    }\n    labelPaneViews(pane) {\n        return [];\n    }\n    timeAxisViews() {\n        return [];\n    }\n    visible() {\n        return true;\n    }\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nimport { notNull } from '../helpers/strict-type-checks';\nimport { CrosshairMarksPaneView } from '../views/pane/crosshair-marks-pane-view';\nimport { CrosshairPaneView } from '../views/pane/crosshair-pane-view';\nimport { CrosshairPriceAxisView } from '../views/price-axis/crosshair-price-axis-view';\nimport { CrosshairTimeAxisView } from '../views/time-axis/crosshair-time-axis-view';\nimport { DataSource } from './data-source';\n/**\n * Represents the crosshair mode.\n */\nexport var CrosshairMode;\n(function (CrosshairMode) {\n    /**\n     * This mode allows crosshair to move freely on the chart.\n     */\n    CrosshairMode[CrosshairMode[\"Normal\"] = 0] = \"Normal\";\n    /**\n     * This mode sticks crosshair's horizontal line to the price value of a single-value series or to the close price of OHLC-based series.\n     */\n    CrosshairMode[CrosshairMode[\"Magnet\"] = 1] = \"Magnet\";\n    /**\n     * This mode disables rendering of the crosshair.\n     */\n    CrosshairMode[CrosshairMode[\"Hidden\"] = 2] = \"Hidden\";\n    /**\n     * This mode sticks crosshair's horizontal line to the price value of a single-value series or to the open/high/low/close price of OHLC-based series.\n     */\n    CrosshairMode[CrosshairMode[\"MagnetOHLC\"] = 3] = \"MagnetOHLC\";\n})(CrosshairMode || (CrosshairMode = {}));\nexport class Crosshair extends DataSource {\n    constructor(model, options) {\n        super();\n        this._pane = null;\n        this._price = NaN;\n        this._index = 0;\n        this._visible = false; // initially the crosshair should not be visible, until the user interacts.\n        this._priceAxisViews = new Map();\n        this._subscribed = false;\n        this._crosshairPaneViewCache = new WeakMap();\n        this._markersPaneViewCache = new WeakMap();\n        this._x = NaN;\n        this._y = NaN;\n        this._originX = NaN;\n        this._originY = NaN;\n        this._model = model;\n        this._options = options;\n        const valuePriceProvider = (rawPriceProvider, rawCoordinateProvider) => {\n            return (priceScale) => {\n                const coordinate = rawCoordinateProvider();\n                const rawPrice = rawPriceProvider();\n                if (priceScale === ensureNotNull(this._pane).defaultPriceScale()) {\n                    // price must be defined\n                    return { price: rawPrice, coordinate: coordinate };\n                }\n                else {\n                    // always convert from coordinate\n                    const firstValue = ensureNotNull(priceScale.firstValue());\n                    const price = priceScale.coordinateToPrice(coordinate, firstValue);\n                    return { price: price, coordinate: coordinate };\n                }\n            };\n        };\n        const valueTimeProvider = (rawIndexProvider, rawCoordinateProvider) => {\n            return () => {\n                const time = this._model.timeScale().indexToTime(rawIndexProvider());\n                const coordinate = rawCoordinateProvider();\n                if (!time || !Number.isFinite(coordinate)) {\n                    return null;\n                }\n                return {\n                    time,\n                    coordinate,\n                };\n            };\n        };\n        // for current position always return both price and coordinate\n        this._currentPosPriceProvider = valuePriceProvider(() => this._price, () => this._y);\n        const currentPosTimeProvider = valueTimeProvider(() => this._index, () => this.appliedX());\n        this._timeAxisView = new CrosshairTimeAxisView(this, model, currentPosTimeProvider);\n    }\n    options() {\n        return this._options;\n    }\n    saveOriginCoord(x, y) {\n        this._originX = x;\n        this._originY = y;\n    }\n    clearOriginCoord() {\n        this._originX = NaN;\n        this._originY = NaN;\n    }\n    originCoordX() {\n        return this._originX;\n    }\n    originCoordY() {\n        return this._originY;\n    }\n    setPosition(index, price, pane) {\n        if (!this._subscribed) {\n            this._subscribed = true;\n        }\n        this._visible = true;\n        this._tryToUpdateViews(index, price, pane);\n    }\n    appliedIndex() {\n        return this._index;\n    }\n    appliedX() {\n        return this._x;\n    }\n    appliedY() {\n        return this._y;\n    }\n    visible() {\n        return this._visible;\n    }\n    clearPosition() {\n        this._visible = false;\n        this._setIndexToLastSeriesBarIndex();\n        this._price = NaN;\n        this._x = NaN;\n        this._y = NaN;\n        this._pane = null;\n        this.clearOriginCoord();\n        this.updateAllViews();\n    }\n    paneViews(pane) {\n        let crosshairPaneView = this._crosshairPaneViewCache.get(pane);\n        if (!crosshairPaneView) {\n            crosshairPaneView = new CrosshairPaneView(this, pane);\n            this._crosshairPaneViewCache.set(pane, crosshairPaneView);\n        }\n        let markersPaneView = this._markersPaneViewCache.get(pane);\n        if (!markersPaneView) {\n            markersPaneView = new CrosshairMarksPaneView(this._model, this, pane);\n            this._markersPaneViewCache.set(pane, markersPaneView);\n        }\n        return [crosshairPaneView, markersPaneView];\n    }\n    horzLineVisible(pane) {\n        return pane === this._pane && this._options.horzLine.visible;\n    }\n    vertLineVisible() {\n        return this._options.vertLine.visible;\n    }\n    priceAxisViews(pane, priceScale) {\n        if (!this._visible || this._pane !== pane) {\n            this._priceAxisViews.clear();\n        }\n        const views = [];\n        if (this._pane === pane) {\n            views.push(this._createPriceAxisViewOnDemand(this._priceAxisViews, priceScale, this._currentPosPriceProvider));\n        }\n        return views;\n    }\n    timeAxisViews() {\n        return this._visible ? [this._timeAxisView] : [];\n    }\n    pane() {\n        return this._pane;\n    }\n    updateAllViews() {\n        this._model.panes().forEach((pane) => {\n            this._crosshairPaneViewCache.get(pane)?.update();\n            this._markersPaneViewCache.get(pane)?.update();\n        });\n        this._priceAxisViews.forEach((value) => value.update());\n        this._timeAxisView.update();\n    }\n    _priceScaleByPane(pane) {\n        if (pane && !pane.defaultPriceScale().isEmpty()) {\n            return pane.defaultPriceScale();\n        }\n        return null;\n    }\n    _tryToUpdateViews(index, price, pane) {\n        if (this._tryToUpdateData(index, price, pane)) {\n            this.updateAllViews();\n        }\n    }\n    _tryToUpdateData(newIndex, newPrice, newPane) {\n        const oldX = this._x;\n        const oldY = this._y;\n        const oldPrice = this._price;\n        const oldIndex = this._index;\n        const oldPane = this._pane;\n        const priceScale = this._priceScaleByPane(newPane);\n        this._index = newIndex;\n        this._x = isNaN(newIndex) ? NaN : this._model.timeScale().indexToCoordinate(newIndex);\n        this._pane = newPane;\n        const firstValue = priceScale !== null ? priceScale.firstValue() : null;\n        if (priceScale !== null && firstValue !== null) {\n            this._price = newPrice;\n            this._y = priceScale.priceToCoordinate(newPrice, firstValue);\n        }\n        else {\n            this._price = NaN;\n            this._y = NaN;\n        }\n        return (oldX !== this._x || oldY !== this._y || oldIndex !== this._index ||\n            oldPrice !== this._price || oldPane !== this._pane);\n    }\n    _setIndexToLastSeriesBarIndex() {\n        const lastIndexes = this._model.serieses()\n            .map((s) => s.bars().lastIndex())\n            .filter(notNull);\n        const lastBarIndex = (lastIndexes.length === 0) ? null : Math.max(...lastIndexes);\n        this._index = lastBarIndex !== null ? lastBarIndex : NaN;\n    }\n    _createPriceAxisViewOnDemand(map, priceScale, valueProvider) {\n        let view = map.get(priceScale);\n        if (view === undefined) {\n            view = new CrosshairPriceAxisView(this, priceScale, valueProvider);\n            map.set(priceScale, view);\n        }\n        return view;\n    }\n}\n", "export var DefaultPriceScaleId;\n(function (DefaultPriceScaleId) {\n    DefaultPriceScaleId[\"Left\"] = \"left\";\n    DefaultPriceScaleId[\"Right\"] = \"right\";\n})(DefaultPriceScaleId || (DefaultPriceScaleId = {}));\nexport function isDefaultPriceScale(priceScaleId) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    return priceScaleId === \"left\" /* DefaultPriceScaleId.Left */ || priceScaleId === \"right\" /* DefaultPriceScaleId.Right */;\n}\n", "export var InvalidationLevel;\n(function (InvalidationLevel) {\n    InvalidationLevel[InvalidationLevel[\"None\"] = 0] = \"None\";\n    InvalidationLevel[InvalidationLevel[\"Cursor\"] = 1] = \"Cursor\";\n    InvalidationLevel[InvalidationLevel[\"Light\"] = 2] = \"Light\";\n    InvalidationLevel[InvalidationLevel[\"Full\"] = 3] = \"Full\";\n})(InvalidationLevel || (InvalidationLevel = {}));\nfunction mergePaneInvalidation(beforeValue, newValue) {\n    if (beforeValue === undefined) {\n        return newValue;\n    }\n    const level = Math.max(beforeValue.level, newValue.level);\n    const autoScale = beforeValue.autoScale || newValue.autoScale;\n    return { level, autoScale };\n}\nexport var TimeScaleInvalidationType;\n(function (TimeScaleInvalidationType) {\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"FitContent\"] = 0] = \"FitContent\";\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"ApplyRange\"] = 1] = \"ApplyRange\";\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"ApplyBarSpacing\"] = 2] = \"ApplyBarSpacing\";\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"ApplyRightOffset\"] = 3] = \"ApplyRightOffset\";\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"Reset\"] = 4] = \"Reset\";\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"Animation\"] = 5] = \"Animation\";\n    TimeScaleInvalidationType[TimeScaleInvalidationType[\"StopAnimation\"] = 6] = \"StopAnimation\";\n})(TimeScaleInvalidationType || (TimeScaleInvalidationType = {}));\nexport class InvalidateMask {\n    constructor(globalLevel) {\n        this._invalidatedPanes = new Map();\n        this._timeScaleInvalidations = [];\n        this._globalLevel = globalLevel;\n    }\n    invalidatePane(paneIndex, invalidation) {\n        const prevValue = this._invalidatedPanes.get(paneIndex);\n        const newValue = mergePaneInvalidation(prevValue, invalidation);\n        this._invalidatedPanes.set(paneIndex, newValue);\n    }\n    fullInvalidation() {\n        return this._globalLevel;\n    }\n    invalidateForPane(paneIndex) {\n        const paneInvalidation = this._invalidatedPanes.get(paneIndex);\n        if (paneInvalidation === undefined) {\n            return {\n                level: this._globalLevel,\n            };\n        }\n        return {\n            level: Math.max(this._globalLevel, paneInvalidation.level),\n            autoScale: paneInvalidation.autoScale,\n        };\n    }\n    setFitContent() {\n        this.stopTimeScaleAnimation();\n        // modifies both bar spacing and right offset\n        this._timeScaleInvalidations = [{ type: 0 /* TimeScaleInvalidationType.FitContent */ }];\n    }\n    applyRange(range) {\n        this.stopTimeScaleAnimation();\n        // modifies both bar spacing and right offset\n        this._timeScaleInvalidations = [{ type: 1 /* TimeScaleInvalidationType.ApplyRange */, value: range }];\n    }\n    setTimeScaleAnimation(animation) {\n        this._removeTimeScaleAnimation();\n        this._timeScaleInvalidations.push({ type: 5 /* TimeScaleInvalidationType.Animation */, value: animation });\n    }\n    stopTimeScaleAnimation() {\n        this._removeTimeScaleAnimation();\n        this._timeScaleInvalidations.push({ type: 6 /* TimeScaleInvalidationType.StopAnimation */ });\n    }\n    resetTimeScale() {\n        this.stopTimeScaleAnimation();\n        // modifies both bar spacing and right offset\n        this._timeScaleInvalidations = [{ type: 4 /* TimeScaleInvalidationType.Reset */ }];\n    }\n    setBarSpacing(barSpacing) {\n        this.stopTimeScaleAnimation();\n        this._timeScaleInvalidations.push({ type: 2 /* TimeScaleInvalidationType.ApplyBarSpacing */, value: barSpacing });\n    }\n    setRightOffset(offset) {\n        this.stopTimeScaleAnimation();\n        this._timeScaleInvalidations.push({ type: 3 /* TimeScaleInvalidationType.ApplyRightOffset */, value: offset });\n    }\n    timeScaleInvalidations() {\n        return this._timeScaleInvalidations;\n    }\n    merge(other) {\n        for (const tsInvalidation of other._timeScaleInvalidations) {\n            this._applyTimeScaleInvalidation(tsInvalidation);\n        }\n        this._globalLevel = Math.max(this._globalLevel, other._globalLevel);\n        other._invalidatedPanes.forEach((invalidation, index) => {\n            this.invalidatePane(index, invalidation);\n        });\n    }\n    static light() {\n        return new InvalidateMask(2 /* InvalidationLevel.Light */);\n    }\n    static full() {\n        return new InvalidateMask(3 /* InvalidationLevel.Full */);\n    }\n    _applyTimeScaleInvalidation(invalidation) {\n        switch (invalidation.type) {\n            case 0 /* TimeScaleInvalidationType.FitContent */:\n                this.setFitContent();\n                break;\n            case 1 /* TimeScaleInvalidationType.ApplyRange */:\n                this.applyRange(invalidation.value);\n                break;\n            case 2 /* TimeScaleInvalidationType.ApplyBarSpacing */:\n                this.setBarSpacing(invalidation.value);\n                break;\n            case 3 /* TimeScaleInvalidationType.ApplyRightOffset */:\n                this.setRightOffset(invalidation.value);\n                break;\n            case 4 /* TimeScaleInvalidationType.Reset */:\n                this.resetTimeScale();\n                break;\n            case 5 /* TimeScaleInvalidationType.Animation */:\n                this.setTimeScaleAnimation(invalidation.value);\n                break;\n            case 6 /* TimeScaleInvalidationType.StopAnimation */:\n                this._removeTimeScaleAnimation();\n        }\n    }\n    _removeTimeScaleAnimation() {\n        const index = this._timeScaleInvalidations.findIndex((inv) => inv.type === 5 /* TimeScaleInvalidationType.Animation */);\n        if (index !== -1) {\n            this._timeScaleInvalidations.splice(index, 1);\n        }\n    }\n}\n", "export class FormatterBase {\n    formatTickmarks(prices) {\n        return prices.map((price) => this.format(price));\n    }\n}\n", "import { isInteger, isNumber } from '../helpers/strict-type-checks';\nimport { FormatterBase } from './formatter-base';\nconst formatterOptions = {\n    decimalSign: '.',\n    decimalSignFractional: '\\'',\n};\n/**\n * @param value - The number of convert.\n * @param length - The length. Must be between 0 and 16 inclusive.\n */\nexport function numberToStringWithLeadingZero(value, length) {\n    if (!isNumber(value)) {\n        return 'n/a';\n    }\n    if (!isInteger(length)) {\n        throw new TypeError('invalid length');\n    }\n    if (length < 0 || length > 16) {\n        throw new TypeError('invalid length');\n    }\n    if (length === 0) {\n        return value.toString();\n    }\n    const dummyString = '0000000000000000';\n    return (dummyString + value.toString()).slice(-length);\n}\nexport class PriceFormatter extends FormatterBase {\n    constructor(priceScale, minMove) {\n        super();\n        if (!minMove) {\n            minMove = 1;\n        }\n        if (!isNumber(priceScale) || !isInteger(priceScale)) {\n            priceScale = 100;\n        }\n        if (priceScale < 0) {\n            throw new TypeError('invalid base');\n        }\n        this._priceScale = priceScale;\n        this._minMove = minMove;\n        this._calculateDecimal();\n    }\n    format(price) {\n        // \\u2212 is unicode's minus sign https://www.fileformat.info/info/unicode/char/2212/index.htm\n        // we should use it because it has the same width as plus sign +\n        const sign = price < 0 ? '\\u2212' : '';\n        price = Math.abs(price);\n        return sign + this._formatAsDecimal(price);\n    }\n    _calculateDecimal() {\n        // check if this._base is power of 10\n        // for double fractional _fractionalLength if for the main fractional only\n        this._fractionalLength = 0;\n        if (this._priceScale > 0 && this._minMove > 0) {\n            let base = this._priceScale;\n            while (base > 1) {\n                base /= 10;\n                this._fractionalLength++;\n            }\n        }\n    }\n    _formatAsDecimal(price) {\n        const base = this._priceScale / this._minMove;\n        let intPart = Math.floor(price);\n        let fracString = '';\n        const fracLength = this._fractionalLength !== undefined ? this._fractionalLength : NaN;\n        if (base > 1) {\n            let fracPart = +(Math.round(price * base) - intPart * base).toFixed(this._fractionalLength);\n            if (fracPart >= base) {\n                fracPart -= base;\n                intPart += 1;\n            }\n            fracString = formatterOptions.decimalSign + numberToStringWithLeadingZero(+fracPart.toFixed(this._fractionalLength) * this._minMove, fracLength);\n        }\n        else {\n            // should round int part to min move\n            intPart = Math.round(intPart * base) / base;\n            // if min move > 1, fractional part is always = 0\n            if (fracLength > 0) {\n                fracString = formatterOptions.decimalSign + numberToStringWithLeadingZero(0, fracLength);\n            }\n        }\n        return intPart.toFixed(0) + fracString;\n    }\n}\n", "import { PriceFormatter } from './price-formatter';\nexport class PercentageFormatter extends PriceFormatter {\n    constructor(priceScale = 100) {\n        super(priceScale);\n    }\n    format(price) {\n        return `${super.format(price)}%`;\n    }\n}\n", "import { FormatterBase } from './formatter-base';\nexport class VolumeFormatter extends FormatterBase {\n    constructor(precision) {\n        super();\n        this._precision = precision;\n    }\n    format(vol) {\n        let sign = '';\n        if (vol < 0) {\n            sign = '-';\n            vol = -vol;\n        }\n        if (vol < 995) {\n            return sign + this._formatNumber(vol);\n        }\n        else if (vol < 999995) {\n            return sign + this._formatNumber(vol / 1000) + 'K';\n        }\n        else if (vol < 999999995) {\n            vol = 1000 * Math.round(vol / 1000);\n            return sign + this._formatNumber(vol / 1000000) + 'M';\n        }\n        else {\n            vol = 1000000 * Math.round(vol / 1000000);\n            return sign + this._formatNumber(vol / 1000000000) + 'B';\n        }\n    }\n    _formatNumber(value) {\n        let res;\n        const priceScale = Math.pow(10, this._precision);\n        value = Math.round(value * priceScale) / priceScale;\n        if (value >= 1e-15 && value < 1) {\n            res = value.toFixed(this._precision).replace(/\\.?0+$/, ''); // regex removes trailing zeroes\n        }\n        else {\n            res = String(value);\n        }\n        return res.replace(/(\\.[1-9]*)0+$/, (e, p1) => p1);\n    }\n}\n", "import { ensureDefined } from '../helpers/assertions';\nconst defaultReplacementRe = /[2-9]/g;\nexport class TextWidthCache {\n    constructor(size = 50) {\n        this._actualSize = 0;\n        this._usageTick = 1;\n        this._oldestTick = 1;\n        this._tick2Labels = {};\n        this._cache = new Map();\n        this._maxSize = size;\n    }\n    reset() {\n        this._actualSize = 0;\n        this._cache.clear();\n        this._usageTick = 1;\n        this._oldestTick = 1;\n        this._tick2Labels = {};\n    }\n    measureText(ctx, text, optimizationReplacementRe) {\n        return this._getMetrics(ctx, text, optimizationReplacementRe).width;\n    }\n    yMidCorrection(ctx, text, optimizationReplacementRe) {\n        const metrics = this._getMetrics(ctx, text, optimizationReplacementRe);\n        // if actualBoundingBoxAscent/actualBoundingBoxDescent are not supported we use 0 as a fallback\n        return ((metrics.actualBoundingBoxAscent || 0) - (metrics.actualBoundingBoxDescent || 0)) / 2;\n    }\n    _getMetrics(ctx, text, optimizationReplacementRe) {\n        const re = optimizationReplacementRe || defaultReplacementRe;\n        const cacheString = String(text).replace(re, '0');\n        if (this._cache.has(cacheString)) {\n            return ensureDefined(this._cache.get(cacheString)).metrics;\n        }\n        if (this._actualSize === this._maxSize) {\n            const oldestValue = this._tick2Labels[this._oldestTick];\n            delete this._tick2Labels[this._oldestTick];\n            this._cache.delete(oldestValue);\n            this._oldestTick++;\n            this._actualSize--;\n        }\n        ctx.save();\n        ctx.textBaseline = 'middle';\n        const metrics = ctx.measureText(cacheString);\n        ctx.restore();\n        if (metrics.width === 0 && !!text.length) {\n            // measureText can return 0 in FF depending on a canvas size, don't cache it\n            return metrics;\n        }\n        this._cache.set(cacheString, { metrics: metrics, tick: this._usageTick });\n        this._tick2Labels[this._usageTick] = cacheString;\n        this._actualSize++;\n        this._usageTick++;\n        return metrics;\n    }\n}\n", "import { TextWidthCache } from '../../model/text-width-cache';\nclass PanePriceAxisViewRenderer {\n    constructor(textWidthCache) {\n        this._priceAxisViewRenderer = null;\n        this._rendererOptions = null;\n        this._align = 'right';\n        this._textWidthCache = textWidthCache;\n    }\n    setParams(priceAxisViewRenderer, rendererOptions, align) {\n        this._priceAxisViewRenderer = priceAxisViewRenderer;\n        this._rendererOptions = rendererOptions;\n        this._align = align;\n    }\n    draw(target) {\n        if (this._rendererOptions === null || this._priceAxisViewRenderer === null) {\n            return;\n        }\n        this._priceAxisViewRenderer.draw(target, this._rendererOptions, this._textWidthCache, this._align);\n    }\n}\nexport class PanePriceAxisView {\n    constructor(priceAxisView, dataSource, chartModel) {\n        this._priceAxisView = priceAxisView;\n        this._textWidthCache = new TextWidthCache(50); // when should we clear cache?\n        this._dataSource = dataSource;\n        this._chartModel = chartModel;\n        this._fontSize = -1;\n        this._renderer = new PanePriceAxisViewRenderer(this._textWidthCache);\n    }\n    renderer() {\n        const pane = this._chartModel.paneForSource(this._dataSource);\n        if (pane === null) {\n            return null;\n        }\n        // this price scale will be used to find label placement only (left, right, none)\n        const priceScale = pane.isOverlay(this._dataSource) ? pane.defaultVisiblePriceScale() : this._dataSource.priceScale();\n        if (priceScale === null) {\n            return null;\n        }\n        const position = pane.priceScalePosition(priceScale);\n        if (position === 'overlay') {\n            return null;\n        }\n        const options = this._chartModel.priceAxisRendererOptions();\n        if (options.fontSize !== this._fontSize) {\n            this._fontSize = options.fontSize;\n            this._textWidthCache.reset();\n        }\n        this._renderer.setParams(this._priceAxisView.paneRenderer(), options, position);\n        return this._renderer;\n    }\n}\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { drawHorizontalLine, setLineStyle } from './draw-line';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"HitTestThreshold\"] = 7] = \"HitTestThreshold\";\n})(Constants || (Constants = {}));\nexport class HorizontalLineRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    hitTest(x, y) {\n        if (!this._data?.visible) {\n            return null;\n        }\n        const { y: itemY, lineWidth, externalId } = this._data;\n        // add a fixed area threshold around line (Y + width) for hit test\n        if (y >= itemY - lineWidth - 7 /* Constants.HitTestThreshold */ && y <= itemY + lineWidth + 7 /* Constants.HitTestThreshold */) {\n            return {\n                hitTestData: this._data,\n                externalId: externalId,\n            };\n        }\n        return null;\n    }\n    _drawImpl({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null) {\n            return;\n        }\n        if (this._data.visible === false) {\n            return;\n        }\n        const y = Math.round(this._data.y * verticalPixelRatio);\n        if (y < 0 || y > bitmapSize.height) {\n            return;\n        }\n        ctx.lineCap = 'butt';\n        ctx.strokeStyle = this._data.color;\n        ctx.lineWidth = Math.floor(this._data.lineWidth * horizontalPixelRatio);\n        setLineStyle(ctx, this._data.lineStyle);\n        drawHorizontalLine(ctx, y, 0, bitmapSize.width);\n    }\n}\n", "import { HorizontalLineRenderer } from '../../renderers/horizontal-line-renderer';\nexport class SeriesHorizontalLinePaneView {\n    constructor(series) {\n        this._lineRendererData = {\n            y: 0,\n            color: 'rgba(0, 0, 0, 0)',\n            lineWidth: 1,\n            lineStyle: 0 /* LineStyle.Solid */,\n            visible: false,\n        };\n        this._lineRenderer = new HorizontalLineRenderer();\n        this._invalidated = true;\n        this._series = series;\n        this._model = series.model();\n        this._lineRenderer.setData(this._lineRendererData);\n    }\n    update() {\n        this._invalidated = true;\n    }\n    renderer() {\n        if (!this._series.visible()) {\n            return null;\n        }\n        if (this._invalidated) {\n            this._updateImpl();\n            this._invalidated = false;\n        }\n        return this._lineRenderer;\n    }\n}\n", "import { SeriesHorizontalLinePaneView } from './series-horizontal-line-pane-view';\nexport class SeriesHorizontalBaseLinePaneView extends SeriesHorizontalLinePaneView {\n    // eslint-disable-next-line no-useless-constructor\n    constructor(series) {\n        super(series);\n    }\n    _updateImpl() {\n        this._lineRendererData.visible = false;\n        const priceScale = this._series.priceScale();\n        const mode = priceScale.mode().mode;\n        if (mode !== 2 /* PriceScaleMode.Percentage */ && mode !== 3 /* PriceScaleMode.IndexedTo100 */) {\n            return;\n        }\n        const seriesOptions = this._series.options();\n        if (!seriesOptions.baseLineVisible || !this._series.visible()) {\n            return;\n        }\n        const firstValue = this._series.firstValue();\n        if (firstValue === null) {\n            return;\n        }\n        this._lineRendererData.visible = true;\n        this._lineRendererData.y = priceScale.priceToCoordinate(firstValue.value, firstValue.value);\n        this._lineRendererData.color = seriesOptions.baseLineColor;\n        this._lineRendererData.lineWidth = seriesOptions.baseLineWidth;\n        this._lineRendererData.lineStyle = seriesOptions.baseLineStyle;\n    }\n}\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nexport class SeriesLastPriceAnimationRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    data() {\n        return this._data;\n    }\n    _drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        const data = this._data;\n        if (data === null) {\n            return;\n        }\n        const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n        const correction = (tickWidth % 2) / 2;\n        const centerX = Math.round(data.center.x * horizontalPixelRatio) + correction; // correct x coordinate only\n        const centerY = data.center.y * verticalPixelRatio;\n        ctx.fillStyle = data.seriesLineColor;\n        ctx.beginPath();\n        // TODO: it is better to have different horizontal and vertical radii\n        const centerPointRadius = Math.max(2, data.seriesLineWidth * 1.5) * horizontalPixelRatio;\n        ctx.arc(centerX, centerY, centerPointRadius, 0, 2 * Math.PI, false);\n        ctx.fill();\n        ctx.fillStyle = data.fillColor;\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, data.radius * horizontalPixelRatio, 0, 2 * Math.PI, false);\n        ctx.fill();\n        ctx.lineWidth = tickWidth;\n        ctx.strokeStyle = data.strokeColor;\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, data.radius * horizontalPixelRatio + tickWidth / 2, 0, 2 * Math.PI, false);\n        ctx.stroke();\n    }\n}\n", "import { assert } from '../../helpers/assertions';\nimport { SeriesLastPriceAnimationRenderer } from '../../renderers/series-last-price-animation-renderer';\n/* eslint-disable @typescript-eslint/no-duplicate-enum-values */\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"AnimationPeriod\"] = 2600] = \"AnimationPeriod\";\n    Constants[Constants[\"Stage1Period\"] = 0.25] = \"Stage1Period\";\n    Constants[Constants[\"Stage2Period\"] = 0.275] = \"Stage2Period\";\n    Constants[Constants[\"Stage3Period\"] = 0.475] = \"Stage3Period\";\n    Constants[Constants[\"Stage1StartCircleRadius\"] = 4] = \"Stage1StartCircleRadius\";\n    Constants[Constants[\"Stage1EndCircleRadius\"] = 10] = \"Stage1EndCircleRadius\";\n    Constants[Constants[\"Stage1StartFillAlpha\"] = 0.25] = \"Stage1StartFillAlpha\";\n    Constants[Constants[\"Stage1EndFillAlpha\"] = 0] = \"Stage1EndFillAlpha\";\n    Constants[Constants[\"Stage1StartStrokeAlpha\"] = 0.4] = \"Stage1StartStrokeAlpha\";\n    Constants[Constants[\"Stage1EndStrokeAlpha\"] = 0.8] = \"Stage1EndStrokeAlpha\";\n    Constants[Constants[\"Stage2StartCircleRadius\"] = 10] = \"Stage2StartCircleRadius\";\n    Constants[Constants[\"Stage2EndCircleRadius\"] = 14] = \"Stage2EndCircleRadius\";\n    Constants[Constants[\"Stage2StartFillAlpha\"] = 0] = \"Stage2StartFillAlpha\";\n    Constants[Constants[\"Stage2EndFillAlpha\"] = 0] = \"Stage2EndFillAlpha\";\n    Constants[Constants[\"Stage2StartStrokeAlpha\"] = 0.8] = \"Stage2StartStrokeAlpha\";\n    Constants[Constants[\"Stage2EndStrokeAlpha\"] = 0] = \"Stage2EndStrokeAlpha\";\n    Constants[Constants[\"Stage3StartCircleRadius\"] = 14] = \"Stage3StartCircleRadius\";\n    Constants[Constants[\"Stage3EndCircleRadius\"] = 14] = \"Stage3EndCircleRadius\";\n    Constants[Constants[\"Stage3StartFillAlpha\"] = 0] = \"Stage3StartFillAlpha\";\n    Constants[Constants[\"Stage3EndFillAlpha\"] = 0] = \"Stage3EndFillAlpha\";\n    Constants[Constants[\"Stage3StartStrokeAlpha\"] = 0] = \"Stage3StartStrokeAlpha\";\n    Constants[Constants[\"Stage3EndStrokeAlpha\"] = 0] = \"Stage3EndStrokeAlpha\";\n})(Constants || (Constants = {}));\nconst animationStagesData = [\n    {\n        start: 0,\n        end: 0.25 /* Constants.Stage1Period */,\n        startRadius: 4 /* Constants.Stage1StartCircleRadius */,\n        endRadius: 10 /* Constants.Stage1EndCircleRadius */,\n        startFillAlpha: 0.25 /* Constants.Stage1StartFillAlpha */,\n        endFillAlpha: 0 /* Constants.Stage1EndFillAlpha */,\n        startStrokeAlpha: 0.4 /* Constants.Stage1StartStrokeAlpha */,\n        endStrokeAlpha: 0.8 /* Constants.Stage1EndStrokeAlpha */,\n    },\n    {\n        start: 0.25 /* Constants.Stage1Period */,\n        end: 0.25 /* Constants.Stage1Period */ + 0.275 /* Constants.Stage2Period */,\n        startRadius: 10 /* Constants.Stage2StartCircleRadius */,\n        endRadius: 14 /* Constants.Stage2EndCircleRadius */,\n        startFillAlpha: 0 /* Constants.Stage2StartFillAlpha */,\n        endFillAlpha: 0 /* Constants.Stage2EndFillAlpha */,\n        startStrokeAlpha: 0.8 /* Constants.Stage2StartStrokeAlpha */,\n        endStrokeAlpha: 0 /* Constants.Stage2EndStrokeAlpha */,\n    },\n    {\n        start: 0.25 /* Constants.Stage1Period */ + 0.275 /* Constants.Stage2Period */,\n        end: 0.25 /* Constants.Stage1Period */ + 0.275 /* Constants.Stage2Period */ + 0.475 /* Constants.Stage3Period */,\n        startRadius: 14 /* Constants.Stage3StartCircleRadius */,\n        endRadius: 14 /* Constants.Stage3EndCircleRadius */,\n        startFillAlpha: 0 /* Constants.Stage3StartFillAlpha */,\n        endFillAlpha: 0 /* Constants.Stage3EndFillAlpha */,\n        startStrokeAlpha: 0 /* Constants.Stage3StartStrokeAlpha */,\n        endStrokeAlpha: 0 /* Constants.Stage3EndStrokeAlpha */,\n    },\n];\nfunction radius(stage, startRadius, endRadius) {\n    return startRadius + (endRadius - startRadius) * stage;\n}\nexport class SeriesLastPriceAnimationPaneView {\n    constructor(series) {\n        this._renderer = new SeriesLastPriceAnimationRenderer();\n        this._invalidated = true;\n        this._stageInvalidated = true;\n        this._startTime = performance.now();\n        this._endTime = this._startTime - 1;\n        this._series = series;\n    }\n    onDataCleared() {\n        this._endTime = this._startTime - 1;\n        this.update();\n    }\n    onNewRealtimeDataReceived() {\n        this.update();\n        if (this._series.options().lastPriceAnimation === 2 /* LastPriceAnimationMode.OnDataUpdate */) {\n            const now = performance.now();\n            const timeToAnimationEnd = this._endTime - now;\n            if (timeToAnimationEnd > 0) {\n                if (timeToAnimationEnd < 2600 /* Constants.AnimationPeriod */ / 4) {\n                    this._endTime += 2600 /* Constants.AnimationPeriod */;\n                }\n                return;\n            }\n            this._startTime = now;\n            this._endTime = now + 2600 /* Constants.AnimationPeriod */;\n        }\n    }\n    update() {\n        this._invalidated = true;\n    }\n    invalidateStage() {\n        this._stageInvalidated = true;\n    }\n    visible() {\n        // center point is always visible if lastPriceAnimation is not LastPriceAnimationMode.Disabled\n        return this._series.options().lastPriceAnimation !== 0 /* LastPriceAnimationMode.Disabled */;\n    }\n    animationActive() {\n        switch (this._series.options().lastPriceAnimation) {\n            case 0 /* LastPriceAnimationMode.Disabled */:\n                return false;\n            case 1 /* LastPriceAnimationMode.Continuous */:\n                return true;\n            case 2 /* LastPriceAnimationMode.OnDataUpdate */:\n                return performance.now() <= this._endTime;\n        }\n    }\n    renderer() {\n        if (this._invalidated) {\n            this._updateImpl();\n            this._invalidated = false;\n            this._stageInvalidated = false;\n        }\n        else if (this._stageInvalidated) {\n            this._updateRendererDataStage();\n            this._stageInvalidated = false;\n        }\n        return this._renderer;\n    }\n    _updateImpl() {\n        this._renderer.setData(null);\n        const timeScale = this._series.model().timeScale();\n        const visibleRange = timeScale.visibleStrictRange();\n        const firstValue = this._series.firstValue();\n        if (visibleRange === null || firstValue === null) {\n            return;\n        }\n        const lastValue = this._series.lastValueData(true);\n        if (lastValue.noData || !visibleRange.contains(lastValue.index)) {\n            return;\n        }\n        const lastValuePoint = {\n            x: timeScale.indexToCoordinate(lastValue.index),\n            y: this._series.priceScale().priceToCoordinate(lastValue.price, firstValue.value),\n        };\n        const seriesLineColor = lastValue.color;\n        const seriesLineWidth = this._series.options().lineWidth;\n        const data = this._animationData(this._duration(), seriesLineColor);\n        this._renderer.setData({\n            seriesLineColor,\n            seriesLineWidth,\n            fillColor: data.fillColor,\n            strokeColor: data.strokeColor,\n            radius: data.radius,\n            center: lastValuePoint,\n        });\n    }\n    _updateRendererDataStage() {\n        const rendererData = this._renderer.data();\n        if (rendererData !== null) {\n            const data = this._animationData(this._duration(), rendererData.seriesLineColor);\n            rendererData.fillColor = data.fillColor;\n            rendererData.strokeColor = data.strokeColor;\n            rendererData.radius = data.radius;\n        }\n    }\n    _duration() {\n        return this.animationActive() ? performance.now() - this._startTime : 2600 /* Constants.AnimationPeriod */ - 1;\n    }\n    _color(seriesLineColor, stage, startAlpha, endAlpha) {\n        const alpha = startAlpha + (endAlpha - startAlpha) * stage;\n        return this._series\n            .model()\n            .colorParser()\n            .applyAlpha(seriesLineColor, alpha);\n    }\n    _animationData(durationSinceStart, lineColor) {\n        const globalStage = (durationSinceStart % 2600 /* Constants.AnimationPeriod */) / 2600 /* Constants.AnimationPeriod */;\n        let currentStageData;\n        for (const stageData of animationStagesData) {\n            if (globalStage >= stageData.start && globalStage <= stageData.end) {\n                currentStageData = stageData;\n                break;\n            }\n        }\n        assert(currentStageData !== undefined, 'Last price animation internal logic error');\n        const subStage = (globalStage - currentStageData.start) / (currentStageData.end - currentStageData.start);\n        return {\n            fillColor: this._color(lineColor, subStage, currentStageData.startFillAlpha, currentStageData.endFillAlpha),\n            strokeColor: this._color(lineColor, subStage, currentStageData.startStrokeAlpha, currentStageData.endStrokeAlpha),\n            radius: radius(subStage, currentStageData.startRadius, currentStageData.endRadius),\n        };\n    }\n}\n", "import { SeriesHorizontalLinePaneView } from './series-horizontal-line-pane-view';\nexport class SeriesPriceLinePaneView extends SeriesHorizontalLinePaneView {\n    // eslint-disable-next-line no-useless-constructor\n    constructor(series) {\n        super(series);\n    }\n    _updateImpl() {\n        const data = this._lineRendererData;\n        data.visible = false;\n        const seriesOptions = this._series.options();\n        if (!seriesOptions.priceLineVisible || !this._series.visible()) {\n            return;\n        }\n        const lastValueData = this._series.lastValueData(seriesOptions.priceLineSource === 0 /* PriceLineSource.LastBar */);\n        if (lastValueData.noData) {\n            return;\n        }\n        data.visible = true;\n        data.y = lastValueData.coordinate;\n        data.color = this._series.priceLineColor(lastValueData.color);\n        data.lineWidth = seriesOptions.priceLineWidth;\n        data.lineStyle = seriesOptions.priceLineStyle;\n    }\n}\n", "import { PriceAxisView } from './price-axis-view';\nexport class SeriesPriceAxisView extends PriceAxisView {\n    constructor(source) {\n        super();\n        this._source = source;\n    }\n    _updateRendererData(axisRendererData, paneRendererData, commonRendererData) {\n        axisRendererData.visible = false;\n        paneRendererData.visible = false;\n        const source = this._source;\n        if (!source.visible()) {\n            return;\n        }\n        const seriesOptions = source.options();\n        const showSeriesLastValue = seriesOptions.lastValueVisible;\n        const showSymbolLabel = source.title() !== '';\n        const showPriceAndPercentage = seriesOptions.seriesLastValueMode === 0 /* PriceAxisLastValueMode.LastPriceAndPercentageValue */;\n        const lastValueData = source.lastValueData(false);\n        if (lastValueData.noData) {\n            return;\n        }\n        if (showSeriesLastValue) {\n            axisRendererData.text = this._axisText(lastValueData, showSeriesLastValue, showPriceAndPercentage);\n            axisRendererData.visible = axisRendererData.text.length !== 0;\n        }\n        if (showSymbolLabel || showPriceAndPercentage) {\n            paneRendererData.text = this._paneText(lastValueData, showSeriesLastValue, showSymbolLabel, showPriceAndPercentage);\n            paneRendererData.visible = paneRendererData.text.length > 0;\n        }\n        const lastValueColor = source.priceLineColor(lastValueData.color);\n        const colors = this._source\n            .model()\n            .colorParser()\n            .generateContrastColors(lastValueColor);\n        commonRendererData.background = colors.background;\n        commonRendererData.coordinate = lastValueData.coordinate;\n        paneRendererData.borderColor = source.model().backgroundColorAtYPercentFromTop(lastValueData.coordinate / source.priceScale().height());\n        axisRendererData.borderColor = lastValueColor;\n        axisRendererData.color = colors.foreground;\n        paneRendererData.color = colors.foreground;\n    }\n    _paneText(lastValue, showSeriesLastValue, showSymbolLabel, showPriceAndPercentage) {\n        let result = '';\n        const title = this._source.title();\n        if (showSymbolLabel && title.length !== 0) {\n            result += `${title} `;\n        }\n        if (showSeriesLastValue && showPriceAndPercentage) {\n            result += this._source.priceScale().isPercentage() ?\n                lastValue.formattedPriceAbsolute : lastValue.formattedPricePercentage;\n        }\n        return result.trim();\n    }\n    _axisText(lastValueData, showSeriesLastValue, showPriceAndPercentage) {\n        if (!showSeriesLastValue) {\n            return '';\n        }\n        if (!showPriceAndPercentage) {\n            return lastValueData.text;\n        }\n        return this._source.priceScale().isPercentage() ?\n            lastValueData.formattedPricePercentage : lastValueData.formattedPriceAbsolute;\n    }\n}\n", "import { isNumber } from '../helpers/strict-type-checks';\nfunction computeFiniteResult(method, valueOne, valueTwo, fallback) {\n    const firstFinite = Number.isFinite(valueOne);\n    const secondFinite = Number.isFinite(valueTwo);\n    if (firstFinite && secondFinite) {\n        return method(valueOne, valueTwo);\n    }\n    return !firstFinite && !secondFinite ? fallback : (firstFinite ? valueOne : valueTwo);\n}\nexport class PriceRangeImpl {\n    constructor(minValue, maxValue) {\n        this._minValue = minValue;\n        this._maxValue = maxValue;\n    }\n    equals(pr) {\n        if (pr === null) {\n            return false;\n        }\n        return this._minValue === pr._minValue && this._maxValue === pr._maxValue;\n    }\n    clone() {\n        return new PriceRangeImpl(this._minValue, this._maxValue);\n    }\n    minValue() {\n        return this._minValue;\n    }\n    maxValue() {\n        return this._maxValue;\n    }\n    length() {\n        return this._maxValue - this._minValue;\n    }\n    isEmpty() {\n        return this._maxValue === this._minValue || Number.isNaN(this._maxValue) || Number.isNaN(this._minValue);\n    }\n    merge(anotherRange) {\n        if (anotherRange === null) {\n            return this;\n        }\n        return new PriceRangeImpl(computeFiniteResult(Math.min, this.minValue(), anotherRange.minValue(), -Infinity), computeFiniteResult(Math.max, this.maxValue(), anotherRange.maxValue(), Infinity));\n    }\n    scaleAroundCenter(coeff) {\n        if (!isNumber(coeff)) {\n            return;\n        }\n        const delta = this._maxValue - this._minValue;\n        if (delta === 0) {\n            return;\n        }\n        const center = (this._maxValue + this._minValue) * 0.5;\n        let maxDelta = this._maxValue - center;\n        let minDelta = this._minValue - center;\n        maxDelta *= coeff;\n        minDelta *= coeff;\n        this._maxValue = center + maxDelta;\n        this._minValue = center + minDelta;\n    }\n    shift(delta) {\n        if (!isNumber(delta)) {\n            return;\n        }\n        this._maxValue += delta;\n        this._minValue += delta;\n    }\n    toRaw() {\n        return {\n            minValue: this._minValue,\n            maxValue: this._maxValue,\n        };\n    }\n    static fromRaw(raw) {\n        return (raw === null) ? null : new PriceRangeImpl(raw.minValue, raw.maxValue);\n    }\n}\n", "import { PriceRangeImpl } from './price-range-impl';\nexport class AutoscaleInfoImpl {\n    constructor(priceRange, margins) {\n        this._priceRange = priceRange;\n        this._margins = margins || null;\n    }\n    priceRange() {\n        return this._priceRange;\n    }\n    margins() {\n        return this._margins;\n    }\n    toRaw() {\n        return {\n            priceRange: this._priceRange === null ? null : this._priceRange.toRaw(),\n            margins: this._margins || undefined,\n        };\n    }\n    static fromRaw(raw) {\n        return (raw === null) ? null : new AutoscaleInfoImpl(PriceRangeImpl.fromRaw(raw.priceRange), raw.margins);\n    }\n}\n", "/**\n * Power-of-2 conflation levels supported by the system.\n * These represent the number of original data points that get merged into one conflated point.\n */\nexport const CONFLATION_LEVELS = [2, 4, 8, 16, 32, 64, 128, 256, 512];\n/**\n * Maximum conflation level supported.\n */\nexport const MAX_CONFLATION_LEVEL = 512;\n/**\n * Device pixel ratio threshold for conflation.\n * Conflation happens when barSpacing is less than 1.0 / devicePixelRatio.\n * This ensures we only conflate when we can't physically display the detail.\n */\nexport const DPR_CONFLATION_THRESHOLD = 1;\nexport const CONFLATION_ERROR_MESSAGES = {\n    missingPriceValueBuilder: 'Custom series with conflation reducer must have a priceValueBuilder method',\n};\n", "import { SeriesHorizontalLinePaneView } from './series-horizontal-line-pane-view';\nexport class CustomPriceLinePaneView extends SeriesHorizontalLinePaneView {\n    constructor(series, priceLine) {\n        super(series);\n        this._priceLine = priceLine;\n    }\n    _updateImpl() {\n        const data = this._lineRendererData;\n        data.visible = false;\n        const lineOptions = this._priceLine.options();\n        if (!this._series.visible() || !lineOptions.lineVisible) {\n            return;\n        }\n        const y = this._priceLine.yCoord();\n        if (y === null) {\n            return;\n        }\n        data.visible = true;\n        data.y = y;\n        data.color = lineOptions.color;\n        data.lineWidth = lineOptions.lineWidth;\n        data.lineStyle = lineOptions.lineStyle;\n        data.externalId = this._priceLine.options().id;\n    }\n}\n", "import { PriceAxisView } from './price-axis-view';\nexport class CustomPriceLinePriceAxisView extends PriceAxisView {\n    constructor(series, priceLine) {\n        super();\n        this._series = series;\n        this._priceLine = priceLine;\n    }\n    _updateRendererData(axisRendererData, paneRendererData, commonData) {\n        axisRendererData.visible = false;\n        paneRendererData.visible = false;\n        const options = this._priceLine.options();\n        const labelVisible = options.axisLabelVisible;\n        const showPaneLabel = options.title !== '';\n        const series = this._series;\n        if (!labelVisible || !series.visible()) {\n            return;\n        }\n        const y = this._priceLine.yCoord();\n        if (y === null) {\n            return;\n        }\n        if (showPaneLabel) {\n            paneRendererData.text = options.title;\n            paneRendererData.visible = true;\n        }\n        paneRendererData.borderColor = series.model().backgroundColorAtYPercentFromTop(y / series.priceScale().height());\n        axisRendererData.text = this._formatPrice(options.price);\n        axisRendererData.visible = true;\n        const colors = this._series\n            .model()\n            .colorParser()\n            .generateContrastColors(options.axisLabelColor || options.color);\n        commonData.background = colors.background;\n        const textColor = options.axisLabelTextColor || colors.foreground;\n        axisRendererData.color = textColor; // price text\n        paneRendererData.color = textColor; // title text\n        commonData.coordinate = y;\n    }\n    _formatPrice(price) {\n        const firstValue = this._series.firstValue();\n        if (firstValue === null) {\n            return '';\n        }\n        return this._series.priceScale().formatPrice(price, firstValue.value);\n    }\n}\n", "import { merge } from '../helpers/strict-type-checks';\nimport { CustomPriceLinePaneView } from '../views/pane/custom-price-line-pane-view';\nimport { PanePriceAxisView } from '../views/pane/pane-price-axis-view';\nimport { CustomPriceLinePriceAxisView } from '../views/price-axis/custom-price-line-price-axis-view';\nexport class CustomPriceLine {\n    constructor(series, options) {\n        this._series = series;\n        this._options = options;\n        this._priceLineView = new CustomPriceLinePaneView(series, this);\n        this._priceAxisView = new CustomPriceLinePriceAxisView(series, this);\n        this._panePriceAxisView = new PanePriceAxisView(this._priceAxisView, series, series.model());\n    }\n    applyOptions(options) {\n        merge(this._options, options);\n        this.update();\n        this._series.model().lightUpdate();\n    }\n    options() {\n        return this._options;\n    }\n    paneView() {\n        return this._priceLineView;\n    }\n    labelPaneView() {\n        return this._panePriceAxisView;\n    }\n    priceAxisView() {\n        return this._priceAxisView;\n    }\n    update() {\n        this._priceLineView.update();\n        this._priceAxisView.update();\n    }\n    yCoord() {\n        const series = this._series;\n        const priceScale = series.priceScale();\n        const timeScale = series.model().timeScale();\n        if (timeScale.isEmpty() || priceScale.isEmpty()) {\n            return null;\n        }\n        const firstValue = series.firstValue();\n        if (firstValue === null) {\n            return null;\n        }\n        return priceScale.priceToCoordinate(this._options.price, firstValue.value);\n    }\n}\n", "import { CONFLATION_LEVELS, DPR_CONFLATION_THRESHOLD, MAX_CONFLATION_LEVEL } from './conflation/constants';\nexport class DataConflater {\n    constructor() {\n        this._dataCache = new WeakMap();\n    }\n    calculateConflationLevelWithSmoothing(barSpacing, devicePixelRatio, smoothingFactor) {\n        const conflationThreshold = (DPR_CONFLATION_THRESHOLD / devicePixelRatio) * smoothingFactor;\n        if (barSpacing >= conflationThreshold) {\n            return 1;\n        }\n        // calculate conflation level as power of 2\n        const ratio = conflationThreshold / barSpacing;\n        const conflationLevel = Math.pow(2, Math.floor(Math.log2(ratio)));\n        // ensure we don't exceed maximum conflation level\n        return Math.min(conflationLevel, MAX_CONFLATION_LEVEL);\n    }\n    conflateByFactor(data, barsToMerge, customReducer, isCustomSeries = false, priceValueBuilder) {\n        if (data.length === 0 || barsToMerge <= 1) {\n            return data;\n        }\n        const conflationLevel = this._normalizeConflationLevel(barsToMerge);\n        if (conflationLevel <= 1) {\n            return data;\n        }\n        const entry = this._getValidatedCacheEntry(data);\n        let cachedRows = entry.levelResults.get(conflationLevel);\n        if (cachedRows !== undefined) {\n            return cachedRows;\n        }\n        cachedRows = this._buildRecursively(data, conflationLevel, customReducer, isCustomSeries, priceValueBuilder, entry.levelResults);\n        entry.levelResults.set(conflationLevel, cachedRows);\n        return cachedRows;\n    }\n    /**\n     * Efficiently update the last conflated chunk when new data arrives.\n     * This avoids rebuilding all chunks when just the last data point changes.\n     */\n    updateLastConflatedChunk(originalData, newLastRow, conflationLevel, customReducer, isCustomSeries = false, priceValueBuilder) {\n        if (conflationLevel < 1 || originalData.length === 0) {\n            return originalData;\n        }\n        const entry = this._getValidatedCacheEntry(originalData);\n        const cachedRows = entry.levelResults.get(conflationLevel);\n        if (!cachedRows) {\n            return this.conflateByFactor(originalData, conflationLevel, customReducer, isCustomSeries, priceValueBuilder);\n        }\n        const updatedRows = this._updateLastChunkInCache(originalData, newLastRow, conflationLevel, cachedRows, isCustomSeries, customReducer, priceValueBuilder);\n        entry.levelResults.set(conflationLevel, updatedRows);\n        return updatedRows;\n    }\n    _normalizeConflationLevel(barsToMerge) {\n        if (barsToMerge <= 2) {\n            return 2;\n        }\n        for (const level of CONFLATION_LEVELS) {\n            if (barsToMerge <= level) {\n                return level;\n            }\n        }\n        return MAX_CONFLATION_LEVEL;\n    }\n    _getDataVersion(data) {\n        if (data.length === 0) {\n            return 0;\n        }\n        // Simple hash based on data length and first/last items\n        const first = data[0];\n        const last = data[data.length - 1];\n        return data.length * 31 + first.index * 17 + last.index * 13;\n    }\n    /**\n     * Build conflation recursively, reusing previous level results.\n     */\n    _buildRecursively(data, targetLevel, customReducer, isCustomSeries = false, priceValueBuilder, levelResults = new Map()) {\n        if (targetLevel === 2) {\n            return this._buildLevelFromOriginal(data, 2, customReducer, isCustomSeries, priceValueBuilder);\n        }\n        const prevLevel = targetLevel / 2;\n        let prevData = levelResults.get(prevLevel);\n        if (!prevData) {\n            prevData = this._buildRecursively(data, prevLevel, customReducer, isCustomSeries, priceValueBuilder, levelResults);\n            levelResults.set(prevLevel, prevData);\n        }\n        return this._buildLevelFromPrevious(prevData, customReducer, isCustomSeries, priceValueBuilder);\n    }\n    /**\n     * Build a conflation level directly from original data (used for level 2).\n     */\n    _buildLevelFromOriginal(data, level, customReducer, isCustomSeries = false, priceValueBuilder) {\n        const chunks = this._buildChunksFromData(data, level, customReducer, isCustomSeries, priceValueBuilder);\n        return this._chunksToSeriesPlotRows(chunks, isCustomSeries);\n    }\n    /**\n     * Build a conflation level from the previous level's result.\n     */\n    _buildLevelFromPrevious(prevData, customReducer, isCustomSeries = false, priceValueBuilder) {\n        // Always merge 2 chunks from the previous level\n        const chunks = this._buildChunksFromData(prevData, 2, customReducer, isCustomSeries, priceValueBuilder);\n        return this._chunksToSeriesPlotRows(chunks, isCustomSeries);\n    }\n    _buildChunksFromData(data, mergeFactor, customReducer, isCustomSeries = false, priceValueBuilder) {\n        const chunks = [];\n        for (let i = 0; i < data.length; i += mergeFactor) {\n            const remaining = data.length - i;\n            if (remaining >= mergeFactor) {\n                const merged = this._mergeTwoRows(data[i], data[i + 1], customReducer, isCustomSeries, priceValueBuilder);\n                merged.isRemainder = false;\n                chunks.push(merged);\n            }\n            else {\n                // remainder of 1 -> fold into previous chunk if possible\n                if (chunks.length === 0) {\n                    chunks.push(this._plotRowToChunk(data[i], true));\n                }\n                else {\n                    const prev = chunks[chunks.length - 1];\n                    chunks[chunks.length - 1] = this._mergeChunkAndRow(prev, data[i], customReducer, isCustomSeries, priceValueBuilder);\n                }\n            }\n        }\n        return chunks;\n    }\n    _sumCount(a, b) {\n        return (a ?? 1) + (b ?? 1);\n    }\n    _mergeTwoRows(a, b, customReducer, isCustomSeries = false, priceValueBuilder) {\n        if (!isCustomSeries || !customReducer || !priceValueBuilder) {\n            const high = a.value[1 /* PlotRowValueIndex.High */] > b.value[1 /* PlotRowValueIndex.High */] ? a.value[1 /* PlotRowValueIndex.High */] : b.value[1 /* PlotRowValueIndex.High */];\n            const low = a.value[2 /* PlotRowValueIndex.Low */] < b.value[2 /* PlotRowValueIndex.Low */] ? a.value[2 /* PlotRowValueIndex.Low */] : b.value[2 /* PlotRowValueIndex.Low */];\n            return {\n                startIndex: a.index,\n                endIndex: b.index,\n                startTime: a.time,\n                endTime: b.time,\n                open: a.value[0 /* PlotRowValueIndex.Open */],\n                high,\n                low,\n                close: b.value[3 /* PlotRowValueIndex.Close */],\n                originalDataCount: this._sumCount(a.originalDataCount, b.originalDataCount),\n                conflatedData: undefined,\n                isRemainder: false,\n            };\n        }\n        const c1 = this._convertToContext(a, priceValueBuilder);\n        const c2 = this._convertToContext(b, priceValueBuilder);\n        const aggregated = customReducer(c1, c2);\n        const prices = priceValueBuilder(aggregated);\n        const p = prices.length ? prices[prices.length - 1] : 0;\n        return {\n            startIndex: a.index,\n            endIndex: b.index,\n            startTime: a.time,\n            endTime: b.time,\n            open: a.value[0 /* PlotRowValueIndex.Open */],\n            high: Math.max(a.value[1 /* PlotRowValueIndex.High */], p),\n            low: Math.min(a.value[2 /* PlotRowValueIndex.Low */], p),\n            close: p,\n            originalDataCount: this._sumCount(a.originalDataCount, b.originalDataCount),\n            conflatedData: aggregated,\n            isRemainder: false,\n        };\n    }\n    _mergeChunkAndRow(chunk, row, customReducer, isCustomSeries = false, priceValueBuilder) {\n        if (!isCustomSeries || !customReducer || !priceValueBuilder) {\n            return {\n                startIndex: chunk.startIndex,\n                endIndex: row.index,\n                startTime: chunk.startTime,\n                endTime: row.time,\n                open: chunk.open,\n                high: chunk.high > row.value[1 /* PlotRowValueIndex.High */] ? chunk.high : row.value[1 /* PlotRowValueIndex.High */],\n                low: chunk.low < row.value[2 /* PlotRowValueIndex.Low */] ? chunk.low : row.value[2 /* PlotRowValueIndex.Low */],\n                close: row.value[3 /* PlotRowValueIndex.Close */],\n                originalDataCount: chunk.originalDataCount + (row.originalDataCount ?? 1),\n                conflatedData: chunk.conflatedData,\n                isRemainder: false,\n            };\n        }\n        const prevAgg = chunk.conflatedData;\n        const ctx = this._convertToContext(row, priceValueBuilder);\n        // if prevAgg is missing (e.g single-item remainder chunk)\n        // treat the row as the first aggregate seed to avoid calling builder on undefined.\n        const prevCtx = prevAgg\n            ? {\n                data: prevAgg,\n                index: chunk.startIndex,\n                originalTime: chunk.startTime,\n                time: chunk.startTime,\n                priceValues: priceValueBuilder(prevAgg),\n            }\n            : null;\n        const aggregated = prevCtx ? customReducer(prevCtx, ctx) : (ctx.data);\n        const prices = prevCtx ? priceValueBuilder(aggregated) : ctx.priceValues;\n        const p = prices.length ? prices[prices.length - 1] : 0;\n        return {\n            startIndex: chunk.startIndex,\n            endIndex: row.index,\n            startTime: chunk.startTime,\n            endTime: row.time,\n            open: chunk.open,\n            high: Math.max(chunk.high, p),\n            low: Math.min(chunk.low, p),\n            close: p,\n            originalDataCount: chunk.originalDataCount + (row.originalDataCount ?? 1),\n            conflatedData: aggregated,\n            isRemainder: false,\n        };\n    }\n    // fold [start, end) with override at overrideIndex\n    // eslint-disable-next-line max-params\n    _mergeRangeWithOverride(data, start, end, overrideIndex, overrideRow, customReducer, isCustomSeries = false, priceValueBuilder) {\n        const first = (start === overrideIndex) ? overrideRow : data[start];\n        if (end - start === 1) {\n            return this._plotRowToChunk(first, true);\n        }\n        const second = (start + 1 === overrideIndex) ? overrideRow : data[start + 1];\n        let chunk = this._mergeTwoRows(first, second, customReducer, isCustomSeries, priceValueBuilder);\n        for (let i = start + 2; i < end; i++) {\n            const row = (i === overrideIndex) ? overrideRow : data[i];\n            chunk = this._mergeChunkAndRow(chunk, row, customReducer, isCustomSeries, priceValueBuilder);\n        }\n        return chunk;\n    }\n    _convertToContext(item, priceValueBuilder) {\n        const itemData = item.data ?? {};\n        return {\n            data: item.data,\n            index: item.index,\n            originalTime: item.originalTime,\n            time: item.time,\n            priceValues: priceValueBuilder(itemData),\n        };\n    }\n    _chunkToSeriesPlotRow(chunk, isCustomSeries = false) {\n        const isCustom = isCustomSeries === true;\n        const hasCustomData = !!chunk.conflatedData;\n        const base = {\n            index: chunk.startIndex,\n            time: chunk.startTime,\n            originalTime: chunk.startTime,\n            value: [\n                isCustom ? chunk.close : chunk.open,\n                chunk.high,\n                chunk.low,\n                chunk.close,\n            ],\n            originalDataCount: chunk.originalDataCount,\n        };\n        const data = isCustom\n            ? (hasCustomData ? chunk.conflatedData : { time: chunk.startTime })\n            : undefined;\n        return {\n            ...base,\n            data,\n        };\n    }\n    _chunksToSeriesPlotRows(chunks, isCustomSeries = false) {\n        return chunks.map((chunk) => this._chunkToSeriesPlotRow(chunk, isCustomSeries));\n    }\n    /**\n     * Update only the last chunk in cached conflated data efficiently.\n     */\n    // eslint-disable-next-line max-params\n    _updateLastChunkInCache(originalData, newLastRow, conflationLevel, cachedRows, isCustomSeries = false, customReducer, priceValueBuilder) {\n        if (cachedRows.length === 0) {\n            return cachedRows;\n        }\n        const lastOriginalIndex = originalData.length - 1;\n        const overrideIndex = lastOriginalIndex;\n        const chunkStartIndex = Math.floor(lastOriginalIndex / conflationLevel) * conflationLevel;\n        const chunkEndIndex = Math.min(chunkStartIndex + conflationLevel, originalData.length);\n        if (chunkEndIndex - chunkStartIndex < conflationLevel && originalData.length > conflationLevel) {\n            // we must allocate a new array here to do a full rebuild.\n            const newOriginalData = originalData.slice();\n            newOriginalData[newOriginalData.length - 1] = newLastRow;\n            return this.conflateByFactor(originalData, conflationLevel, customReducer, isCustomSeries, priceValueBuilder);\n        }\n        const lastChunkIndex = Math.floor((lastOriginalIndex - 1) / conflationLevel);\n        const newChunkIndex = Math.floor(overrideIndex / conflationLevel);\n        if (lastChunkIndex === newChunkIndex || cachedRows.length === 1) {\n            // Data length is within the same chunk OR it's the only chunk\n            const actualEndIndex = Math.min(chunkStartIndex + conflationLevel, originalData.length);\n            const count = actualEndIndex - chunkStartIndex;\n            if (count <= 0) {\n                // This can happen if originalData.length was 0, though we guard at the top.\n                return cachedRows;\n            }\n            const mergedChunk = count === 1\n                ? this._plotRowToChunk((chunkStartIndex === overrideIndex) ? newLastRow : originalData[chunkStartIndex], /* isRemainder*/ true)\n                : this._mergeRangeWithOverride(originalData, chunkStartIndex, actualEndIndex, overrideIndex, newLastRow, customReducer, isCustomSeries, priceValueBuilder);\n            // in-place update of the cached result: avoid allocating a new array\n            cachedRows[cachedRows.length - 1] = this._chunkToSeriesPlotRow(mergedChunk, isCustomSeries);\n            return cachedRows;\n        }\n        else {\n            // update affects chunk structure\n            // we must allocate a new array here to do a full rebuild.\n            const newOriginalData = originalData.slice();\n            newOriginalData[newOriginalData.length - 1] = newLastRow;\n            return this.conflateByFactor(newOriginalData, conflationLevel, customReducer, isCustomSeries, priceValueBuilder);\n        }\n    }\n    _plotRowToChunk(item, isRemainder = false) {\n        const chunk = {\n            startIndex: item.index,\n            endIndex: item.index,\n            startTime: item.time,\n            endTime: item.time,\n            open: item.value[0 /* PlotRowValueIndex.Open */],\n            high: item.value[1 /* PlotRowValueIndex.High */],\n            low: item.value[2 /* PlotRowValueIndex.Low */],\n            close: item.value[3 /* PlotRowValueIndex.Close */],\n            originalDataCount: item.originalDataCount ?? 1,\n            conflatedData: item.data,\n            isRemainder: isRemainder,\n        };\n        return chunk;\n    }\n    _getValidatedCacheEntry(data) {\n        const entry = this._ensureCacheEntry(data);\n        const dataVersion = this._getDataVersion(data);\n        if (entry.version !== dataVersion) {\n            entry.levelResults.clear();\n            entry.version = dataVersion;\n        }\n        return entry;\n    }\n    _ensureCacheEntry(data) {\n        let entry = this._dataCache.get(data);\n        if (entry === undefined) {\n            entry = {\n                version: this._getDataVersion(data),\n                levelResults: new Map(),\n            };\n            this._dataCache.set(data, entry);\n        }\n        return entry;\n    }\n}\n", "import { DataSource } from './data-source';\nexport class PriceDataSource extends DataSource {\n    constructor(model) {\n        super();\n        this._model = model;\n    }\n    model() {\n        return this._model;\n    }\n}\n", "import { ensure, ensureNotNull } from '../helpers/assertions';\nconst barStyleFnMap = {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Bar: (findBar, barStyle, barIndex, precomputedBars) => {\n        const upColor = barStyle.upColor;\n        const downColor = barStyle.downColor;\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        const isUp = ensure(currentBar.value[0 /* PlotRowValueIndex.Open */]) <= ensure(currentBar.value[3 /* PlotRowValueIndex.Close */]);\n        return {\n            barColor: currentBar.color ?? (isUp ? upColor : downColor),\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Candlestick: (findBar, candlestickStyle, barIndex, precomputedBars) => {\n        const upColor = candlestickStyle.upColor;\n        const downColor = candlestickStyle.downColor;\n        const borderUpColor = candlestickStyle.borderUpColor;\n        const borderDownColor = candlestickStyle.borderDownColor;\n        const wickUpColor = candlestickStyle.wickUpColor;\n        const wickDownColor = candlestickStyle.wickDownColor;\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        const isUp = ensure(currentBar.value[0 /* PlotRowValueIndex.Open */]) <= ensure(currentBar.value[3 /* PlotRowValueIndex.Close */]);\n        return {\n            barColor: currentBar.color ?? (isUp ? upColor : downColor),\n            barBorderColor: currentBar.borderColor ?? (isUp ? borderUpColor : borderDownColor),\n            barWickColor: currentBar.wickColor ?? (isUp ? wickUpColor : wickDownColor),\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Custom: (findBar, customStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            barColor: currentBar.color ?? customStyle.color,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Area: (findBar, areaStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            barColor: currentBar.lineColor ?? areaStyle.lineColor,\n            lineColor: currentBar.lineColor ?? areaStyle.lineColor,\n            topColor: currentBar.topColor ?? areaStyle.topColor,\n            bottomColor: currentBar.bottomColor ?? areaStyle.bottomColor,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Baseline: (findBar, baselineStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        const isAboveBaseline = currentBar.value[3 /* PlotRowValueIndex.Close */] >= baselineStyle.baseValue.price;\n        return {\n            barColor: isAboveBaseline ? baselineStyle.topLineColor : baselineStyle.bottomLineColor,\n            topLineColor: currentBar.topLineColor ?? baselineStyle.topLineColor,\n            bottomLineColor: currentBar.bottomLineColor ?? baselineStyle.bottomLineColor,\n            topFillColor1: currentBar.topFillColor1 ?? baselineStyle.topFillColor1,\n            topFillColor2: currentBar.topFillColor2 ?? baselineStyle.topFillColor2,\n            bottomFillColor1: currentBar.bottomFillColor1 ?? baselineStyle.bottomFillColor1,\n            bottomFillColor2: currentBar.bottomFillColor2 ?? baselineStyle.bottomFillColor2,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Line: (findBar, lineStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            barColor: currentBar.color ?? lineStyle.color,\n            lineColor: currentBar.color ?? lineStyle.color,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Histogram: (findBar, histogramStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            barColor: currentBar.color ?? histogramStyle.color,\n        };\n    },\n};\nexport class SeriesBarColorer {\n    constructor(series) {\n        this._findBar = (barIndex, precomputedBars) => {\n            if (precomputedBars !== undefined) {\n                return precomputedBars.value;\n            }\n            return this._series.bars().valueAt(barIndex);\n        };\n        this._series = series;\n        this._styleGetter = barStyleFnMap[series.seriesType()];\n    }\n    barStyle(barIndex, precomputedBars) {\n        // precomputedBars: {value: [Array BarValues], previousValue: [Array BarValues] | undefined}\n        // Used to avoid binary search if bars are already known\n        return this._styleGetter(this._findBar, this._series.options(), barIndex, precomputedBars);\n    }\n}\n", "/**\n * Binary function that accepts two arguments (the first of the type of array elements, and the second is always val), and returns a value convertible to bool.\n * The value returned indicates whether the first argument is considered to go before the second.\n * The function shall not modify any of its arguments.\n */\nfunction boundCompare(lower, arr, value, compare, start = 0, to = arr.length) {\n    let count = to - start;\n    while (0 < count) {\n        const count2 = (count >> 1);\n        const mid = start + count2;\n        if (compare(arr[mid], value) === lower) {\n            start = mid + 1;\n            count -= count2 + 1;\n        }\n        else {\n            count = count2;\n        }\n    }\n    return start;\n}\nexport const lowerBound = boundCompare.bind(null, true);\nexport const upperBound = boundCompare.bind(null, false);\n", "import { lowerBound, upperBound } from '../helpers/algorithms';\nimport { ensureNotNull } from '../helpers/assertions';\n/**\n * Search direction if no data found at provided index\n */\nexport var MismatchDirection;\n(function (MismatchDirection) {\n    /**\n     * Search the nearest left item\n     */\n    MismatchDirection[MismatchDirection[\"NearestLeft\"] = -1] = \"NearestLeft\";\n    /**\n     * Do not search\n     */\n    MismatchDirection[MismatchDirection[\"None\"] = 0] = \"None\";\n    /**\n     * Search the nearest right item\n     */\n    MismatchDirection[MismatchDirection[\"NearestRight\"] = 1] = \"NearestRight\";\n})(MismatchDirection || (MismatchDirection = {}));\n// TODO: think about changing it dynamically\nconst CHUNK_SIZE = 30;\n/**\n * PlotList is an array of plot rows\n * each plot row consists of key (index in timescale) and plot value map\n */\nexport class PlotList {\n    constructor() {\n        this._items = [];\n        this._minMaxCache = new Map();\n        this._rowSearchCache = new Map();\n        this._indices = [];\n    }\n    // @returns Last row\n    last() {\n        return this.size() > 0 ? this._items[this._items.length - 1] : null;\n    }\n    firstIndex() {\n        return this.size() > 0 ? this._indexAt(0) : null;\n    }\n    lastIndex() {\n        return this.size() > 0 ? this._indexAt((this._items.length - 1)) : null;\n    }\n    size() {\n        return this._items.length;\n    }\n    isEmpty() {\n        return this.size() === 0;\n    }\n    contains(index) {\n        return this._search(index, 0 /* MismatchDirection.None */) !== null;\n    }\n    valueAt(index) {\n        return this.search(index);\n    }\n    search(index, searchMode = 0 /* MismatchDirection.None */) {\n        const pos = this._search(index, searchMode);\n        if (pos === null) {\n            return null;\n        }\n        return {\n            ...this._valueAt(pos),\n            index: this._indexAt(pos),\n        };\n    }\n    rows() {\n        return this._items;\n    }\n    minMaxOnRangeCached(start, end, plots) {\n        // this code works for single series only\n        // could fail after whitespaces implementation\n        if (this.isEmpty()) {\n            return null;\n        }\n        let result = null;\n        for (const plot of plots) {\n            const plotMinMax = this._minMaxOnRangeCachedImpl(start, end, plot);\n            result = mergeMinMax(result, plotMinMax);\n        }\n        return result;\n    }\n    setData(plotRows) {\n        this._rowSearchCache.clear();\n        this._minMaxCache.clear();\n        this._items = plotRows;\n        this._indices = plotRows.map((plotRow) => plotRow.index);\n    }\n    // TimePointIndex values for fulfilled data points\n    indices() {\n        return this._indices;\n    }\n    _indexAt(offset) {\n        return this._items[offset].index;\n    }\n    _valueAt(offset) {\n        return this._items[offset];\n    }\n    _search(index, searchMode) {\n        const exactPos = this._bsearch(index);\n        if (exactPos === null && searchMode !== 0 /* MismatchDirection.None */) {\n            switch (searchMode) {\n                case -1 /* MismatchDirection.NearestLeft */:\n                    return this._searchNearestLeft(index);\n                case 1 /* MismatchDirection.NearestRight */:\n                    return this._searchNearestRight(index);\n                default:\n                    throw new TypeError('Unknown search mode');\n            }\n        }\n        return exactPos;\n    }\n    _searchNearestLeft(index) {\n        let nearestLeftPos = this._lowerbound(index);\n        if (nearestLeftPos > 0) {\n            nearestLeftPos = nearestLeftPos - 1;\n        }\n        return (nearestLeftPos !== this._items.length && this._indexAt(nearestLeftPos) < index) ? nearestLeftPos : null;\n    }\n    _searchNearestRight(index) {\n        const nearestRightPos = this._upperbound(index);\n        return (nearestRightPos !== this._items.length && index < this._indexAt(nearestRightPos)) ? nearestRightPos : null;\n    }\n    _bsearch(index) {\n        const start = this._lowerbound(index);\n        if (start !== this._items.length && !(index < this._items[start].index)) {\n            return start;\n        }\n        return null;\n    }\n    _lowerbound(index) {\n        return lowerBound(this._items, index, (a, b) => a.index < b);\n    }\n    _upperbound(index) {\n        return upperBound(this._items, index, (a, b) => a.index > b);\n    }\n    _plotMinMax(startIndex, endIndexExclusive, plotIndex) {\n        let result = null;\n        for (let i = startIndex; i < endIndexExclusive; i++) {\n            const values = this._items[i].value;\n            const v = values[plotIndex];\n            if (Number.isNaN(v)) {\n                continue;\n            }\n            if (result === null) {\n                result = { min: v, max: v };\n            }\n            else {\n                if (v < result.min) {\n                    result.min = v;\n                }\n                if (v > result.max) {\n                    result.max = v;\n                }\n            }\n        }\n        return result;\n    }\n    _minMaxOnRangeCachedImpl(start, end, plotIndex) {\n        // this code works for single series only\n        // could fail after whitespaces implementation\n        if (this.isEmpty()) {\n            return null;\n        }\n        let result = null;\n        // assume that bar indexes only increase\n        const firstIndex = ensureNotNull(this.firstIndex());\n        const lastIndex = ensureNotNull(this.lastIndex());\n        const s = Math.max(start, firstIndex);\n        const e = Math.min(end, lastIndex);\n        const cachedLow = Math.ceil(s / CHUNK_SIZE) * CHUNK_SIZE;\n        const cachedHigh = Math.max(cachedLow, Math.floor(e / CHUNK_SIZE) * CHUNK_SIZE);\n        {\n            const startIndex = this._lowerbound(s);\n            const endIndex = this._upperbound(Math.min(e, cachedLow, end)); // non-inclusive end\n            const plotMinMax = this._plotMinMax(startIndex, endIndex, plotIndex);\n            result = mergeMinMax(result, plotMinMax);\n        }\n        let minMaxCache = this._minMaxCache.get(plotIndex);\n        if (minMaxCache === undefined) {\n            minMaxCache = new Map();\n            this._minMaxCache.set(plotIndex, minMaxCache);\n        }\n        // now go cached\n        for (let c = Math.max(cachedLow + 1, s); c < cachedHigh; c += CHUNK_SIZE) {\n            const chunkIndex = Math.floor(c / CHUNK_SIZE);\n            let chunkMinMax = minMaxCache.get(chunkIndex);\n            if (chunkMinMax === undefined) {\n                const chunkStart = this._lowerbound(chunkIndex * CHUNK_SIZE);\n                const chunkEnd = this._upperbound((chunkIndex + 1) * CHUNK_SIZE - 1);\n                chunkMinMax = this._plotMinMax(chunkStart, chunkEnd, plotIndex);\n                minMaxCache.set(chunkIndex, chunkMinMax);\n            }\n            result = mergeMinMax(result, chunkMinMax);\n        }\n        // tail\n        {\n            const startIndex = this._lowerbound(cachedHigh);\n            const endIndex = this._upperbound(e); // non-inclusive end\n            const plotMinMax = this._plotMinMax(startIndex, endIndex, plotIndex);\n            result = mergeMinMax(result, plotMinMax);\n        }\n        return result;\n    }\n}\nfunction mergeMinMax(first, second) {\n    if (first === null) {\n        return second;\n    }\n    else {\n        if (second === null) {\n            return first;\n        }\n        else {\n            // merge MinMax values\n            const min = Math.min(first.min, second.min);\n            const max = Math.max(first.max, second.max);\n            return { min: min, max: max };\n        }\n    }\n}\n", "import { PlotList } from './plot-list';\nexport function createSeriesPlotList() {\n    return new PlotList();\n}\n", "import { setLineStyle } from '../renderers/draw-line';\nexport const drawingUtils = {\n    setLineStyle: setLineStyle,\n};\n", "import { drawingUtils } from './primitive-drawing-utils';\nclass PrimitiveRendererWrapper {\n    constructor(baseRenderer) {\n        this._baseRenderer = baseRenderer;\n    }\n    draw(target, isHovered, hitTestData) {\n        this._baseRenderer.draw(target, drawingUtils);\n    }\n    drawBackground(target, isHovered, hitTestData) {\n        this._baseRenderer.drawBackground?.(target, drawingUtils);\n    }\n}\nclass PrimitivePaneViewWrapper {\n    constructor(paneView) {\n        this._cache = null;\n        this._paneView = paneView;\n    }\n    renderer() {\n        const baseRenderer = this._paneView.renderer();\n        if (baseRenderer === null) {\n            return null;\n        }\n        if (this._cache?.base === baseRenderer) {\n            return this._cache.wrapper;\n        }\n        const wrapper = new PrimitiveRendererWrapper(baseRenderer);\n        this._cache = {\n            base: baseRenderer,\n            wrapper,\n        };\n        return wrapper;\n    }\n    zOrder() {\n        return this._paneView.zOrder?.() ?? 'normal';\n    }\n}\nexport class PrimitiveWrapper {\n    constructor(primitive) {\n        this._paneViewsCache = null;\n        this._primitive = primitive;\n    }\n    primitive() {\n        return this._primitive;\n    }\n    updateAllViews() {\n        this._primitive.updateAllViews?.();\n    }\n    paneViews() {\n        const base = this._primitive.paneViews?.() ?? [];\n        if (this._paneViewsCache?.base === base) {\n            return this._paneViewsCache.wrapper;\n        }\n        const wrapper = base.map((pw) => new PrimitivePaneViewWrapper(pw));\n        this._paneViewsCache = {\n            base,\n            wrapper,\n        };\n        return wrapper;\n    }\n    hitTest(x, y) {\n        return this._primitive.hitTest?.(x, y) ?? null;\n    }\n}\nexport class PanePrimitiveWrapper extends PrimitiveWrapper {\n    labelPaneViews() {\n        return [];\n    }\n}\n", "import { TimeAxisViewRenderer } from '../renderers/time-axis-view-renderer';\nimport { PriceAxisView } from '../views/price-axis/price-axis-view';\nimport { PrimitiveWrapper } from './pane-primitive-wrapper';\nimport { drawingUtils } from './primitive-drawing-utils';\nclass SeriesPrimitiveRendererWrapper {\n    constructor(baseRenderer) {\n        this._baseRenderer = baseRenderer;\n    }\n    draw(target, isHovered, hitTestData) {\n        this._baseRenderer.draw(target, drawingUtils);\n    }\n    drawBackground(target, isHovered, hitTestData) {\n        this._baseRenderer.drawBackground?.(target, drawingUtils);\n    }\n}\nclass SeriesPrimitivePaneViewWrapper {\n    constructor(paneView) {\n        this._cache = null;\n        this._paneView = paneView;\n    }\n    renderer() {\n        const baseRenderer = this._paneView.renderer();\n        if (baseRenderer === null) {\n            return null;\n        }\n        if (this._cache?.base === baseRenderer) {\n            return this._cache.wrapper;\n        }\n        const wrapper = new SeriesPrimitiveRendererWrapper(baseRenderer);\n        this._cache = {\n            base: baseRenderer,\n            wrapper,\n        };\n        return wrapper;\n    }\n    zOrder() {\n        return this._paneView.zOrder?.() ?? 'normal';\n    }\n}\nfunction getAxisViewData(baseView) {\n    return {\n        text: baseView.text(),\n        coordinate: baseView.coordinate(),\n        fixedCoordinate: baseView.fixedCoordinate?.(),\n        color: baseView.textColor(),\n        background: baseView.backColor(),\n        visible: baseView.visible?.() ?? true,\n        tickVisible: baseView.tickVisible?.() ?? true,\n    };\n}\nclass SeriesPrimitiveTimeAxisViewWrapper {\n    constructor(baseView, timeScale) {\n        this._renderer = new TimeAxisViewRenderer();\n        this._baseView = baseView;\n        this._timeScale = timeScale;\n    }\n    renderer() {\n        this._renderer.setData({\n            width: this._timeScale.width(),\n            ...getAxisViewData(this._baseView),\n        });\n        return this._renderer;\n    }\n}\nclass SeriesPrimitivePriceAxisViewWrapper extends PriceAxisView {\n    constructor(baseView, priceScale) {\n        super();\n        this._baseView = baseView;\n        this._priceScale = priceScale;\n    }\n    _updateRendererData(axisRendererData, paneRendererData, commonRendererData) {\n        const data = getAxisViewData(this._baseView);\n        commonRendererData.background = data.background;\n        axisRendererData.color = data.color;\n        const additionalPadding = 2 / 12 * this._priceScale.fontSize();\n        commonRendererData.additionalPaddingTop = additionalPadding;\n        commonRendererData.additionalPaddingBottom = additionalPadding;\n        commonRendererData.coordinate = data.coordinate;\n        commonRendererData.fixedCoordinate = data.fixedCoordinate;\n        axisRendererData.text = data.text;\n        axisRendererData.visible = data.visible;\n        axisRendererData.tickVisible = data.tickVisible;\n    }\n}\nexport class SeriesPrimitiveWrapper extends PrimitiveWrapper {\n    constructor(primitive, series) {\n        super(primitive);\n        this._timeAxisViewsCache = null;\n        this._priceAxisViewsCache = null;\n        this._priceAxisPaneViewsCache = null;\n        this._timeAxisPaneViewsCache = null;\n        this._series = series;\n    }\n    timeAxisViews() {\n        const base = this._primitive.timeAxisViews?.() ?? [];\n        if (this._timeAxisViewsCache?.base === base) {\n            return this._timeAxisViewsCache.wrapper;\n        }\n        const timeScale = this._series.model().timeScale();\n        const wrapper = base.map((aw) => new SeriesPrimitiveTimeAxisViewWrapper(aw, timeScale));\n        this._timeAxisViewsCache = {\n            base,\n            wrapper,\n        };\n        return wrapper;\n    }\n    priceAxisViews() {\n        const base = this._primitive.priceAxisViews?.() ?? [];\n        if (this._priceAxisViewsCache?.base === base) {\n            return this._priceAxisViewsCache.wrapper;\n        }\n        const priceScale = this._series.priceScale();\n        const wrapper = base.map((aw) => new SeriesPrimitivePriceAxisViewWrapper(aw, priceScale));\n        this._priceAxisViewsCache = {\n            base,\n            wrapper,\n        };\n        return wrapper;\n    }\n    priceAxisPaneViews() {\n        const base = this._primitive.priceAxisPaneViews?.() ?? [];\n        if (this._priceAxisPaneViewsCache?.base === base) {\n            return this._priceAxisPaneViewsCache.wrapper;\n        }\n        const wrapper = base.map((pw) => new SeriesPrimitivePaneViewWrapper(pw));\n        this._priceAxisPaneViewsCache = {\n            base,\n            wrapper,\n        };\n        return wrapper;\n    }\n    timeAxisPaneViews() {\n        const base = this._primitive.timeAxisPaneViews?.() ?? [];\n        if (this._timeAxisPaneViewsCache?.base === base) {\n            return this._timeAxisPaneViewsCache.wrapper;\n        }\n        const wrapper = base.map((pw) => new SeriesPrimitivePaneViewWrapper(pw));\n        this._timeAxisPaneViewsCache = {\n            base,\n            wrapper,\n        };\n        return wrapper;\n    }\n    autoscaleInfo(startTimePoint, endTimePoint) {\n        return (this._primitive.autoscaleInfo?.(startTimePoint, endTimePoint) ?? null);\n    }\n}\n", "import { PercentageFormatter } from '../formatters/percentage-formatter';\nimport { PriceFormatter } from '../formatters/price-formatter';\nimport { VolumeFormatter } from '../formatters/volume-formatter';\nimport { ensureNotNull } from '../helpers/assertions';\nimport { isInteger, merge } from '../helpers/strict-type-checks';\nimport { PanePriceAxisView } from '../views/pane/pane-price-axis-view';\nimport { SeriesHorizontalBaseLinePaneView } from '../views/pane/series-horizontal-base-line-pane-view';\nimport { SeriesLastPriceAnimationPaneView } from '../views/pane/series-last-price-animation-pane-view';\nimport { SeriesPriceLinePaneView } from '../views/pane/series-price-line-pane-view';\nimport { SeriesPriceAxisView } from '../views/price-axis/series-price-axis-view';\nimport { AutoscaleInfoImpl } from './autoscale-info-impl';\nimport { CONFLATION_ERROR_MESSAGES } from './conflation/constants';\nimport { CustomPriceLine } from './custom-price-line';\nimport { DataConflater } from './data-conflater';\nimport { isDefaultPriceScale } from './default-price-scale';\nimport { PriceDataSource } from './price-data-source';\nimport { PriceRangeImpl } from './price-range-impl';\nimport { SeriesBarColorer } from './series-bar-colorer';\nimport { createSeriesPlotList } from './series-data';\nimport { SeriesPrimitiveWrapper } from './series-primitive-wrapper';\nfunction extractPrimitivePaneViews(primitives, extractor, zOrder, destination) {\n    primitives.forEach((wrapper) => {\n        extractor(wrapper).forEach((paneView) => {\n            if (paneView.zOrder() !== zOrder) {\n                return;\n            }\n            destination.push(paneView);\n        });\n    });\n}\nfunction primitivePaneViewsExtractor(wrapper) {\n    return wrapper.paneViews();\n}\nfunction primitivePricePaneViewsExtractor(wrapper) {\n    return wrapper.priceAxisPaneViews();\n}\nfunction primitiveTimePaneViewsExtractor(wrapper) {\n    return wrapper.timeAxisPaneViews();\n}\nconst lineBasedSeries = ['Area', 'Line', 'Baseline'];\nexport class Series extends PriceDataSource {\n    constructor(model, seriesType, options, createPaneView, customPaneView) {\n        super(model);\n        this._data = createSeriesPlotList();\n        this._priceLineView = new SeriesPriceLinePaneView(this);\n        this._customPriceLines = [];\n        this._baseHorizontalLineView = new SeriesHorizontalBaseLinePaneView(this);\n        this._lastPriceAnimationPaneView = null;\n        this._barColorerCache = null;\n        this._animationTimeoutId = null;\n        this._primitives = [];\n        this._dataConflater = new DataConflater();\n        this._conflationByFactorCache = new Map();\n        this._customConflationReducer = null;\n        this._options = options;\n        this._seriesType = seriesType;\n        const priceAxisView = new SeriesPriceAxisView(this);\n        this._priceAxisViews = [priceAxisView];\n        this._panePriceAxisView = new PanePriceAxisView(priceAxisView, this, model);\n        if (lineBasedSeries.includes(this._seriesType)) {\n            this._lastPriceAnimationPaneView = new SeriesLastPriceAnimationPaneView(this);\n        }\n        this._recreateFormatter();\n        this._paneView = createPaneView(this, this.model(), customPaneView);\n        if (this._seriesType === 'Custom') {\n            const paneView = this._paneView;\n            if (paneView.conflationReducer) {\n                this.setCustomConflationReducer(paneView.conflationReducer);\n            }\n        }\n    }\n    destroy() {\n        if (this._animationTimeoutId !== null) {\n            clearTimeout(this._animationTimeoutId);\n        }\n    }\n    priceLineColor(lastBarColor) {\n        return this._options.priceLineColor || lastBarColor;\n    }\n    lastValueData(globalLast) {\n        const noDataRes = { noData: true };\n        const priceScale = this.priceScale();\n        if (this.model().timeScale().isEmpty() || priceScale.isEmpty() || this._data.isEmpty()) {\n            return noDataRes;\n        }\n        const visibleBars = this.model().timeScale().visibleStrictRange();\n        const firstValue = this.firstValue();\n        if (visibleBars === null || firstValue === null) {\n            return noDataRes;\n        }\n        // find range of bars inside range\n        // TODO: make it more optimal\n        let bar;\n        let lastIndex;\n        if (globalLast) {\n            const lastBar = this._data.last();\n            if (lastBar === null) {\n                return noDataRes;\n            }\n            bar = lastBar;\n            lastIndex = lastBar.index;\n        }\n        else {\n            const endBar = this._data.search(visibleBars.right(), -1 /* MismatchDirection.NearestLeft */);\n            if (endBar === null) {\n                return noDataRes;\n            }\n            bar = this._data.valueAt(endBar.index);\n            if (bar === null) {\n                return noDataRes;\n            }\n            lastIndex = endBar.index;\n        }\n        const price = bar.value[3 /* PlotRowValueIndex.Close */];\n        const barColorer = this.barColorer();\n        const style = barColorer.barStyle(lastIndex, { value: bar });\n        const coordinate = priceScale.priceToCoordinate(price, firstValue.value);\n        return {\n            noData: false,\n            price,\n            text: priceScale.formatPrice(price, firstValue.value),\n            formattedPriceAbsolute: priceScale.formatPriceAbsolute(price),\n            formattedPricePercentage: priceScale.formatPricePercentage(price, firstValue.value),\n            color: style.barColor,\n            coordinate: coordinate,\n            index: lastIndex,\n        };\n    }\n    barColorer() {\n        if (this._barColorerCache !== null) {\n            return this._barColorerCache;\n        }\n        this._barColorerCache = new SeriesBarColorer(this);\n        return this._barColorerCache;\n    }\n    options() {\n        return this._options;\n    }\n    applyOptions(options) {\n        const targetPriceScaleId = options.priceScaleId;\n        if (targetPriceScaleId !== undefined && targetPriceScaleId !== this._options.priceScaleId) {\n            // series cannot do it itself, ask model\n            this.model().moveSeriesToScale(this, targetPriceScaleId);\n        }\n        // Check if conflation-related options are changing\n        const conflationOptionsChanged = options.conflationThresholdFactor !== undefined;\n        merge(this._options, options);\n        if (conflationOptionsChanged) {\n            this._conflationByFactorCache.clear();\n            this.model().lightUpdate();\n        }\n        if (options.priceFormat !== undefined) {\n            this._recreateFormatter();\n            // updated formatter might affect rendering  and as a consequence of this the width of price axis might be changed\n            // thus we need to force the chart to do a full update to apply changes correctly\n            // full update is quite heavy operation in terms of performance\n            // but updating formatter looks like quite rare so forcing a full update here shouldn't affect the performance a lot\n            this.model().fullUpdate();\n        }\n        this.model().updateSource(this);\n        // a series might affect crosshair by some options (like crosshair markers)\n        // that's why we need to update crosshair as well\n        this.model().updateCrosshair();\n        this._paneView.update('options');\n    }\n    setData(data, updateInfo) {\n        this._data.setData(data);\n        this._conflationByFactorCache.clear();\n        const ts = this.model().timeScale();\n        const tsOptions = ts.options();\n        if (tsOptions.enableConflation && tsOptions.precomputeConflationOnInit) {\n            this._precomputeConflationLevels(tsOptions.precomputeConflationPriority);\n        }\n        this._paneView.update('data');\n        if (this._lastPriceAnimationPaneView !== null) {\n            if (updateInfo && updateInfo.lastBarUpdatedOrNewBarsAddedToTheRight) {\n                this._lastPriceAnimationPaneView.onNewRealtimeDataReceived();\n            }\n            else if (data.length === 0) {\n                this._lastPriceAnimationPaneView.onDataCleared();\n            }\n        }\n        const sourcePane = this.model().paneForSource(this);\n        this.model().recalculatePane(sourcePane);\n        this.model().updateSource(this);\n        this.model().updateCrosshair();\n        this.model().lightUpdate();\n    }\n    createPriceLine(options) {\n        const result = new CustomPriceLine(this, options);\n        this._customPriceLines.push(result);\n        this.model().updateSource(this);\n        return result;\n    }\n    removePriceLine(line) {\n        const index = this._customPriceLines.indexOf(line);\n        if (index !== -1) {\n            this._customPriceLines.splice(index, 1);\n        }\n        this.model().updateSource(this);\n    }\n    priceLines() {\n        return this._customPriceLines;\n    }\n    seriesType() {\n        return this._seriesType;\n    }\n    firstValue() {\n        const bar = this.firstBar();\n        if (bar === null) {\n            return null;\n        }\n        return {\n            value: bar.value[3 /* PlotRowValueIndex.Close */],\n            timePoint: bar.time,\n        };\n    }\n    firstBar() {\n        const visibleBars = this.model().timeScale().visibleStrictRange();\n        if (visibleBars === null) {\n            return null;\n        }\n        const startTimePoint = visibleBars.left();\n        return this._data.search(startTimePoint, 1 /* MismatchDirection.NearestRight */);\n    }\n    bars() {\n        return this._data;\n    }\n    setCustomConflationReducer(reducer) {\n        this._customConflationReducer = reducer;\n        // reset cache to respect new reducer\n        this._conflationByFactorCache.clear();\n    }\n    /**\n     * Check if conflation is currently enabled for this series.\n     */\n    isConflationEnabled() {\n        const timeScale = this.model().timeScale();\n        if (!timeScale.options().enableConflation) {\n            return false;\n        }\n        return this._calculateConflationFactor() > 1;\n    }\n    /**\n     * Efficiently update conflation when only the last data point changes.\n     * This avoids rebuilding all conflated chunks.\n     */\n    updateLastConflatedChunk(newLastRow) {\n        if (!this.isConflationEnabled()) {\n            return;\n        }\n        const conflationFactor = this._calculateConflationFactor();\n        if (!this._conflationByFactorCache.has(conflationFactor)) {\n            return;\n        }\n        const isCustomSeries = this._seriesType === 'Custom';\n        const customReducer = isCustomSeries ? this._customConflationReducer || undefined : undefined;\n        const priceValueBuilder = isCustomSeries && this._paneView.priceValueBuilder\n            ? (item) => {\n                const customPaneView = this._paneView;\n                const plotRow = item;\n                const result = customPaneView.priceValueBuilder(plotRow);\n                return Array.isArray(result) ? result : [typeof result === 'number' ? result : 0];\n            }\n            : undefined;\n        const updatedConflatedRows = this._dataConflater.updateLastConflatedChunk(this._data.rows(), newLastRow, conflationFactor, customReducer, isCustomSeries, priceValueBuilder);\n        const conflatedList = createSeriesPlotList();\n        conflatedList.setData(updatedConflatedRows);\n        this._conflationByFactorCache.set(conflationFactor, conflatedList);\n    }\n    conflatedBars() {\n        const timeScale = this.model().timeScale();\n        const conflationEnabled = timeScale.options().enableConflation;\n        if (this._seriesType === 'Custom' && this._customConflationReducer === null) {\n            return this._data;\n        }\n        if (!conflationEnabled) {\n            return this._data;\n        }\n        const factor = this._calculateConflationFactor();\n        const cached = this._conflationByFactorCache.get(factor);\n        if (cached) {\n            return cached;\n        }\n        this._regenerateConflatedDataByFactor(factor);\n        const built = this._conflationByFactorCache.get(factor);\n        return built ?? this._data;\n    }\n    dataAt(time) {\n        const prices = this._data.valueAt(time);\n        if (prices === null) {\n            return null;\n        }\n        if (this._seriesType === 'Bar' || this._seriesType === 'Candlestick' || this._seriesType === 'Custom') {\n            return {\n                open: prices.value[0 /* PlotRowValueIndex.Open */],\n                high: prices.value[1 /* PlotRowValueIndex.High */],\n                low: prices.value[2 /* PlotRowValueIndex.Low */],\n                close: prices.value[3 /* PlotRowValueIndex.Close */],\n            };\n        }\n        else {\n            return prices.value[3 /* PlotRowValueIndex.Close */];\n        }\n    }\n    topPaneViews(pane) {\n        const res = [];\n        extractPrimitivePaneViews(this._primitives, primitivePaneViewsExtractor, 'top', res);\n        const animationPaneView = this._lastPriceAnimationPaneView;\n        if (animationPaneView === null || !animationPaneView.visible()) {\n            return res;\n        }\n        if (this._animationTimeoutId === null && animationPaneView.animationActive()) {\n            this._animationTimeoutId = setTimeout(() => {\n                this._animationTimeoutId = null;\n                this.model().cursorUpdate();\n            }, 0);\n        }\n        animationPaneView.invalidateStage();\n        res.unshift(animationPaneView);\n        return res;\n    }\n    paneViews() {\n        const res = [];\n        if (!this._isOverlay()) {\n            res.push(this._baseHorizontalLineView);\n        }\n        res.push(this._paneView, this._priceLineView);\n        const priceLineViews = this._customPriceLines.map((line) => line.paneView());\n        res.push(...priceLineViews);\n        extractPrimitivePaneViews(this._primitives, primitivePaneViewsExtractor, 'normal', res);\n        return res;\n    }\n    bottomPaneViews() {\n        return this._extractPaneViews(primitivePaneViewsExtractor, 'bottom');\n    }\n    pricePaneViews(zOrder) {\n        return this._extractPaneViews(primitivePricePaneViewsExtractor, zOrder);\n    }\n    timePaneViews(zOrder) {\n        return this._extractPaneViews(primitiveTimePaneViewsExtractor, zOrder);\n    }\n    primitiveHitTest(x, y) {\n        return this._primitives\n            .map((primitive) => primitive.hitTest(x, y))\n            .filter((result) => result !== null);\n    }\n    labelPaneViews() {\n        return [\n            this._panePriceAxisView,\n            ...this._customPriceLines.map((line) => line.labelPaneView()),\n        ];\n    }\n    priceAxisViews(pane, priceScale) {\n        if (priceScale !== this._priceScale && !this._isOverlay()) {\n            return [];\n        }\n        const result = [...this._priceAxisViews];\n        for (const customPriceLine of this._customPriceLines) {\n            result.push(customPriceLine.priceAxisView());\n        }\n        this._primitives.forEach((wrapper) => {\n            result.push(...wrapper.priceAxisViews());\n        });\n        return result;\n    }\n    timeAxisViews() {\n        const res = [];\n        this._primitives.forEach((wrapper) => {\n            res.push(...wrapper.timeAxisViews());\n        });\n        return res;\n    }\n    autoscaleInfo(startTimePoint, endTimePoint) {\n        if (this._options.autoscaleInfoProvider !== undefined) {\n            const autoscaleInfo = this._options.autoscaleInfoProvider(() => {\n                const res = this._autoscaleInfoImpl(startTimePoint, endTimePoint);\n                return (res === null) ? null : res.toRaw();\n            });\n            return AutoscaleInfoImpl.fromRaw(autoscaleInfo);\n        }\n        return this._autoscaleInfoImpl(startTimePoint, endTimePoint);\n    }\n    base() {\n        const priceFormat = this._options.priceFormat;\n        return priceFormat.base ?? (1 / priceFormat.minMove);\n    }\n    formatter() {\n        return this._formatter;\n    }\n    updateAllViews() {\n        this._paneView.update();\n        for (const priceAxisView of this._priceAxisViews) {\n            priceAxisView.update();\n        }\n        for (const customPriceLine of this._customPriceLines) {\n            customPriceLine.update();\n        }\n        this._priceLineView.update();\n        this._baseHorizontalLineView.update();\n        this._lastPriceAnimationPaneView?.update();\n        this._primitives.forEach((wrapper) => wrapper.updateAllViews());\n    }\n    priceScale() {\n        return ensureNotNull(super.priceScale());\n    }\n    markerDataAtIndex(index) {\n        const getValue = (this._seriesType === 'Line' || this._seriesType === 'Area' || this._seriesType === 'Baseline') &&\n            this._options.crosshairMarkerVisible;\n        if (!getValue) {\n            return null;\n        }\n        const bar = this._data.valueAt(index);\n        if (bar === null) {\n            return null;\n        }\n        const price = bar.value[3 /* PlotRowValueIndex.Close */];\n        const radius = this._markerRadius();\n        const borderColor = this._markerBorderColor();\n        const borderWidth = this._markerBorderWidth();\n        const backgroundColor = this._markerBackgroundColor(index);\n        return { price, radius, borderColor, borderWidth, backgroundColor };\n    }\n    title() {\n        return this._options.title;\n    }\n    visible() {\n        return this._options.visible;\n    }\n    attachPrimitive(primitive) {\n        this._primitives.push(new SeriesPrimitiveWrapper(primitive, this));\n    }\n    detachPrimitive(source) {\n        this._primitives = this._primitives.filter((wrapper) => wrapper.primitive() !== source);\n    }\n    customSeriesPlotValuesBuilder() {\n        if (this._seriesType !== 'Custom') {\n            return undefined;\n        }\n        return (data) => {\n            return this._paneView.priceValueBuilder(data);\n        };\n    }\n    customSeriesWhitespaceCheck() {\n        if (this._seriesType !== 'Custom') {\n            return undefined;\n        }\n        return (data) => {\n            return this._paneView.isWhitespace(data);\n        };\n    }\n    fulfilledIndices() {\n        return this._data.indices();\n    }\n    _isOverlay() {\n        const priceScale = this.priceScale();\n        return !isDefaultPriceScale(priceScale.id());\n    }\n    _autoscaleInfoImpl(startTimePoint, endTimePoint) {\n        if (!isInteger(startTimePoint) || !isInteger(endTimePoint) || this._data.isEmpty()) {\n            return null;\n        }\n        // TODO: refactor this\n        // series data is strongly hardcoded to keep bars\n        const plots = this._seriesType === 'Line' || this._seriesType === 'Area' || this._seriesType === 'Baseline' || this._seriesType === 'Histogram'\n            ? [3 /* PlotRowValueIndex.Close */]\n            : [2 /* PlotRowValueIndex.Low */, 1 /* PlotRowValueIndex.High */];\n        const barsMinMax = this._data.minMaxOnRangeCached(startTimePoint, endTimePoint, plots);\n        let range = barsMinMax !== null ? new PriceRangeImpl(barsMinMax.min, barsMinMax.max) : null;\n        let margins = null;\n        if (this.seriesType() === 'Histogram') {\n            const base = this._options.base;\n            const rangeWithBase = new PriceRangeImpl(base, base);\n            range = range !== null ? range.merge(rangeWithBase) : rangeWithBase;\n        }\n        this._primitives.forEach((primitive) => {\n            const primitiveAutoscale = primitive.autoscaleInfo(startTimePoint, endTimePoint);\n            if (primitiveAutoscale?.priceRange) {\n                const primitiveRange = new PriceRangeImpl(primitiveAutoscale.priceRange.minValue, primitiveAutoscale.priceRange.maxValue);\n                range = range !== null ? range.merge(primitiveRange) : primitiveRange;\n            }\n            if (primitiveAutoscale?.margins) {\n                margins = primitiveAutoscale.margins;\n            }\n        });\n        return new AutoscaleInfoImpl(range, margins);\n    }\n    _markerRadius() {\n        switch (this._seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline':\n                return this._options.crosshairMarkerRadius;\n        }\n        return 0;\n    }\n    _markerBorderColor() {\n        switch (this._seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline': {\n                const crosshairMarkerBorderColor = this._options.crosshairMarkerBorderColor;\n                if (crosshairMarkerBorderColor.length !== 0) {\n                    return crosshairMarkerBorderColor;\n                }\n            }\n        }\n        return null;\n    }\n    _markerBorderWidth() {\n        switch (this._seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline':\n                return this._options.crosshairMarkerBorderWidth;\n        }\n        return 0;\n    }\n    _markerBackgroundColor(index) {\n        switch (this._seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline': {\n                const crosshairMarkerBackgroundColor = this._options.crosshairMarkerBackgroundColor;\n                if (crosshairMarkerBackgroundColor.length !== 0) {\n                    return crosshairMarkerBackgroundColor;\n                }\n            }\n        }\n        return this.barColorer().barStyle(index).barColor;\n    }\n    _recreateFormatter() {\n        switch (this._options.priceFormat.type) {\n            case 'custom': {\n                const formatter = this._options.priceFormat.formatter;\n                this._formatter = {\n                    format: formatter,\n                    formatTickmarks: this._options.priceFormat.tickmarksFormatter ?? ((prices) => prices.map(formatter)),\n                };\n                break;\n            }\n            case 'volume': {\n                this._formatter = new VolumeFormatter(this._options.priceFormat.precision);\n                break;\n            }\n            case 'percent': {\n                this._formatter = new PercentageFormatter(this._options.priceFormat.precision);\n                break;\n            }\n            default: {\n                const priceScale = Math.pow(10, this._options.priceFormat.precision);\n                this._formatter = new PriceFormatter(priceScale, this._options.priceFormat.minMove * priceScale);\n            }\n        }\n        if (this._priceScale !== null) {\n            this._priceScale.updateFormatter();\n        }\n    }\n    _extractPaneViews(extractor, zOrder) {\n        const res = [];\n        extractPrimitivePaneViews(this._primitives, extractor, zOrder, res);\n        return res;\n    }\n    _calculateConflationFactor() {\n        const { barSpacing, devicePixelRatio, effectiveSmoothing } = this._getConflationParams();\n        return this._dataConflater.calculateConflationLevelWithSmoothing(barSpacing, devicePixelRatio, effectiveSmoothing);\n    }\n    _getConflationParams() {\n        const timeScale = this.model().timeScale();\n        const barSpacing = timeScale.barSpacing();\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        const globalSmoothing = timeScale.options().conflationThresholdFactor;\n        const seriesSmoothing = this._options.conflationThresholdFactor;\n        const effectiveSmoothing = seriesSmoothing ?? globalSmoothing ?? 1.0;\n        return { barSpacing, devicePixelRatio, effectiveSmoothing };\n    }\n    _buildConflatedListByFactor(factor) {\n        const originalRows = this._data.rows();\n        let conflatedRows;\n        if (this._seriesType === 'Custom' && this._customConflationReducer !== null) {\n            const priceValueBuilder = this.customSeriesPlotValuesBuilder();\n            if (!priceValueBuilder) {\n                throw new Error(CONFLATION_ERROR_MESSAGES.missingPriceValueBuilder);\n            }\n            conflatedRows = this._dataConflater.conflateByFactor(originalRows, factor, this._customConflationReducer, true, (item) => priceValueBuilder(item));\n        }\n        else {\n            conflatedRows = this._dataConflater.conflateByFactor(originalRows, factor);\n        }\n        const list = createSeriesPlotList();\n        list.setData(conflatedRows);\n        return list;\n    }\n    _regenerateConflatedDataByFactor(factor) {\n        const list = this._buildConflatedListByFactor(factor);\n        this._conflationByFactorCache.set(factor, list);\n    }\n    _precomputeConflationLevels(priority) {\n        if (this._seriesType === 'Custom' &&\n            (this._customConflationReducer === null ||\n                !this.customSeriesPlotValuesBuilder())) {\n            return;\n        }\n        // Clear precomputed cache when data changes\n        this._conflationByFactorCache.clear();\n        const conflateFactors = this.model().timeScale().possibleConflationFactors();\n        for (const lvl of conflateFactors) {\n            const task = () => {\n                this._precomputeConflationLevel(lvl);\n            };\n            // Use Prioritized Task Scheduling API if available\n            const globalObj = ((typeof window === 'object' && window) || (typeof self === 'object' && self));\n            if (globalObj?.scheduler?.postTask) {\n                void globalObj.scheduler.postTask(() => { task(); }, { priority });\n            }\n            else {\n                void Promise.resolve().then(() => task());\n            }\n        }\n    }\n    _precomputeConflationLevel(factor) {\n        // Check if already cached\n        if (this._conflationByFactorCache.has(factor)) {\n            return;\n        }\n        const originalRows = this._data.rows();\n        if (originalRows.length === 0) {\n            return;\n        }\n        const list = this._buildConflatedListByFactor(factor);\n        this._conflationByFactorCache.set(factor, list);\n    }\n}\n", "import { ensure } from '../helpers/assertions';\nimport { Series } from './series';\nconst magnetPlotRowKeys = [\n    3 /* PlotRowValueIndex.Close */,\n];\nconst magnetOHLCPlotRowKeys = [\n    0 /* PlotRowValueIndex.Open */,\n    1 /* PlotRowValueIndex.High */,\n    2 /* PlotRowValueIndex.Low */,\n    3 /* PlotRowValueIndex.Close */,\n];\nexport class Magnet {\n    constructor(options) {\n        this._options = options;\n    }\n    align(price, index, pane) {\n        let res = price;\n        if (this._options.mode === 0 /* CrosshairMode.Normal */) {\n            return res;\n        }\n        const defaultPriceScale = pane.defaultPriceScale();\n        const firstValue = defaultPriceScale.firstValue();\n        if (firstValue === null) {\n            return res;\n        }\n        const y = defaultPriceScale.priceToCoordinate(price, firstValue);\n        // get all serieses from the pane\n        const serieses = pane.dataSources().filter(((ds) => (ds instanceof Series)));\n        const candidates = serieses.reduce((acc, series) => {\n            if (pane.isOverlay(series) || !series.visible()) {\n                return acc;\n            }\n            const ps = series.priceScale();\n            const bars = series.bars();\n            if (ps.isEmpty() || !bars.contains(index)) {\n                return acc;\n            }\n            const bar = bars.valueAt(index);\n            if (bar === null) {\n                return acc;\n            }\n            // convert bar to pixels\n            const firstPrice = ensure(series.firstValue());\n            const plotRowKeys = this._options.mode === 3 /* CrosshairMode.MagnetOHLC */\n                ? magnetOHLCPlotRowKeys\n                : magnetPlotRowKeys;\n            return acc.concat(plotRowKeys.map((key) => ps.priceToCoordinate(bar.value[key], firstPrice.value)));\n        }, []);\n        if (candidates.length === 0) {\n            return res;\n        }\n        candidates.sort((y1, y2) => Math.abs(y1 - y) - Math.abs(y2 - y));\n        const nearest = candidates[0];\n        res = defaultPriceScale.coordinateToPrice(nearest, firstValue);\n        return res;\n    }\n}\n", "export function clamp(value, minVal, maxVal) {\n    return Math.min(Math.max(value, minVal), maxVal);\n}\nexport function isBaseDecimal(value) {\n    if (value < 0) {\n        return false;\n    }\n    // cannot calculate exactly due to rounding error\n    if (value > 1e18) {\n        return true;\n    }\n    for (let current = value; current > 1; current /= 10) {\n        if ((current % 10) !== 0) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function greaterOrEqual(x1, x2, epsilon) {\n    return (x2 - x1) <= epsilon;\n}\nexport function equal(x1, x2, epsilon) {\n    return Math.abs(x1 - x2) < epsilon;\n}\n// We can't use Math.min(...arr) because that would only support arrays shorter than 65536 items.\nexport function min(arr) {\n    if (arr.length < 1) {\n        throw Error('array is empty');\n    }\n    let minVal = arr[0];\n    for (let i = 1; i < arr.length; ++i) {\n        if (arr[i] < minVal) {\n            minVal = arr[i];\n        }\n    }\n    return minVal;\n}\nexport function ceiledEven(x) {\n    const ceiled = Math.ceil(x);\n    return (ceiled % 2 !== 0) ? ceiled - 1 : ceiled;\n}\nexport function ceiledOdd(x) {\n    const ceiled = Math.ceil(x);\n    return (ceiled % 2 === 0) ? ceiled - 1 : ceiled;\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nimport { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { setLineStyle, strokeInPixel } from './draw-line';\nexport class GridRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    _drawImpl({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null) {\n            return;\n        }\n        const lineWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n        ctx.lineWidth = lineWidth;\n        strokeInPixel(ctx, () => {\n            const data = ensureNotNull(this._data);\n            if (data.vertLinesVisible) {\n                ctx.strokeStyle = data.vertLinesColor;\n                setLineStyle(ctx, data.vertLineStyle);\n                ctx.beginPath();\n                for (const timeMark of data.timeMarks) {\n                    const x = Math.round(timeMark.coord * horizontalPixelRatio);\n                    ctx.moveTo(x, -lineWidth);\n                    ctx.lineTo(x, bitmapSize.height + lineWidth);\n                }\n                ctx.stroke();\n            }\n            if (data.horzLinesVisible) {\n                ctx.strokeStyle = data.horzLinesColor;\n                setLineStyle(ctx, data.horzLineStyle);\n                ctx.beginPath();\n                for (const priceMark of data.priceMarks) {\n                    const y = Math.round(priceMark.coord * verticalPixelRatio);\n                    ctx.moveTo(-lineWidth, y);\n                    ctx.lineTo(bitmapSize.width + lineWidth, y);\n                }\n                ctx.stroke();\n            }\n        });\n    }\n}\n", "import { GridRenderer } from '../../renderers/grid-renderer';\nexport class GridPaneView {\n    constructor(pane) {\n        this._renderer = new GridRenderer();\n        this._invalidated = true;\n        this._pane = pane;\n    }\n    update() {\n        this._invalidated = true;\n    }\n    renderer() {\n        if (this._invalidated) {\n            const gridOptions = this._pane.model().options().grid;\n            const data = {\n                horzLinesVisible: gridOptions.horzLines.visible,\n                vertLinesVisible: gridOptions.vertLines.visible,\n                horzLinesColor: gridOptions.horzLines.color,\n                vertLinesColor: gridOptions.vertLines.color,\n                horzLineStyle: gridOptions.horzLines.style,\n                vertLineStyle: gridOptions.vertLines.style,\n                priceMarks: this._pane.defaultPriceScale().marks(),\n                // need this conversiom because TimeMark is a part of external interface\n                // and fields inside TimeMark are not minified\n                timeMarks: (this._pane.model().timeScale().marks() || []).map((tm) => {\n                    return { coord: tm.coord };\n                }),\n            };\n            this._renderer.setData(data);\n            this._invalidated = false;\n        }\n        return this._renderer;\n    }\n}\n", "import { GridPaneView } from '../views/pane/grid-pane-view';\nexport class Grid {\n    constructor(pane) {\n        this._paneView = new GridPaneView(pane);\n    }\n    paneView() {\n        return this._paneView;\n    }\n}\n", "import { PriceRangeImpl } from './price-range-impl';\nconst defLogFormula = {\n    logicalOffset: 4,\n    coordOffset: 0.0001,\n};\nexport function fromPercent(value, baseValue) {\n    if (baseValue < 0) {\n        value = -value;\n    }\n    return (value / 100) * baseValue + baseValue;\n}\nexport function toPercent(value, baseValue) {\n    const result = 100 * (value - baseValue) / baseValue;\n    return (baseValue < 0 ? -result : result);\n}\nexport function toPercentRange(priceRange, baseValue) {\n    const minPercent = toPercent(priceRange.minValue(), baseValue);\n    const maxPercent = toPercent(priceRange.maxValue(), baseValue);\n    return new PriceRangeImpl(minPercent, maxPercent);\n}\nexport function fromIndexedTo100(value, baseValue) {\n    value -= 100;\n    if (baseValue < 0) {\n        value = -value;\n    }\n    return (value / 100) * baseValue + baseValue;\n}\nexport function toIndexedTo100(value, baseValue) {\n    const result = 100 * (value - baseValue) / baseValue + 100;\n    return (baseValue < 0 ? -result : result);\n}\nexport function toIndexedTo100Range(priceRange, baseValue) {\n    const minPercent = toIndexedTo100(priceRange.minValue(), baseValue);\n    const maxPercent = toIndexedTo100(priceRange.maxValue(), baseValue);\n    return new PriceRangeImpl(minPercent, maxPercent);\n}\nexport function toLog(price, logFormula) {\n    const m = Math.abs(price);\n    if (m < 1e-15) {\n        return 0;\n    }\n    const res = Math.log10(m + logFormula.coordOffset) + logFormula.logicalOffset;\n    return ((price < 0) ? -res : res);\n}\nexport function fromLog(logical, logFormula) {\n    const m = Math.abs(logical);\n    if (m < 1e-15) {\n        return 0;\n    }\n    const res = Math.pow(10, m - logFormula.logicalOffset) - logFormula.coordOffset;\n    return (logical < 0) ? -res : res;\n}\nexport function convertPriceRangeToLog(priceRange, logFormula) {\n    if (priceRange === null) {\n        return null;\n    }\n    const min = toLog(priceRange.minValue(), logFormula);\n    const max = toLog(priceRange.maxValue(), logFormula);\n    return new PriceRangeImpl(min, max);\n}\nexport function canConvertPriceRangeFromLog(priceRange, logFormula) {\n    if (priceRange === null) {\n        return false;\n    }\n    const min = fromLog(priceRange.minValue(), logFormula);\n    const max = fromLog(priceRange.maxValue(), logFormula);\n    return isFinite(min) && isFinite(max);\n}\nexport function convertPriceRangeFromLog(priceRange, logFormula) {\n    if (priceRange === null) {\n        return null;\n    }\n    const min = fromLog(priceRange.minValue(), logFormula);\n    const max = fromLog(priceRange.maxValue(), logFormula);\n    return new PriceRangeImpl(min, max);\n}\nexport function logFormulaForPriceRange(range) {\n    if (range === null) {\n        return defLogFormula;\n    }\n    const diff = Math.abs(range.maxValue() - range.minValue());\n    if (diff >= 1 || diff < 1e-15) {\n        return defLogFormula;\n    }\n    const digits = Math.ceil(Math.abs(Math.log10(diff)));\n    const logicalOffset = defLogFormula.logicalOffset + digits;\n    const coordOffset = 1 / Math.pow(10, logicalOffset);\n    return {\n        logicalOffset,\n        coordOffset,\n    };\n}\nexport function logFormulasAreSame(f1, f2) {\n    return f1.logicalOffset === f2.logicalOffset && f1.coordOffset === f2.coordOffset;\n}\n", "import { equal, greaterOrEqual, isBaseDecimal } from '../helpers/mathex';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"TickSpanEpsilon\"] = 1e-14] = \"TickSpanEpsilon\";\n})(Constants || (Constants = {}));\nexport class PriceTickSpanCalculator {\n    constructor(base, integralDividers) {\n        this._base = base;\n        this._integralDividers = integralDividers;\n        if (isBaseDecimal(this._base)) {\n            this._fractionalDividers = [2, 2.5, 2];\n        }\n        else {\n            this._fractionalDividers = [];\n            for (let baseRest = this._base; baseRest !== 1;) {\n                if ((baseRest % 2) === 0) {\n                    this._fractionalDividers.push(2);\n                    baseRest /= 2;\n                }\n                else if ((baseRest % 5) === 0) {\n                    this._fractionalDividers.push(2, 2.5);\n                    baseRest /= 5;\n                }\n                else {\n                    throw new Error('unexpected base');\n                }\n                if (this._fractionalDividers.length > 100) {\n                    throw new Error('something wrong with base');\n                }\n            }\n        }\n    }\n    tickSpan(high, low, maxTickSpan) {\n        const minMovement = (this._base === 0) ? (0) : (1 / this._base);\n        let resultTickSpan = Math.pow(10, Math.max(0, Math.ceil(Math.log10(high - low))));\n        let index = 0;\n        let c = this._integralDividers[0];\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            // the second part is actual for small with very small values like 1e-10\n            // greaterOrEqual fails for such values\n            const resultTickSpanLargerMinMovement = greaterOrEqual(resultTickSpan, minMovement, 1e-14 /* Constants.TickSpanEpsilon */) && resultTickSpan > (minMovement + 1e-14 /* Constants.TickSpanEpsilon */);\n            const resultTickSpanLargerMaxTickSpan = greaterOrEqual(resultTickSpan, maxTickSpan * c, 1e-14 /* Constants.TickSpanEpsilon */);\n            const resultTickSpanLarger1 = greaterOrEqual(resultTickSpan, 1, 1e-14 /* Constants.TickSpanEpsilon */);\n            const haveToContinue = resultTickSpanLargerMinMovement && resultTickSpanLargerMaxTickSpan && resultTickSpanLarger1;\n            if (!haveToContinue) {\n                break;\n            }\n            resultTickSpan /= c;\n            c = this._integralDividers[++index % this._integralDividers.length];\n        }\n        if (resultTickSpan <= (minMovement + 1e-14 /* Constants.TickSpanEpsilon */)) {\n            resultTickSpan = minMovement;\n        }\n        resultTickSpan = Math.max(1, resultTickSpan);\n        if ((this._fractionalDividers.length > 0) && equal(resultTickSpan, 1, 1e-14 /* Constants.TickSpanEpsilon */)) {\n            index = 0;\n            c = this._fractionalDividers[0];\n            while (greaterOrEqual(resultTickSpan, maxTickSpan * c, 1e-14 /* Constants.TickSpanEpsilon */) && resultTickSpan > (minMovement + 1e-14 /* Constants.TickSpanEpsilon */)) {\n                resultTickSpan /= c;\n                c = this._fractionalDividers[++index % this._fractionalDividers.length];\n            }\n        }\n        return resultTickSpan;\n    }\n}\n", "import { ensure } from '../helpers/assertions';\nimport { min } from '../helpers/mathex';\nimport { convertPriceRangeFromLog } from './price-scale-conversions';\nimport { PriceTickSpanCalculator } from './price-tick-span-calculator';\nconst TICK_DENSITY = 2.5;\nexport class PriceTickMarkBuilder {\n    constructor(priceScale, base, coordinateToLogicalFunc, logicalToCoordinateFunc) {\n        this._marks = [];\n        this._priceScale = priceScale;\n        this._base = base;\n        this._coordinateToLogicalFunc = coordinateToLogicalFunc;\n        this._logicalToCoordinateFunc = logicalToCoordinateFunc;\n    }\n    tickSpan(high, low) {\n        if (high < low) {\n            throw new Error('high < low');\n        }\n        const scaleHeight = this._priceScale.height();\n        const markHeight = this._tickMarkHeight();\n        const maxTickSpan = (high - low) * markHeight / scaleHeight;\n        const spanCalculator1 = new PriceTickSpanCalculator(this._base, [2, 2.5, 2]);\n        const spanCalculator2 = new PriceTickSpanCalculator(this._base, [2, 2, 2.5]);\n        const spanCalculator3 = new PriceTickSpanCalculator(this._base, [2.5, 2, 2]);\n        const spans = [];\n        spans.push(spanCalculator1.tickSpan(high, low, maxTickSpan), spanCalculator2.tickSpan(high, low, maxTickSpan), spanCalculator3.tickSpan(high, low, maxTickSpan));\n        return min(spans);\n    }\n    rebuildTickMarks() {\n        const priceScale = this._priceScale;\n        const firstValue = priceScale.firstValue();\n        if (firstValue === null) {\n            this._marks = [];\n            return;\n        }\n        const scaleHeight = priceScale.height();\n        const bottom = this._coordinateToLogicalFunc(scaleHeight - 1, firstValue);\n        const top = this._coordinateToLogicalFunc(0, firstValue);\n        const extraTopBottomMargin = this._priceScale.options().entireTextOnly ? this._fontHeight() / 2 : 0;\n        const minCoord = extraTopBottomMargin;\n        const maxCoord = scaleHeight - 1 - extraTopBottomMargin;\n        const high = Math.max(bottom, top);\n        const low = Math.min(bottom, top);\n        if (high === low) {\n            this._marks = [];\n            return;\n        }\n        const span = this.tickSpan(high, low);\n        this._updateMarks(firstValue, span, high, low, minCoord, maxCoord);\n        if (priceScale.hasVisibleEdgeMarks() && this._shouldApplyEdgeMarks(span, low, high)) {\n            const padding = this._priceScale.getEdgeMarksPadding();\n            this._applyEdgeMarks(firstValue, span, minCoord, maxCoord, padding, padding * 2);\n        }\n        const logicals = this._marks.map((mark) => mark.logical);\n        const labels = this._priceScale.formatLogicalTickmarks(logicals);\n        for (let i = 0; i < this._marks.length; i++) {\n            this._marks[i].label = labels[i];\n        }\n    }\n    marks() {\n        return this._marks;\n    }\n    _fontHeight() {\n        return this._priceScale.fontSize();\n    }\n    _tickMarkHeight() {\n        return Math.ceil(this._fontHeight() * TICK_DENSITY);\n    }\n    _updateMarks(firstValue, span, high, low, minCoord, maxCoord) {\n        const marks = this._marks;\n        const priceScale = this._priceScale;\n        let mod = high % span;\n        mod += mod < 0 ? span : 0;\n        const sign = (high >= low) ? 1 : -1;\n        let prevCoord = null;\n        let targetIndex = 0;\n        for (let logical = high - mod; logical > low; logical -= span) {\n            const coord = this._logicalToCoordinateFunc(logical, firstValue, true);\n            // check if there is place for it\n            // this is required for log scale\n            if (prevCoord !== null && Math.abs(coord - prevCoord) < this._tickMarkHeight()) {\n                continue;\n            }\n            // check if a tick mark is partially visible and skip it if entireTextOnly is true\n            if (coord < minCoord || coord > maxCoord) {\n                continue;\n            }\n            if (targetIndex < marks.length) {\n                marks[targetIndex].coord = coord;\n                marks[targetIndex].label = priceScale.formatLogical(logical);\n                marks[targetIndex].logical = logical;\n            }\n            else {\n                marks.push({\n                    coord: coord,\n                    label: priceScale.formatLogical(logical),\n                    logical,\n                });\n            }\n            targetIndex++;\n            prevCoord = coord;\n            if (priceScale.isLog()) {\n                // recalc span\n                span = this.tickSpan(logical * sign, low);\n            }\n        }\n        marks.length = targetIndex;\n    }\n    _applyEdgeMarks(firstValue, span, minCoord, maxCoord, minPadding, maxPadding) {\n        const marks = this._marks;\n        // top boundary\n        const topMark = this._computeBoundaryPriceMark(firstValue, minCoord, minPadding, maxPadding);\n        // bottom boundary\n        const bottomMark = this._computeBoundaryPriceMark(firstValue, maxCoord, -maxPadding, -minPadding);\n        const spanPx = this._logicalToCoordinateFunc(0, firstValue, true)\n            - this._logicalToCoordinateFunc(span, firstValue, true);\n        if (marks.length > 0 && marks[0].coord - topMark.coord < spanPx / 2) {\n            marks.shift();\n        }\n        if (marks.length > 0 && bottomMark.coord - marks[marks.length - 1].coord < spanPx / 2) {\n            marks.pop();\n        }\n        marks.unshift(topMark);\n        marks.push(bottomMark);\n    }\n    _computeBoundaryPriceMark(firstValue, coord, minPadding, maxPadding) {\n        const avgPadding = (minPadding + maxPadding) / 2;\n        const value1 = this._coordinateToLogicalFunc(coord + minPadding, firstValue);\n        const value2 = this._coordinateToLogicalFunc(coord + maxPadding, firstValue);\n        const minValue = Math.min(value1, value2);\n        const maxValue = Math.max(value1, value2);\n        const valueSpan = Math.max(0.1, this.tickSpan(maxValue, minValue));\n        const value = this._coordinateToLogicalFunc(coord + avgPadding, firstValue);\n        const roundedValue = value - (value % valueSpan);\n        const roundedCoord = this._logicalToCoordinateFunc(roundedValue, firstValue, true);\n        return { label: this._priceScale.formatLogical(roundedValue), coord: roundedCoord, logical: roundedValue };\n    }\n    _shouldApplyEdgeMarks(span, low, high) {\n        let range = ensure(this._priceScale.priceRange());\n        if (this._priceScale.isLog()) {\n            range = convertPriceRangeFromLog(range, this._priceScale.getLogFormula());\n        }\n        return (range.minValue() - low < span) && (high - range.maxValue() < span);\n    }\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nexport function sortSources(sources) {\n    return sources.slice().sort((s1, s2) => {\n        return (ensureNotNull(s1.zorder()) - ensureNotNull(s2.zorder()));\n    });\n}\n", "import { PercentageFormatter } from '../formatters/percentage-formatter';\nimport { PriceFormatter } from '../formatters/price-formatter';\nimport { ensureDefined, ensureNotNull } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { merge } from '../helpers/strict-type-checks';\nimport { PriceRangeImpl } from './price-range-impl';\nimport { canConvertPriceRangeFromLog, convertPriceRangeFromLog, convertPriceRangeToLog, fromIndexedTo100, fromLog, fromPercent, logFormulaForPriceRange, logFormulasAreSame, toIndexedTo100, toIndexedTo100Range, toLog, toPercent, toPercentRange, } from './price-scale-conversions';\nimport { PriceTickMarkBuilder } from './price-tick-mark-builder';\nimport { sortSources } from './sort-sources';\n/**\n * Represents the price scale mode.\n */\nexport var PriceScaleMode;\n(function (PriceScaleMode) {\n    /**\n     * Price scale shows prices. Price range changes linearly.\n     */\n    PriceScaleMode[PriceScaleMode[\"Normal\"] = 0] = \"Normal\";\n    /**\n     * Price scale shows prices. Price range changes logarithmically.\n     */\n    PriceScaleMode[PriceScaleMode[\"Logarithmic\"] = 1] = \"Logarithmic\";\n    /**\n     * Price scale shows percentage values according the first visible value of the price scale.\n     * The first visible value is 0% in this mode.\n     */\n    PriceScaleMode[PriceScaleMode[\"Percentage\"] = 2] = \"Percentage\";\n    /**\n     * The same as percentage mode, but the first value is moved to 100.\n     */\n    PriceScaleMode[PriceScaleMode[\"IndexedTo100\"] = 3] = \"IndexedTo100\";\n})(PriceScaleMode || (PriceScaleMode = {}));\nconst percentageFormatter = new PercentageFormatter();\nconst defaultPriceFormatter = new PriceFormatter(100, 1);\nexport class PriceScale {\n    constructor(id, options, layoutOptions, localizationOptions, colorParser) {\n        this._height = 0;\n        this._internalHeightCache = null;\n        this._priceRange = null;\n        this._priceRangeSnapshot = null;\n        this._invalidatedForRange = { isValid: false, visibleBars: null };\n        this._isCustomPriceRange = false;\n        this._marginAbove = 0;\n        this._marginBelow = 0;\n        this._onMarksChanged = new Delegate();\n        this._modeChanged = new Delegate();\n        this._dataSources = [];\n        this._formatterSource = null;\n        this._cachedOrderedSources = null;\n        this._marksCache = null;\n        this._scaleStartPoint = null;\n        this._scrollStartPoint = null;\n        this._formatter = defaultPriceFormatter;\n        this._logFormula = logFormulaForPriceRange(null);\n        this._id = id;\n        this._options = options;\n        this._layoutOptions = layoutOptions;\n        this._localizationOptions = localizationOptions;\n        this._colorParser = colorParser;\n        this._markBuilder = new PriceTickMarkBuilder(this, 100, this._coordinateToLogical.bind(this), this._logicalToCoordinate.bind(this));\n    }\n    id() {\n        return this._id;\n    }\n    options() {\n        return this._options;\n    }\n    applyOptions(options) {\n        merge(this._options, options);\n        this.updateFormatter();\n        if (options.mode !== undefined) {\n            this.setMode({ mode: options.mode });\n        }\n        if (options.scaleMargins !== undefined) {\n            const top = ensureDefined(options.scaleMargins.top);\n            const bottom = ensureDefined(options.scaleMargins.bottom);\n            if (top < 0 || top > 1) {\n                throw new Error(`Invalid top margin - expect value between 0 and 1, given=${top}`);\n            }\n            if (bottom < 0 || bottom > 1) {\n                throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${bottom}`);\n            }\n            if (top + bottom > 1) {\n                throw new Error(`Invalid margins - sum of margins must be less than 1, given=${top + bottom}`);\n            }\n            this._invalidateInternalHeightCache();\n            this._marksCache = null;\n        }\n    }\n    isAutoScale() {\n        return this._options.autoScale;\n    }\n    isCustomPriceRange() {\n        return this._isCustomPriceRange;\n    }\n    isLog() {\n        return this._options.mode === 1 /* PriceScaleMode.Logarithmic */;\n    }\n    isPercentage() {\n        return this._options.mode === 2 /* PriceScaleMode.Percentage */;\n    }\n    isIndexedTo100() {\n        return this._options.mode === 3 /* PriceScaleMode.IndexedTo100 */;\n    }\n    getLogFormula() {\n        return this._logFormula;\n    }\n    mode() {\n        return {\n            autoScale: this._options.autoScale,\n            isInverted: this._options.invertScale,\n            mode: this._options.mode,\n        };\n    }\n    // eslint-disable-next-line complexity\n    setMode(newMode) {\n        const oldMode = this.mode();\n        let priceRange = null;\n        if (newMode.autoScale !== undefined) {\n            this._options.autoScale = newMode.autoScale;\n        }\n        if (newMode.mode !== undefined) {\n            this._options.mode = newMode.mode;\n            if (newMode.mode === 2 /* PriceScaleMode.Percentage */ || newMode.mode === 3 /* PriceScaleMode.IndexedTo100 */) {\n                this._options.autoScale = true;\n            }\n            // TODO: Remove after making rebuildTickMarks lazy\n            this._invalidatedForRange.isValid = false;\n        }\n        // define which scale converted from\n        if (oldMode.mode === 1 /* PriceScaleMode.Logarithmic */ && newMode.mode !== oldMode.mode) {\n            if (canConvertPriceRangeFromLog(this._priceRange, this._logFormula)) {\n                priceRange = convertPriceRangeFromLog(this._priceRange, this._logFormula);\n                if (priceRange !== null) {\n                    this.setPriceRange(priceRange);\n                }\n            }\n            else {\n                this._options.autoScale = true;\n            }\n        }\n        // define which scale converted to\n        if (newMode.mode === 1 /* PriceScaleMode.Logarithmic */ && newMode.mode !== oldMode.mode) {\n            priceRange = convertPriceRangeToLog(this._priceRange, this._logFormula);\n            if (priceRange !== null) {\n                this.setPriceRange(priceRange);\n            }\n        }\n        const modeChanged = oldMode.mode !== this._options.mode;\n        if (modeChanged && (oldMode.mode === 2 /* PriceScaleMode.Percentage */ || this.isPercentage())) {\n            this.updateFormatter();\n        }\n        if (modeChanged && (oldMode.mode === 3 /* PriceScaleMode.IndexedTo100 */ || this.isIndexedTo100())) {\n            this.updateFormatter();\n        }\n        if (newMode.isInverted !== undefined && oldMode.isInverted !== newMode.isInverted) {\n            this._options.invertScale = newMode.isInverted;\n            this._onIsInvertedChanged();\n        }\n        this._modeChanged.fire(oldMode, this.mode());\n    }\n    modeChanged() {\n        return this._modeChanged;\n    }\n    fontSize() {\n        return this._layoutOptions.fontSize;\n    }\n    height() {\n        return this._height;\n    }\n    setHeight(value) {\n        if (this._height === value) {\n            return;\n        }\n        this._height = value;\n        this._invalidateInternalHeightCache();\n        this._marksCache = null;\n    }\n    internalHeight() {\n        if (this._internalHeightCache) {\n            return this._internalHeightCache;\n        }\n        const res = this.height() - this._topMarginPx() - this._bottomMarginPx();\n        this._internalHeightCache = res;\n        return res;\n    }\n    priceRange() {\n        this._makeSureItIsValid();\n        return this._priceRange;\n    }\n    setPriceRange(newPriceRange, isForceSetValue) {\n        const oldPriceRange = this._priceRange;\n        if (!isForceSetValue &&\n            !(oldPriceRange === null && newPriceRange !== null) &&\n            (oldPriceRange === null || oldPriceRange.equals(newPriceRange))) {\n            return;\n        }\n        this._marksCache = null;\n        this._priceRange = newPriceRange;\n    }\n    setCustomPriceRange(newPriceRange) {\n        this.setPriceRange(newPriceRange);\n        this._toggleCustomPriceRange(newPriceRange !== null);\n    }\n    isEmpty() {\n        this._makeSureItIsValid();\n        return this._height === 0 || !this._priceRange || this._priceRange.isEmpty();\n    }\n    invertedCoordinate(coordinate) {\n        return this.isInverted() ? coordinate : this.height() - 1 - coordinate;\n    }\n    priceToCoordinate(price, baseValue) {\n        if (this.isPercentage()) {\n            price = toPercent(price, baseValue);\n        }\n        else if (this.isIndexedTo100()) {\n            price = toIndexedTo100(price, baseValue);\n        }\n        return this._logicalToCoordinate(price, baseValue);\n    }\n    pointsArrayToCoordinates(points, baseValue, visibleRange) {\n        this._makeSureItIsValid();\n        const bh = this._bottomMarginPx();\n        const range = ensureNotNull(this.priceRange());\n        const min = range.minValue();\n        const max = range.maxValue();\n        const ih = (this.internalHeight() - 1);\n        const isInverted = this.isInverted();\n        const hmm = ih / (max - min);\n        const fromIndex = (visibleRange === undefined) ? 0 : visibleRange.from;\n        const toIndex = (visibleRange === undefined) ? points.length : visibleRange.to;\n        const transformFn = this._getCoordinateTransformer();\n        for (let i = fromIndex; i < toIndex; i++) {\n            const point = points[i];\n            const price = point.price;\n            if (isNaN(price)) {\n                continue;\n            }\n            let logical = price;\n            if (transformFn !== null) {\n                logical = transformFn(point.price, baseValue);\n            }\n            const invCoordinate = bh + hmm * (logical - min);\n            const coordinate = isInverted ? invCoordinate : this._height - 1 - invCoordinate;\n            point.y = coordinate;\n        }\n    }\n    barPricesToCoordinates(pricesList, baseValue, visibleRange) {\n        this._makeSureItIsValid();\n        const bh = this._bottomMarginPx();\n        const range = ensureNotNull(this.priceRange());\n        const min = range.minValue();\n        const max = range.maxValue();\n        const ih = (this.internalHeight() - 1);\n        const isInverted = this.isInverted();\n        const hmm = ih / (max - min);\n        const fromIndex = (visibleRange === undefined) ? 0 : visibleRange.from;\n        const toIndex = (visibleRange === undefined) ? pricesList.length : visibleRange.to;\n        const transformFn = this._getCoordinateTransformer();\n        for (let i = fromIndex; i < toIndex; i++) {\n            const bar = pricesList[i];\n            let openLogical = bar.open;\n            let highLogical = bar.high;\n            let lowLogical = bar.low;\n            let closeLogical = bar.close;\n            if (transformFn !== null) {\n                openLogical = transformFn(bar.open, baseValue);\n                highLogical = transformFn(bar.high, baseValue);\n                lowLogical = transformFn(bar.low, baseValue);\n                closeLogical = transformFn(bar.close, baseValue);\n            }\n            let invCoordinate = bh + hmm * (openLogical - min);\n            let coordinate = isInverted ? invCoordinate : this._height - 1 - invCoordinate;\n            bar.openY = coordinate;\n            invCoordinate = bh + hmm * (highLogical - min);\n            coordinate = isInverted ? invCoordinate : this._height - 1 - invCoordinate;\n            bar.highY = coordinate;\n            invCoordinate = bh + hmm * (lowLogical - min);\n            coordinate = isInverted ? invCoordinate : this._height - 1 - invCoordinate;\n            bar.lowY = coordinate;\n            invCoordinate = bh + hmm * (closeLogical - min);\n            coordinate = isInverted ? invCoordinate : this._height - 1 - invCoordinate;\n            bar.closeY = coordinate;\n        }\n    }\n    coordinateToPrice(coordinate, baseValue) {\n        const logical = this._coordinateToLogical(coordinate, baseValue);\n        return this.logicalToPrice(logical, baseValue);\n    }\n    logicalToPrice(logical, baseValue) {\n        let value = logical;\n        if (this.isPercentage()) {\n            value = fromPercent(value, baseValue);\n        }\n        else if (this.isIndexedTo100()) {\n            value = fromIndexedTo100(value, baseValue);\n        }\n        return value;\n    }\n    dataSources() {\n        return this._dataSources;\n    }\n    orderedSources() {\n        if (!this._cachedOrderedSources) {\n            this._cachedOrderedSources = sortSources(this._dataSources);\n        }\n        return this._cachedOrderedSources;\n    }\n    addDataSource(source) {\n        if (this._dataSources.indexOf(source) !== -1) {\n            return;\n        }\n        this._dataSources.push(source);\n        this.updateFormatter();\n        this.invalidateSourcesCache();\n    }\n    removeDataSource(source) {\n        const index = this._dataSources.indexOf(source);\n        if (index === -1) {\n            throw new Error('source is not attached to scale');\n        }\n        this._dataSources.splice(index, 1);\n        if (this._dataSources.length === 0) {\n            this.setMode({\n                autoScale: true,\n            });\n            // if no sources on price scale let's clear price range cache as well as enabling auto scale\n            this.setPriceRange(null);\n        }\n        this.updateFormatter();\n        this.invalidateSourcesCache();\n    }\n    firstValue() {\n        // TODO: cache the result\n        let result = null;\n        for (const source of this._dataSources) {\n            const firstValue = source.firstValue();\n            if (firstValue === null) {\n                continue;\n            }\n            if (result === null || firstValue.timePoint < result.timePoint) {\n                result = firstValue;\n            }\n        }\n        return result === null ? null : result.value;\n    }\n    isInverted() {\n        return this._options.invertScale;\n    }\n    marks() {\n        const firstValueIsNull = this.firstValue() === null;\n        // do not recalculate marks if firstValueIsNull is true because in this case we'll always get empty result\n        // this could happen in case when a series had some data and then you set empty data to it (in a simplified case)\n        // we could display an empty price scale, but this is not good from UX\n        // so in this case we need to keep an previous marks to display them on the scale\n        // as one of possible examples for this situation could be the following:\n        // let's say you have a study/indicator attached to a price scale and then you decide to stop it, i.e. remove its data because of its visibility\n        // a user will see the previous marks on the scale until you turn on your study back or remove it from the chart completely\n        if (this._marksCache !== null && (firstValueIsNull || this._marksCache.firstValueIsNull === firstValueIsNull)) {\n            return this._marksCache.marks;\n        }\n        this._markBuilder.rebuildTickMarks();\n        const marks = this._markBuilder.marks();\n        this._marksCache = { marks, firstValueIsNull };\n        this._onMarksChanged.fire();\n        return marks;\n    }\n    onMarksChanged() {\n        return this._onMarksChanged;\n    }\n    startScale(x) {\n        if (this.isPercentage() || this.isIndexedTo100()) {\n            return;\n        }\n        if (this._scaleStartPoint !== null || this._priceRangeSnapshot !== null) {\n            return;\n        }\n        if (this.isEmpty()) {\n            return;\n        }\n        // invert x\n        this._scaleStartPoint = this._height - x;\n        this._priceRangeSnapshot = ensureNotNull(this.priceRange()).clone();\n    }\n    scaleTo(x) {\n        if (this.isPercentage() || this.isIndexedTo100()) {\n            return;\n        }\n        if (this._scaleStartPoint === null) {\n            return;\n        }\n        this.setMode({\n            autoScale: false,\n        });\n        // invert x\n        x = this._height - x;\n        if (x < 0) {\n            x = 0;\n        }\n        let scaleCoeff = (this._scaleStartPoint + (this._height - 1) * 0.2) / (x + (this._height - 1) * 0.2);\n        const newPriceRange = ensureNotNull(this._priceRangeSnapshot).clone();\n        scaleCoeff = Math.max(scaleCoeff, 0.1);\n        newPriceRange.scaleAroundCenter(scaleCoeff);\n        this.setPriceRange(newPriceRange);\n    }\n    endScale() {\n        if (this.isPercentage() || this.isIndexedTo100()) {\n            return;\n        }\n        this._scaleStartPoint = null;\n        this._priceRangeSnapshot = null;\n    }\n    startScroll(x) {\n        if (this.isAutoScale()) {\n            return;\n        }\n        if (this._scrollStartPoint !== null || this._priceRangeSnapshot !== null) {\n            return;\n        }\n        if (this.isEmpty()) {\n            return;\n        }\n        this._scrollStartPoint = x;\n        this._priceRangeSnapshot = ensureNotNull(this.priceRange()).clone();\n    }\n    scrollTo(x) {\n        if (this.isAutoScale()) {\n            return;\n        }\n        if (this._scrollStartPoint === null) {\n            return;\n        }\n        const priceUnitsPerPixel = ensureNotNull(this.priceRange()).length() / (this.internalHeight() - 1);\n        let pixelDelta = x - this._scrollStartPoint;\n        if (this.isInverted()) {\n            pixelDelta *= -1;\n        }\n        const priceDelta = pixelDelta * priceUnitsPerPixel;\n        const newPriceRange = ensureNotNull(this._priceRangeSnapshot).clone();\n        newPriceRange.shift(priceDelta);\n        this.setPriceRange(newPriceRange, true);\n        this._marksCache = null;\n    }\n    endScroll() {\n        if (this.isAutoScale()) {\n            return;\n        }\n        if (this._scrollStartPoint === null) {\n            return;\n        }\n        this._scrollStartPoint = null;\n        this._priceRangeSnapshot = null;\n    }\n    formatter() {\n        if (!this._formatter) {\n            this.updateFormatter();\n        }\n        return this._formatter;\n    }\n    formatPrice(price, firstValue) {\n        switch (this._options.mode) {\n            case 2 /* PriceScaleMode.Percentage */:\n                return this._formatPercentage(toPercent(price, firstValue));\n            case 3 /* PriceScaleMode.IndexedTo100 */:\n                return this.formatter().format(toIndexedTo100(price, firstValue));\n            default:\n                return this._formatPrice(price);\n        }\n    }\n    formatLogical(logical) {\n        switch (this._options.mode) {\n            case 2 /* PriceScaleMode.Percentage */:\n                return this._formatPercentage(logical);\n            case 3 /* PriceScaleMode.IndexedTo100 */:\n                return this.formatter().format(logical);\n            default:\n                return this._formatPrice(logical);\n        }\n    }\n    formatLogicalTickmarks(logicals) {\n        switch (this._options.mode) {\n            case 2 /* PriceScaleMode.Percentage */:\n                return this._formatPercentageTickmarks(logicals);\n            case 3 /* PriceScaleMode.IndexedTo100 */:\n                return this.formatter().formatTickmarks(logicals);\n            default:\n                return this._formatTickmarks(logicals);\n        }\n    }\n    formatPriceAbsolute(price) {\n        return this._formatPrice(price, ensureNotNull(this._formatterSource).formatter());\n    }\n    formatPricePercentage(price, baseValue) {\n        price = toPercent(price, baseValue);\n        return this._formatPercentage(price, percentageFormatter);\n    }\n    sourcesForAutoScale() {\n        return this._dataSources;\n    }\n    recalculatePriceRange(visibleBars) {\n        this._invalidatedForRange = {\n            visibleBars: visibleBars,\n            isValid: false,\n        };\n    }\n    updateAllViews() {\n        this._dataSources.forEach((s) => s.updateAllViews());\n    }\n    hasVisibleEdgeMarks() {\n        return this._options.ensureEdgeTickMarksVisible && this.isAutoScale();\n    }\n    getEdgeMarksPadding() {\n        return this.fontSize() / 2;\n    }\n    updateFormatter() {\n        this._marksCache = null;\n        let zOrder = Infinity;\n        this._formatterSource = null;\n        // choose source with the lowest zorder\n        for (const source of this._dataSources) {\n            if (source.zorder() < zOrder) {\n                zOrder = source.zorder();\n                this._formatterSource = source;\n            }\n        }\n        let base = 100;\n        if (this._formatterSource !== null) {\n            base = Math.round(this._formatterSource.base());\n        }\n        this._formatter = defaultPriceFormatter;\n        if (this.isPercentage()) {\n            this._formatter = percentageFormatter;\n            base = 100;\n        }\n        else if (this.isIndexedTo100()) {\n            this._formatter = new PriceFormatter(100, 1);\n            base = 100;\n        }\n        else {\n            if (this._formatterSource !== null) {\n                // user\n                this._formatter = this._formatterSource.formatter();\n            }\n        }\n        this._markBuilder = new PriceTickMarkBuilder(this, base, this._coordinateToLogical.bind(this), this._logicalToCoordinate.bind(this));\n        this._markBuilder.rebuildTickMarks();\n    }\n    invalidateSourcesCache() {\n        this._cachedOrderedSources = null;\n    }\n    minMove() {\n        return this._formatterSource === null || this.isPercentage() || this.isIndexedTo100() ? 1 : 1 / this._formatterSource.base();\n    }\n    colorParser() {\n        return this._colorParser;\n    }\n    _toggleCustomPriceRange(v) {\n        this._isCustomPriceRange = v;\n    }\n    _topMarginPx() {\n        return this.isInverted()\n            ? this._options.scaleMargins.bottom * this.height() + this._marginBelow\n            : this._options.scaleMargins.top * this.height() + this._marginAbove;\n    }\n    _bottomMarginPx() {\n        return this.isInverted()\n            ? this._options.scaleMargins.top * this.height() + this._marginAbove\n            : this._options.scaleMargins.bottom * this.height() + this._marginBelow;\n    }\n    _makeSureItIsValid() {\n        if (!this._invalidatedForRange.isValid) {\n            this._invalidatedForRange.isValid = true;\n            this._recalculatePriceRangeImpl();\n        }\n    }\n    _invalidateInternalHeightCache() {\n        this._internalHeightCache = null;\n    }\n    _logicalToCoordinate(logical, baseValue) {\n        this._makeSureItIsValid();\n        if (this.isEmpty()) {\n            return 0;\n        }\n        logical = this.isLog() && logical ? toLog(logical, this._logFormula) : logical;\n        const range = ensureNotNull(this.priceRange());\n        const invCoordinate = this._bottomMarginPx() +\n            (this.internalHeight() - 1) * (logical - range.minValue()) / range.length();\n        const coordinate = this.invertedCoordinate(invCoordinate);\n        return coordinate;\n    }\n    _coordinateToLogical(coordinate, baseValue) {\n        this._makeSureItIsValid();\n        if (this.isEmpty()) {\n            return 0;\n        }\n        const invCoordinate = this.invertedCoordinate(coordinate);\n        const range = ensureNotNull(this.priceRange());\n        const logical = range.minValue() + range.length() *\n            ((invCoordinate - this._bottomMarginPx()) / (this.internalHeight() - 1));\n        return this.isLog() ? fromLog(logical, this._logFormula) : logical;\n    }\n    _onIsInvertedChanged() {\n        this._marksCache = null;\n        this._markBuilder.rebuildTickMarks();\n    }\n    // eslint-disable-next-line complexity\n    _recalculatePriceRangeImpl() {\n        if (this.isCustomPriceRange() && !this.isAutoScale()) {\n            return;\n        }\n        const visibleBars = this._invalidatedForRange.visibleBars;\n        if (visibleBars === null) {\n            return;\n        }\n        let priceRange = null;\n        const sources = this.sourcesForAutoScale();\n        let marginAbove = 0;\n        let marginBelow = 0;\n        for (const source of sources) {\n            if (!source.visible()) {\n                continue;\n            }\n            const firstValue = source.firstValue();\n            if (firstValue === null) {\n                continue;\n            }\n            const autoScaleInfo = source.autoscaleInfo(visibleBars.left(), visibleBars.right());\n            let sourceRange = autoScaleInfo && autoScaleInfo.priceRange();\n            if (sourceRange !== null) {\n                switch (this._options.mode) {\n                    case 1 /* PriceScaleMode.Logarithmic */:\n                        sourceRange = convertPriceRangeToLog(sourceRange, this._logFormula);\n                        break;\n                    case 2 /* PriceScaleMode.Percentage */:\n                        sourceRange = toPercentRange(sourceRange, firstValue.value);\n                        break;\n                    case 3 /* PriceScaleMode.IndexedTo100 */:\n                        sourceRange = toIndexedTo100Range(sourceRange, firstValue.value);\n                        break;\n                }\n                if (priceRange === null) {\n                    priceRange = sourceRange;\n                }\n                else {\n                    priceRange = priceRange.merge(ensureNotNull(sourceRange));\n                }\n                if (autoScaleInfo !== null) {\n                    const margins = autoScaleInfo.margins();\n                    if (margins !== null) {\n                        marginAbove = Math.max(marginAbove, margins.above);\n                        marginBelow = Math.max(marginBelow, margins.below);\n                    }\n                }\n            }\n        }\n        if (this.hasVisibleEdgeMarks()) {\n            marginAbove = Math.max(marginAbove, this.getEdgeMarksPadding());\n            marginBelow = Math.max(marginBelow, this.getEdgeMarksPadding());\n        }\n        if (marginAbove !== this._marginAbove || marginBelow !== this._marginBelow) {\n            this._marginAbove = marginAbove;\n            this._marginBelow = marginBelow;\n            this._marksCache = null;\n            this._invalidateInternalHeightCache();\n        }\n        if (priceRange !== null) {\n            // keep current range is new is empty\n            if (priceRange.minValue() === priceRange.maxValue()) {\n                // if price range is degenerated to 1 point let's extend it by 10 min move values\n                // to avoid incorrect range and empty (blank) scale (in case of min tick much greater than 1)\n                const extendValue = 5 * this.minMove();\n                if (this.isLog()) {\n                    priceRange = convertPriceRangeFromLog(priceRange, this._logFormula);\n                }\n                priceRange = new PriceRangeImpl(priceRange.minValue() - extendValue, priceRange.maxValue() + extendValue);\n                if (this.isLog()) {\n                    priceRange = convertPriceRangeToLog(priceRange, this._logFormula);\n                }\n            }\n            if (this.isLog()) {\n                const rawRange = convertPriceRangeFromLog(priceRange, this._logFormula);\n                const newLogFormula = logFormulaForPriceRange(rawRange);\n                if (!logFormulasAreSame(newLogFormula, this._logFormula)) {\n                    const rawSnapshot = this._priceRangeSnapshot !== null ? convertPriceRangeFromLog(this._priceRangeSnapshot, this._logFormula) : null;\n                    this._logFormula = newLogFormula;\n                    priceRange = convertPriceRangeToLog(rawRange, newLogFormula);\n                    if (rawSnapshot !== null) {\n                        this._priceRangeSnapshot = convertPriceRangeToLog(rawSnapshot, newLogFormula);\n                    }\n                }\n            }\n            this.setPriceRange(priceRange);\n        }\n        else {\n            // reset empty to default\n            if (this._priceRange === null) {\n                this.setPriceRange(new PriceRangeImpl(-0.5, 0.5));\n                this._logFormula = logFormulaForPriceRange(null);\n            }\n        }\n    }\n    _getCoordinateTransformer() {\n        if (this.isPercentage()) {\n            return toPercent;\n        }\n        else if (this.isIndexedTo100()) {\n            return toIndexedTo100;\n        }\n        else if (this.isLog()) {\n            return (price) => toLog(price, this._logFormula);\n        }\n        return null;\n    }\n    _formatValue(value, formatter, fallbackFormatter) {\n        if (formatter === undefined) {\n            if (fallbackFormatter === undefined) {\n                fallbackFormatter = this.formatter();\n            }\n            return fallbackFormatter.format(value);\n        }\n        return formatter(value);\n    }\n    _formatValues(values, formatter, fallbackFormatter) {\n        if (formatter === undefined) {\n            if (fallbackFormatter === undefined) {\n                fallbackFormatter = this.formatter();\n            }\n            return fallbackFormatter.formatTickmarks(values);\n        }\n        return formatter(values);\n    }\n    _formatPrice(price, fallbackFormatter) {\n        return this._formatValue(price, this._localizationOptions.priceFormatter, fallbackFormatter);\n    }\n    _formatTickmarks(prices, fallbackFormatter) {\n        const priceFormatter = this._localizationOptions.priceFormatter;\n        return this._formatValues(prices, this._localizationOptions.tickmarksPriceFormatter ?? (priceFormatter ? (values) => values.map(priceFormatter) : undefined), fallbackFormatter);\n    }\n    _formatPercentage(percentage, fallbackFormatter) {\n        return this._formatValue(percentage, this._localizationOptions.percentageFormatter, fallbackFormatter);\n    }\n    _formatPercentageTickmarks(percentages, fallbackFormatter) {\n        const tickmarksPercentageFormatter = this._localizationOptions.percentageFormatter;\n        return this._formatValues(percentages, this._localizationOptions.tickmarksPercentageFormatter ?? (tickmarksPercentageFormatter ? (values) => values.map(tickmarksPercentageFormatter) : undefined), fallbackFormatter);\n    }\n}\n", "import { assert, ensureDefined, ensureNotNull } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { clamp } from '../helpers/mathex';\nimport { clone } from '../helpers/strict-type-checks';\nimport { isDefaultPriceScale } from './default-price-scale';\nimport { Grid } from './grid';\nimport { PanePrimitiveWrapper } from './pane-primitive-wrapper';\nimport { PriceScale } from './price-scale';\nimport { Series } from './series';\nimport { sortSources } from './sort-sources';\nfunction isSeries(source) {\n    return source instanceof Series;\n}\nexport const DEFAULT_STRETCH_FACTOR = 1;\nexport const MIN_PANE_HEIGHT = 30;\nexport class Pane {\n    constructor(timeScale, model) {\n        this._dataSources = [];\n        this._overlaySourcesByScaleId = new Map();\n        this._height = 0;\n        this._width = 0;\n        this._stretchFactor = DEFAULT_STRETCH_FACTOR;\n        this._cachedOrderedSources = null;\n        this._preserveEmptyPane = false;\n        this._destroyed = new Delegate();\n        this._primitives = [];\n        this._timeScale = timeScale;\n        this._model = model;\n        this._grid = new Grid(this);\n        const options = model.options();\n        this._leftPriceScale = this._createPriceScale(\"left\" /* DefaultPriceScaleId.Left */, options.leftPriceScale);\n        this._rightPriceScale = this._createPriceScale(\"right\" /* DefaultPriceScaleId.Right */, options.rightPriceScale);\n        this._leftPriceScale.modeChanged().subscribe(this._onPriceScaleModeChanged.bind(this, this._leftPriceScale), this);\n        this._rightPriceScale.modeChanged().subscribe(this._onPriceScaleModeChanged.bind(this, this._rightPriceScale), this);\n        this.applyScaleOptions(options);\n    }\n    applyScaleOptions(options) {\n        if (options.leftPriceScale) {\n            this._leftPriceScale.applyOptions(options.leftPriceScale);\n        }\n        if (options.rightPriceScale) {\n            this._rightPriceScale.applyOptions(options.rightPriceScale);\n        }\n        if (options.localization) {\n            this._leftPriceScale.updateFormatter();\n            this._rightPriceScale.updateFormatter();\n        }\n        if (options.overlayPriceScales) {\n            const sourceArrays = Array.from(this._overlaySourcesByScaleId.values());\n            for (const arr of sourceArrays) {\n                const priceScale = ensureNotNull(arr[0].priceScale());\n                priceScale.applyOptions(options.overlayPriceScales);\n                if (options.localization) {\n                    priceScale.updateFormatter();\n                }\n            }\n        }\n    }\n    priceScaleById(id) {\n        switch (id) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            case \"left\" /* DefaultPriceScaleId.Left */: {\n                return this._leftPriceScale;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            case \"right\" /* DefaultPriceScaleId.Right */: {\n                return this._rightPriceScale;\n            }\n        }\n        if (this._overlaySourcesByScaleId.has(id)) {\n            return ensureDefined(this._overlaySourcesByScaleId.get(id))[0].priceScale();\n        }\n        return null;\n    }\n    destroy() {\n        this.model().priceScalesOptionsChanged().unsubscribeAll(this);\n        this._leftPriceScale.modeChanged().unsubscribeAll(this);\n        this._rightPriceScale.modeChanged().unsubscribeAll(this);\n        this._dataSources.forEach((source) => {\n            if (source.destroy) {\n                source.destroy();\n            }\n        });\n        this._primitives = this._primitives.filter((primitive) => {\n            const p = primitive.primitive();\n            if (p.detached) {\n                p.detached();\n            }\n            return false;\n        });\n        this._destroyed.fire();\n    }\n    stretchFactor() {\n        return this._stretchFactor;\n    }\n    setStretchFactor(factor) {\n        this._stretchFactor = factor;\n    }\n    model() {\n        return this._model;\n    }\n    width() {\n        return this._width;\n    }\n    height() {\n        return this._height;\n    }\n    setWidth(width) {\n        this._width = width;\n        this.updateAllSources();\n    }\n    setHeight(height) {\n        this._height = height;\n        this._leftPriceScale.setHeight(height);\n        this._rightPriceScale.setHeight(height);\n        // process overlays\n        this._dataSources.forEach((ds) => {\n            if (this.isOverlay(ds)) {\n                const priceScale = ds.priceScale();\n                if (priceScale !== null) {\n                    priceScale.setHeight(height);\n                }\n            }\n        });\n        this.updateAllSources();\n    }\n    setPreserveEmptyPane(preserve) {\n        this._preserveEmptyPane = preserve;\n    }\n    preserveEmptyPane() {\n        return this._preserveEmptyPane;\n    }\n    series() {\n        return this._dataSources.filter(isSeries);\n    }\n    dataSources() {\n        return this._dataSources;\n    }\n    isOverlay(source) {\n        const priceScale = source.priceScale();\n        if (priceScale === null) {\n            return true;\n        }\n        return this._leftPriceScale !== priceScale && this._rightPriceScale !== priceScale;\n    }\n    addDataSource(source, targetScaleId, keepSourcesOrder) {\n        this._insertDataSource(source, targetScaleId, keepSourcesOrder ? source.zorder() : this._dataSources.length);\n    }\n    removeDataSource(source, keepSourceOrder) {\n        const index = this._dataSources.indexOf(source);\n        assert(index !== -1, 'removeDataSource: invalid data source');\n        this._dataSources.splice(index, 1);\n        if (!keepSourceOrder) {\n            this._dataSources.forEach((ds, i) => ds.setZorder(i));\n        }\n        const priceScaleId = ensureNotNull(source.priceScale()).id();\n        if (this._overlaySourcesByScaleId.has(priceScaleId)) {\n            const overlaySources = ensureDefined(this._overlaySourcesByScaleId.get(priceScaleId));\n            const overlayIndex = overlaySources.indexOf(source);\n            if (overlayIndex !== -1) {\n                overlaySources.splice(overlayIndex, 1);\n                if (overlaySources.length === 0) {\n                    this._overlaySourcesByScaleId.delete(priceScaleId);\n                }\n            }\n        }\n        const priceScale = source.priceScale();\n        // if source has owner, it returns owner's price scale\n        // and it does not have source in their list\n        if (priceScale && priceScale.dataSources().indexOf(source) >= 0) {\n            priceScale.removeDataSource(source);\n            this.recalculatePriceScale(priceScale);\n        }\n        this._cachedOrderedSources = null;\n    }\n    priceScalePosition(priceScale) {\n        if (priceScale === this._leftPriceScale) {\n            return 'left';\n        }\n        if (priceScale === this._rightPriceScale) {\n            return 'right';\n        }\n        return 'overlay';\n    }\n    leftPriceScale() {\n        return this._leftPriceScale;\n    }\n    rightPriceScale() {\n        return this._rightPriceScale;\n    }\n    startScalePrice(priceScale, x) {\n        priceScale.startScale(x);\n    }\n    scalePriceTo(priceScale, x) {\n        priceScale.scaleTo(x);\n        // TODO: be more smart and update only affected views\n        this.updateAllSources();\n    }\n    endScalePrice(priceScale) {\n        priceScale.endScale();\n    }\n    startScrollPrice(priceScale, x) {\n        priceScale.startScroll(x);\n    }\n    scrollPriceTo(priceScale, x) {\n        priceScale.scrollTo(x);\n        this.updateAllSources();\n    }\n    endScrollPrice(priceScale) {\n        priceScale.endScroll();\n    }\n    updateAllSources() {\n        this._dataSources.forEach((source) => {\n            source.updateAllViews();\n        });\n    }\n    defaultPriceScale() {\n        let priceScale = null;\n        if (this._model.options().rightPriceScale.visible && this._rightPriceScale.dataSources().length !== 0) {\n            priceScale = this._rightPriceScale;\n        }\n        else if (this._model.options().leftPriceScale.visible && this._leftPriceScale.dataSources().length !== 0) {\n            priceScale = this._leftPriceScale;\n        }\n        else if (this._dataSources.length !== 0) {\n            priceScale = this._dataSources[0].priceScale();\n        }\n        if (priceScale === null) {\n            priceScale = this._rightPriceScale;\n        }\n        return priceScale;\n    }\n    defaultVisiblePriceScale() {\n        let priceScale = null;\n        if (this._model.options().rightPriceScale.visible) {\n            priceScale = this._rightPriceScale;\n        }\n        else if (this._model.options().leftPriceScale.visible) {\n            priceScale = this._leftPriceScale;\n        }\n        return priceScale;\n    }\n    recalculatePriceScale(priceScale) {\n        if (priceScale === null || !priceScale.isAutoScale()) {\n            return;\n        }\n        this._recalculatePriceScaleImpl(priceScale);\n    }\n    resetPriceScale(priceScale) {\n        const visibleBars = this._timeScale.visibleStrictRange();\n        priceScale.setMode({ autoScale: true });\n        if (visibleBars !== null) {\n            priceScale.recalculatePriceRange(visibleBars);\n        }\n        this.updateAllSources();\n    }\n    momentaryAutoScale() {\n        this._recalculatePriceScaleImpl(this._leftPriceScale);\n        this._recalculatePriceScaleImpl(this._rightPriceScale);\n    }\n    recalculate() {\n        this.recalculatePriceScale(this._leftPriceScale);\n        this.recalculatePriceScale(this._rightPriceScale);\n        this._dataSources.forEach((ds) => {\n            if (this.isOverlay(ds)) {\n                this.recalculatePriceScale(ds.priceScale());\n            }\n        });\n        this.updateAllSources();\n        this._model.lightUpdate();\n    }\n    orderedSources() {\n        if (this._cachedOrderedSources === null) {\n            this._cachedOrderedSources = sortSources(this._dataSources);\n        }\n        return this._cachedOrderedSources;\n    }\n    setSeriesOrder(series, order) {\n        order = clamp(order, 0, this._dataSources.length - 1);\n        const index = this._dataSources.indexOf(series);\n        assert(index !== -1, 'setSeriesOrder: invalid data source');\n        this._dataSources.splice(index, 1);\n        this._dataSources.splice(order, 0, series);\n        this._dataSources.forEach((ps, i) => ps.setZorder(i));\n        this._cachedOrderedSources = null;\n        for (const ps of [this._leftPriceScale, this._rightPriceScale]) {\n            ps.invalidateSourcesCache();\n            ps.updateFormatter();\n        }\n        this._model.lightUpdate();\n    }\n    orderedSeries() {\n        return this.orderedSources().filter(isSeries);\n    }\n    onDestroyed() {\n        return this._destroyed;\n    }\n    grid() {\n        return this._grid;\n    }\n    attachPrimitive(primitive) {\n        this._primitives.push(new PanePrimitiveWrapper(primitive));\n    }\n    detachPrimitive(source) {\n        this._primitives = this._primitives.filter((wrapper) => wrapper.primitive() !== source);\n        if (source.detached) {\n            source.detached();\n        }\n        this._model.lightUpdate();\n    }\n    primitives() {\n        return this._primitives;\n    }\n    primitiveHitTest(x, y) {\n        return this._primitives\n            .map((primitive) => primitive.hitTest(x, y))\n            .filter((result) => result !== null);\n    }\n    _recalculatePriceScaleImpl(priceScale) {\n        // TODO: can use this checks\n        const sourceForAutoScale = priceScale.sourcesForAutoScale();\n        if (sourceForAutoScale && sourceForAutoScale.length > 0 && !this._timeScale.isEmpty()) {\n            const visibleBars = this._timeScale.visibleStrictRange();\n            if (visibleBars !== null) {\n                priceScale.recalculatePriceRange(visibleBars);\n            }\n        }\n        priceScale.updateAllViews();\n    }\n    _insertDataSource(source, priceScaleId, order) {\n        let priceScale = this.priceScaleById(priceScaleId);\n        if (priceScale === null) {\n            priceScale = this._createPriceScale(priceScaleId, this._model.options().overlayPriceScales);\n        }\n        this._dataSources.splice(order, 0, source);\n        if (!isDefaultPriceScale(priceScaleId)) {\n            const overlaySources = this._overlaySourcesByScaleId.get(priceScaleId) || [];\n            overlaySources.push(source);\n            this._overlaySourcesByScaleId.set(priceScaleId, overlaySources);\n        }\n        source.setZorder(order);\n        priceScale.addDataSource(source);\n        source.setPriceScale(priceScale);\n        this.recalculatePriceScale(priceScale);\n        this._cachedOrderedSources = null;\n    }\n    _onPriceScaleModeChanged(priceScale, oldMode, newMode) {\n        if (oldMode.mode === newMode.mode) {\n            return;\n        }\n        // momentary auto scale if we toggle percentage/indexedTo100 mode\n        this._recalculatePriceScaleImpl(priceScale);\n    }\n    _createPriceScale(id, options) {\n        const actualOptions = { visible: true, autoScale: true, ...clone(options) };\n        const priceScale = new PriceScale(id, actualOptions, this._model.options()['layout'], this._model.options().localization, this._model.colorParser());\n        priceScale.setHeight(this.height());\n        return priceScale;\n    }\n}\n", "// returns true if item is above reference\nfunction comparePrimitiveZOrder(item, reference) {\n    return (!reference ||\n        (item === 'top' && reference !== 'top') ||\n        (item === 'normal' && reference === 'bottom'));\n}\nfunction findBestPrimitiveHitTest(sources, x, y) {\n    let bestPrimitiveHit;\n    let bestHitSource;\n    for (const source of sources) {\n        const primitiveHitResults = source.primitiveHitTest?.(x, y) ?? [];\n        for (const hitResult of primitiveHitResults) {\n            if (comparePrimitiveZOrder(hitResult.zOrder, bestPrimitiveHit?.zOrder)) {\n                bestPrimitiveHit = hitResult;\n                bestHitSource = source;\n            }\n        }\n    }\n    if (!bestPrimitiveHit || !bestHitSource) {\n        return null;\n    }\n    return {\n        hit: bestPrimitiveHit,\n        source: bestHitSource,\n    };\n}\nfunction convertPrimitiveHitResult(primitiveHit) {\n    return {\n        source: primitiveHit.source,\n        object: {\n            externalId: primitiveHit.hit.externalId,\n        },\n        cursorStyle: primitiveHit.hit.cursorStyle,\n    };\n}\n/**\n * Performs a hit test on a collection of pane views to determine which view and object\n * is located at a given coordinate (x, y) and returns the matching pane view and\n * hit-tested result object, or null if no match is found.\n */\nfunction hitTestPaneView(paneViews, x, y, pane) {\n    for (const paneView of paneViews) {\n        const renderer = paneView.renderer(pane);\n        if (renderer !== null && renderer.hitTest) {\n            const result = renderer.hitTest(x, y);\n            if (result !== null) {\n                return {\n                    view: paneView,\n                    object: result,\n                };\n            }\n        }\n    }\n    return null;\n}\nfunction isDataSource(source) {\n    return source.paneViews !== undefined;\n}\n// eslint-disable-next-line complexity\nexport function hitTestPane(pane, x, y) {\n    const sources = [pane, ...pane.orderedSources()];\n    const bestPrimitiveHit = findBestPrimitiveHitTest(sources, x, y);\n    if (bestPrimitiveHit?.hit.zOrder === 'top') {\n        // a primitive hit on the 'top' layer will always beat the built-in hit tests\n        // (on normal layer) so we can return early here.\n        return convertPrimitiveHitResult(bestPrimitiveHit);\n    }\n    for (const source of sources) {\n        if (bestPrimitiveHit && bestPrimitiveHit.source === source && bestPrimitiveHit.hit.zOrder !== 'bottom' && !bestPrimitiveHit.hit.isBackground) {\n            // a primitive will be drawn above a built-in item like a series marker\n            // therefore it takes precedence here.\n            return convertPrimitiveHitResult(bestPrimitiveHit);\n        }\n        if (isDataSource(source)) {\n            const sourceResult = hitTestPaneView(source.paneViews(pane), x, y, pane);\n            if (sourceResult !== null) {\n                return {\n                    source: source,\n                    view: sourceResult.view,\n                    object: sourceResult.object,\n                };\n            }\n        }\n        if (bestPrimitiveHit && bestPrimitiveHit.source === source && bestPrimitiveHit.hit.zOrder !== 'bottom' && bestPrimitiveHit.hit.isBackground) {\n            return convertPrimitiveHitResult(bestPrimitiveHit);\n        }\n    }\n    if (bestPrimitiveHit?.hit) {\n        // return primitive hits for the 'bottom' layer\n        return convertPrimitiveHitResult(bestPrimitiveHit);\n    }\n    return null;\n}\n", "import { ensureDefined } from '../helpers/assertions';\nexport class FormattedLabelsCache {\n    constructor(format, horzScaleBehavior, size = 50) {\n        this._actualSize = 0;\n        this._usageTick = 1;\n        this._oldestTick = 1;\n        this._cache = new Map();\n        this._tick2Labels = new Map();\n        this._format = format;\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._maxSize = size;\n    }\n    format(tickMark) {\n        const time = tickMark.time;\n        const cacheKey = this._horzScaleBehavior.cacheKey(time);\n        const tick = this._cache.get(cacheKey);\n        if (tick !== undefined) {\n            return tick.string;\n        }\n        if (this._actualSize === this._maxSize) {\n            const oldestValue = this._tick2Labels.get(this._oldestTick);\n            this._tick2Labels.delete(this._oldestTick);\n            this._cache.delete(ensureDefined(oldestValue));\n            this._oldestTick++;\n            this._actualSize--;\n        }\n        const str = this._format(tickMark);\n        this._cache.set(cacheKey, { string: str, tick: this._usageTick });\n        this._tick2Labels.set(this._usageTick, cacheKey);\n        this._actualSize++;\n        this._usageTick++;\n        return str;\n    }\n}\n", "import { assert } from '../helpers/assertions';\nexport class RangeImpl {\n    constructor(left, right) {\n        assert(left <= right, 'right should be >= left');\n        this._left = left;\n        this._right = right;\n    }\n    left() {\n        return this._left;\n    }\n    right() {\n        return this._right;\n    }\n    count() {\n        return this._right - this._left + 1;\n    }\n    contains(index) {\n        return this._left <= index && index <= this._right;\n    }\n    equals(other) {\n        return this._left === other.left() && this._right === other.right();\n    }\n}\nexport function areRangesEqual(first, second) {\n    if (first === null || second === null) {\n        return first === second;\n    }\n    return first.equals(second);\n}\n", "import { lowerBound } from '../helpers/algorithms';\nimport { ensureDefined } from '../helpers/assertions';\nexport class TickMarks {\n    constructor() {\n        this._marksByWeight = new Map();\n        this._cache = null;\n        this._uniformDistribution = false;\n    }\n    setUniformDistribution(val) {\n        this._uniformDistribution = val;\n        this._cache = null;\n    }\n    setTimeScalePoints(newPoints, firstChangedPointIndex) {\n        this._removeMarksSinceIndex(firstChangedPointIndex);\n        this._cache = null;\n        for (let index = firstChangedPointIndex; index < newPoints.length; ++index) {\n            const point = newPoints[index];\n            let marksForWeight = this._marksByWeight.get(point.timeWeight);\n            if (marksForWeight === undefined) {\n                marksForWeight = [];\n                this._marksByWeight.set(point.timeWeight, marksForWeight);\n            }\n            marksForWeight.push({\n                index: index,\n                time: point.time,\n                weight: point.timeWeight,\n                originalTime: point.originalTime,\n            });\n        }\n    }\n    build(spacing, maxWidth, checkIndicesForData, indicesWithDataMap, indicesWithDataId) {\n        const maxIndexesPerMark = Math.ceil(maxWidth / spacing);\n        if (this._cache === null ||\n            this._cache.maxIndexesPerMark !== maxIndexesPerMark ||\n            indicesWithDataId !== this._cache.indicesWithDataId ||\n            checkIndicesForData !== this._cache.checkIndicesForData) {\n            this._cache = {\n                indicesWithDataId,\n                checkIndicesForData,\n                marks: this._buildMarksImpl(maxIndexesPerMark, checkIndicesForData, indicesWithDataMap),\n                maxIndexesPerMark,\n            };\n        }\n        return this._cache.marks;\n    }\n    _removeMarksSinceIndex(sinceIndex) {\n        if (sinceIndex === 0) {\n            this._marksByWeight.clear();\n            return;\n        }\n        const weightsToClear = [];\n        this._marksByWeight.forEach((marks, timeWeight) => {\n            if (sinceIndex <= marks[0].index) {\n                weightsToClear.push(timeWeight);\n            }\n            else {\n                marks.splice(lowerBound(marks, sinceIndex, (tm) => tm.index < sinceIndex), Infinity);\n            }\n        });\n        for (const weight of weightsToClear) {\n            this._marksByWeight.delete(weight);\n        }\n    }\n    _buildMarksImpl(maxIndexesPerMark, checkIndicesForData, indicesWithDataMap) {\n        let marks = [];\n        const canBeIncluded = (mark) => !checkIndicesForData || indicesWithDataMap.has(mark.index);\n        for (const weight of Array.from(this._marksByWeight.keys()).sort((a, b) => b - a)) {\n            if (!this._marksByWeight.get(weight)) {\n                continue;\n            }\n            // Built tickMarks are now prevMarks, and marks it as new array\n            const prevMarks = marks;\n            marks = [];\n            const prevMarksLength = prevMarks.length;\n            let prevMarksPointer = 0;\n            const currentWeight = ensureDefined(this._marksByWeight.get(weight));\n            const currentWeightLength = currentWeight.length;\n            let rightIndex = Infinity;\n            let leftIndex = -Infinity;\n            for (let i = 0; i < currentWeightLength; i++) {\n                const mark = currentWeight[i];\n                const currentIndex = mark.index;\n                // Determine indexes with which current index will be compared\n                // All marks to the right is moved to new array\n                while (prevMarksPointer < prevMarksLength) {\n                    const lastMark = prevMarks[prevMarksPointer];\n                    const lastIndex = lastMark.index;\n                    if (lastIndex < currentIndex && canBeIncluded(lastMark)) {\n                        prevMarksPointer++;\n                        marks.push(lastMark);\n                        leftIndex = lastIndex;\n                        rightIndex = Infinity;\n                    }\n                    else {\n                        rightIndex = lastIndex;\n                        break;\n                    }\n                }\n                if (rightIndex - currentIndex >= maxIndexesPerMark &&\n                    currentIndex - leftIndex >= maxIndexesPerMark &&\n                    canBeIncluded(mark)) {\n                    // TickMark fits. Place it into new array\n                    marks.push(mark);\n                    leftIndex = currentIndex;\n                }\n                else {\n                    if (this._uniformDistribution) {\n                        return prevMarks;\n                    }\n                }\n            }\n            // Place all unused tickMarks into new array;\n            for (; prevMarksPointer < prevMarksLength; prevMarksPointer++) {\n                if (canBeIncluded(prevMarks[prevMarksPointer])) {\n                    marks.push(prevMarks[prevMarksPointer]);\n                }\n            }\n        }\n        return marks;\n    }\n}\n", "import { RangeImpl } from './range-impl';\nexport class TimeScaleVisibleRange {\n    constructor(logicalRange) {\n        this._logicalRange = logicalRange;\n    }\n    strictRange() {\n        if (this._logicalRange === null) {\n            return null;\n        }\n        return new RangeImpl(Math.floor(this._logicalRange.left()), Math.ceil(this._logicalRange.right()));\n    }\n    logicalRange() {\n        return this._logicalRange;\n    }\n    static invalid() {\n        return new TimeScaleVisibleRange(null);\n    }\n}\n", "import { lowerBound } from '../helpers/algorithms';\nimport { ensureNotNull } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { clamp } from '../helpers/mathex';\nimport { isInteger, merge } from '../helpers/strict-type-checks';\nimport { FormattedLabelsCache } from './formatted-labels-cache';\nimport { areRangesEqual, RangeImpl } from './range-impl';\nimport { TickMarks } from './tick-marks';\nimport { TimeScaleVisibleRange } from './time-scale-visible-range';\nconst defaultTickMarkMaxCharacterLength = 8;\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"DefaultAnimationDuration\"] = 400] = \"DefaultAnimationDuration\";\n    // make sure that this (1 / MinVisibleBarsCount) >= coeff in max bar spacing\n    Constants[Constants[\"MinVisibleBarsCount\"] = 2] = \"MinVisibleBarsCount\";\n})(Constants || (Constants = {}));\nexport function markWithGreaterWeight(a, b) {\n    return a.weight > b.weight ? a : b;\n}\nexport class TimeScale {\n    constructor(model, options, localizationOptions, horzScaleBehavior) {\n        this._width = 0;\n        this._baseIndexOrNull = null;\n        this._points = [];\n        this._scrollStartPoint = null;\n        this._scaleStartPoint = null;\n        this._tickMarks = new TickMarks();\n        this._formattedByWeight = new Map();\n        this._visibleRange = TimeScaleVisibleRange.invalid();\n        this._visibleRangeInvalidated = true;\n        this._visibleBarsChanged = new Delegate();\n        this._logicalRangeChanged = new Delegate();\n        this._optionsApplied = new Delegate();\n        this._commonTransitionStartState = null;\n        this._timeMarksCache = null;\n        this._indicesWithData = new Map();\n        this._indicesWithDataUpdateId = -1;\n        this._labels = [];\n        this._conflationFactor = 1;\n        this._options = options;\n        this._localizationOptions = localizationOptions;\n        this._rightOffset = options.rightOffset;\n        this._barSpacing = options.barSpacing;\n        this._model = model;\n        this._checkRightOffsetPixels(options);\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._updateDateTimeFormatter();\n        this._tickMarks.setUniformDistribution(options.uniformDistribution);\n        this._updateConflationFactor();\n        this.recalculateIndicesWithData();\n    }\n    options() {\n        return this._options;\n    }\n    applyLocalizationOptions(localizationOptions) {\n        merge(this._localizationOptions, localizationOptions);\n        this._invalidateTickMarks();\n        this._updateDateTimeFormatter();\n    }\n    applyOptions(options, localizationOptions) {\n        merge(this._options, options);\n        if (this._options.fixLeftEdge) {\n            this._doFixLeftEdge();\n        }\n        if (this._options.fixRightEdge) {\n            this._doFixRightEdge();\n        }\n        // note that bar spacing should be applied before right offset\n        // because right offset depends on bar spacing\n        if (options.barSpacing !== undefined) {\n            this._model.setBarSpacing(options.barSpacing);\n        }\n        if (options.rightOffset !== undefined) {\n            this._model.setRightOffset(options.rightOffset);\n        }\n        this._checkRightOffsetPixels(options);\n        if (options.minBarSpacing !== undefined || options.maxBarSpacing !== undefined) {\n            // yes, if we apply bar spacing constrains then we need to correct bar spacing\n            // the easiest way is to apply it once again\n            this._model.setBarSpacing(options.barSpacing ?? this._barSpacing);\n        }\n        if (options.ignoreWhitespaceIndices !== undefined && options.ignoreWhitespaceIndices !== this._options.ignoreWhitespaceIndices) {\n            this.recalculateIndicesWithData();\n        }\n        this._invalidateTickMarks();\n        this._updateDateTimeFormatter();\n        // Recompute conflation factor when options that may affect it change\n        if (options.enableConflation !== undefined || options.conflationThresholdFactor !== undefined) {\n            this._updateConflationFactor();\n        }\n        this._optionsApplied.fire();\n    }\n    indexToTime(index) {\n        return this._points[index]?.time ?? null;\n    }\n    indexToTimeScalePoint(index) {\n        return this._points[index] ?? null;\n    }\n    timeToIndex(time, findNearest) {\n        if (this._points.length < 1) {\n            // no time points available\n            return null;\n        }\n        if (this._horzScaleBehavior.key(time) > this._horzScaleBehavior.key(this._points[this._points.length - 1].time)) {\n            // special case\n            return findNearest ? this._points.length - 1 : null;\n        }\n        const index = lowerBound(this._points, this._horzScaleBehavior.key(time), (a, b) => this._horzScaleBehavior.key(a.time) < b);\n        if (this._horzScaleBehavior.key(time) < this._horzScaleBehavior.key(this._points[index].time)) {\n            return findNearest ? index : null;\n        }\n        return index;\n    }\n    isEmpty() {\n        return this._width === 0 || this._points.length === 0 || this._baseIndexOrNull === null;\n    }\n    hasPoints() {\n        return this._points.length > 0;\n    }\n    // strict range: integer indices of the bars in the visible range rounded in more wide direction\n    visibleStrictRange() {\n        this._updateVisibleRange();\n        return this._visibleRange.strictRange();\n    }\n    visibleLogicalRange() {\n        this._updateVisibleRange();\n        return this._visibleRange.logicalRange();\n    }\n    visibleTimeRange() {\n        const visibleBars = this.visibleStrictRange();\n        if (visibleBars === null) {\n            return null;\n        }\n        const range = {\n            from: visibleBars.left(),\n            to: visibleBars.right(),\n        };\n        return this.timeRangeForLogicalRange(range);\n    }\n    timeRangeForLogicalRange(range) {\n        const from = Math.round(range.from);\n        const to = Math.round(range.to);\n        const firstIndex = ensureNotNull(this._firstIndex());\n        const lastIndex = ensureNotNull(this._lastIndex());\n        return {\n            from: ensureNotNull(this.indexToTimeScalePoint(Math.max(firstIndex, from))),\n            to: ensureNotNull(this.indexToTimeScalePoint(Math.min(lastIndex, to))),\n        };\n    }\n    logicalRangeForTimeRange(range) {\n        return {\n            from: ensureNotNull(this.timeToIndex(range.from, true)),\n            to: ensureNotNull(this.timeToIndex(range.to, true)),\n        };\n    }\n    width() {\n        return this._width;\n    }\n    setWidth(newWidth) {\n        if (!isFinite(newWidth) || newWidth <= 0) {\n            return;\n        }\n        if (this._width === newWidth) {\n            return;\n        }\n        // when we change the width and we need to correct visible range because of fixing left edge\n        // we need to check the previous visible range rather than the new one\n        // because it might be updated by changing width, bar spacing, etc\n        // but we need to try to keep the same range\n        const previousVisibleRange = this.visibleLogicalRange();\n        const oldWidth = this._width;\n        this._width = newWidth;\n        this._visibleRangeInvalidated = true;\n        if (this._options.lockVisibleTimeRangeOnResize && oldWidth !== 0) {\n            // recalculate bar spacing\n            const newBarSpacing = this._barSpacing * newWidth / oldWidth;\n            this._barSpacing = newBarSpacing;\n        }\n        // if time scale is scrolled to the end of data and we have fixed right edge\n        // keep left edge instead of right\n        // we need it to avoid \"shaking\" if the last bar visibility affects time scale width\n        if (this._options.fixLeftEdge) {\n            // note that logical left range means not the middle of a bar (it's the left border)\n            if (previousVisibleRange !== null && previousVisibleRange.left() <= 0) {\n                const delta = oldWidth - newWidth;\n                // reduce  _rightOffset means move right\n                // we could move more than required - this will be fixed by _correctOffset()\n                this._rightOffset -= Math.round(delta / this._barSpacing) + 1;\n                this._visibleRangeInvalidated = true;\n            }\n        }\n        // updating bar spacing should be first because right offset depends on it\n        this._correctBarSpacing();\n        this._correctOffset();\n    }\n    indexToCoordinate(index) {\n        if (this.isEmpty() || !isInteger(index)) {\n            return 0;\n        }\n        const baseIndex = this.baseIndex();\n        const deltaFromRight = baseIndex + this._rightOffset - index;\n        const coordinate = this._width - (deltaFromRight + 0.5) * this._barSpacing - 1;\n        return coordinate;\n    }\n    indexesToCoordinates(points, visibleRange) {\n        const baseIndex = this.baseIndex();\n        const indexFrom = (visibleRange === undefined) ? 0 : visibleRange.from;\n        const indexTo = (visibleRange === undefined) ? points.length : visibleRange.to;\n        for (let i = indexFrom; i < indexTo; i++) {\n            const index = points[i].time;\n            const deltaFromRight = baseIndex + this._rightOffset - index;\n            const coordinate = this._width - (deltaFromRight + 0.5) * this._barSpacing - 1;\n            points[i].x = coordinate;\n        }\n    }\n    coordinateToIndex(x, considerIgnoreWhitespace) {\n        const index = Math.ceil(this._coordinateToFloatIndex(x));\n        if (!considerIgnoreWhitespace ||\n            !this._options.ignoreWhitespaceIndices ||\n            this._shouldConsiderIndex(index)) {\n            return index;\n        }\n        return this._findNearestIndexWithData(index);\n    }\n    setRightOffset(offset) {\n        this._visibleRangeInvalidated = true;\n        this._rightOffset = offset;\n        this._correctOffset();\n        this._model.recalculateAllPanes();\n        this._model.lightUpdate();\n    }\n    barSpacing() {\n        return this._barSpacing;\n    }\n    setBarSpacing(newBarSpacing) {\n        const oldBarSpacing = this._barSpacing;\n        this._setBarSpacing(newBarSpacing);\n        if (this._options.rightOffsetPixels !== undefined && oldBarSpacing !== 0) {\n            // when in pixel mode, zooming should keep the pixel offset, so we need to\n            // recalculate the bar offset.\n            const newRightOffset = this._rightOffset * oldBarSpacing / this._barSpacing;\n            this._rightOffset = newRightOffset;\n        }\n        // do not allow scroll out of visible bars\n        this._correctOffset();\n        this._model.recalculateAllPanes();\n        this._model.lightUpdate();\n    }\n    rightOffset() {\n        return this._rightOffset;\n    }\n    // eslint-disable-next-line complexity\n    marks() {\n        if (this.isEmpty()) {\n            return null;\n        }\n        if (this._timeMarksCache !== null) {\n            return this._timeMarksCache;\n        }\n        const spacing = this._barSpacing;\n        const fontSize = this._model.options()['layout'].fontSize;\n        const pixelsPer8Characters = (fontSize + 4) * 5;\n        const pixelsPerCharacter = pixelsPer8Characters / defaultTickMarkMaxCharacterLength;\n        const maxLabelWidth = pixelsPerCharacter * (this._options.tickMarkMaxCharacterLength || defaultTickMarkMaxCharacterLength);\n        const indexPerLabel = Math.round(maxLabelWidth / spacing);\n        const visibleBars = ensureNotNull(this.visibleStrictRange());\n        const firstBar = Math.max(visibleBars.left(), visibleBars.left() - indexPerLabel);\n        const lastBar = Math.max(visibleBars.right(), visibleBars.right() - indexPerLabel);\n        const items = this._tickMarks.build(spacing, maxLabelWidth, this._options.ignoreWhitespaceIndices, this._indicesWithData, this._indicesWithDataUpdateId);\n        // according to indexPerLabel value this value means \"earliest index which _might be_ used as the second label on time scale\"\n        const earliestIndexOfSecondLabel = this._firstIndex() + indexPerLabel;\n        // according to indexPerLabel value this value means \"earliest index which _might be_ used as the second last label on time scale\"\n        const indexOfSecondLastLabel = this._lastIndex() - indexPerLabel;\n        const isAllScalingAndScrollingDisabled = this._isAllScalingAndScrollingDisabled();\n        const isLeftEdgeFixed = this._options.fixLeftEdge || isAllScalingAndScrollingDisabled;\n        const isRightEdgeFixed = this._options.fixRightEdge || isAllScalingAndScrollingDisabled;\n        let targetIndex = 0;\n        for (const tm of items) {\n            if (!(firstBar <= tm.index && tm.index <= lastBar)) {\n                continue;\n            }\n            let label;\n            if (targetIndex < this._labels.length) {\n                label = this._labels[targetIndex];\n                label.coord = this.indexToCoordinate(tm.index);\n                label.label = this._formatLabel(tm);\n                label.weight = tm.weight;\n            }\n            else {\n                label = {\n                    needAlignCoordinate: false,\n                    coord: this.indexToCoordinate(tm.index),\n                    label: this._formatLabel(tm),\n                    weight: tm.weight,\n                };\n                this._labels.push(label);\n            }\n            if (this._barSpacing > (maxLabelWidth / 2) && !isAllScalingAndScrollingDisabled) {\n                // if there is enough space then let's show all tick marks as usual\n                label.needAlignCoordinate = false;\n            }\n            else {\n                // if a user is able to scroll after a tick mark then show it as usual, otherwise the coordinate might be aligned\n                // if the index is for the second (last) label or later (earlier) then most likely this label might be displayed without correcting the coordinate\n                label.needAlignCoordinate = (isLeftEdgeFixed && tm.index <= earliestIndexOfSecondLabel) || (isRightEdgeFixed && tm.index >= indexOfSecondLastLabel);\n            }\n            targetIndex++;\n        }\n        this._labels.length = targetIndex;\n        this._timeMarksCache = this._labels;\n        return this._labels;\n    }\n    restoreDefault() {\n        this._visibleRangeInvalidated = true;\n        this.setBarSpacing(this._options.barSpacing);\n        let newOffset;\n        if (this._options.rightOffsetPixels !== undefined) {\n            newOffset = this._options.rightOffsetPixels / this.barSpacing();\n        }\n        else {\n            newOffset = this._options.rightOffset;\n        }\n        this.setRightOffset(newOffset);\n    }\n    setBaseIndex(baseIndex) {\n        this._visibleRangeInvalidated = true;\n        this._baseIndexOrNull = baseIndex;\n        this._correctOffset();\n        this._doFixLeftEdge();\n    }\n    /**\n     * Zoom in/out the scale around a `zoomPoint` on `scale` value.\n     *\n     * @param zoomPoint - X coordinate of the point to apply the zoom.\n     * If `rightBarStaysOnScroll` option is disabled, then will be used to restore right offset.\n     * @param scale - Zoom value (in 1/10 parts of current bar spacing).\n     * Negative value means zoom out, positive - zoom in.\n     */\n    zoom(zoomPoint, scale) {\n        const floatIndexAtZoomPoint = this._coordinateToFloatIndex(zoomPoint);\n        const barSpacing = this.barSpacing();\n        const newBarSpacing = barSpacing + scale * (barSpacing / 10);\n        // zoom in/out bar spacing\n        this.setBarSpacing(newBarSpacing);\n        if (!this._options.rightBarStaysOnScroll) {\n            // and then correct right offset to move index under zoomPoint back to its coordinate\n            this.setRightOffset(this.rightOffset() + (floatIndexAtZoomPoint - this._coordinateToFloatIndex(zoomPoint)));\n        }\n    }\n    startScale(x) {\n        if (this._scrollStartPoint) {\n            this.endScroll();\n        }\n        if (this._scaleStartPoint !== null || this._commonTransitionStartState !== null) {\n            return;\n        }\n        if (this.isEmpty()) {\n            return;\n        }\n        this._scaleStartPoint = x;\n        this._saveCommonTransitionsStartState();\n    }\n    scaleTo(x) {\n        if (this._commonTransitionStartState === null) {\n            return;\n        }\n        const startLengthFromRight = clamp(this._width - x, 0, this._width);\n        const currentLengthFromRight = clamp(this._width - ensureNotNull(this._scaleStartPoint), 0, this._width);\n        if (startLengthFromRight === 0 || currentLengthFromRight === 0) {\n            return;\n        }\n        this.setBarSpacing(this._commonTransitionStartState.barSpacing * startLengthFromRight / currentLengthFromRight);\n    }\n    endScale() {\n        if (this._scaleStartPoint === null) {\n            return;\n        }\n        this._scaleStartPoint = null;\n        this._clearCommonTransitionsStartState();\n    }\n    startScroll(x) {\n        if (this._scrollStartPoint !== null || this._commonTransitionStartState !== null) {\n            return;\n        }\n        if (this.isEmpty()) {\n            return;\n        }\n        this._scrollStartPoint = x;\n        this._saveCommonTransitionsStartState();\n    }\n    scrollTo(x) {\n        if (this._scrollStartPoint === null) {\n            return;\n        }\n        const shiftInLogical = (this._scrollStartPoint - x) / this.barSpacing();\n        this._rightOffset = ensureNotNull(this._commonTransitionStartState).rightOffset + shiftInLogical;\n        this._visibleRangeInvalidated = true;\n        // do not allow scroll out of visible bars\n        this._correctOffset();\n    }\n    endScroll() {\n        if (this._scrollStartPoint === null) {\n            return;\n        }\n        this._scrollStartPoint = null;\n        this._clearCommonTransitionsStartState();\n    }\n    scrollToRealTime() {\n        this.scrollToOffsetAnimated(this._options.rightOffset);\n    }\n    scrollToOffsetAnimated(offset, animationDuration = 400 /* Constants.DefaultAnimationDuration */) {\n        if (!isFinite(offset)) {\n            throw new RangeError('offset is required and must be finite number');\n        }\n        if (!isFinite(animationDuration) || animationDuration <= 0) {\n            throw new RangeError('animationDuration (optional) must be finite positive number');\n        }\n        const source = this._rightOffset;\n        const animationStart = performance.now();\n        this._model.setTimeScaleAnimation({\n            finished: (time) => (time - animationStart) / animationDuration >= 1,\n            getPosition: (time) => {\n                const animationProgress = (time - animationStart) / animationDuration;\n                const finishAnimation = animationProgress >= 1;\n                return finishAnimation ? offset : source + (offset - source) * animationProgress;\n            },\n        });\n    }\n    update(newPoints, firstChangedPointIndex) {\n        this._visibleRangeInvalidated = true;\n        this._points = newPoints;\n        this._tickMarks.setTimeScalePoints(newPoints, firstChangedPointIndex);\n        this._correctOffset();\n    }\n    visibleBarsChanged() {\n        return this._visibleBarsChanged;\n    }\n    logicalRangeChanged() {\n        return this._logicalRangeChanged;\n    }\n    optionsApplied() {\n        return this._optionsApplied;\n    }\n    baseIndex() {\n        // null is used to known that baseIndex is not set yet\n        // so in methods which should known whether it is set or not\n        // we should check field `_baseIndexOrNull` instead of getter `baseIndex()`\n        // see minRightOffset for example\n        return this._baseIndexOrNull || 0;\n    }\n    setVisibleRange(range, applyDefaultOffset) {\n        const length = range.count();\n        const pixelOffset = (applyDefaultOffset && this._options.rightOffsetPixels) || 0;\n        this._setBarSpacing((this._width - pixelOffset) / length);\n        this._rightOffset = range.right() - this.baseIndex();\n        if (applyDefaultOffset) {\n            this._rightOffset = pixelOffset\n                ? pixelOffset / this.barSpacing()\n                : this._options.rightOffset;\n        }\n        this._correctOffset();\n        this._visibleRangeInvalidated = true;\n        this._model.recalculateAllPanes();\n        this._model.lightUpdate();\n    }\n    fitContent() {\n        const first = this._firstIndex();\n        const last = this._lastIndex();\n        if (first === null || last === null) {\n            return;\n        }\n        this.setVisibleRange(new RangeImpl(first, last), true);\n    }\n    setLogicalRange(range) {\n        const barRange = new RangeImpl(range.from, range.to);\n        this.setVisibleRange(barRange);\n    }\n    formatDateTime(timeScalePoint) {\n        if (this._localizationOptions.timeFormatter !== undefined) {\n            return this._localizationOptions.timeFormatter(timeScalePoint.originalTime);\n        }\n        return this._horzScaleBehavior.formatHorzItem(timeScalePoint.time);\n    }\n    recalculateIndicesWithData() {\n        if (!this._options.ignoreWhitespaceIndices) {\n            return;\n        }\n        this._indicesWithData.clear();\n        const series = this._model.serieses();\n        for (const s of series) {\n            for (const index of s.fulfilledIndices()) {\n                this._indicesWithData.set(index, true);\n            }\n        }\n        this._indicesWithDataUpdateId++;\n    }\n    /**\n     * Returns the current data conflation factor.\n     * Factor \\> 1 means data points should be conflated for performance.\n     */\n    conflationFactor() {\n        return this._conflationFactor;\n    }\n    /**\n     * Provides an array of possible conflations factors based on the current\n     * minBarSpacing setting for the chart.\n     * @returns Arrays of conflation factors (number of bars to merge)\n     */\n    possibleConflationFactors() {\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        const conflationThreshold = 1.0 / devicePixelRatio;\n        const minBarSpacing = this._options.minBarSpacing;\n        if (minBarSpacing >= conflationThreshold) {\n            return [1];\n        }\n        // Return all power-of-2 conflation levels that might be used\n        const factors = [1];\n        let currentLevel = 2;\n        const maxLevel = 512;\n        while (currentLevel <= maxLevel) {\n            const levelThreshold = conflationThreshold / currentLevel;\n            if (minBarSpacing < levelThreshold) {\n                factors.push(currentLevel);\n            }\n            currentLevel *= 2;\n        }\n        return factors;\n    }\n    _isAllScalingAndScrollingDisabled() {\n        const handleScroll = this._model.options()['handleScroll'];\n        const handleScale = this._model.options()['handleScale'];\n        return !handleScroll.horzTouchDrag\n            && !handleScroll.mouseWheel\n            && !handleScroll.pressedMouseMove\n            && !handleScroll.vertTouchDrag\n            && !handleScale.axisDoubleClickReset.time\n            && !handleScale.axisPressedMouseMove.time\n            && !handleScale.mouseWheel\n            && !handleScale.pinch;\n    }\n    _firstIndex() {\n        return this._points.length === 0 ? null : 0;\n    }\n    _lastIndex() {\n        return this._points.length === 0 ? null : (this._points.length - 1);\n    }\n    _rightOffsetForCoordinate(x) {\n        return (this._width - 1 - x) / this._barSpacing;\n    }\n    _coordinateToFloatIndex(x) {\n        const deltaFromRight = this._rightOffsetForCoordinate(x);\n        const baseIndex = this.baseIndex();\n        const index = baseIndex + this._rightOffset - deltaFromRight;\n        // JavaScript uses very strange rounding\n        // we need rounding to avoid problems with calculation errors\n        return Math.round(index * 1000000) / 1000000;\n    }\n    _setBarSpacing(newBarSpacing) {\n        const oldBarSpacing = this._barSpacing;\n        this._barSpacing = newBarSpacing;\n        this._correctBarSpacing();\n        // this._barSpacing might be changed in _correctBarSpacing\n        if (oldBarSpacing !== this._barSpacing) {\n            this._visibleRangeInvalidated = true;\n            this._resetTimeMarksCache();\n            this._updateConflationFactor();\n        }\n    }\n    _updateVisibleRange() {\n        if (!this._visibleRangeInvalidated) {\n            return;\n        }\n        this._visibleRangeInvalidated = false;\n        if (this.isEmpty()) {\n            this._setVisibleRange(TimeScaleVisibleRange.invalid());\n            return;\n        }\n        const baseIndex = this.baseIndex();\n        const newBarsLength = this._width / this._barSpacing;\n        const rightBorder = this._rightOffset + baseIndex;\n        const leftBorder = rightBorder - newBarsLength + 1;\n        const logicalRange = new RangeImpl(leftBorder, rightBorder);\n        this._setVisibleRange(new TimeScaleVisibleRange(logicalRange));\n    }\n    _correctBarSpacing() {\n        const barSpacing = clamp(this._barSpacing, this._minBarSpacing(), this._maxBarSpacing());\n        if (this._barSpacing !== barSpacing) {\n            this._barSpacing = barSpacing;\n            this._visibleRangeInvalidated = true;\n        }\n    }\n    _maxBarSpacing() {\n        if (this._options.maxBarSpacing > 0) {\n            // option takes precedance\n            return this._options.maxBarSpacing;\n        }\n        else {\n            // half of the width is default value for maximum bar spacing\n            return this._width * 0.5;\n        }\n    }\n    _minBarSpacing() {\n        // if both options are enabled then limit bar spacing so that zooming-out is not possible\n        // if it would cause either the first or last points to move too far from an edge\n        if (this._options.fixLeftEdge && this._options.fixRightEdge && this._points.length !== 0) {\n            return this._width / this._points.length;\n        }\n        return this._options.minBarSpacing;\n    }\n    /**\n     * Updates the conflation factor based on current bar spacing using DPR-aware power-of-2 calculation with optional smoothing factor.\n     * The smoothing factor allows intentional over-conflation for smoother appearance in small charts and sparklines.\n     */\n    _updateConflationFactor() {\n        if (!this._options.enableConflation) {\n            this._conflationFactor = 1;\n            return;\n        }\n        // Use DPR-aware threshold calculation with smoothing factor\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        const smoothingFactor = this._options.conflationThresholdFactor ?? 1;\n        const adjustedThreshold = (1.0 / devicePixelRatio) * smoothingFactor;\n        if (this._barSpacing >= adjustedThreshold) {\n            this._conflationFactor = 1;\n            return;\n        }\n        // Calculate conflation level as power of 2\n        const ratio = adjustedThreshold / this._barSpacing;\n        const conflationLevel = Math.pow(2, Math.floor(Math.log2(ratio)));\n        // Ensure we don't exceed maximum conflation level (512)\n        this._conflationFactor = Math.min(conflationLevel, 512);\n    }\n    _correctOffset() {\n        // block scrolling of to past\n        const minRightOffset = this._minRightOffset();\n        if (minRightOffset !== null && this._rightOffset < minRightOffset) {\n            this._rightOffset = minRightOffset;\n            this._visibleRangeInvalidated = true;\n        }\n        // block scrolling of to future\n        const maxRightOffset = this._maxRightOffset();\n        if (this._rightOffset > maxRightOffset) {\n            this._rightOffset = maxRightOffset;\n            this._visibleRangeInvalidated = true;\n        }\n    }\n    _minRightOffset() {\n        const firstIndex = this._firstIndex();\n        const baseIndex = this._baseIndexOrNull;\n        if (firstIndex === null || baseIndex === null) {\n            return null;\n        }\n        const barsEstimation = this._options.fixLeftEdge\n            ? this._width / this._barSpacing\n            : Math.min(2 /* Constants.MinVisibleBarsCount */, this._points.length);\n        return firstIndex - baseIndex - 1 + barsEstimation;\n    }\n    _maxRightOffset() {\n        return this._options.fixRightEdge\n            ? 0\n            : (this._width / this._barSpacing) - Math.min(2 /* Constants.MinVisibleBarsCount */, this._points.length);\n    }\n    _saveCommonTransitionsStartState() {\n        this._commonTransitionStartState = {\n            barSpacing: this.barSpacing(),\n            rightOffset: this.rightOffset(),\n        };\n    }\n    _clearCommonTransitionsStartState() {\n        this._commonTransitionStartState = null;\n    }\n    _formatLabel(tickMark) {\n        let formatter = this._formattedByWeight.get(tickMark.weight);\n        if (formatter === undefined) {\n            formatter = new FormattedLabelsCache((mark) => {\n                return this._formatLabelImpl(mark);\n            }, this._horzScaleBehavior);\n            this._formattedByWeight.set(tickMark.weight, formatter);\n        }\n        return formatter.format(tickMark);\n    }\n    _formatLabelImpl(tickMark) {\n        return this._horzScaleBehavior.formatTickmark(tickMark, this._localizationOptions);\n    }\n    _setVisibleRange(newVisibleRange) {\n        const oldVisibleRange = this._visibleRange;\n        this._visibleRange = newVisibleRange;\n        if (!areRangesEqual(oldVisibleRange.strictRange(), this._visibleRange.strictRange())) {\n            this._visibleBarsChanged.fire();\n        }\n        if (!areRangesEqual(oldVisibleRange.logicalRange(), this._visibleRange.logicalRange())) {\n            this._logicalRangeChanged.fire();\n        }\n        // TODO: reset only coords in case when this._visibleBars has not been changed\n        this._resetTimeMarksCache();\n    }\n    _resetTimeMarksCache() {\n        this._timeMarksCache = null;\n    }\n    _invalidateTickMarks() {\n        this._resetTimeMarksCache();\n        this._formattedByWeight.clear();\n    }\n    _updateDateTimeFormatter() {\n        this._horzScaleBehavior.updateFormatter(this._localizationOptions);\n    }\n    _doFixLeftEdge() {\n        if (!this._options.fixLeftEdge) {\n            return;\n        }\n        const firstIndex = this._firstIndex();\n        if (firstIndex === null) {\n            return;\n        }\n        const visibleRange = this.visibleStrictRange();\n        if (visibleRange === null) {\n            return;\n        }\n        const delta = visibleRange.left() - firstIndex;\n        if (delta < 0) {\n            const leftEdgeOffset = this._rightOffset - delta - 1;\n            this.setRightOffset(leftEdgeOffset);\n        }\n        this._correctBarSpacing();\n    }\n    _doFixRightEdge() {\n        this._correctOffset();\n        this._correctBarSpacing();\n    }\n    _shouldConsiderIndex(index) {\n        if (!this._options.ignoreWhitespaceIndices) {\n            return true;\n        }\n        return this._indicesWithData.get(index) || false;\n    }\n    _findNearestIndexWithData(x) {\n        const gen = testNearestIntegers(x);\n        const maxIndex = this._lastIndex();\n        while (maxIndex) {\n            const index = gen.next().value;\n            if (this._indicesWithData.get(index)) {\n                return index;\n            }\n            if (index < 0 || index > maxIndex) {\n                break;\n            }\n        }\n        return x; // fallback to original index\n    }\n    _checkRightOffsetPixels(options) {\n        if (options.rightOffsetPixels !== undefined) {\n            const newOffset = options.rightOffsetPixels / (options.barSpacing || this._barSpacing);\n            this._model.setRightOffset(newOffset);\n        }\n    }\n}\nfunction* testNearestIntegers(num) {\n    const rounded = Math.round(num);\n    const isRoundedDown = rounded < num;\n    let offset = 1;\n    while (true) {\n        if (isRoundedDown) {\n            yield rounded + offset;\n            yield rounded - offset;\n        }\n        else {\n            yield rounded - offset;\n            yield rounded + offset;\n        }\n        offset++;\n    }\n}\n", "/// <reference types=\"_build-time-constants\" />\nimport { assert, ensureNotNull } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { merge } from '../helpers/strict-type-checks';\nimport { PriceAxisRendererOptionsProvider } from '../renderers/price-axis-renderer-options-provider';\nimport { ColorParser } from './colors';\nimport { Crosshair } from './crosshair';\nimport { isDefaultPriceScale } from './default-price-scale';\nimport { InvalidateMask } from './invalidate-mask';\nimport { Magnet } from './magnet';\nimport { DEFAULT_STRETCH_FACTOR, MIN_PANE_HEIGHT, Pane } from './pane';\nimport { hitTestPane } from './pane-hit-test';\nimport { TimeScale } from './time-scale';\nvar BackgroundColorSide;\n(function (BackgroundColorSide) {\n    BackgroundColorSide[BackgroundColorSide[\"Top\"] = 0] = \"Top\";\n    BackgroundColorSide[BackgroundColorSide[\"Bottom\"] = 1] = \"Bottom\";\n})(BackgroundColorSide || (BackgroundColorSide = {}));\n/**\n * Determine how to exit the tracking mode.\n *\n * By default, mobile users will long press to deactivate the scroll and have the ability to check values and dates.\n * Another press is required to activate the scroll, be able to move left/right, zoom, etc.\n */\nexport var TrackingModeExitMode;\n(function (TrackingModeExitMode) {\n    /**\n     * Tracking Mode will be deactivated on touch end event.\n     */\n    TrackingModeExitMode[TrackingModeExitMode[\"OnTouchEnd\"] = 0] = \"OnTouchEnd\";\n    /**\n     * Tracking Mode will be deactivated on the next tap event.\n     */\n    TrackingModeExitMode[TrackingModeExitMode[\"OnNextTap\"] = 1] = \"OnNextTap\";\n})(TrackingModeExitMode || (TrackingModeExitMode = {}));\nfunction isPanePrimitive(source) {\n    return source instanceof Pane;\n}\nexport class ChartModel {\n    constructor(invalidateHandler, options, horzScaleBehavior) {\n        this._panes = [];\n        this._serieses = [];\n        this._width = 0;\n        this._hoveredSource = null;\n        this._priceScalesOptionsChanged = new Delegate();\n        this._crosshairMoved = new Delegate();\n        this._gradientColorsCache = null;\n        this._invalidateHandler = invalidateHandler;\n        this._options = options;\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._colorParser = new ColorParser(this._options.layout.colorParsers);\n        this._rendererOptionsProvider = new PriceAxisRendererOptionsProvider(this);\n        this._timeScale = new TimeScale(this, options.timeScale, this._options.localization, horzScaleBehavior);\n        this._crosshair = new Crosshair(this, options.crosshair);\n        this._magnet = new Magnet(options.crosshair);\n        if (options.addDefaultPane) {\n            this._getOrCreatePane(0);\n            this._panes[0].setStretchFactor(DEFAULT_STRETCH_FACTOR * 2);\n        }\n        this._backgroundTopColor = this._getBackgroundColor(0 /* BackgroundColorSide.Top */);\n        this._backgroundBottomColor = this._getBackgroundColor(1 /* BackgroundColorSide.Bottom */);\n    }\n    fullUpdate() {\n        this._invalidate(InvalidateMask.full());\n    }\n    lightUpdate() {\n        this._invalidate(InvalidateMask.light());\n    }\n    cursorUpdate() {\n        this._invalidate(new InvalidateMask(1 /* InvalidationLevel.Cursor */));\n    }\n    updateSource(source) {\n        const inv = this._invalidationMaskForSource(source);\n        this._invalidate(inv);\n    }\n    hoveredSource() {\n        return this._hoveredSource;\n    }\n    setHoveredSource(source) {\n        if (this._hoveredSource?.source === source?.source && this._hoveredSource?.object?.externalId === source?.object?.externalId) {\n            return;\n        }\n        const prevSource = this._hoveredSource;\n        this._hoveredSource = source;\n        if (prevSource !== null) {\n            this.updateSource(prevSource.source);\n        }\n        // additional check to prevent unnecessary updates of same source\n        if (source !== null && source.source !== prevSource?.source) {\n            this.updateSource(source.source);\n        }\n    }\n    options() {\n        return this._options;\n    }\n    applyOptions(options) {\n        merge(this._options, options);\n        this._panes.forEach((p) => p.applyScaleOptions(options));\n        if (options.timeScale !== undefined) {\n            this._timeScale.applyOptions(options.timeScale);\n        }\n        if (options.localization !== undefined) {\n            this._timeScale.applyLocalizationOptions(options.localization);\n        }\n        if (options.leftPriceScale || options.rightPriceScale) {\n            this._priceScalesOptionsChanged.fire();\n        }\n        this._backgroundTopColor = this._getBackgroundColor(0 /* BackgroundColorSide.Top */);\n        this._backgroundBottomColor = this._getBackgroundColor(1 /* BackgroundColorSide.Bottom */);\n        this.fullUpdate();\n    }\n    applyPriceScaleOptions(priceScaleId, options, paneIndex = 0) {\n        const pane = this._panes[paneIndex];\n        if (pane === undefined) {\n            if (process.env.NODE_ENV === 'development') {\n                throw new Error(`Trying to apply price scale options with incorrect pane index: ${paneIndex}`);\n            }\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (priceScaleId === \"left\" /* DefaultPriceScaleId.Left */) {\n            merge(this._options, {\n                leftPriceScale: options,\n            });\n            pane.applyScaleOptions({\n                leftPriceScale: options,\n            });\n            this._priceScalesOptionsChanged.fire();\n            this.fullUpdate();\n            return;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        }\n        else if (priceScaleId === \"right\" /* DefaultPriceScaleId.Right */) {\n            merge(this._options, {\n                rightPriceScale: options,\n            });\n            pane.applyScaleOptions({\n                rightPriceScale: options,\n            });\n            this._priceScalesOptionsChanged.fire();\n            this.fullUpdate();\n            return;\n        }\n        const res = this.findPriceScale(priceScaleId, paneIndex);\n        if (res === null) {\n            if (process.env.NODE_ENV === 'development') {\n                throw new Error(`Trying to apply price scale options with incorrect ID: ${priceScaleId}`);\n            }\n            return;\n        }\n        res.priceScale.applyOptions(options);\n        this._priceScalesOptionsChanged.fire();\n    }\n    findPriceScale(priceScaleId, paneIndex) {\n        const pane = this._panes[paneIndex];\n        if (pane === undefined) {\n            return null;\n        }\n        const priceScale = pane.priceScaleById(priceScaleId);\n        if (priceScale !== null) {\n            return {\n                pane,\n                priceScale,\n            };\n        }\n        return null;\n    }\n    timeScale() {\n        return this._timeScale;\n    }\n    panes() {\n        return this._panes;\n    }\n    crosshairSource() {\n        return this._crosshair;\n    }\n    crosshairMoved() {\n        return this._crosshairMoved;\n    }\n    setPaneHeight(pane, height) {\n        pane.setHeight(height);\n        this.recalculateAllPanes();\n    }\n    setWidth(width) {\n        this._width = width;\n        this._timeScale.setWidth(this._width);\n        this._panes.forEach((pane) => pane.setWidth(width));\n        this.recalculateAllPanes();\n    }\n    removePane(index) {\n        if (this._panes.length === 1) {\n            return;\n        }\n        assert(index >= 0 && index < this._panes.length, 'Invalid pane index');\n        this._panes.splice(index, 1);\n        this.fullUpdate();\n    }\n    changePanesHeight(paneIndex, height) {\n        if (this._panes.length < 2) {\n            return;\n        }\n        assert(paneIndex >= 0 && paneIndex < this._panes.length, 'Invalid pane index');\n        const targetPane = this._panes[paneIndex];\n        const totalStretch = this._panes.reduce((prevValue, pane) => prevValue + pane.stretchFactor(), 0);\n        const totalHeight = this._panes.reduce((prevValue, pane) => prevValue + pane.height(), 0);\n        const maxPaneHeight = totalHeight - MIN_PANE_HEIGHT * (this._panes.length - 1);\n        height = Math.min(maxPaneHeight, Math.max(MIN_PANE_HEIGHT, height));\n        const pixelStretchFactor = totalStretch / totalHeight;\n        const oldHeight = targetPane.height();\n        targetPane.setStretchFactor(height * pixelStretchFactor);\n        let otherPanesChange = height - oldHeight;\n        let panesCount = this._panes.length - 1;\n        for (const pane of this._panes) {\n            if (pane !== targetPane) {\n                const newPaneHeight = Math.min(maxPaneHeight, Math.max(30, pane.height() - otherPanesChange / panesCount));\n                otherPanesChange -= (pane.height() - newPaneHeight);\n                panesCount -= 1;\n                const newStretchFactor = newPaneHeight * pixelStretchFactor;\n                pane.setStretchFactor(newStretchFactor);\n            }\n        }\n        this.fullUpdate();\n    }\n    swapPanes(first, second) {\n        assert(first >= 0 && first < this._panes.length && second >= 0 && second < this._panes.length, 'Invalid pane index');\n        const firstPane = this._panes[first];\n        const secondPane = this._panes[second];\n        this._panes[first] = secondPane;\n        this._panes[second] = firstPane;\n        this.fullUpdate();\n    }\n    movePane(from, to) {\n        assert(from >= 0 && from < this._panes.length && to >= 0 && to < this._panes.length, 'Invalid pane index');\n        if (from === to) {\n            return;\n        }\n        const [paneToMove] = this._panes.splice(from, 1);\n        this._panes.splice(to, 0, paneToMove);\n        this.fullUpdate();\n    }\n    startScalePrice(pane, priceScale, x) {\n        pane.startScalePrice(priceScale, x);\n    }\n    scalePriceTo(pane, priceScale, x) {\n        pane.scalePriceTo(priceScale, x);\n        this.updateCrosshair();\n        this._invalidate(this._paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    endScalePrice(pane, priceScale) {\n        pane.endScalePrice(priceScale);\n        this._invalidate(this._paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    startScrollPrice(pane, priceScale, x) {\n        if (priceScale.isAutoScale()) {\n            return;\n        }\n        pane.startScrollPrice(priceScale, x);\n    }\n    scrollPriceTo(pane, priceScale, x) {\n        if (priceScale.isAutoScale()) {\n            return;\n        }\n        pane.scrollPriceTo(priceScale, x);\n        this.updateCrosshair();\n        this._invalidate(this._paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    endScrollPrice(pane, priceScale) {\n        if (priceScale.isAutoScale()) {\n            return;\n        }\n        pane.endScrollPrice(priceScale);\n        this._invalidate(this._paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    resetPriceScale(pane, priceScale) {\n        pane.resetPriceScale(priceScale);\n        this._invalidate(this._paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    startScaleTime(position) {\n        this._timeScale.startScale(position);\n    }\n    /**\n     * Zoom in/out the chart (depends on scale value).\n     *\n     * @param pointX - X coordinate of the point to apply the zoom (the point which should stay on its place)\n     * @param scale - Zoom value. Negative value means zoom out, positive - zoom in.\n     */\n    zoomTime(pointX, scale) {\n        const timeScale = this.timeScale();\n        if (timeScale.isEmpty() || scale === 0) {\n            return;\n        }\n        const timeScaleWidth = timeScale.width();\n        pointX = Math.max(1, Math.min(pointX, timeScaleWidth));\n        timeScale.zoom(pointX, scale);\n        this.recalculateAllPanes();\n    }\n    scrollChart(x) {\n        this.startScrollTime(0);\n        this.scrollTimeTo(x);\n        this.endScrollTime();\n    }\n    scaleTimeTo(x) {\n        this._timeScale.scaleTo(x);\n        this.recalculateAllPanes();\n    }\n    endScaleTime() {\n        this._timeScale.endScale();\n        this.lightUpdate();\n    }\n    startScrollTime(x) {\n        this._timeScale.startScroll(x);\n    }\n    scrollTimeTo(x) {\n        this._timeScale.scrollTo(x);\n        this.recalculateAllPanes();\n    }\n    endScrollTime() {\n        this._timeScale.endScroll();\n        this.lightUpdate();\n    }\n    serieses() {\n        return this._serieses;\n    }\n    setAndSaveCurrentPosition(x, y, event, pane, skipEvent) {\n        this._crosshair.saveOriginCoord(x, y);\n        let price = NaN;\n        let index = this._timeScale.coordinateToIndex(x, true);\n        const visibleBars = this._timeScale.visibleStrictRange();\n        if (visibleBars !== null) {\n            index = Math.min(Math.max(visibleBars.left(), index), visibleBars.right());\n        }\n        const priceScale = pane.defaultPriceScale();\n        const firstValue = priceScale.firstValue();\n        if (firstValue !== null) {\n            price = priceScale.coordinateToPrice(y, firstValue);\n        }\n        price = this._magnet.align(price, index, pane);\n        this._crosshair.setPosition(index, price, pane);\n        this.cursorUpdate();\n        if (!skipEvent) {\n            const hitTest = hitTestPane(pane, x, y);\n            this.setHoveredSource(hitTest && { source: hitTest.source, object: hitTest.object, cursorStyle: hitTest.cursorStyle || null });\n            this._crosshairMoved.fire(this._crosshair.appliedIndex(), { x, y }, event);\n        }\n    }\n    // A position provided external (not from an internal event listener)\n    setAndSaveSyntheticPosition(price, horizontalPosition, pane) {\n        const priceScale = pane.defaultPriceScale();\n        const firstValue = priceScale.firstValue();\n        const y = priceScale.priceToCoordinate(price, ensureNotNull(firstValue));\n        const index = this._timeScale.timeToIndex(horizontalPosition, true);\n        const x = this._timeScale.indexToCoordinate(ensureNotNull(index));\n        this.setAndSaveCurrentPosition(x, y, null, pane, true);\n    }\n    clearCurrentPosition(skipEvent) {\n        const crosshair = this.crosshairSource();\n        crosshair.clearPosition();\n        this.cursorUpdate();\n        if (!skipEvent) {\n            this._crosshairMoved.fire(null, null, null);\n        }\n    }\n    updateCrosshair() {\n        // apply magnet\n        const pane = this._crosshair.pane();\n        if (pane !== null) {\n            const x = this._crosshair.originCoordX();\n            const y = this._crosshair.originCoordY();\n            this.setAndSaveCurrentPosition(x, y, null, pane);\n        }\n        this._crosshair.updateAllViews();\n    }\n    updateTimeScale(newBaseIndex, newPoints, firstChangedPointIndex) {\n        const oldFirstTime = this._timeScale.indexToTime(0);\n        if (newPoints !== undefined && firstChangedPointIndex !== undefined) {\n            this._timeScale.update(newPoints, firstChangedPointIndex);\n        }\n        const newFirstTime = this._timeScale.indexToTime(0);\n        const currentBaseIndex = this._timeScale.baseIndex();\n        const visibleBars = this._timeScale.visibleStrictRange();\n        // if time scale cannot return current visible bars range (e.g. time scale has zero-width)\n        // then we do not need to update right offset to shift visible bars range to have the same right offset as we have before new bar\n        // (and actually we cannot)\n        if (visibleBars !== null && oldFirstTime !== null && newFirstTime !== null) {\n            const isLastSeriesBarVisible = visibleBars.contains(currentBaseIndex);\n            const isLeftBarShiftToLeft = this._horzScaleBehavior.key(oldFirstTime) > this._horzScaleBehavior.key(newFirstTime);\n            const isSeriesPointsAdded = newBaseIndex !== null && newBaseIndex > currentBaseIndex;\n            const isSeriesPointsAddedToRight = isSeriesPointsAdded && !isLeftBarShiftToLeft;\n            const allowShiftWhenReplacingWhitespace = this._timeScale.options().allowShiftVisibleRangeOnWhitespaceReplacement;\n            const replacedExistingWhitespace = firstChangedPointIndex === undefined;\n            const needShiftVisibleRangeOnNewBar = isLastSeriesBarVisible && (!replacedExistingWhitespace || allowShiftWhenReplacingWhitespace) && this._timeScale.options().shiftVisibleRangeOnNewBar;\n            if (isSeriesPointsAddedToRight && !needShiftVisibleRangeOnNewBar) {\n                const compensationShift = newBaseIndex - currentBaseIndex;\n                this._timeScale.setRightOffset(this._timeScale.rightOffset() - compensationShift);\n            }\n        }\n        this._timeScale.setBaseIndex(newBaseIndex);\n    }\n    recalculatePane(pane) {\n        if (pane !== null) {\n            pane.recalculate();\n        }\n    }\n    paneForSource(source) {\n        if (isPanePrimitive(source)) {\n            return source;\n        }\n        const pane = this._panes.find((p) => p.orderedSources().includes(source));\n        return pane === undefined ? null : pane;\n    }\n    recalculateAllPanes() {\n        this._panes.forEach((p) => p.recalculate());\n        this.updateCrosshair();\n    }\n    destroy() {\n        this._panes.forEach((p) => p.destroy());\n        this._panes.length = 0;\n        // to avoid memleaks\n        this._options.localization.priceFormatter = undefined;\n        this._options.localization.percentageFormatter = undefined;\n        this._options.localization.timeFormatter = undefined;\n    }\n    rendererOptionsProvider() {\n        return this._rendererOptionsProvider;\n    }\n    priceAxisRendererOptions() {\n        return this._rendererOptionsProvider.options();\n    }\n    priceScalesOptionsChanged() {\n        return this._priceScalesOptionsChanged;\n    }\n    addSeriesToPane(series, paneIndex) {\n        const pane = this._getOrCreatePane(paneIndex);\n        this._addSeriesToPane(series, pane);\n        this._serieses.push(series);\n        if (this._serieses.length === 1) {\n            // call fullUpdate to recalculate chart's parts geometry\n            this.fullUpdate();\n        }\n        else {\n            this.lightUpdate();\n        }\n    }\n    removeSeries(series) {\n        const pane = this.paneForSource(series);\n        const seriesIndex = this._serieses.indexOf(series);\n        assert(seriesIndex !== -1, 'Series not found');\n        const paneImpl = ensureNotNull(pane);\n        this._serieses.splice(seriesIndex, 1);\n        paneImpl.removeDataSource(series);\n        if (series.destroy) {\n            series.destroy();\n        }\n        this._timeScale.recalculateIndicesWithData();\n        this._cleanupIfPaneIsEmpty(paneImpl);\n    }\n    moveSeriesToScale(series, targetScaleId) {\n        const pane = ensureNotNull(this.paneForSource(series));\n        pane.removeDataSource(series, true);\n        pane.addDataSource(series, targetScaleId, true);\n    }\n    fitContent() {\n        const mask = InvalidateMask.light();\n        mask.setFitContent();\n        this._invalidate(mask);\n    }\n    setTargetLogicalRange(range) {\n        const mask = InvalidateMask.light();\n        mask.applyRange(range);\n        this._invalidate(mask);\n    }\n    resetTimeScale() {\n        const mask = InvalidateMask.light();\n        mask.resetTimeScale();\n        this._invalidate(mask);\n    }\n    setBarSpacing(spacing) {\n        const mask = InvalidateMask.light();\n        mask.setBarSpacing(spacing);\n        this._invalidate(mask);\n    }\n    setRightOffset(offset) {\n        const mask = InvalidateMask.light();\n        mask.setRightOffset(offset);\n        this._invalidate(mask);\n    }\n    setTimeScaleAnimation(animation) {\n        const mask = InvalidateMask.light();\n        mask.setTimeScaleAnimation(animation);\n        this._invalidate(mask);\n    }\n    stopTimeScaleAnimation() {\n        const mask = InvalidateMask.light();\n        mask.stopTimeScaleAnimation();\n        this._invalidate(mask);\n    }\n    defaultVisiblePriceScaleId() {\n        return this._options.rightPriceScale.visible ? \"right\" /* DefaultPriceScaleId.Right */ : \"left\" /* DefaultPriceScaleId.Left */;\n    }\n    moveSeriesToPane(series, newPaneIndex) {\n        assert(newPaneIndex >= 0, 'Index should be greater or equal to 0');\n        const fromPaneIndex = this._seriesPaneIndex(series);\n        if (newPaneIndex === fromPaneIndex) {\n            return;\n        }\n        const previousPane = ensureNotNull(this.paneForSource(series));\n        previousPane.removeDataSource(series);\n        const newPane = this._getOrCreatePane(newPaneIndex);\n        this._addSeriesToPane(series, newPane);\n        if (previousPane.dataSources().length === 0) {\n            this._cleanupIfPaneIsEmpty(previousPane);\n        }\n        this.fullUpdate();\n    }\n    backgroundBottomColor() {\n        return this._backgroundBottomColor;\n    }\n    backgroundTopColor() {\n        return this._backgroundTopColor;\n    }\n    backgroundColorAtYPercentFromTop(percent) {\n        const bottomColor = this._backgroundBottomColor;\n        const topColor = this._backgroundTopColor;\n        if (bottomColor === topColor) {\n            // solid background\n            return bottomColor;\n        }\n        // gradient background\n        // percent should be from 0 to 100 (we're using only integer values to make cache more efficient)\n        percent = Math.max(0, Math.min(100, Math.round(percent * 100)));\n        if (this._gradientColorsCache === null ||\n            this._gradientColorsCache.topColor !== topColor || this._gradientColorsCache.bottomColor !== bottomColor) {\n            this._gradientColorsCache = {\n                topColor: topColor,\n                bottomColor: bottomColor,\n                colors: new Map(),\n            };\n        }\n        else {\n            const cachedValue = this._gradientColorsCache.colors.get(percent);\n            if (cachedValue !== undefined) {\n                return cachedValue;\n            }\n        }\n        const result = this._colorParser.gradientColorAtPercent(topColor, bottomColor, percent / 100);\n        this._gradientColorsCache.colors.set(percent, result);\n        return result;\n    }\n    getPaneIndex(pane) {\n        return this._panes.indexOf(pane);\n    }\n    colorParser() {\n        return this._colorParser;\n    }\n    addPane() {\n        return this._addPane();\n    }\n    _addPane(index) {\n        const pane = new Pane(this._timeScale, this);\n        this._panes.push(pane);\n        const idx = index ?? this._panes.length - 1;\n        // we always do autoscaling on the creation\n        // if autoscale option is true, it is ok, just recalculate by invalidation mask\n        // if autoscale option is false, autoscale anyway on the first draw\n        // also there is a scenario when autoscale is true in constructor and false later on applyOptions\n        const mask = InvalidateMask.full();\n        mask.invalidatePane(idx, {\n            level: 0 /* InvalidationLevel.None */,\n            autoScale: true,\n        });\n        this._invalidate(mask);\n        return pane;\n    }\n    _getOrCreatePane(index) {\n        assert(index >= 0, 'Index should be greater or equal to 0');\n        index = Math.min(this._panes.length, index);\n        if (index < this._panes.length) {\n            return this._panes[index];\n        }\n        return this._addPane(index);\n    }\n    _seriesPaneIndex(series) {\n        return this._panes.findIndex((pane) => pane.series().includes(series));\n    }\n    _paneInvalidationMask(pane, level) {\n        const inv = new InvalidateMask(level);\n        if (pane !== null) {\n            const index = this._panes.indexOf(pane);\n            inv.invalidatePane(index, {\n                level,\n            });\n        }\n        return inv;\n    }\n    _invalidationMaskForSource(source, invalidateType) {\n        if (invalidateType === undefined) {\n            invalidateType = 2 /* InvalidationLevel.Light */;\n        }\n        return this._paneInvalidationMask(this.paneForSource(source), invalidateType);\n    }\n    _invalidate(mask) {\n        if (this._invalidateHandler) {\n            this._invalidateHandler(mask);\n        }\n        this._panes.forEach((pane) => pane.grid().paneView().update());\n    }\n    _addSeriesToPane(series, pane) {\n        const priceScaleId = series.options().priceScaleId;\n        const targetScaleId = priceScaleId !== undefined ? priceScaleId : this.defaultVisiblePriceScaleId();\n        pane.addDataSource(series, targetScaleId);\n        if (!isDefaultPriceScale(targetScaleId)) {\n            // let's apply that options again to apply margins\n            series.applyOptions(series.options());\n        }\n    }\n    _getBackgroundColor(side) {\n        const layoutOptions = this._options['layout'];\n        if (layoutOptions.background.type === \"gradient\" /* ColorType.VerticalGradient */) {\n            return side === 0 /* BackgroundColorSide.Top */ ?\n                layoutOptions.background.topColor :\n                layoutOptions.background.bottomColor;\n        }\n        return layoutOptions.background.color;\n    }\n    _cleanupIfPaneIsEmpty(pane) {\n        if (!pane.preserveEmptyPane() && (pane.dataSources().length === 0 && this._panes.length > 1)) {\n            this._panes.splice(this.getPaneIndex(pane), 1);\n        }\n    }\n}\n", "export function fillUpDownCandlesticksColors(options) {\n    if (options.borderColor !== undefined) {\n        options.borderUpColor = options.borderColor;\n        options.borderDownColor = options.borderColor;\n    }\n    if (options.wickColor !== undefined) {\n        options.wickUpColor = options.wickColor;\n        options.wickDownColor = options.wickColor;\n    }\n}\n/**\n * Represents the type of the last price animation for series such as area or line.\n */\nexport var LastPriceAnimationMode;\n(function (LastPriceAnimationMode) {\n    /**\n     * Animation is always disabled\n     */\n    LastPriceAnimationMode[LastPriceAnimationMode[\"Disabled\"] = 0] = \"Disabled\";\n    /**\n     * Animation is always enabled.\n     */\n    LastPriceAnimationMode[LastPriceAnimationMode[\"Continuous\"] = 1] = \"Continuous\";\n    /**\n     * Animation is active after new data.\n     */\n    LastPriceAnimationMode[LastPriceAnimationMode[\"OnDataUpdate\"] = 2] = \"OnDataUpdate\";\n})(LastPriceAnimationMode || (LastPriceAnimationMode = {}));\nexport function precisionByMinMove(minMove) {\n    if (minMove >= 1) {\n        return 0;\n    }\n    let i = 0;\n    for (; i < 8; i++) {\n        const intPart = Math.round(minMove);\n        const fractPart = Math.abs(intPart - minMove);\n        if (fractPart < 1e-8) {\n            return i;\n        }\n        minMove = minMove * 10;\n    }\n    return i;\n}\nexport var PriceAxisLastValueMode;\n(function (PriceAxisLastValueMode) {\n    PriceAxisLastValueMode[PriceAxisLastValueMode[\"LastPriceAndPercentageValue\"] = 0] = \"LastPriceAndPercentageValue\";\n    PriceAxisLastValueMode[PriceAxisLastValueMode[\"LastValueAccordingToScale\"] = 1] = \"LastValueAccordingToScale\";\n})(PriceAxisLastValueMode || (PriceAxisLastValueMode = {}));\n/**\n * Represents the source of data to be used for the horizontal price line.\n */\nexport var PriceLineSource;\n(function (PriceLineSource) {\n    /**\n     * Use the last bar data.\n     */\n    PriceLineSource[PriceLineSource[\"LastBar\"] = 0] = \"LastBar\";\n    /**\n     * Use the last visible data of the chart viewport.\n     */\n    PriceLineSource[PriceLineSource[\"LastVisible\"] = 1] = \"LastVisible\";\n})(PriceLineSource || (PriceLineSource = {}));\n", "/**\n * Represents a type of color.\n */\nexport var ColorType;\n(function (ColorType) {\n    /** Solid color */\n    ColorType[\"Solid\"] = \"solid\";\n    /** Vertical gradient color */\n    ColorType[\"VerticalGradient\"] = \"gradient\";\n})(ColorType || (ColorType = {}));\n", "import { isNumber, isString } from '../../helpers/strict-type-checks';\n/**\n * Check if a time value is a business day object.\n *\n * @param time - The time to check.\n * @returns `true` if `time` is a {@link BusinessDay} object, false otherwise.\n */\nexport function isBusinessDay(time) {\n    return !isNumber(time) && !isString(time);\n}\n/**\n * Check if a time value is a UTC timestamp number.\n *\n * @param time - The time to check.\n * @returns `true` if `time` is a {@link UTCTimestamp} number, false otherwise.\n */\nexport function isUTCTimestamp(time) {\n    return isNumber(time);\n}\n/**\n * Represents the type of a tick mark on the time axis.\n */\nexport var TickMarkType;\n(function (TickMarkType) {\n    /**\n     * The start of the year (e.g. it's the first tick mark in a year).\n     */\n    TickMarkType[TickMarkType[\"Year\"] = 0] = \"Year\";\n    /**\n     * The start of the month (e.g. it's the first tick mark in a month).\n     */\n    TickMarkType[TickMarkType[\"Month\"] = 1] = \"Month\";\n    /**\n     * A day of the month.\n     */\n    TickMarkType[TickMarkType[\"DayOfMonth\"] = 2] = \"DayOfMonth\";\n    /**\n     * A time without seconds.\n     */\n    TickMarkType[TickMarkType[\"Time\"] = 3] = \"Time\";\n    /**\n     * A time with seconds.\n     */\n    TickMarkType[TickMarkType[\"TimeWithSeconds\"] = 4] = \"TimeWithSeconds\";\n})(TickMarkType || (TickMarkType = {}));\n/**\n * Describes a weight of tick mark, i.e. a part of a time that changed since previous time.\n * Note that you can use any timezone to calculate this value, it is unnecessary to use UTC.\n *\n * @example Between 2020-01-01 and 2020-01-02 there is a day of difference, i.e. for 2020-01-02 weight would be a day.\n * @example Between 2020-01-01 and 2020-02-02 there is a month of difference, i.e. for 2020-02-02 weight would be a month.\n */\nexport var TickMarkWeight;\n(function (TickMarkWeight) {\n    TickMarkWeight[TickMarkWeight[\"LessThanSecond\"] = 0] = \"LessThanSecond\";\n    TickMarkWeight[TickMarkWeight[\"Second\"] = 10] = \"Second\";\n    TickMarkWeight[TickMarkWeight[\"Minute1\"] = 20] = \"Minute1\";\n    TickMarkWeight[TickMarkWeight[\"Minute5\"] = 21] = \"Minute5\";\n    TickMarkWeight[TickMarkWeight[\"Minute30\"] = 22] = \"Minute30\";\n    TickMarkWeight[TickMarkWeight[\"Hour1\"] = 30] = \"Hour1\";\n    TickMarkWeight[TickMarkWeight[\"Hour3\"] = 31] = \"Hour3\";\n    TickMarkWeight[TickMarkWeight[\"Hour6\"] = 32] = \"Hour6\";\n    TickMarkWeight[TickMarkWeight[\"Hour12\"] = 33] = \"Hour12\";\n    TickMarkWeight[TickMarkWeight[\"Day\"] = 50] = \"Day\";\n    TickMarkWeight[TickMarkWeight[\"Month\"] = 60] = \"Month\";\n    TickMarkWeight[TickMarkWeight[\"Year\"] = 70] = \"Year\";\n})(TickMarkWeight || (TickMarkWeight = {}));\n", "import { numberToStringWithLeadingZero as numToStr } from './price-formatter';\nconst getMonth = (date) => date.getUTCMonth() + 1;\nconst getDay = (date) => date.getUTCDate();\nconst getYear = (date) => date.getUTCFullYear();\nconst dd = (date) => numToStr(getDay(date), 2);\nconst MMMM = (date, locale) => new Date(date.getUTCFullYear(), date.getUTCMonth(), 1)\n    .toLocaleString(locale, { month: 'long' });\nconst MMM = (date, locale) => new Date(date.getUTCFullYear(), date.getUTCMonth(), 1)\n    .toLocaleString(locale, { month: 'short' });\nconst MM = (date) => numToStr(getMonth(date), 2);\nconst yy = (date) => numToStr(getYear(date) % 100, 2);\nconst yyyy = (date) => numToStr(getYear(date), 4);\nexport function formatDate(date, format, locale) {\n    return format\n        .replace(/yyyy/g, yyyy(date))\n        .replace(/yy/g, yy(date))\n        .replace(/MMMM/g, MMMM(date, locale))\n        .replace(/MMM/g, MMM(date, locale))\n        .replace(/MM/g, MM(date))\n        .replace(/dd/g, dd(date));\n}\n", "import { formatDate } from './format-date';\nexport class DateFormatter {\n    constructor(dateFormat = 'yyyy-MM-dd', locale = 'default') {\n        this._dateFormat = dateFormat;\n        this._locale = locale;\n    }\n    format(date) {\n        return formatDate(date, this._dateFormat, this._locale);\n    }\n}\n", "import { numberToStringWithLeadingZero } from './price-formatter';\nexport class TimeFormatter {\n    constructor(format) {\n        this._formatStr = format || '%h:%m:%s';\n    }\n    format(date) {\n        return this._formatStr.replace('%h', numberToStringWithLeadingZero(date.getUTCHours(), 2)).\n            replace('%m', numberToStringWithLeadingZero(date.getUTCMinutes(), 2)).\n            replace('%s', numberToStringWithLeadingZero(date.getUTCSeconds(), 2));\n    }\n}\n", "import { DateFormatter } from './date-formatter';\nimport { TimeFormatter } from './time-formatter';\nconst defaultParams = {\n    dateFormat: 'yyyy-MM-dd',\n    timeFormat: '%h:%m:%s',\n    dateTimeSeparator: ' ',\n    locale: 'default',\n};\nexport class DateTimeFormatter {\n    constructor(params = {}) {\n        const formatterParams = { ...defaultParams, ...params };\n        this._dateFormatter = new DateFormatter(formatterParams.dateFormat, formatterParams.locale);\n        this._timeFormatter = new TimeFormatter(formatterParams.timeFormat);\n        this._separator = formatterParams.dateTimeSeparator;\n    }\n    format(dateTime) {\n        return `${this._dateFormatter.format(dateTime)}${this._separator}${this._timeFormatter.format(dateTime)}`;\n    }\n}\n", "import { ensureNever } from '../../helpers/assertions';\nexport function defaultTickMarkFormatter(timePoint, tickMarkType, locale) {\n    const formatOptions = {};\n    switch (tickMarkType) {\n        case 0 /* TickMarkType.Year */:\n            formatOptions.year = 'numeric';\n            break;\n        case 1 /* TickMarkType.Month */:\n            formatOptions.month = 'short';\n            break;\n        case 2 /* TickMarkType.DayOfMonth */:\n            formatOptions.day = 'numeric';\n            break;\n        case 3 /* TickMarkType.Time */:\n            formatOptions.hour12 = false;\n            formatOptions.hour = '2-digit';\n            formatOptions.minute = '2-digit';\n            break;\n        case 4 /* TickMarkType.TimeWithSeconds */:\n            formatOptions.hour12 = false;\n            formatOptions.hour = '2-digit';\n            formatOptions.minute = '2-digit';\n            formatOptions.second = '2-digit';\n            break;\n        default:\n            ensureNever(tickMarkType);\n    }\n    const date = timePoint.businessDay === undefined\n        ? new Date(timePoint.timestamp * 1000)\n        : new Date(Date.UTC(timePoint.businessDay.year, timePoint.businessDay.month - 1, timePoint.businessDay.day));\n    // from given date we should use only as UTC date or timestamp\n    // but to format as locale date we can convert UTC date to local date\n    const localDateFromUtc = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());\n    return localDateFromUtc.toLocaleString(locale, formatOptions);\n}\n", "function hours(count) {\n    return count * 60 * 60 * 1000;\n}\nfunction minutes(count) {\n    return count * 60 * 1000;\n}\nfunction seconds(count) {\n    return count * 1000;\n}\nconst intradayWeightDivisors = [\n    { divisor: seconds(1), weight: 10 /* TickMarkWeight.Second */ },\n    { divisor: minutes(1), weight: 20 /* TickMarkWeight.Minute1 */ },\n    { divisor: minutes(5), weight: 21 /* TickMarkWeight.Minute5 */ },\n    { divisor: minutes(30), weight: 22 /* TickMarkWeight.Minute30 */ },\n    { divisor: hours(1), weight: 30 /* TickMarkWeight.Hour1 */ },\n    { divisor: hours(3), weight: 31 /* TickMarkWeight.Hour3 */ },\n    { divisor: hours(6), weight: 32 /* TickMarkWeight.Hour6 */ },\n    { divisor: hours(12), weight: 33 /* TickMarkWeight.Hour12 */ },\n];\nfunction weightByTime(currentDate, prevDate) {\n    if (currentDate.getUTCFullYear() !== prevDate.getUTCFullYear()) {\n        return 70 /* TickMarkWeight.Year */;\n    }\n    else if (currentDate.getUTCMonth() !== prevDate.getUTCMonth()) {\n        return 60 /* TickMarkWeight.Month */;\n    }\n    else if (currentDate.getUTCDate() !== prevDate.getUTCDate()) {\n        return 50 /* TickMarkWeight.Day */;\n    }\n    for (let i = intradayWeightDivisors.length - 1; i >= 0; --i) {\n        if (Math.floor(prevDate.getTime() / intradayWeightDivisors[i].divisor) !== Math.floor(currentDate.getTime() / intradayWeightDivisors[i].divisor)) {\n            return intradayWeightDivisors[i].weight;\n        }\n    }\n    return 0 /* TickMarkWeight.LessThanSecond */;\n}\nfunction cast(t) {\n    return t;\n}\nexport function fillWeightsForPoints(sortedTimePoints, startIndex = 0) {\n    if (sortedTimePoints.length === 0) {\n        return;\n    }\n    let prevTime = startIndex === 0 ? null : cast(sortedTimePoints[startIndex - 1].time).timestamp;\n    let prevDate = prevTime !== null ? new Date(prevTime * 1000) : null;\n    let totalTimeDiff = 0;\n    for (let index = startIndex; index < sortedTimePoints.length; ++index) {\n        const currentPoint = sortedTimePoints[index];\n        const currentDate = new Date(cast(currentPoint.time).timestamp * 1000);\n        if (prevDate !== null) {\n            currentPoint.timeWeight = weightByTime(currentDate, prevDate);\n        }\n        totalTimeDiff += cast(currentPoint.time).timestamp - (prevTime || cast(currentPoint.time).timestamp);\n        prevTime = cast(currentPoint.time).timestamp;\n        prevDate = currentDate;\n    }\n    if (startIndex === 0 && sortedTimePoints.length > 1) {\n        // let's guess a weight for the first point\n        // let's say the previous point was average time back in the history\n        const averageTimeDiff = Math.ceil(totalTimeDiff / (sortedTimePoints.length - 1));\n        const approxPrevDate = new Date((cast(sortedTimePoints[0].time).timestamp - averageTimeDiff) * 1000);\n        sortedTimePoints[0].timeWeight = weightByTime(new Date(cast(sortedTimePoints[0].time).timestamp * 1000), approxPrevDate);\n    }\n}\n", "import { isString } from '../../helpers/strict-type-checks';\nimport { isBusinessDay, isUTCTimestamp } from './types';\nexport function businessDayConverter(time) {\n    let businessDay = time;\n    if (isString(time)) {\n        businessDay = stringToBusinessDay(time);\n    }\n    if (!isBusinessDay(businessDay)) {\n        throw new Error('time must be of type BusinessDay');\n    }\n    const date = new Date(Date.UTC(businessDay.year, businessDay.month - 1, businessDay.day, 0, 0, 0, 0));\n    return {\n        timestamp: Math.round(date.getTime() / 1000),\n        businessDay,\n    };\n}\nexport function timestampConverter(time) {\n    if (!isUTCTimestamp(time)) {\n        throw new Error('time must be of type isUTCTimestamp');\n    }\n    return {\n        timestamp: time,\n    };\n}\nexport function selectTimeConverter(data) {\n    if (data.length === 0) {\n        return null;\n    }\n    if (isBusinessDay(data[0].time) || isString(data[0].time)) {\n        return businessDayConverter;\n    }\n    return timestampConverter;\n}\nconst validDateRegex = /^\\d\\d\\d\\d-\\d\\d-\\d\\d$/;\nexport function convertTime(time) {\n    if (isUTCTimestamp(time)) {\n        return timestampConverter(time);\n    }\n    if (!isBusinessDay(time)) {\n        return businessDayConverter(stringToBusinessDay(time));\n    }\n    return businessDayConverter(time);\n}\nexport function stringToBusinessDay(value) {\n    if (process.env.NODE_ENV === 'development') {\n        // in some browsers (I look at your Chrome) the Date constructor may accept invalid date string\n        // but parses them in 'implementation specific' way\n        // for example 2019-1-1 isn't the same as 2019-01-01 (for Chrome both are 'valid' date strings)\n        // see https://bugs.chromium.org/p/chromium/issues/detail?id=968939\n        // so, we need to be sure that date has valid format to avoid strange behavior and hours of debugging\n        // but let's do this in development build only because of perf\n        if (!validDateRegex.test(value)) {\n            throw new Error(`Invalid date string=${value}, expected format=yyyy-mm-dd`);\n        }\n    }\n    const d = new Date(value);\n    if (isNaN(d.getTime())) {\n        throw new Error(`Invalid date string=${value}, expected format=yyyy-mm-dd`);\n    }\n    return {\n        day: d.getUTCDate(),\n        month: d.getUTCMonth() + 1,\n        year: d.getUTCFullYear(),\n    };\n}\nexport function convertStringToBusinessDay(value) {\n    if (isString(value.time)) {\n        value.time = stringToBusinessDay(value.time);\n    }\n}\nexport function convertStringsToBusinessDays(data) {\n    return data.forEach(convertStringToBusinessDay);\n}\n", "import { DateFormatter } from '../../formatters/date-formatter';\nimport { DateTimeFormatter } from '../../formatters/date-time-formatter';\nimport { ensureNotNull } from '../../helpers/assertions';\nimport { merge } from '../../helpers/strict-type-checks';\nimport { markWithGreaterWeight } from '../time-scale';\nimport { defaultTickMarkFormatter } from './default-tick-mark-formatter';\nimport { fillWeightsForPoints } from './time-scale-point-weight-generator';\nimport { convertStringsToBusinessDays, convertStringToBusinessDay, convertTime, selectTimeConverter } from './time-utils';\n// eslint-disable-next-line complexity\nfunction weightToTickMarkType(weight, timeVisible, secondsVisible) {\n    switch (weight) {\n        case 0 /* TickMarkWeight.LessThanSecond */:\n        case 10 /* TickMarkWeight.Second */:\n            return timeVisible\n                ? (secondsVisible ? 4 /* TickMarkType.TimeWithSeconds */ : 3 /* TickMarkType.Time */)\n                : 2 /* TickMarkType.DayOfMonth */;\n        case 20 /* TickMarkWeight.Minute1 */:\n        case 21 /* TickMarkWeight.Minute5 */:\n        case 22 /* TickMarkWeight.Minute30 */:\n        case 30 /* TickMarkWeight.Hour1 */:\n        case 31 /* TickMarkWeight.Hour3 */:\n        case 32 /* TickMarkWeight.Hour6 */:\n        case 33 /* TickMarkWeight.Hour12 */:\n            return timeVisible ? 3 /* TickMarkType.Time */ : 2 /* TickMarkType.DayOfMonth */;\n        case 50 /* TickMarkWeight.Day */:\n            return 2 /* TickMarkType.DayOfMonth */;\n        case 60 /* TickMarkWeight.Month */:\n            return 1 /* TickMarkType.Month */;\n        case 70 /* TickMarkWeight.Year */:\n            return 0 /* TickMarkType.Year */;\n    }\n}\nexport class HorzScaleBehaviorTime {\n    options() {\n        return this._options;\n    }\n    setOptions(options) {\n        this._options = options;\n        this.updateFormatter(options.localization);\n    }\n    preprocessData(data) {\n        if (Array.isArray(data)) {\n            convertStringsToBusinessDays(data);\n        }\n        else {\n            convertStringToBusinessDay(data);\n        }\n    }\n    createConverterToInternalObj(data) {\n        return ensureNotNull(selectTimeConverter(data));\n    }\n    key(item) {\n        // eslint-disable-next-line no-restricted-syntax\n        if (typeof item === 'object' && 'timestamp' in item) {\n            return item.timestamp;\n        }\n        else {\n            return this.key(this.convertHorzItemToInternal(item));\n        }\n    }\n    cacheKey(item) {\n        const time = item;\n        return time.businessDay === undefined\n            ? new Date(time.timestamp * 1000).getTime()\n            : new Date(Date.UTC(time.businessDay.year, time.businessDay.month - 1, time.businessDay.day)).getTime();\n    }\n    convertHorzItemToInternal(item) {\n        return convertTime(item);\n    }\n    updateFormatter(options) {\n        if (!this._options) {\n            return;\n        }\n        const dateFormat = options.dateFormat;\n        if (this._options.timeScale.timeVisible) {\n            this._dateTimeFormatter = new DateTimeFormatter({\n                dateFormat: dateFormat,\n                timeFormat: this._options.timeScale.secondsVisible ? '%h:%m:%s' : '%h:%m',\n                dateTimeSeparator: '   ',\n                locale: options.locale,\n            });\n        }\n        else {\n            this._dateTimeFormatter = new DateFormatter(dateFormat, options.locale);\n        }\n    }\n    formatHorzItem(item) {\n        const tp = item;\n        return this._dateTimeFormatter.format(new Date(tp.timestamp * 1000));\n    }\n    formatTickmark(tickMark, localizationOptions) {\n        const tickMarkType = weightToTickMarkType(tickMark.weight, this._options.timeScale.timeVisible, this._options.timeScale.secondsVisible);\n        const options = this._options.timeScale;\n        if (options.tickMarkFormatter !== undefined) {\n            const tickMarkString = options.tickMarkFormatter(tickMark.originalTime, tickMarkType, localizationOptions.locale);\n            if (tickMarkString !== null) {\n                return tickMarkString;\n            }\n        }\n        return defaultTickMarkFormatter(tickMark.time, tickMarkType, localizationOptions.locale);\n    }\n    maxTickMarkWeight(tickMarks) {\n        let maxWeight = tickMarks.reduce(markWithGreaterWeight, tickMarks[0]).weight;\n        // special case: it looks strange if 15:00 is bold but 14:00 is not\n        // so if maxWeight > TickMarkWeight.Hour1 and < TickMarkWeight.Day reduce it to TickMarkWeight.Hour1\n        if (maxWeight > 30 /* TickMarkWeight.Hour1 */ && maxWeight < 50 /* TickMarkWeight.Day */) {\n            maxWeight = 30 /* TickMarkWeight.Hour1 */;\n        }\n        return maxWeight;\n    }\n    fillWeightsForPoints(sortedTimePoints, startIndex) {\n        fillWeightsForPoints(sortedTimePoints, startIndex);\n    }\n    static applyDefaults(options) {\n        return merge({ localization: { dateFormat: 'dd MMM \\'yy' } }, options ?? {});\n    }\n}\n", "export function size(_a) {\n    var width = _a.width, height = _a.height;\n    if (width < 0) {\n        throw new Error('Negative width is not allowed for Size');\n    }\n    if (height < 0) {\n        throw new Error('Negative height is not allowed for Size');\n    }\n    return {\n        width: width,\n        height: height,\n    };\n}\nexport function equalSizes(first, second) {\n    return (first.width === second.width) &&\n        (first.height === second.height);\n}\n", "var Observable = /** @class */ (function () {\n    function Observable(win) {\n        var _this = this;\n        this._resolutionListener = function () { return _this._onResolutionChanged(); };\n        this._resolutionMediaQueryList = null;\n        this._observers = [];\n        this._window = win;\n        this._installResolutionListener();\n    }\n    Observable.prototype.dispose = function () {\n        this._uninstallResolutionListener();\n        this._window = null;\n    };\n    Object.defineProperty(Observable.prototype, \"value\", {\n        get: function () {\n            return this._window.devicePixelRatio;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Observable.prototype.subscribe = function (next) {\n        var _this = this;\n        var observer = { next: next };\n        this._observers.push(observer);\n        return {\n            unsubscribe: function () {\n                _this._observers = _this._observers.filter(function (o) { return o !== observer; });\n            },\n        };\n    };\n    Observable.prototype._installResolutionListener = function () {\n        if (this._resolutionMediaQueryList !== null) {\n            throw new Error('Resolution listener is already installed');\n        }\n        var dppx = this._window.devicePixelRatio;\n        this._resolutionMediaQueryList = this._window.matchMedia(\"all and (resolution: \".concat(dppx, \"dppx)\"));\n        // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n        this._resolutionMediaQueryList.addListener(this._resolutionListener);\n    };\n    Observable.prototype._uninstallResolutionListener = function () {\n        if (this._resolutionMediaQueryList !== null) {\n            // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n            this._resolutionMediaQueryList.removeListener(this._resolutionListener);\n            this._resolutionMediaQueryList = null;\n        }\n    };\n    Observable.prototype._reinstallResolutionListener = function () {\n        this._uninstallResolutionListener();\n        this._installResolutionListener();\n    };\n    Observable.prototype._onResolutionChanged = function () {\n        var _this = this;\n        this._observers.forEach(function (observer) { return observer.next(_this._window.devicePixelRatio); });\n        this._reinstallResolutionListener();\n    };\n    return Observable;\n}());\nexport function createObservable(win) {\n    return new Observable(win);\n}\n", "import { equalSizes, size } from \"./size.mjs\";\nimport { createObservable as createDevicePixelRatioObservable } from \"./device-pixel-ratio.mjs\";\nvar DevicePixelContentBoxBinding = /** @class */ (function () {\n    function DevicePixelContentBoxBinding(canvasElement, transformBitmapSize, options) {\n        var _a;\n        this._canvasElement = null;\n        this._bitmapSizeChangedListeners = [];\n        this._suggestedBitmapSize = null;\n        this._suggestedBitmapSizeChangedListeners = [];\n        // devicePixelRatio approach\n        this._devicePixelRatioObservable = null;\n        // ResizeObserver approach\n        this._canvasElementResizeObserver = null;\n        this._canvasElement = canvasElement;\n        this._canvasElementClientSize = size({\n            width: this._canvasElement.clientWidth,\n            height: this._canvasElement.clientHeight,\n        });\n        this._transformBitmapSize = transformBitmapSize !== null && transformBitmapSize !== void 0 ? transformBitmapSize : (function (size) { return size; });\n        this._allowResizeObserver = (_a = options === null || options === void 0 ? void 0 : options.allowResizeObserver) !== null && _a !== void 0 ? _a : true;\n        this._chooseAndInitObserver();\n        // we MAY leave the constuctor without any bitmap size observation mechanics initialized\n    }\n    DevicePixelContentBoxBinding.prototype.dispose = function () {\n        var _a, _b;\n        if (this._canvasElement === null) {\n            throw new Error('Object is disposed');\n        }\n        (_a = this._canvasElementResizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        this._canvasElementResizeObserver = null;\n        (_b = this._devicePixelRatioObservable) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._devicePixelRatioObservable = null;\n        this._suggestedBitmapSizeChangedListeners.length = 0;\n        this._bitmapSizeChangedListeners.length = 0;\n        this._canvasElement = null;\n    };\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"canvasElement\", {\n        get: function () {\n            if (this._canvasElement === null) {\n                throw new Error('Object is disposed');\n            }\n            return this._canvasElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"canvasElementClientSize\", {\n        get: function () {\n            return this._canvasElementClientSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"bitmapSize\", {\n        get: function () {\n            return size({\n                width: this.canvasElement.width,\n                height: this.canvasElement.height,\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Use this function to change canvas element client size until binding is disposed\n     * @param clientSize New client size for bound HTMLCanvasElement\n     */\n    DevicePixelContentBoxBinding.prototype.resizeCanvasElement = function (clientSize) {\n        this._canvasElementClientSize = size(clientSize);\n        this.canvasElement.style.width = \"\".concat(this._canvasElementClientSize.width, \"px\");\n        this.canvasElement.style.height = \"\".concat(this._canvasElementClientSize.height, \"px\");\n        this._invalidateBitmapSize();\n    };\n    DevicePixelContentBoxBinding.prototype.subscribeBitmapSizeChanged = function (listener) {\n        this._bitmapSizeChangedListeners.push(listener);\n    };\n    DevicePixelContentBoxBinding.prototype.unsubscribeBitmapSizeChanged = function (listener) {\n        this._bitmapSizeChangedListeners = this._bitmapSizeChangedListeners.filter(function (l) { return l !== listener; });\n    };\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"suggestedBitmapSize\", {\n        get: function () {\n            return this._suggestedBitmapSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DevicePixelContentBoxBinding.prototype.subscribeSuggestedBitmapSizeChanged = function (listener) {\n        this._suggestedBitmapSizeChangedListeners.push(listener);\n    };\n    DevicePixelContentBoxBinding.prototype.unsubscribeSuggestedBitmapSizeChanged = function (listener) {\n        this._suggestedBitmapSizeChangedListeners = this._suggestedBitmapSizeChangedListeners.filter(function (l) { return l !== listener; });\n    };\n    DevicePixelContentBoxBinding.prototype.applySuggestedBitmapSize = function () {\n        if (this._suggestedBitmapSize === null) {\n            // nothing to apply\n            return;\n        }\n        var oldSuggestedSize = this._suggestedBitmapSize;\n        this._suggestedBitmapSize = null;\n        this._resizeBitmap(oldSuggestedSize);\n        this._emitSuggestedBitmapSizeChanged(oldSuggestedSize, this._suggestedBitmapSize);\n    };\n    DevicePixelContentBoxBinding.prototype._resizeBitmap = function (newSize) {\n        var oldSize = this.bitmapSize;\n        if (equalSizes(oldSize, newSize)) {\n            return;\n        }\n        this.canvasElement.width = newSize.width;\n        this.canvasElement.height = newSize.height;\n        this._emitBitmapSizeChanged(oldSize, newSize);\n    };\n    DevicePixelContentBoxBinding.prototype._emitBitmapSizeChanged = function (oldSize, newSize) {\n        var _this = this;\n        this._bitmapSizeChangedListeners.forEach(function (listener) { return listener.call(_this, oldSize, newSize); });\n    };\n    DevicePixelContentBoxBinding.prototype._suggestNewBitmapSize = function (newSize) {\n        var oldSuggestedSize = this._suggestedBitmapSize;\n        var finalNewSize = size(this._transformBitmapSize(newSize, this._canvasElementClientSize));\n        var newSuggestedSize = equalSizes(this.bitmapSize, finalNewSize) ? null : finalNewSize;\n        if (oldSuggestedSize === null && newSuggestedSize === null) {\n            return;\n        }\n        if (oldSuggestedSize !== null && newSuggestedSize !== null\n            && equalSizes(oldSuggestedSize, newSuggestedSize)) {\n            return;\n        }\n        this._suggestedBitmapSize = newSuggestedSize;\n        this._emitSuggestedBitmapSizeChanged(oldSuggestedSize, newSuggestedSize);\n    };\n    DevicePixelContentBoxBinding.prototype._emitSuggestedBitmapSizeChanged = function (oldSize, newSize) {\n        var _this = this;\n        this._suggestedBitmapSizeChangedListeners.forEach(function (listener) { return listener.call(_this, oldSize, newSize); });\n    };\n    DevicePixelContentBoxBinding.prototype._chooseAndInitObserver = function () {\n        var _this = this;\n        if (!this._allowResizeObserver) {\n            this._initDevicePixelRatioObservable();\n            return;\n        }\n        isDevicePixelContentBoxSupported()\n            .then(function (isSupported) {\n            return isSupported ?\n                _this._initResizeObserver() :\n                _this._initDevicePixelRatioObservable();\n        });\n    };\n    // devicePixelRatio approach\n    DevicePixelContentBoxBinding.prototype._initDevicePixelRatioObservable = function () {\n        var _this = this;\n        if (this._canvasElement === null) {\n            // it looks like we are already dead\n            return;\n        }\n        var win = canvasElementWindow(this._canvasElement);\n        if (win === null) {\n            throw new Error('No window is associated with the canvas');\n        }\n        this._devicePixelRatioObservable = createDevicePixelRatioObservable(win);\n        this._devicePixelRatioObservable.subscribe(function () { return _this._invalidateBitmapSize(); });\n        this._invalidateBitmapSize();\n    };\n    DevicePixelContentBoxBinding.prototype._invalidateBitmapSize = function () {\n        var _a, _b;\n        if (this._canvasElement === null) {\n            // it looks like we are already dead\n            return;\n        }\n        var win = canvasElementWindow(this._canvasElement);\n        if (win === null) {\n            return;\n        }\n        var ratio = (_b = (_a = this._devicePixelRatioObservable) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : win.devicePixelRatio;\n        var canvasRects = this._canvasElement.getClientRects();\n        var newSize = \n        // eslint-disable-next-line no-negated-condition\n        canvasRects[0] !== undefined ?\n            predictedBitmapSize(canvasRects[0], ratio) :\n            size({\n                width: this._canvasElementClientSize.width * ratio,\n                height: this._canvasElementClientSize.height * ratio,\n            });\n        this._suggestNewBitmapSize(newSize);\n    };\n    // ResizeObserver approach\n    DevicePixelContentBoxBinding.prototype._initResizeObserver = function () {\n        var _this = this;\n        if (this._canvasElement === null) {\n            // it looks like we are already dead\n            return;\n        }\n        this._canvasElementResizeObserver = new ResizeObserver(function (entries) {\n            var entry = entries.find(function (entry) { return entry.target === _this._canvasElement; });\n            if (!entry || !entry.devicePixelContentBoxSize || !entry.devicePixelContentBoxSize[0]) {\n                return;\n            }\n            var entrySize = entry.devicePixelContentBoxSize[0];\n            var newSize = size({\n                width: entrySize.inlineSize,\n                height: entrySize.blockSize,\n            });\n            _this._suggestNewBitmapSize(newSize);\n        });\n        this._canvasElementResizeObserver.observe(this._canvasElement, { box: 'device-pixel-content-box' });\n    };\n    return DevicePixelContentBoxBinding;\n}());\nexport function bindTo(canvasElement, target) {\n    if (target.type === 'device-pixel-content-box') {\n        return new DevicePixelContentBoxBinding(canvasElement, target.transform, target.options);\n    }\n    throw new Error('Unsupported binding target');\n}\nfunction canvasElementWindow(canvasElement) {\n    // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n    // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return canvasElement.ownerDocument.defaultView;\n}\nfunction isDevicePixelContentBoxSupported() {\n    return new Promise(function (resolve) {\n        var ro = new ResizeObserver(function (entries) {\n            resolve(entries.every(function (entry) { return 'devicePixelContentBoxSize' in entry; }));\n            ro.disconnect();\n        });\n        ro.observe(document.body, { box: 'device-pixel-content-box' });\n    })\n        .catch(function () { return false; });\n}\nfunction predictedBitmapSize(canvasRect, ratio) {\n    return size({\n        width: Math.round(canvasRect.left * ratio + canvasRect.width * ratio) -\n            Math.round(canvasRect.left * ratio),\n        height: Math.round(canvasRect.top * ratio + canvasRect.height * ratio) -\n            Math.round(canvasRect.top * ratio),\n    });\n}\n", "/**\n * @experimental\n */\nvar CanvasRenderingTarget2D = /** @class */ (function () {\n    function CanvasRenderingTarget2D(context, mediaSize, bitmapSize) {\n        if (mediaSize.width === 0 || mediaSize.height === 0) {\n            throw new TypeError('Rendering target could only be created on a media with positive width and height');\n        }\n        this._mediaSize = mediaSize;\n        // !Number.isInteger(bitmapSize.width) || !Number.isInteger(bitmapSize.height)\n        if (bitmapSize.width === 0 || bitmapSize.height === 0) {\n            throw new TypeError('Rendering target could only be created using a bitmap with positive integer width and height');\n        }\n        this._bitmapSize = bitmapSize;\n        this._context = context;\n    }\n    CanvasRenderingTarget2D.prototype.useMediaCoordinateSpace = function (f) {\n        try {\n            this._context.save();\n            // do not use resetTransform to support old versions of Edge\n            this._context.setTransform(1, 0, 0, 1, 0, 0);\n            this._context.scale(this._horizontalPixelRatio, this._verticalPixelRatio);\n            return f({\n                context: this._context,\n                mediaSize: this._mediaSize,\n            });\n        }\n        finally {\n            this._context.restore();\n        }\n    };\n    CanvasRenderingTarget2D.prototype.useBitmapCoordinateSpace = function (f) {\n        try {\n            this._context.save();\n            // do not use resetTransform to support old versions of Edge\n            this._context.setTransform(1, 0, 0, 1, 0, 0);\n            return f({\n                context: this._context,\n                mediaSize: this._mediaSize,\n                bitmapSize: this._bitmapSize,\n                horizontalPixelRatio: this._horizontalPixelRatio,\n                verticalPixelRatio: this._verticalPixelRatio,\n            });\n        }\n        finally {\n            this._context.restore();\n        }\n    };\n    Object.defineProperty(CanvasRenderingTarget2D.prototype, \"_horizontalPixelRatio\", {\n        get: function () {\n            return this._bitmapSize.width / this._mediaSize.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CanvasRenderingTarget2D.prototype, \"_verticalPixelRatio\", {\n        get: function () {\n            return this._bitmapSize.height / this._mediaSize.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CanvasRenderingTarget2D;\n}());\nexport { CanvasRenderingTarget2D };\n/**\n * @experimental\n */\nexport function createCanvasRenderingTarget2D(binding, contextOptions) {\n    var mediaSize = binding.canvasElementClientSize;\n    var bitmapSize = binding.bitmapSize;\n    var context = binding.canvasElement.getContext('2d', contextOptions);\n    if (context === null) {\n        throw new Error('Could not get 2d drawing context from bound canvas element. Has the canvas already been set to a different context mode?');\n    }\n    return new CanvasRenderingTarget2D(context, mediaSize, bitmapSize);\n}\n/**\n * @experimental\n */\nexport function tryCreateCanvasRenderingTarget2D(binding, contextOptions) {\n    var mediaSize = binding.canvasElementClientSize;\n    if (mediaSize.width === 0 || mediaSize.height === 0) {\n        return null;\n    }\n    var bitmapSize = binding.bitmapSize;\n    if (bitmapSize.width === 0 || bitmapSize.height === 0) {\n        return null;\n    }\n    var context = binding.canvasElement.getContext('2d', contextOptions);\n    if (context === null) {\n        return null;\n    }\n    return new CanvasRenderingTarget2D(context, mediaSize, bitmapSize);\n}\n", "/**\n * When you're trying to use the library in server-side context (for instance in SSR)\n * you don't have some browser-specific variables like navigator or window\n * and if the library will use them on the top level of the library\n * the import will fail due ReferenceError\n * thus, this allows use the navigator on the top level and being imported in server-side context as well\n * See issue #446\n */\n// eslint-disable-next-line @typescript-eslint/tslint/config\nexport const isRunningOnClientSide = typeof window !== 'undefined';\n", "import { isRunningOnClientSide } from './is-running-on-client-side';\nexport function isFF() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    return window.navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n}\nexport function isIOS() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    // eslint-disable-next-line deprecation/deprecation\n    return /iPhone|iPad|iPod/.test(window.navigator.platform);\n}\nexport function isChrome() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    return window.chrome !== undefined;\n}\n// Determine whether the browser is running on windows.\nexport function isWindows() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    // more accurate if available\n    if (navigator?.userAgentData?.platform) {\n        return navigator.userAgentData.platform === 'Windows';\n    }\n    return navigator.userAgent.toLowerCase().indexOf('win') >= 0;\n}\n// Determine whether the browser is Chromium based.\nexport function isChromiumBased() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    if (!navigator.userAgentData) {\n        return false;\n    }\n    return navigator.userAgentData.brands.some((brand) => {\n        return brand.brand.includes('Chromium');\n    });\n}\n", "/// <reference types=\"_build-time-constants\" />\nexport function warn(msg) {\n    if (process.env.NODE_ENV === 'development') {\n        // eslint-disable-next-line no-console\n        console.warn(msg);\n    }\n}\n", "import { size } from 'fancy-canvas';\n// on Hi-DPI CSS size * Device Pixel Ratio should be integer to avoid smoothing\n// For chart widget we decrease the size because we must be inside container.\n// For time axis this is not important, since it just affects space for pane widgets\nexport function suggestChartSize(originalSize) {\n    const integerWidth = Math.floor(originalSize.width);\n    const integerHeight = Math.floor(originalSize.height);\n    const width = integerWidth - (integerWidth % 2);\n    const height = integerHeight - (integerHeight % 2);\n    return size({ width, height });\n}\nexport function suggestTimeScaleHeight(originalHeight) {\n    return originalHeight + (originalHeight % 2);\n}\nexport function suggestPriceScaleWidth(originalWidth) {\n    return originalWidth + (originalWidth % 2);\n}\n", "import { isChrome } from './browsers';\nexport function preventScrollByWheelClick(el) {\n    if (!isChrome()) {\n        return;\n    }\n    el.addEventListener('mousedown', (e) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (e.button === 1 /* MouseEventButton.Middle */) {\n            // prevent incorrect scrolling event\n            e.preventDefault();\n            return false;\n        }\n        return undefined;\n    });\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nimport { isFF, isIOS } from '../helpers/browsers';\nimport { preventScrollByWheelClick } from '../helpers/events';\n// we can use `const name = 500;` but with `const enum` this values will be inlined into code\n// so we do not need to have it as variables\n/* eslint-disable @typescript-eslint/no-duplicate-enum-values */\nvar Delay;\n(function (Delay) {\n    Delay[Delay[\"ResetClick\"] = 500] = \"ResetClick\";\n    Delay[Delay[\"LongTap\"] = 240] = \"LongTap\";\n    Delay[Delay[\"PreventFiresTouchEvents\"] = 500] = \"PreventFiresTouchEvents\";\n})(Delay || (Delay = {}));\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"CancelClickManhattanDistance\"] = 5] = \"CancelClickManhattanDistance\";\n    Constants[Constants[\"CancelTapManhattanDistance\"] = 5] = \"CancelTapManhattanDistance\";\n    Constants[Constants[\"DoubleClickManhattanDistance\"] = 5] = \"DoubleClickManhattanDistance\";\n    Constants[Constants[\"DoubleTapManhattanDistance\"] = 30] = \"DoubleTapManhattanDistance\";\n})(Constants || (Constants = {}));\n// TODO: get rid of a lot of boolean flags, probably we should replace it with some enum\nexport class MouseEventHandler {\n    constructor(target, handler, options) {\n        this._clickCount = 0;\n        this._clickTimeoutId = null;\n        this._clickPosition = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n        this._tapCount = 0;\n        this._tapTimeoutId = null;\n        this._tapPosition = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n        this._longTapTimeoutId = null;\n        this._longTapActive = false;\n        this._mouseMoveStartPosition = null;\n        this._touchMoveStartPosition = null;\n        this._touchMoveExceededManhattanDistance = false;\n        this._cancelClick = false;\n        this._cancelTap = false;\n        this._unsubscribeOutsideMouseEvents = null;\n        this._unsubscribeOutsideTouchEvents = null;\n        this._unsubscribeMobileSafariEvents = null;\n        this._unsubscribeMousemove = null;\n        this._unsubscribeRootMouseEvents = null;\n        this._unsubscribeRootTouchEvents = null;\n        this._startPinchMiddlePoint = null;\n        this._startPinchDistance = 0;\n        this._pinchPrevented = false;\n        this._preventTouchDragProcess = false;\n        this._mousePressed = false;\n        this._lastTouchEventTimeStamp = 0;\n        // for touchstart/touchmove/touchend events we handle only first touch\n        // i.e. we don't support several active touches at the same time (except pinch event)\n        this._activeTouchId = null;\n        // accept all mouse leave events if it's not an iOS device\n        // see _mouseEnterHandler, _mouseMoveHandler, _mouseLeaveHandler\n        this._acceptMouseLeave = !isIOS();\n        /**\n         * In Firefox mouse events dont't fire if the mouse position is outside of the browser's border.\n         * To prevent the mouse from hanging while pressed we're subscribing on the mouseleave event of the document element.\n         * We're subscribing on mouseleave, but this event is actually fired on mouseup outside of the browser's border.\n         */\n        this._onFirefoxOutsideMouseUp = (mouseUpEvent) => {\n            this._mouseUpHandler(mouseUpEvent);\n        };\n        /**\n         * Safari doesn't fire touchstart/mousedown events on double tap since iOS 13.\n         * There are two possible solutions:\n         * 1) Call preventDefault in touchEnd handler. But it also prevents click event from firing.\n         * 2) Add listener on dblclick event that fires with the preceding mousedown/mouseup.\n         * https://developer.apple.com/forums/thread/125073\n         */\n        this._onMobileSafariDoubleClick = (dblClickEvent) => {\n            if (this._firesTouchEvents(dblClickEvent)) {\n                const compatEvent = this._makeCompatEvent(dblClickEvent);\n                ++this._tapCount;\n                if (this._tapTimeoutId && this._tapCount > 1) {\n                    const { manhattanDistance } = this._touchMouseMoveWithDownInfo(getPosition(dblClickEvent), this._tapPosition);\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n                    if (manhattanDistance < 30 /* Constants.DoubleTapManhattanDistance */ && !this._cancelTap) {\n                        this._processTouchEvent(compatEvent, this._handler.doubleTapEvent);\n                    }\n                    this._resetTapTimeout();\n                }\n            }\n            else {\n                const compatEvent = this._makeCompatEvent(dblClickEvent);\n                ++this._clickCount;\n                if (this._clickTimeoutId && this._clickCount > 1) {\n                    const { manhattanDistance } = this._touchMouseMoveWithDownInfo(getPosition(dblClickEvent), this._clickPosition);\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n                    if (manhattanDistance < 5 /* Constants.DoubleClickManhattanDistance */ && !this._cancelClick) {\n                        this._processMouseEvent(compatEvent, this._handler.mouseDoubleClickEvent);\n                    }\n                    this._resetClickTimeout();\n                }\n            }\n        };\n        this._target = target;\n        this._handler = handler;\n        this._options = options;\n        this._init();\n    }\n    destroy() {\n        if (this._unsubscribeOutsideMouseEvents !== null) {\n            this._unsubscribeOutsideMouseEvents();\n            this._unsubscribeOutsideMouseEvents = null;\n        }\n        if (this._unsubscribeOutsideTouchEvents !== null) {\n            this._unsubscribeOutsideTouchEvents();\n            this._unsubscribeOutsideTouchEvents = null;\n        }\n        if (this._unsubscribeMousemove !== null) {\n            this._unsubscribeMousemove();\n            this._unsubscribeMousemove = null;\n        }\n        if (this._unsubscribeRootMouseEvents !== null) {\n            this._unsubscribeRootMouseEvents();\n            this._unsubscribeRootMouseEvents = null;\n        }\n        if (this._unsubscribeRootTouchEvents !== null) {\n            this._unsubscribeRootTouchEvents();\n            this._unsubscribeRootTouchEvents = null;\n        }\n        if (this._unsubscribeMobileSafariEvents !== null) {\n            this._unsubscribeMobileSafariEvents();\n            this._unsubscribeMobileSafariEvents = null;\n        }\n        this._clearLongTapTimeout();\n        this._resetClickTimeout();\n    }\n    _mouseEnterHandler(enterEvent) {\n        if (this._unsubscribeMousemove) {\n            this._unsubscribeMousemove();\n        }\n        const boundMouseMoveHandler = this._mouseMoveHandler.bind(this);\n        this._unsubscribeMousemove = () => {\n            this._target.removeEventListener('mousemove', boundMouseMoveHandler);\n        };\n        this._target.addEventListener('mousemove', boundMouseMoveHandler);\n        if (this._firesTouchEvents(enterEvent)) {\n            return;\n        }\n        const compatEvent = this._makeCompatEvent(enterEvent);\n        this._processMouseEvent(compatEvent, this._handler.mouseEnterEvent);\n        this._acceptMouseLeave = true;\n    }\n    _resetClickTimeout() {\n        if (this._clickTimeoutId !== null) {\n            clearTimeout(this._clickTimeoutId);\n        }\n        this._clickCount = 0;\n        this._clickTimeoutId = null;\n        this._clickPosition = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n    }\n    _resetTapTimeout() {\n        if (this._tapTimeoutId !== null) {\n            clearTimeout(this._tapTimeoutId);\n        }\n        this._tapCount = 0;\n        this._tapTimeoutId = null;\n        this._tapPosition = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY };\n    }\n    _mouseMoveHandler(moveEvent) {\n        if (this._mousePressed || this._touchMoveStartPosition !== null) {\n            return;\n        }\n        if (this._firesTouchEvents(moveEvent)) {\n            return;\n        }\n        const compatEvent = this._makeCompatEvent(moveEvent);\n        this._processMouseEvent(compatEvent, this._handler.mouseMoveEvent);\n        this._acceptMouseLeave = true;\n    }\n    _touchMoveHandler(moveEvent) {\n        const touch = touchWithId(moveEvent.changedTouches, ensureNotNull(this._activeTouchId));\n        if (touch === null) {\n            return;\n        }\n        this._lastTouchEventTimeStamp = eventTimeStamp(moveEvent);\n        if (this._startPinchMiddlePoint !== null) {\n            return;\n        }\n        if (this._preventTouchDragProcess) {\n            return;\n        }\n        // prevent pinch if move event comes faster than the second touch\n        this._pinchPrevented = true;\n        const moveInfo = this._touchMouseMoveWithDownInfo(getPosition(touch), ensureNotNull(this._touchMoveStartPosition));\n        const { xOffset, yOffset, manhattanDistance } = moveInfo;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (!this._touchMoveExceededManhattanDistance && manhattanDistance < 5 /* Constants.CancelTapManhattanDistance */) {\n            return;\n        }\n        if (!this._touchMoveExceededManhattanDistance) {\n            // first time when current position exceeded manhattan distance\n            // vertical drag is more important than horizontal drag\n            // because we scroll the page vertically often than horizontally\n            const correctedXOffset = xOffset * 0.5;\n            // a drag can be only if touch page scroll isn't allowed\n            const isVertDrag = yOffset >= correctedXOffset && !this._options.treatVertTouchDragAsPageScroll();\n            const isHorzDrag = correctedXOffset > yOffset && !this._options.treatHorzTouchDragAsPageScroll();\n            // if drag event happened then we should revert preventDefault state to original one\n            // and try to process the drag event\n            // else we shouldn't prevent default of the event and ignore processing the drag event\n            if (!isVertDrag && !isHorzDrag) {\n                this._preventTouchDragProcess = true;\n            }\n            this._touchMoveExceededManhattanDistance = true;\n            // if manhattan distance is more that 5 - we should cancel tap event\n            this._cancelTap = true;\n            this._clearLongTapTimeout();\n            this._resetTapTimeout();\n        }\n        if (!this._preventTouchDragProcess) {\n            const compatEvent = this._makeCompatEvent(moveEvent, touch);\n            this._processTouchEvent(compatEvent, this._handler.touchMoveEvent);\n            // we should prevent default in case of touch only\n            // to prevent scroll of the page\n            preventDefault(moveEvent);\n        }\n    }\n    _mouseMoveWithDownHandler(moveEvent) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (moveEvent.button !== 0 /* MouseEventButton.Left */) {\n            return;\n        }\n        const moveInfo = this._touchMouseMoveWithDownInfo(getPosition(moveEvent), ensureNotNull(this._mouseMoveStartPosition));\n        const { manhattanDistance } = moveInfo;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (manhattanDistance >= 5 /* Constants.CancelClickManhattanDistance */) {\n            // if manhattan distance is more that 5 - we should cancel click event\n            this._cancelClick = true;\n            this._resetClickTimeout();\n        }\n        if (this._cancelClick) {\n            // if this._cancelClick is true, that means that minimum manhattan distance is already exceeded\n            const compatEvent = this._makeCompatEvent(moveEvent);\n            this._processMouseEvent(compatEvent, this._handler.pressedMouseMoveEvent);\n        }\n    }\n    _touchMouseMoveWithDownInfo(currentPosition, startPosition) {\n        const xOffset = Math.abs(startPosition.x - currentPosition.x);\n        const yOffset = Math.abs(startPosition.y - currentPosition.y);\n        const manhattanDistance = xOffset + yOffset;\n        return {\n            xOffset: xOffset,\n            yOffset: yOffset,\n            manhattanDistance: manhattanDistance,\n        };\n    }\n    // eslint-disable-next-line complexity\n    _touchEndHandler(touchEndEvent) {\n        let touch = touchWithId(touchEndEvent.changedTouches, ensureNotNull(this._activeTouchId));\n        if (touch === null && touchEndEvent.touches.length === 0) {\n            // something went wrong, somehow we missed the required touchend event\n            // probably the browser has not sent this event\n            touch = touchEndEvent.changedTouches[0];\n        }\n        if (touch === null) {\n            return;\n        }\n        this._activeTouchId = null;\n        this._lastTouchEventTimeStamp = eventTimeStamp(touchEndEvent);\n        this._clearLongTapTimeout();\n        this._touchMoveStartPosition = null;\n        if (this._unsubscribeRootTouchEvents) {\n            this._unsubscribeRootTouchEvents();\n            this._unsubscribeRootTouchEvents = null;\n        }\n        const compatEvent = this._makeCompatEvent(touchEndEvent, touch);\n        this._processTouchEvent(compatEvent, this._handler.touchEndEvent);\n        ++this._tapCount;\n        if (this._tapTimeoutId && this._tapCount > 1) {\n            // check that both clicks are near enough\n            const { manhattanDistance } = this._touchMouseMoveWithDownInfo(getPosition(touch), this._tapPosition);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            if (manhattanDistance < 30 /* Constants.DoubleTapManhattanDistance */ && !this._cancelTap) {\n                this._processTouchEvent(compatEvent, this._handler.doubleTapEvent);\n            }\n            this._resetTapTimeout();\n        }\n        else {\n            if (!this._cancelTap) {\n                this._processTouchEvent(compatEvent, this._handler.tapEvent);\n                // do not fire mouse events if tap handler was executed\n                // prevent click event on new dom element (who appeared after tap)\n                if (this._handler.tapEvent) {\n                    preventDefault(touchEndEvent);\n                }\n            }\n        }\n        // prevent, for example, safari's dblclick-to-zoom or fast-click after long-tap\n        // we handle mouseDoubleClickEvent here ourselves\n        if (this._tapCount === 0) {\n            preventDefault(touchEndEvent);\n        }\n        if (touchEndEvent.touches.length === 0) {\n            if (this._longTapActive) {\n                this._longTapActive = false;\n                // prevent native click event\n                preventDefault(touchEndEvent);\n            }\n        }\n    }\n    _mouseUpHandler(mouseUpEvent) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (mouseUpEvent.button !== 0 /* MouseEventButton.Left */) {\n            return;\n        }\n        const compatEvent = this._makeCompatEvent(mouseUpEvent);\n        this._mouseMoveStartPosition = null;\n        this._mousePressed = false;\n        if (this._unsubscribeRootMouseEvents) {\n            this._unsubscribeRootMouseEvents();\n            this._unsubscribeRootMouseEvents = null;\n        }\n        if (isFF()) {\n            const rootElement = this._target.ownerDocument.documentElement;\n            rootElement.removeEventListener('mouseleave', this._onFirefoxOutsideMouseUp);\n        }\n        if (this._firesTouchEvents(mouseUpEvent)) {\n            return;\n        }\n        this._processMouseEvent(compatEvent, this._handler.mouseUpEvent);\n        ++this._clickCount;\n        if (this._clickTimeoutId && this._clickCount > 1) {\n            // check that both clicks are near enough\n            const { manhattanDistance } = this._touchMouseMoveWithDownInfo(getPosition(mouseUpEvent), this._clickPosition);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            if (manhattanDistance < 5 /* Constants.DoubleClickManhattanDistance */ && !this._cancelClick) {\n                this._processMouseEvent(compatEvent, this._handler.mouseDoubleClickEvent);\n            }\n            this._resetClickTimeout();\n        }\n        else {\n            if (!this._cancelClick) {\n                this._processMouseEvent(compatEvent, this._handler.mouseClickEvent);\n            }\n        }\n    }\n    _clearLongTapTimeout() {\n        if (this._longTapTimeoutId === null) {\n            return;\n        }\n        clearTimeout(this._longTapTimeoutId);\n        this._longTapTimeoutId = null;\n    }\n    _touchStartHandler(downEvent) {\n        if (this._activeTouchId !== null) {\n            return;\n        }\n        const touch = downEvent.changedTouches[0];\n        this._activeTouchId = touch.identifier;\n        this._lastTouchEventTimeStamp = eventTimeStamp(downEvent);\n        const rootElement = this._target.ownerDocument.documentElement;\n        this._cancelTap = false;\n        this._touchMoveExceededManhattanDistance = false;\n        this._preventTouchDragProcess = false;\n        this._touchMoveStartPosition = getPosition(touch);\n        if (this._unsubscribeRootTouchEvents) {\n            this._unsubscribeRootTouchEvents();\n            this._unsubscribeRootTouchEvents = null;\n        }\n        {\n            const boundTouchMoveWithDownHandler = this._touchMoveHandler.bind(this);\n            const boundTouchEndHandler = this._touchEndHandler.bind(this);\n            this._unsubscribeRootTouchEvents = () => {\n                rootElement.removeEventListener('touchmove', boundTouchMoveWithDownHandler);\n                rootElement.removeEventListener('touchend', boundTouchEndHandler);\n            };\n            rootElement.addEventListener('touchmove', boundTouchMoveWithDownHandler, { passive: false });\n            rootElement.addEventListener('touchend', boundTouchEndHandler, { passive: false });\n            this._clearLongTapTimeout();\n            this._longTapTimeoutId = setTimeout(this._longTapHandler.bind(this, downEvent), 240 /* Delay.LongTap */);\n        }\n        const compatEvent = this._makeCompatEvent(downEvent, touch);\n        this._processTouchEvent(compatEvent, this._handler.touchStartEvent);\n        if (!this._tapTimeoutId) {\n            this._tapCount = 0;\n            this._tapTimeoutId = setTimeout(this._resetTapTimeout.bind(this), 500 /* Delay.ResetClick */);\n            this._tapPosition = getPosition(touch);\n        }\n    }\n    _mouseDownHandler(downEvent) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (downEvent.button !== 0 /* MouseEventButton.Left */) {\n            return;\n        }\n        const rootElement = this._target.ownerDocument.documentElement;\n        if (isFF()) {\n            rootElement.addEventListener('mouseleave', this._onFirefoxOutsideMouseUp);\n        }\n        this._cancelClick = false;\n        this._mouseMoveStartPosition = getPosition(downEvent);\n        if (this._unsubscribeRootMouseEvents) {\n            this._unsubscribeRootMouseEvents();\n            this._unsubscribeRootMouseEvents = null;\n        }\n        {\n            const boundMouseMoveWithDownHandler = this._mouseMoveWithDownHandler.bind(this);\n            const boundMouseUpHandler = this._mouseUpHandler.bind(this);\n            this._unsubscribeRootMouseEvents = () => {\n                rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler);\n                rootElement.removeEventListener('mouseup', boundMouseUpHandler);\n            };\n            rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler);\n            rootElement.addEventListener('mouseup', boundMouseUpHandler);\n        }\n        this._mousePressed = true;\n        if (this._firesTouchEvents(downEvent)) {\n            return;\n        }\n        const compatEvent = this._makeCompatEvent(downEvent);\n        this._processMouseEvent(compatEvent, this._handler.mouseDownEvent);\n        if (!this._clickTimeoutId) {\n            this._clickCount = 0;\n            this._clickTimeoutId = setTimeout(this._resetClickTimeout.bind(this), 500 /* Delay.ResetClick */);\n            this._clickPosition = getPosition(downEvent);\n        }\n    }\n    _init() {\n        this._target.addEventListener('mouseenter', this._mouseEnterHandler.bind(this));\n        // Do not show context menu when something went wrong\n        this._target.addEventListener('touchcancel', this._clearLongTapTimeout.bind(this));\n        {\n            const doc = this._target.ownerDocument;\n            const outsideHandler = (event) => {\n                if (!this._handler.mouseDownOutsideEvent) {\n                    return;\n                }\n                if (event.composed && this._target.contains(event.composedPath()[0])) {\n                    return;\n                }\n                if (event.target && this._target.contains(event.target)) {\n                    return;\n                }\n                this._handler.mouseDownOutsideEvent();\n            };\n            this._unsubscribeOutsideTouchEvents = () => {\n                doc.removeEventListener('touchstart', outsideHandler);\n            };\n            this._unsubscribeOutsideMouseEvents = () => {\n                doc.removeEventListener('mousedown', outsideHandler);\n            };\n            doc.addEventListener('mousedown', outsideHandler);\n            doc.addEventListener('touchstart', outsideHandler, { passive: true });\n        }\n        if (isIOS()) {\n            this._unsubscribeMobileSafariEvents = () => {\n                this._target.removeEventListener('dblclick', this._onMobileSafariDoubleClick);\n            };\n            this._target.addEventListener('dblclick', this._onMobileSafariDoubleClick);\n        }\n        this._target.addEventListener('mouseleave', this._mouseLeaveHandler.bind(this));\n        this._target.addEventListener('touchstart', this._touchStartHandler.bind(this), { passive: true });\n        preventScrollByWheelClick(this._target);\n        this._target.addEventListener('mousedown', this._mouseDownHandler.bind(this));\n        this._initPinch();\n        // Hey mobile Safari, what's up?\n        // If mobile Safari doesn't have any touchmove handler with passive=false\n        // it treats a touchstart and the following touchmove events as cancelable=false,\n        // so we can't prevent them (as soon we subscribe on touchmove inside touchstart's handler).\n        // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\n        this._target.addEventListener('touchmove', () => { }, { passive: false });\n    }\n    _initPinch() {\n        if (this._handler.pinchStartEvent === undefined &&\n            this._handler.pinchEvent === undefined &&\n            this._handler.pinchEndEvent === undefined) {\n            return;\n        }\n        this._target.addEventListener('touchstart', (event) => this._checkPinchState(event.touches), { passive: true });\n        this._target.addEventListener('touchmove', (event) => {\n            if (event.touches.length !== 2 || this._startPinchMiddlePoint === null) {\n                return;\n            }\n            if (this._handler.pinchEvent !== undefined) {\n                const currentDistance = getDistance(event.touches[0], event.touches[1]);\n                const scale = currentDistance / this._startPinchDistance;\n                this._handler.pinchEvent(this._startPinchMiddlePoint, scale);\n                preventDefault(event);\n            }\n        }, { passive: false });\n        this._target.addEventListener('touchend', (event) => {\n            this._checkPinchState(event.touches);\n        });\n    }\n    _checkPinchState(touches) {\n        if (touches.length === 1) {\n            this._pinchPrevented = false;\n        }\n        if (touches.length !== 2 || this._pinchPrevented || this._longTapActive) {\n            this._stopPinch();\n        }\n        else {\n            this._startPinch(touches);\n        }\n    }\n    _startPinch(touches) {\n        const box = getBoundingClientRect(this._target);\n        this._startPinchMiddlePoint = {\n            x: ((touches[0].clientX - box.left) + (touches[1].clientX - box.left)) / 2,\n            y: ((touches[0].clientY - box.top) + (touches[1].clientY - box.top)) / 2,\n        };\n        this._startPinchDistance = getDistance(touches[0], touches[1]);\n        if (this._handler.pinchStartEvent !== undefined) {\n            this._handler.pinchStartEvent();\n        }\n        this._clearLongTapTimeout();\n    }\n    _stopPinch() {\n        if (this._startPinchMiddlePoint === null) {\n            return;\n        }\n        this._startPinchMiddlePoint = null;\n        if (this._handler.pinchEndEvent !== undefined) {\n            this._handler.pinchEndEvent();\n        }\n    }\n    _mouseLeaveHandler(event) {\n        if (this._unsubscribeMousemove) {\n            this._unsubscribeMousemove();\n        }\n        if (this._firesTouchEvents(event)) {\n            return;\n        }\n        if (!this._acceptMouseLeave) {\n            // mobile Safari sometimes emits mouse leave event for no reason, there is no way to handle it in other way\n            // just ignore this event if there was no mouse move or mouse enter events\n            return;\n        }\n        const compatEvent = this._makeCompatEvent(event);\n        this._processMouseEvent(compatEvent, this._handler.mouseLeaveEvent);\n        // accept all mouse leave events if it's not an iOS device\n        this._acceptMouseLeave = !isIOS();\n    }\n    _longTapHandler(event) {\n        const touch = touchWithId(event.touches, ensureNotNull(this._activeTouchId));\n        if (touch === null) {\n            return;\n        }\n        const compatEvent = this._makeCompatEvent(event, touch);\n        this._processTouchEvent(compatEvent, this._handler.longTapEvent);\n        this._cancelTap = true;\n        // long tap is active until touchend event with 0 touches occurred\n        this._longTapActive = true;\n    }\n    _firesTouchEvents(e) {\n        if (e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents !== undefined) {\n            return e.sourceCapabilities.firesTouchEvents;\n        }\n        return eventTimeStamp(e) < this._lastTouchEventTimeStamp + 500 /* Delay.PreventFiresTouchEvents */;\n    }\n    _processTouchEvent(event, callback) {\n        if (callback) {\n            callback.call(this._handler, event);\n        }\n    }\n    _processMouseEvent(event, callback) {\n        if (!callback) {\n            return;\n        }\n        callback.call(this._handler, event);\n    }\n    _makeCompatEvent(event, touch) {\n        // TouchEvent has no clientX/Y coordinates:\n        // We have to use the last Touch instead\n        const eventLike = touch || event;\n        const box = this._target.getBoundingClientRect() || { left: 0, top: 0 };\n        return {\n            clientX: eventLike.clientX,\n            clientY: eventLike.clientY,\n            pageX: eventLike.pageX,\n            pageY: eventLike.pageY,\n            screenX: eventLike.screenX,\n            screenY: eventLike.screenY,\n            localX: (eventLike.clientX - box.left),\n            localY: (eventLike.clientY - box.top),\n            ctrlKey: event.ctrlKey,\n            altKey: event.altKey,\n            shiftKey: event.shiftKey,\n            metaKey: event.metaKey,\n            isTouch: !event.type.startsWith('mouse') && event.type !== 'contextmenu' && event.type !== 'click',\n            srcType: event.type,\n            target: eventLike.target,\n            view: event.view,\n            preventDefault: () => {\n                if (event.type !== 'touchstart') {\n                    // touchstart is passive and cannot be prevented\n                    preventDefault(event);\n                }\n            },\n        };\n    }\n}\nfunction getBoundingClientRect(element) {\n    return element.getBoundingClientRect() || { left: 0, top: 0 };\n}\nfunction getDistance(p1, p2) {\n    const xDiff = p1.clientX - p2.clientX;\n    const yDiff = p1.clientY - p2.clientY;\n    return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n}\nfunction preventDefault(event) {\n    if (event.cancelable) {\n        event.preventDefault();\n    }\n}\nfunction getPosition(eventLike) {\n    return {\n        x: eventLike.pageX,\n        y: eventLike.pageY,\n    };\n}\nfunction eventTimeStamp(e) {\n    // for some reason e.timestamp is always 0 on iPad with magic mouse, so we use performance.now() as a fallback\n    return e.timeStamp || performance.now();\n}\nfunction touchWithId(touches, id) {\n    for (let i = 0; i < touches.length; ++i) {\n        if (touches[i].identifier === id) {\n            return touches[i];\n        }\n    }\n    return null;\n}\n", "import { size } from 'fancy-canvas';\nimport { clamp } from '../helpers/mathex';\nimport { MouseEventHandler } from './mouse-event-handler';\nexport var SeparatorConstants;\n(function (SeparatorConstants) {\n    SeparatorConstants[SeparatorConstants[\"SeparatorHeight\"] = 1] = \"SeparatorHeight\";\n    SeparatorConstants[SeparatorConstants[\"MinPaneHeight\"] = 30] = \"MinPaneHeight\";\n})(SeparatorConstants || (SeparatorConstants = {}));\nexport class PaneSeparator {\n    constructor(chartWidget, topPaneIndex, bottomPaneIndex) {\n        this._handle = null;\n        this._mouseEventHandler = null;\n        this._resizeEnabled = true;\n        this._resizeInfo = null;\n        this._chartWidget = chartWidget;\n        this._topPane = chartWidget.paneWidgets()[topPaneIndex];\n        this._bottomPane = chartWidget.paneWidgets()[bottomPaneIndex];\n        this._rowElement = document.createElement('tr');\n        this._rowElement.style.height = 1 /* SeparatorConstants.SeparatorHeight */ + 'px';\n        this._cell = document.createElement('td');\n        this._cell.style.position = 'relative';\n        this._cell.style.padding = '0';\n        this._cell.style.margin = '0';\n        this._cell.setAttribute('colspan', '3');\n        this._updateBorderColor();\n        this._rowElement.appendChild(this._cell);\n        this._resizeEnabled = this._chartWidget.options()['layout'].panes.enableResize;\n        if (!this._resizeEnabled) {\n            this._handle = null;\n            this._mouseEventHandler = null;\n        }\n        else {\n            this._addResizableHandle();\n        }\n    }\n    destroy() {\n        if (this._mouseEventHandler !== null) {\n            this._mouseEventHandler.destroy();\n        }\n    }\n    getElement() {\n        return this._rowElement;\n    }\n    getSize() {\n        return size({\n            width: this._topPane.getSize().width,\n            height: 1 /* SeparatorConstants.SeparatorHeight */,\n        });\n    }\n    getBitmapSize() {\n        return size({\n            width: this._topPane.getBitmapSize().width,\n            height: 1 /* SeparatorConstants.SeparatorHeight */ * window.devicePixelRatio,\n        });\n    }\n    drawBitmap(ctx, x, y) {\n        const bitmapSize = this.getBitmapSize();\n        ctx.fillStyle = this._chartWidget.options()['layout'].panes.separatorColor;\n        ctx.fillRect(x, y, bitmapSize.width, bitmapSize.height);\n    }\n    update() {\n        this._updateBorderColor();\n        if (this._chartWidget.options()['layout'].panes.enableResize !== this._resizeEnabled) {\n            this._resizeEnabled = this._chartWidget.options()['layout'].panes.enableResize;\n            if (this._resizeEnabled) {\n                this._addResizableHandle();\n            }\n            else {\n                if (this._handle !== null) {\n                    this._cell.removeChild(this._handle.backgroundElement);\n                    this._cell.removeChild(this._handle.element);\n                    this._handle = null;\n                }\n                if (this._mouseEventHandler !== null) {\n                    this._mouseEventHandler.destroy();\n                    this._mouseEventHandler = null;\n                }\n            }\n        }\n    }\n    _addResizableHandle() {\n        const backgroundElement = document.createElement('div');\n        const bgStyle = backgroundElement.style;\n        bgStyle.position = 'fixed';\n        bgStyle.display = 'none';\n        bgStyle.zIndex = '49';\n        bgStyle.top = '0';\n        bgStyle.left = '0';\n        bgStyle.width = '100%';\n        bgStyle.height = '100%';\n        bgStyle.cursor = 'row-resize';\n        this._cell.appendChild(backgroundElement);\n        const element = document.createElement('div');\n        const style = element.style;\n        style.position = 'absolute';\n        style.zIndex = '50';\n        style.top = '-4px';\n        style.height = '9px';\n        style.width = '100%';\n        style.backgroundColor = '';\n        style.cursor = 'row-resize';\n        this._cell.appendChild(element);\n        const handlers = {\n            mouseEnterEvent: this._mouseOverEvent.bind(this),\n            mouseLeaveEvent: this._mouseLeaveEvent.bind(this),\n            mouseDownEvent: this._mouseDownEvent.bind(this),\n            touchStartEvent: this._mouseDownEvent.bind(this),\n            pressedMouseMoveEvent: this._pressedMouseMoveEvent.bind(this),\n            touchMoveEvent: this._pressedMouseMoveEvent.bind(this),\n            mouseUpEvent: this._mouseUpEvent.bind(this),\n            touchEndEvent: this._mouseUpEvent.bind(this),\n        };\n        this._mouseEventHandler = new MouseEventHandler(element, handlers, {\n            treatVertTouchDragAsPageScroll: () => false,\n            treatHorzTouchDragAsPageScroll: () => true,\n        });\n        this._handle = { element, backgroundElement };\n    }\n    _updateBorderColor() {\n        this._cell.style.background = this._chartWidget.options()['layout'].panes.separatorColor;\n    }\n    _mouseOverEvent(event) {\n        if (this._handle !== null) {\n            this._handle.element.style.backgroundColor = this._chartWidget.options()['layout'].panes.separatorHoverColor;\n        }\n    }\n    _mouseLeaveEvent(event) {\n        if (this._handle !== null && this._resizeInfo === null) {\n            this._handle.element.style.backgroundColor = '';\n        }\n    }\n    _mouseDownEvent(event) {\n        if (this._handle === null) {\n            return;\n        }\n        const totalStretch = this._topPane.state().stretchFactor() + this._bottomPane.state().stretchFactor();\n        const totalHeight = this._topPane.getSize().height + this._bottomPane.getSize().height;\n        const pixelStretchFactor = totalStretch / totalHeight;\n        const minPaneStretch = 30 /* SeparatorConstants.MinPaneHeight */ * pixelStretchFactor;\n        if (totalStretch <= minPaneStretch * 2) {\n            // cannot resize panes that already have less than minimal height\n            // that's possible if there are many panes on the chart\n            return;\n        }\n        this._resizeInfo = {\n            startY: event.pageY,\n            prevStretchTopPane: this._topPane.state().stretchFactor(),\n            maxPaneStretch: totalStretch - minPaneStretch,\n            totalStretch,\n            pixelStretchFactor,\n            minPaneStretch,\n        };\n        this._handle.backgroundElement.style.display = 'block';\n    }\n    _pressedMouseMoveEvent(event) {\n        const resizeInfo = this._resizeInfo;\n        if (resizeInfo === null) {\n            return;\n        }\n        const deltaY = event.pageY - resizeInfo.startY;\n        const deltaStretchFactor = deltaY * resizeInfo.pixelStretchFactor;\n        const upperPaneNewStretch = clamp(resizeInfo.prevStretchTopPane + deltaStretchFactor, resizeInfo.minPaneStretch, resizeInfo.maxPaneStretch);\n        this._topPane.state().setStretchFactor(upperPaneNewStretch);\n        this._bottomPane.state().setStretchFactor(resizeInfo.totalStretch - upperPaneNewStretch);\n        this._chartWidget.model().fullUpdate();\n    }\n    _mouseUpEvent(event) {\n        if (this._resizeInfo === null || this._handle === null) {\n            return;\n        }\n        this._resizeInfo = null;\n        this._handle.backgroundElement.style.display = 'none';\n    }\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"MaxStartDelay\"] = 50] = \"MaxStartDelay\";\n    Constants[Constants[\"EpsilonDistance\"] = 1] = \"EpsilonDistance\";\n})(Constants || (Constants = {}));\nfunction distanceBetweenPoints(pos1, pos2) {\n    return pos1.position - pos2.position;\n}\nfunction speedPxPerMSec(pos1, pos2, maxSpeed) {\n    const speed = (pos1.position - pos2.position) / (pos1.time - pos2.time);\n    return Math.sign(speed) * Math.min(Math.abs(speed), maxSpeed);\n}\nfunction durationMSec(speed, dumpingCoeff) {\n    const lnDumpingCoeff = Math.log(dumpingCoeff);\n    return Math.log((1 /* Constants.EpsilonDistance */ * lnDumpingCoeff) / -speed) / (lnDumpingCoeff);\n}\nexport class KineticAnimation {\n    constructor(minSpeed, maxSpeed, dumpingCoeff, minMove) {\n        this._position1 = null;\n        this._position2 = null;\n        this._position3 = null;\n        this._position4 = null;\n        this._animationStartPosition = null;\n        this._durationMsecs = 0;\n        this._speedPxPerMsec = 0;\n        this._minSpeed = minSpeed;\n        this._maxSpeed = maxSpeed;\n        this._dumpingCoeff = dumpingCoeff;\n        this._minMove = minMove;\n    }\n    addPosition(position, time) {\n        if (this._position1 !== null) {\n            if (this._position1.time === time) {\n                this._position1.position = position;\n                return;\n            }\n            if (Math.abs(this._position1.position - position) < this._minMove) {\n                return;\n            }\n        }\n        this._position4 = this._position3;\n        this._position3 = this._position2;\n        this._position2 = this._position1;\n        this._position1 = { time, position };\n    }\n    start(position, time) {\n        if (this._position1 === null || this._position2 === null) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (time - this._position1.time > 50 /* Constants.MaxStartDelay */) {\n            return;\n        }\n        // To calculate all the rest parameters we should calculate the speed af first\n        let totalDistance = 0;\n        const speed1 = speedPxPerMSec(this._position1, this._position2, this._maxSpeed);\n        const distance1 = distanceBetweenPoints(this._position1, this._position2);\n        // We're calculating weighted average speed\n        // Than more distance for a segment, than more its weight\n        const speedItems = [speed1];\n        const distanceItems = [distance1];\n        totalDistance += distance1;\n        if (this._position3 !== null) {\n            const speed2 = speedPxPerMSec(this._position2, this._position3, this._maxSpeed);\n            // stop at this moment if direction of the segment is opposite\n            if (Math.sign(speed2) === Math.sign(speed1)) {\n                const distance2 = distanceBetweenPoints(this._position2, this._position3);\n                speedItems.push(speed2);\n                distanceItems.push(distance2);\n                totalDistance += distance2;\n                if (this._position4 !== null) {\n                    const speed3 = speedPxPerMSec(this._position3, this._position4, this._maxSpeed);\n                    if (Math.sign(speed3) === Math.sign(speed1)) {\n                        const distance3 = distanceBetweenPoints(this._position3, this._position4);\n                        speedItems.push(speed3);\n                        distanceItems.push(distance3);\n                        totalDistance += distance3;\n                    }\n                }\n            }\n        }\n        let resultSpeed = 0;\n        for (let i = 0; i < speedItems.length; ++i) {\n            resultSpeed += distanceItems[i] / totalDistance * speedItems[i];\n        }\n        if (Math.abs(resultSpeed) < this._minSpeed) {\n            return;\n        }\n        this._animationStartPosition = { position, time };\n        this._speedPxPerMsec = resultSpeed;\n        this._durationMsecs = durationMSec(Math.abs(resultSpeed), this._dumpingCoeff);\n    }\n    getPosition(time) {\n        const startPosition = ensureNotNull(this._animationStartPosition);\n        const durationMsecs = time - startPosition.time;\n        return startPosition.position + this._speedPxPerMsec * (Math.pow(this._dumpingCoeff, durationMsecs) - 1) / (Math.log(this._dumpingCoeff));\n    }\n    finished(time) {\n        return this._animationStartPosition === null || this._progressDuration(time) === this._durationMsecs;\n    }\n    _progressDuration(time) {\n        const startPosition = ensureNotNull(this._animationStartPosition);\n        const progress = time - startPosition.time;\n        return Math.min(progress, this._durationMsecs);\n    }\n}\n", "const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"19\" fill=\"none\"><g fill-rule=\"evenodd\" clip-path=\"url(#a)\" clip-rule=\"evenodd\"><path fill=\"var(--stroke)\" d=\"M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z\"/><path fill=\"var(--fill)\" d=\"M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z\"/></g><defs><clipPath id=\"a\"><path fill=\"var(--stroke)\" d=\"M0 0h35v19H0z\"/></clipPath></defs></svg>`;\nconst css = `a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}`;\n// This widget doesn't support dynamically responding to options changes\n// because it is expected that the `attributionLogo` option won't be changed\n// and this saves some bundle size.\nexport class AttributionLogoWidget {\n    constructor(container, chart) {\n        this._element = undefined;\n        this._cssElement = undefined;\n        this._theme = undefined;\n        this._visible = false;\n        this._container = container;\n        this._chart = chart;\n        this._render();\n    }\n    update() {\n        this._render();\n    }\n    removeElement() {\n        if (this._element) {\n            this._container.removeChild(this._element);\n        }\n        if (this._cssElement) {\n            this._container.removeChild(this._cssElement);\n        }\n        this._element = undefined;\n        this._cssElement = undefined;\n    }\n    _shouldUpdate() {\n        return this._visible !== this._shouldBeVisible() || this._theme !== this._themeToUse();\n    }\n    _themeToUse() {\n        return this._chart\n            .model()\n            .colorParser()\n            .colorStringToGrayscale(this._chart.options()['layout'].textColor) > 160\n            ? 'dark'\n            : 'light';\n    }\n    _shouldBeVisible() {\n        return this._chart.options()['layout'].attributionLogo;\n    }\n    _getUTMSource() {\n        const url = new URL(location.href);\n        if (!url.hostname) {\n            // ignore local testing\n            return '';\n        }\n        return '&utm_source=' + url.hostname + url.pathname;\n    }\n    _render() {\n        if (!this._shouldUpdate()) {\n            return;\n        }\n        this.removeElement();\n        this._visible = this._shouldBeVisible();\n        if (this._visible) {\n            this._theme = this._themeToUse();\n            this._cssElement = document.createElement('style');\n            this._cssElement.innerText = css;\n            this._element = document.createElement('a');\n            this._element.href = `https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this._getUTMSource()}`;\n            this._element.title = 'Charting by TradingView';\n            this._element.id = 'tv-attr-logo';\n            this._element.target = '_blank';\n            this._element.innerHTML = svg;\n            this._element.toggleAttribute('data-dark', this._theme === 'dark');\n            this._container.appendChild(this._cssElement);\n            this._container.appendChild(this._element);\n        }\n    }\n}\n", "import { bindCanvasElementBitmapSizeTo, } from 'fancy-canvas';\nimport { ensureNotNull } from '../helpers/assertions';\nexport function createBoundCanvas(parentElement, size) {\n    const doc = ensureNotNull(parentElement.ownerDocument);\n    const canvas = doc.createElement('canvas');\n    parentElement.appendChild(canvas);\n    const binding = bindCanvasElementBitmapSizeTo(canvas, {\n        type: 'device-pixel-content-box',\n        options: {\n            allowResizeObserver: true,\n        },\n        transform: (bitmapSize, canvasElementClientSize) => ({\n            width: Math.max(bitmapSize.width, canvasElementClientSize.width),\n            height: Math.max(bitmapSize.height, canvasElementClientSize.height),\n        }),\n    });\n    binding.resizeCanvasElement(size);\n    return binding;\n}\nexport function releaseCanvas(canvas) {\n    // This function fixes the iOS Safari error \"Total canvas memory use exceeds the maximum limit\".\n    // Seems that iOS Safari stores canvas elements for some additional time internally.\n    // So if we create/destroy a lot of canvas elements in a short period of time we can get this error.\n    // We resize the canvas to 1x1 pixels to force it to release memmory resources.\n    canvas.width = 1;\n    canvas.height = 1;\n    canvas.getContext('2d')?.clearRect(0, 0, 1, 1);\n}\n", "export function drawBackground(renderer, target, isHovered, hitTestData) {\n    if (renderer.drawBackground) {\n        renderer.drawBackground(target, isHovered, hitTestData);\n    }\n}\nexport function drawForeground(renderer, target, isHovered, hitTestData) {\n    renderer.draw(target, isHovered, hitTestData);\n}\nexport function drawSourceViews(paneViewsGetter, drawRendererFn, source, pane) {\n    const views = paneViewsGetter(source, pane);\n    for (const view of views) {\n        const renderer = view.renderer(pane);\n        if (renderer !== null) {\n            drawRendererFn(renderer);\n        }\n    }\n}\n", "import { equalSizes, size, tryCreateCanvasRenderingTarget2D, } from 'fancy-canvas';\nimport { ensureNotNull } from '../helpers/assertions';\nimport { clearRect, clearRectWithGradient } from '../helpers/canvas-helpers';\nimport { makeFont } from '../helpers/make-font';\nimport { TextWidthCache } from '../model/text-width-cache';\nimport { createBoundCanvas, releaseCanvas } from './canvas-utils';\nimport { suggestPriceScaleWidth } from './internal-layout-sizes-hints';\nimport { MouseEventHandler } from './mouse-event-handler';\nvar CursorType;\n(function (CursorType) {\n    CursorType[CursorType[\"Default\"] = 0] = \"Default\";\n    CursorType[CursorType[\"NsResize\"] = 1] = \"NsResize\";\n})(CursorType || (CursorType = {}));\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"DefaultOptimalWidth\"] = 34] = \"DefaultOptimalWidth\";\n})(Constants || (Constants = {}));\n(function (Constants) {\n    Constants[Constants[\"LabelOffset\"] = 5] = \"LabelOffset\";\n})(Constants || (Constants = {}));\nfunction hasPriceScale(source) {\n    return source.priceScale !== undefined;\n}\nfunction buildPriceAxisViewsGetter(zOrder, priceScaleId) {\n    return (source) => {\n        if (!hasPriceScale(source)) {\n            return [];\n        }\n        const psId = source.priceScale()?.id() ?? '';\n        if (psId !== priceScaleId) {\n            // exclude if source is using a different price scale.\n            return [];\n        }\n        return source.pricePaneViews?.(zOrder) ?? [];\n    };\n}\nfunction recalculateOverlapping(views, direction, scaleHeight, rendererOptions) {\n    if (!views.length) {\n        return;\n    }\n    let currentGroupStart = 0;\n    const initLabelHeight = views[0].height(rendererOptions, true);\n    let spaceBeforeCurrentGroup = direction === 1\n        ? scaleHeight / 2 - (views[0].getFixedCoordinate() - initLabelHeight / 2)\n        : views[0].getFixedCoordinate() - initLabelHeight / 2 - scaleHeight / 2;\n    spaceBeforeCurrentGroup = Math.max(0, spaceBeforeCurrentGroup);\n    for (let i = 1; i < views.length; i++) {\n        const view = views[i];\n        const prev = views[i - 1];\n        const height = prev.height(rendererOptions, false);\n        const coordinate = view.getFixedCoordinate();\n        const prevFixedCoordinate = prev.getFixedCoordinate();\n        const overlap = direction === 1\n            ? coordinate > prevFixedCoordinate - height\n            : coordinate < prevFixedCoordinate + height;\n        if (overlap) {\n            const fixedCoordinate = prevFixedCoordinate - height * direction;\n            view.setFixedCoordinate(fixedCoordinate);\n            const edgePoint = fixedCoordinate - direction * height / 2;\n            const outOfViewport = direction === 1 ? edgePoint < 0 : edgePoint > scaleHeight;\n            if (outOfViewport && spaceBeforeCurrentGroup > 0) {\n                // shift the whole group up or down\n                const desiredGroupShift = direction === 1 ? -1 - edgePoint : edgePoint - scaleHeight;\n                const possibleShift = Math.min(desiredGroupShift, spaceBeforeCurrentGroup);\n                for (let k = currentGroupStart; k < views.length; k++) {\n                    views[k].setFixedCoordinate(views[k].getFixedCoordinate() + direction * possibleShift);\n                }\n                spaceBeforeCurrentGroup -= possibleShift;\n            }\n        }\n        else {\n            currentGroupStart = i;\n            spaceBeforeCurrentGroup = direction === 1\n                ? prevFixedCoordinate - height - coordinate\n                : coordinate - (prevFixedCoordinate + height);\n        }\n    }\n}\nfunction priceScaleCrosshairLabelVisible(crosshair) {\n    return crosshair.mode !== 2 /* CrosshairMode.Hidden */ && crosshair.horzLine.visible && crosshair.horzLine.labelVisible;\n}\nexport class PriceAxisWidget {\n    constructor(pane, options, rendererOptionsProvider, side) {\n        this._priceScale = null;\n        this._size = null;\n        this._mousedown = false;\n        this._widthCache = new TextWidthCache(200);\n        this._font = null;\n        this._prevOptimalWidth = 0;\n        this._isSettingSize = false;\n        this._canvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._isSettingSize) {\n                return;\n            }\n            this._pane.chart().model().lightUpdate();\n        };\n        this._topCanvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._isSettingSize) {\n                return;\n            }\n            this._pane.chart().model().lightUpdate();\n        };\n        this._pane = pane;\n        this._options = options;\n        this._layoutOptions = options['layout'];\n        this._rendererOptionsProvider = rendererOptionsProvider;\n        this._isLeft = side === 'left';\n        this._sourcePaneViews = buildPriceAxisViewsGetter('normal', side);\n        this._sourceTopPaneViews = buildPriceAxisViewsGetter('top', side);\n        this._sourceBottomPaneViews = buildPriceAxisViewsGetter('bottom', side);\n        this._cell = document.createElement('div');\n        this._cell.style.height = '100%';\n        this._cell.style.overflow = 'hidden';\n        this._cell.style.width = '25px';\n        this._cell.style.left = '0';\n        this._cell.style.position = 'relative';\n        this._canvasBinding = createBoundCanvas(this._cell, size({ width: 16, height: 16 }));\n        this._canvasBinding.subscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        const canvas = this._canvasBinding.canvasElement;\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        this._topCanvasBinding = createBoundCanvas(this._cell, size({ width: 16, height: 16 }));\n        this._topCanvasBinding.subscribeSuggestedBitmapSizeChanged(this._topCanvasSuggestedBitmapSizeChangedHandler);\n        const topCanvas = this._topCanvasBinding.canvasElement;\n        topCanvas.style.position = 'absolute';\n        topCanvas.style.zIndex = '2';\n        topCanvas.style.left = '0';\n        topCanvas.style.top = '0';\n        const handler = {\n            mouseDownEvent: this._mouseDownEvent.bind(this),\n            touchStartEvent: this._mouseDownEvent.bind(this),\n            pressedMouseMoveEvent: this._pressedMouseMoveEvent.bind(this),\n            touchMoveEvent: this._pressedMouseMoveEvent.bind(this),\n            mouseDownOutsideEvent: this._mouseDownOutsideEvent.bind(this),\n            mouseUpEvent: this._mouseUpEvent.bind(this),\n            touchEndEvent: this._mouseUpEvent.bind(this),\n            mouseDoubleClickEvent: this._mouseDoubleClickEvent.bind(this),\n            doubleTapEvent: this._mouseDoubleClickEvent.bind(this),\n            mouseEnterEvent: this._mouseEnterEvent.bind(this),\n            mouseLeaveEvent: this._mouseLeaveEvent.bind(this),\n        };\n        this._mouseEventHandler = new MouseEventHandler(this._topCanvasBinding.canvasElement, handler, {\n            treatVertTouchDragAsPageScroll: () => !this._options['handleScroll'].vertTouchDrag,\n            treatHorzTouchDragAsPageScroll: () => true,\n        });\n    }\n    destroy() {\n        this._mouseEventHandler.destroy();\n        this._topCanvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._topCanvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._topCanvasBinding.canvasElement);\n        this._topCanvasBinding.dispose();\n        this._canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._canvasBinding.canvasElement);\n        this._canvasBinding.dispose();\n        if (this._priceScale !== null) {\n            this._priceScale.onMarksChanged().unsubscribeAll(this);\n        }\n        this._priceScale = null;\n    }\n    getElement() {\n        return this._cell;\n    }\n    fontSize() {\n        return this._layoutOptions.fontSize;\n    }\n    rendererOptions() {\n        const options = this._rendererOptionsProvider.options();\n        const isFontChanged = this._font !== options.font;\n        if (isFontChanged) {\n            this._widthCache.reset();\n            this._font = options.font;\n        }\n        return options;\n    }\n    optimalWidth() {\n        if (this._priceScale === null) {\n            return 0;\n        }\n        let tickMarkMaxWidth = 0;\n        const rendererOptions = this.rendererOptions();\n        const ctx = ensureNotNull(this._canvasBinding.canvasElement.getContext('2d', {\n            colorSpace: this._pane.chart().options().layout.colorSpace,\n        }));\n        ctx.save();\n        const tickMarks = this._priceScale.marks();\n        ctx.font = this._baseFont();\n        if (tickMarks.length > 0) {\n            tickMarkMaxWidth = Math.max(this._widthCache.measureText(ctx, tickMarks[0].label), this._widthCache.measureText(ctx, tickMarks[tickMarks.length - 1].label));\n        }\n        const views = this._backLabels();\n        for (let j = views.length; j--;) {\n            const width = this._widthCache.measureText(ctx, views[j].text());\n            if (width > tickMarkMaxWidth) {\n                tickMarkMaxWidth = width;\n            }\n        }\n        const firstValue = this._priceScale.firstValue();\n        if (firstValue !== null &&\n            this._size !== null &&\n            priceScaleCrosshairLabelVisible(this._options.crosshair)) {\n            const topValue = this._priceScale.coordinateToPrice(1, firstValue);\n            const bottomValue = this._priceScale.coordinateToPrice(this._size.height - 2, firstValue);\n            tickMarkMaxWidth = Math.max(tickMarkMaxWidth, this._widthCache.measureText(ctx, this._priceScale.formatPrice(Math.floor(Math.min(topValue, bottomValue)) + 0.11111111111111, firstValue)), this._widthCache.measureText(ctx, this._priceScale.formatPrice(Math.ceil(Math.max(topValue, bottomValue)) - 0.11111111111111, firstValue)));\n        }\n        ctx.restore();\n        const resultTickMarksMaxWidth = tickMarkMaxWidth || 34 /* Constants.DefaultOptimalWidth */;\n        const res = Math.ceil(rendererOptions.borderSize +\n            rendererOptions.tickLength +\n            rendererOptions.paddingInner +\n            rendererOptions.paddingOuter +\n            5 /* Constants.LabelOffset */ +\n            resultTickMarksMaxWidth);\n        // make it even, remove this after migration to perfect fancy canvas\n        return suggestPriceScaleWidth(res);\n    }\n    setSize(newSize) {\n        if (this._size === null || !equalSizes(this._size, newSize)) {\n            this._size = newSize;\n            this._isSettingSize = true;\n            this._canvasBinding.resizeCanvasElement(newSize);\n            this._topCanvasBinding.resizeCanvasElement(newSize);\n            this._isSettingSize = false;\n            this._cell.style.width = `${newSize.width}px`;\n            this._cell.style.height = `${newSize.height}px`;\n        }\n    }\n    getWidth() {\n        return ensureNotNull(this._size).width;\n    }\n    setPriceScale(priceScale) {\n        if (this._priceScale === priceScale) {\n            return;\n        }\n        if (this._priceScale !== null) {\n            this._priceScale.onMarksChanged().unsubscribeAll(this);\n        }\n        this._priceScale = priceScale;\n        priceScale.onMarksChanged().subscribe(this._onMarksChanged.bind(this), this);\n    }\n    priceScale() {\n        return this._priceScale;\n    }\n    reset() {\n        const pane = this._pane.state();\n        const model = this._pane.chart().model();\n        model.resetPriceScale(pane, ensureNotNull(this.priceScale()));\n    }\n    paint(type) {\n        if (this._size === null) {\n            return;\n        }\n        const canvasOptions = {\n            colorSpace: this._pane.chart().options().layout.colorSpace,\n        };\n        if (type !== 1 /* InvalidationLevel.Cursor */) {\n            this._alignLabels();\n            this._canvasBinding.applySuggestedBitmapSize();\n            const target = tryCreateCanvasRenderingTarget2D(this._canvasBinding, canvasOptions);\n            if (target !== null) {\n                target.useBitmapCoordinateSpace((scope) => {\n                    this._drawBackground(scope);\n                    this._drawBorder(scope);\n                });\n                this._pane.drawAdditionalSources(target, this._sourceBottomPaneViews);\n                this._drawTickMarks(target);\n                this._pane.drawAdditionalSources(target, this._sourcePaneViews);\n                this._drawBackLabels(target);\n            }\n        }\n        this._topCanvasBinding.applySuggestedBitmapSize();\n        const topTarget = tryCreateCanvasRenderingTarget2D(this._topCanvasBinding, canvasOptions);\n        if (topTarget !== null) {\n            topTarget.useBitmapCoordinateSpace(({ context: ctx, bitmapSize }) => {\n                ctx.clearRect(0, 0, bitmapSize.width, bitmapSize.height);\n            });\n            this._drawCrosshairLabel(topTarget);\n            this._pane.drawAdditionalSources(topTarget, this._sourceTopPaneViews);\n        }\n    }\n    getBitmapSize() {\n        return this._canvasBinding.bitmapSize;\n    }\n    drawBitmap(ctx, x, y, addTopLayer) {\n        const bitmapSize = this.getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._canvasBinding.canvasElement, x, y);\n            if (addTopLayer) {\n                const topLayer = this._topCanvasBinding.canvasElement;\n                ctx.drawImage(topLayer, x, y);\n            }\n        }\n    }\n    update() {\n        // this call has side-effect - it regenerates marks on the price scale\n        this._priceScale?.marks();\n    }\n    _mouseDownEvent(e) {\n        if (this._priceScale === null || this._priceScale.isEmpty() || !this._options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._pane.chart().model();\n        const pane = this._pane.state();\n        this._mousedown = true;\n        model.startScalePrice(pane, this._priceScale, e.localY);\n    }\n    _pressedMouseMoveEvent(e) {\n        if (this._priceScale === null || !this._options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._pane.chart().model();\n        const pane = this._pane.state();\n        const priceScale = this._priceScale;\n        model.scalePriceTo(pane, priceScale, e.localY);\n    }\n    _mouseDownOutsideEvent() {\n        if (this._priceScale === null || !this._options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._pane.chart().model();\n        const pane = this._pane.state();\n        const priceScale = this._priceScale;\n        if (this._mousedown) {\n            this._mousedown = false;\n            model.endScalePrice(pane, priceScale);\n        }\n    }\n    _mouseUpEvent(e) {\n        if (this._priceScale === null || !this._options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._pane.chart().model();\n        const pane = this._pane.state();\n        this._mousedown = false;\n        model.endScalePrice(pane, this._priceScale);\n    }\n    _mouseDoubleClickEvent(e) {\n        if (this._options['handleScale'].axisDoubleClickReset.price) {\n            this.reset();\n        }\n    }\n    _mouseEnterEvent(e) {\n        if (this._priceScale === null) {\n            return;\n        }\n        const model = this._pane.chart().model();\n        if (model.options()['handleScale'].axisPressedMouseMove.price && !this._priceScale.isPercentage() && !this._priceScale.isIndexedTo100()) {\n            this._setCursor(1 /* CursorType.NsResize */);\n        }\n    }\n    _mouseLeaveEvent(e) {\n        this._setCursor(0 /* CursorType.Default */);\n    }\n    _backLabels() {\n        const res = [];\n        const priceScale = (this._priceScale === null) ? undefined : this._priceScale;\n        const addViewsForSources = (sources) => {\n            for (let i = 0; i < sources.length; ++i) {\n                const source = sources[i];\n                const views = source.priceAxisViews(this._pane.state(), priceScale);\n                for (let j = 0; j < views.length; j++) {\n                    res.push(views[j]);\n                }\n            }\n        };\n        // calculate max and min coordinates for views on selection\n        // crosshair individually\n        addViewsForSources(this._pane.state().orderedSources());\n        return res;\n    }\n    _drawBackground({ context: ctx, bitmapSize }) {\n        const { width, height } = bitmapSize;\n        const model = this._pane.state().model();\n        const topColor = model.backgroundTopColor();\n        const bottomColor = model.backgroundBottomColor();\n        if (topColor === bottomColor) {\n            clearRect(ctx, 0, 0, width, height, topColor);\n        }\n        else {\n            clearRectWithGradient(ctx, 0, 0, width, height, topColor, bottomColor);\n        }\n    }\n    _drawBorder({ context: ctx, bitmapSize, horizontalPixelRatio }) {\n        if (this._size === null || this._priceScale === null || !this._priceScale.options().borderVisible) {\n            return;\n        }\n        ctx.fillStyle = this._priceScale.options().borderColor;\n        const borderSize = Math.max(1, Math.floor(this.rendererOptions().borderSize * horizontalPixelRatio));\n        let left;\n        if (this._isLeft) {\n            left = bitmapSize.width - borderSize;\n        }\n        else {\n            left = 0;\n        }\n        ctx.fillRect(left, 0, borderSize, bitmapSize.height);\n    }\n    _drawTickMarks(target) {\n        if (this._size === null || this._priceScale === null) {\n            return;\n        }\n        const tickMarks = this._priceScale.marks();\n        const priceScaleOptions = this._priceScale.options();\n        const rendererOptions = this.rendererOptions();\n        const tickMarkLeftX = this._isLeft ?\n            (this._size.width - rendererOptions.tickLength) :\n            0;\n        if (priceScaleOptions.borderVisible && priceScaleOptions.ticksVisible) {\n            target.useBitmapCoordinateSpace(({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) => {\n                ctx.fillStyle = priceScaleOptions.borderColor;\n                const tickHeight = Math.max(1, Math.floor(verticalPixelRatio));\n                const tickOffset = Math.floor(verticalPixelRatio * 0.5);\n                const tickLength = Math.round(rendererOptions.tickLength * horizontalPixelRatio);\n                ctx.beginPath();\n                for (const tickMark of tickMarks) {\n                    ctx.rect(Math.floor(tickMarkLeftX * horizontalPixelRatio), Math.round(tickMark.coord * verticalPixelRatio) - tickOffset, tickLength, tickHeight);\n                }\n                ctx.fill();\n            });\n        }\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            ctx.font = this._baseFont();\n            ctx.fillStyle = priceScaleOptions.textColor ?? this._layoutOptions.textColor;\n            ctx.textAlign = this._isLeft ? 'right' : 'left';\n            ctx.textBaseline = 'middle';\n            const textLeftX = this._isLeft ?\n                Math.round(tickMarkLeftX - rendererOptions.paddingInner) :\n                Math.round(tickMarkLeftX + rendererOptions.tickLength + rendererOptions.paddingInner);\n            const yMidCorrections = tickMarks.map((mark) => this._widthCache.yMidCorrection(ctx, mark.label));\n            for (let i = tickMarks.length; i--;) {\n                const tickMark = tickMarks[i];\n                ctx.fillText(tickMark.label, textLeftX, tickMark.coord + yMidCorrections[i]);\n            }\n        });\n    }\n    _alignLabels() {\n        if (this._size === null || this._priceScale === null) {\n            return;\n        }\n        let center = this._size.height / 2;\n        const views = [];\n        const orderedSources = this._priceScale.orderedSources().slice(); // Copy of array\n        const pane = this._pane;\n        const paneState = pane.state();\n        const rendererOptions = this.rendererOptions();\n        // if we are default price scale, append labels from no-scale\n        const isDefault = this._priceScale === paneState.defaultVisiblePriceScale();\n        if (isDefault) {\n            this._pane.state().orderedSources().forEach((source) => {\n                if (paneState.isOverlay(source)) {\n                    orderedSources.push(source);\n                }\n            });\n        }\n        // we can use any, but let's use the first source as \"center\" one\n        const centerSource = this._priceScale.dataSources()[0];\n        const priceScale = this._priceScale;\n        const updateForSources = (sources) => {\n            sources.forEach((source) => {\n                const sourceViews = source.priceAxisViews(paneState, priceScale);\n                // never align selected sources\n                sourceViews.forEach((view) => {\n                    view.setFixedCoordinate(null);\n                    if (view.isVisible()) {\n                        views.push(view);\n                    }\n                });\n                if (centerSource === source && sourceViews.length > 0) {\n                    center = sourceViews[0].coordinate();\n                }\n            });\n        };\n        // crosshair individually\n        updateForSources(orderedSources);\n        views.forEach((view) => view.setFixedCoordinate(view.coordinate()));\n        const options = this._priceScale.options();\n        if (!options.alignLabels) {\n            return;\n        }\n        this._fixLabelOverlap(views, rendererOptions, center);\n    }\n    _fixLabelOverlap(views, rendererOptions, center) {\n        if (this._size === null) {\n            return;\n        }\n        // split into two parts\n        const top = views.filter((view) => view.coordinate() <= center);\n        const bottom = views.filter((view) => view.coordinate() > center);\n        // sort top from center to top\n        top.sort((l, r) => r.coordinate() - l.coordinate());\n        // share center label\n        if (top.length && bottom.length) {\n            bottom.push(top[0]);\n        }\n        bottom.sort((l, r) => l.coordinate() - r.coordinate());\n        for (const view of views) {\n            const halfHeight = Math.floor(view.height(rendererOptions) / 2);\n            const coordinate = view.coordinate();\n            if (coordinate > -halfHeight && coordinate < halfHeight) {\n                view.setFixedCoordinate(halfHeight);\n            }\n            if (coordinate > (this._size.height - halfHeight) && coordinate < this._size.height + halfHeight) {\n                view.setFixedCoordinate(this._size.height - halfHeight);\n            }\n        }\n        recalculateOverlapping(top, 1, this._size.height, rendererOptions);\n        recalculateOverlapping(bottom, -1, this._size.height, rendererOptions);\n    }\n    _drawBackLabels(target) {\n        if (this._size === null) {\n            return;\n        }\n        const views = this._backLabels();\n        const rendererOptions = this.rendererOptions();\n        const align = this._isLeft ? 'right' : 'left';\n        views.forEach((view) => {\n            if (view.isAxisLabelVisible()) {\n                const renderer = view.renderer(ensureNotNull(this._priceScale));\n                renderer.draw(target, rendererOptions, this._widthCache, align);\n            }\n        });\n    }\n    _drawCrosshairLabel(target) {\n        if (this._size === null || this._priceScale === null) {\n            return;\n        }\n        const model = this._pane.chart().model();\n        const views = []; // array of arrays\n        const pane = this._pane.state();\n        const v = model.crosshairSource().priceAxisViews(pane, this._priceScale);\n        if (v.length) {\n            views.push(v);\n        }\n        const ro = this.rendererOptions();\n        const align = this._isLeft ? 'right' : 'left';\n        views.forEach((arr) => {\n            arr.forEach((view) => {\n                view.renderer(ensureNotNull(this._priceScale)).draw(target, ro, this._widthCache, align);\n            });\n        });\n    }\n    _setCursor(type) {\n        this._cell.style.cursor = type === 1 /* CursorType.NsResize */ ? 'ns-resize' : 'default';\n    }\n    _onMarksChanged() {\n        const width = this.optimalWidth();\n        // avoid price scale is shrunk\n        // using < instead !== to avoid infinite changes\n        if (this._prevOptimalWidth < width) {\n            this._pane.chart().model().fullUpdate();\n        }\n        this._prevOptimalWidth = width;\n    }\n    _baseFont() {\n        return makeFont(this._layoutOptions.fontSize, this._layoutOptions.fontFamily);\n    }\n}\n", "import { equalSizes, size, tryCreateCanvasRenderingTarget2D, } from 'fancy-canvas';\nimport { ensureNotNull } from '../helpers/assertions';\nimport { clearRect, clearRectWithGradient } from '../helpers/canvas-helpers';\nimport { Delegate } from '../helpers/delegate';\nimport { KineticAnimation } from '../model/kinetic-animation';\nimport { hitTestPane } from '../model/pane-hit-test';\nimport { AttributionLogoWidget } from './attribution-logo-widget';\nimport { createBoundCanvas, releaseCanvas } from './canvas-utils';\nimport { drawBackground, drawForeground, drawSourceViews } from './draw-functions';\nimport { MouseEventHandler } from './mouse-event-handler';\nimport { PriceAxisWidget } from './price-axis-widget';\nvar KineticScrollConstants;\n(function (KineticScrollConstants) {\n    KineticScrollConstants[KineticScrollConstants[\"MinScrollSpeed\"] = 0.2] = \"MinScrollSpeed\";\n    KineticScrollConstants[KineticScrollConstants[\"MaxScrollSpeed\"] = 7] = \"MaxScrollSpeed\";\n    KineticScrollConstants[KineticScrollConstants[\"DumpingCoeff\"] = 0.997] = \"DumpingCoeff\";\n    KineticScrollConstants[KineticScrollConstants[\"ScrollMinMove\"] = 15] = \"ScrollMinMove\";\n})(KineticScrollConstants || (KineticScrollConstants = {}));\nfunction sourceBottomPaneViews(source, pane) {\n    return source.bottomPaneViews?.(pane) ?? [];\n}\nfunction sourcePaneViews(source, pane) {\n    return source.paneViews?.(pane) ?? [];\n}\nfunction sourceLabelPaneViews(source, pane) {\n    return source.labelPaneViews?.(pane) ?? [];\n}\nfunction sourceTopPaneViews(source, pane) {\n    return source.topPaneViews?.(pane) ?? [];\n}\nexport class PaneWidget {\n    constructor(chart, state) {\n        this._size = size({ width: 0, height: 0 });\n        this._leftPriceAxisWidget = null;\n        this._rightPriceAxisWidget = null;\n        this._attributionLogoWidget = null;\n        this._startScrollingPos = null;\n        this._isScrolling = false;\n        this._clicked = new Delegate();\n        this._dblClicked = new Delegate();\n        this._prevPinchScale = 0;\n        this._longTap = false;\n        this._startTrackPoint = null;\n        this._exitTrackingModeOnNextTry = false;\n        this._initCrosshairPosition = null;\n        this._scrollXAnimation = null;\n        this._isSettingSize = false;\n        this._canvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._isSettingSize || this._state === null) {\n                return;\n            }\n            this._model().lightUpdate();\n        };\n        this._topCanvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._isSettingSize || this._state === null) {\n                return;\n            }\n            this._model().lightUpdate();\n        };\n        this._chart = chart;\n        this._state = state;\n        this._state.onDestroyed().subscribe(this._onStateDestroyed.bind(this), this, true);\n        this._paneCell = document.createElement('td');\n        this._paneCell.style.padding = '0';\n        this._paneCell.style.position = 'relative';\n        const paneWrapper = document.createElement('div');\n        paneWrapper.style.width = '100%';\n        paneWrapper.style.height = '100%';\n        paneWrapper.style.position = 'relative';\n        paneWrapper.style.overflow = 'hidden';\n        this._leftAxisCell = document.createElement('td');\n        this._leftAxisCell.style.padding = '0';\n        this._rightAxisCell = document.createElement('td');\n        this._rightAxisCell.style.padding = '0';\n        this._paneCell.appendChild(paneWrapper);\n        this._canvasBinding = createBoundCanvas(paneWrapper, size({ width: 16, height: 16 }));\n        this._canvasBinding.subscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        const canvas = this._canvasBinding.canvasElement;\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        this._topCanvasBinding = createBoundCanvas(paneWrapper, size({ width: 16, height: 16 }));\n        this._topCanvasBinding.subscribeSuggestedBitmapSizeChanged(this._topCanvasSuggestedBitmapSizeChangedHandler);\n        const topCanvas = this._topCanvasBinding.canvasElement;\n        topCanvas.style.position = 'absolute';\n        topCanvas.style.zIndex = '2';\n        topCanvas.style.left = '0';\n        topCanvas.style.top = '0';\n        this._rowElement = document.createElement('tr');\n        this._rowElement.appendChild(this._leftAxisCell);\n        this._rowElement.appendChild(this._paneCell);\n        this._rowElement.appendChild(this._rightAxisCell);\n        this.updatePriceAxisWidgetsStates();\n        this._mouseEventHandler = new MouseEventHandler(this._topCanvasBinding.canvasElement, this, {\n            treatVertTouchDragAsPageScroll: () => this._startTrackPoint === null && !this._chart.options()['handleScroll'].vertTouchDrag,\n            treatHorzTouchDragAsPageScroll: () => this._startTrackPoint === null && !this._chart.options()['handleScroll'].horzTouchDrag,\n        });\n    }\n    destroy() {\n        if (this._leftPriceAxisWidget !== null) {\n            this._leftPriceAxisWidget.destroy();\n        }\n        if (this._rightPriceAxisWidget !== null) {\n            this._rightPriceAxisWidget.destroy();\n        }\n        this._attributionLogoWidget = null;\n        this._topCanvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._topCanvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._topCanvasBinding.canvasElement);\n        this._topCanvasBinding.dispose();\n        this._canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._canvasBinding.canvasElement);\n        this._canvasBinding.dispose();\n        if (this._state !== null) {\n            this._state.onDestroyed().unsubscribeAll(this);\n            this._state.destroy();\n        }\n        this._mouseEventHandler.destroy();\n    }\n    state() {\n        return ensureNotNull(this._state);\n    }\n    setState(pane) {\n        if (this._state !== null) {\n            this._state.onDestroyed().unsubscribeAll(this);\n        }\n        this._state = pane;\n        if (this._state !== null) {\n            this._state.onDestroyed().subscribe(PaneWidget.prototype._onStateDestroyed.bind(this), this, true);\n        }\n        this.updatePriceAxisWidgetsStates();\n        if (this._chart.paneWidgets().indexOf(this) === this._chart.paneWidgets().length - 1) {\n            this._attributionLogoWidget = this._attributionLogoWidget ?? new AttributionLogoWidget(this._paneCell, this._chart);\n            this._attributionLogoWidget.update();\n        }\n        else {\n            this._attributionLogoWidget?.removeElement();\n            this._attributionLogoWidget = null;\n        }\n    }\n    chart() {\n        return this._chart;\n    }\n    getElement() {\n        return this._rowElement;\n    }\n    updatePriceAxisWidgetsStates() {\n        if (this._state === null) {\n            return;\n        }\n        this._recreatePriceAxisWidgets();\n        if (this._model().serieses().length === 0) {\n            return;\n        }\n        if (this._leftPriceAxisWidget !== null) {\n            const leftPriceScale = this._state.leftPriceScale();\n            this._leftPriceAxisWidget.setPriceScale(ensureNotNull(leftPriceScale));\n        }\n        if (this._rightPriceAxisWidget !== null) {\n            const rightPriceScale = this._state.rightPriceScale();\n            this._rightPriceAxisWidget.setPriceScale(ensureNotNull(rightPriceScale));\n        }\n    }\n    updatePriceAxisWidgets() {\n        if (this._leftPriceAxisWidget !== null) {\n            this._leftPriceAxisWidget.update();\n        }\n        if (this._rightPriceAxisWidget !== null) {\n            this._rightPriceAxisWidget.update();\n        }\n    }\n    stretchFactor() {\n        return this._state !== null ? this._state.stretchFactor() : 0;\n    }\n    setStretchFactor(stretchFactor) {\n        if (this._state) {\n            this._state.setStretchFactor(stretchFactor);\n        }\n    }\n    mouseEnterEvent(event) {\n        if (!this._state) {\n            return;\n        }\n        this._onMouseEvent();\n        const x = event.localX;\n        const y = event.localY;\n        this._setCrosshairPosition(x, y, event);\n    }\n    mouseDownEvent(event) {\n        this._onMouseEvent();\n        this._mouseTouchDownEvent();\n        this._setCrosshairPosition(event.localX, event.localY, event);\n    }\n    mouseMoveEvent(event) {\n        if (!this._state) {\n            return;\n        }\n        this._onMouseEvent();\n        const x = event.localX;\n        const y = event.localY;\n        this._setCrosshairPosition(x, y, event);\n    }\n    mouseClickEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        this._onMouseEvent();\n        this._fireClickedDelegate(event);\n    }\n    mouseDoubleClickEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        this._fireMouseClickDelegate(this._dblClicked, event);\n    }\n    doubleTapEvent(event) {\n        this.mouseDoubleClickEvent(event);\n    }\n    pressedMouseMoveEvent(event) {\n        this._onMouseEvent();\n        this._pressedMouseTouchMoveEvent(event);\n        this._setCrosshairPosition(event.localX, event.localY, event);\n    }\n    mouseUpEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        this._onMouseEvent();\n        this._longTap = false;\n        this._endScroll(event);\n    }\n    tapEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        this._fireClickedDelegate(event);\n    }\n    longTapEvent(event) {\n        this._longTap = true;\n        if (this._startTrackPoint === null) {\n            const point = { x: event.localX, y: event.localY };\n            this._startTrackingMode(point, point, event);\n        }\n    }\n    mouseLeaveEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        this._onMouseEvent();\n        this._state.model().setHoveredSource(null);\n        this._clearCrosshairPosition();\n    }\n    clicked() {\n        return this._clicked;\n    }\n    dblClicked() {\n        return this._dblClicked;\n    }\n    pinchStartEvent() {\n        this._prevPinchScale = 1;\n        this._model().stopTimeScaleAnimation();\n    }\n    pinchEvent(middlePoint, scale) {\n        if (!this._chart.options()['handleScale'].pinch) {\n            return;\n        }\n        const zoomScale = (scale - this._prevPinchScale) * 5;\n        this._prevPinchScale = scale;\n        this._model().zoomTime(middlePoint.x, zoomScale);\n    }\n    touchStartEvent(event) {\n        this._longTap = false;\n        this._exitTrackingModeOnNextTry = this._startTrackPoint !== null;\n        this._mouseTouchDownEvent();\n        const crosshair = this._model().crosshairSource();\n        if (this._startTrackPoint !== null && crosshair.visible()) {\n            this._initCrosshairPosition = { x: crosshair.appliedX(), y: crosshair.appliedY() };\n            this._startTrackPoint = { x: event.localX, y: event.localY };\n        }\n    }\n    touchMoveEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        const x = event.localX;\n        const y = event.localY;\n        if (this._startTrackPoint !== null) {\n            // tracking mode: move crosshair\n            this._exitTrackingModeOnNextTry = false;\n            const origPoint = ensureNotNull(this._initCrosshairPosition);\n            const newX = origPoint.x + (x - this._startTrackPoint.x);\n            const newY = origPoint.y + (y - this._startTrackPoint.y);\n            this._setCrosshairPosition(newX, newY, event);\n            return;\n        }\n        this._pressedMouseTouchMoveEvent(event);\n    }\n    touchEndEvent(event) {\n        if (this.chart().options().trackingMode.exitMode === 0 /* TrackingModeExitMode.OnTouchEnd */) {\n            this._exitTrackingModeOnNextTry = true;\n        }\n        this._tryExitTrackingMode();\n        this._endScroll(event);\n    }\n    hitTest(x, y) {\n        const state = this._state;\n        if (state === null) {\n            return null;\n        }\n        return hitTestPane(state, x, y);\n    }\n    setPriceAxisSize(width, position) {\n        const priceAxisWidget = position === 'left' ? this._leftPriceAxisWidget : this._rightPriceAxisWidget;\n        ensureNotNull(priceAxisWidget).setSize(size({ width, height: this._size.height }));\n    }\n    getSize() {\n        return this._size;\n    }\n    setSize(newSize) {\n        if (equalSizes(this._size, newSize)) {\n            return;\n        }\n        this._size = newSize;\n        this._isSettingSize = true;\n        this._canvasBinding.resizeCanvasElement(newSize);\n        this._topCanvasBinding.resizeCanvasElement(newSize);\n        this._isSettingSize = false;\n        this._paneCell.style.width = newSize.width + 'px';\n        this._paneCell.style.height = newSize.height + 'px';\n    }\n    recalculatePriceScales() {\n        const pane = ensureNotNull(this._state);\n        pane.recalculatePriceScale(pane.leftPriceScale());\n        pane.recalculatePriceScale(pane.rightPriceScale());\n        for (const source of pane.dataSources()) {\n            if (pane.isOverlay(source)) {\n                const priceScale = source.priceScale();\n                if (priceScale !== null) {\n                    pane.recalculatePriceScale(priceScale);\n                }\n                // for overlay drawings price scale is owner's price scale\n                // however owner's price scale could not contain ds\n                source.updateAllViews();\n            }\n        }\n        for (const primitive of pane.primitives()) {\n            primitive.updateAllViews();\n        }\n    }\n    getBitmapSize() {\n        return this._canvasBinding.bitmapSize;\n    }\n    drawBitmap(ctx, x, y, addTopLayer) {\n        const bitmapSize = this.getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._canvasBinding.canvasElement, x, y);\n            if (addTopLayer) {\n                const topLayer = this._topCanvasBinding.canvasElement;\n                if (ctx !== null) {\n                    ctx.drawImage(topLayer, x, y);\n                }\n            }\n        }\n    }\n    paint(type) {\n        if (type === 0 /* InvalidationLevel.None */) {\n            return;\n        }\n        if (this._state === null) {\n            return;\n        }\n        if (type > 1 /* InvalidationLevel.Cursor */) {\n            this.recalculatePriceScales();\n        }\n        if (this._leftPriceAxisWidget !== null) {\n            this._leftPriceAxisWidget.paint(type);\n        }\n        if (this._rightPriceAxisWidget !== null) {\n            this._rightPriceAxisWidget.paint(type);\n        }\n        const canvasOptions = {\n            colorSpace: this._chart.options().layout.colorSpace,\n        };\n        if (type !== 1 /* InvalidationLevel.Cursor */) {\n            this._canvasBinding.applySuggestedBitmapSize();\n            const target = tryCreateCanvasRenderingTarget2D(this._canvasBinding, canvasOptions);\n            if (target !== null) {\n                target.useBitmapCoordinateSpace((scope) => {\n                    this._drawBackground(scope);\n                });\n                if (this._state) {\n                    this._drawSources(target, sourceBottomPaneViews);\n                    this._drawGrid(target);\n                    this._drawSources(target, sourcePaneViews);\n                    this._drawSources(target, sourceLabelPaneViews);\n                }\n            }\n        }\n        this._topCanvasBinding.applySuggestedBitmapSize();\n        const topTarget = tryCreateCanvasRenderingTarget2D(this._topCanvasBinding, canvasOptions);\n        if (topTarget !== null) {\n            topTarget.useBitmapCoordinateSpace(({ context: ctx, bitmapSize }) => {\n                ctx.clearRect(0, 0, bitmapSize.width, bitmapSize.height);\n            });\n            this._drawCrosshair(topTarget);\n            this._drawSources(topTarget, sourceTopPaneViews);\n            this._drawSources(topTarget, sourceLabelPaneViews);\n        }\n    }\n    leftPriceAxisWidget() {\n        return this._leftPriceAxisWidget;\n    }\n    rightPriceAxisWidget() {\n        return this._rightPriceAxisWidget;\n    }\n    drawAdditionalSources(target, paneViewsGetter) {\n        this._drawSources(target, paneViewsGetter);\n    }\n    _onStateDestroyed() {\n        if (this._state !== null) {\n            this._state.onDestroyed().unsubscribeAll(this);\n        }\n        this._state = null;\n    }\n    _fireClickedDelegate(event) {\n        this._fireMouseClickDelegate(this._clicked, event);\n    }\n    _fireMouseClickDelegate(delegate, event) {\n        const x = event.localX;\n        const y = event.localY;\n        if (delegate.hasListeners()) {\n            delegate.fire(this._model().timeScale().coordinateToIndex(x), { x, y }, event);\n        }\n    }\n    _drawBackground({ context: ctx, bitmapSize }) {\n        const { width, height } = bitmapSize;\n        const model = this._model();\n        const topColor = model.backgroundTopColor();\n        const bottomColor = model.backgroundBottomColor();\n        if (topColor === bottomColor) {\n            clearRect(ctx, 0, 0, width, height, bottomColor);\n        }\n        else {\n            clearRectWithGradient(ctx, 0, 0, width, height, topColor, bottomColor);\n        }\n    }\n    _drawGrid(target) {\n        const state = ensureNotNull(this._state);\n        const paneView = state.grid().paneView();\n        const renderer = paneView.renderer(state);\n        if (renderer !== null) {\n            renderer.draw(target, false);\n        }\n    }\n    _drawCrosshair(target) {\n        this._drawSourceImpl(target, sourcePaneViews, drawForeground, this._model().crosshairSource());\n    }\n    _drawSources(target, paneViewsGetter) {\n        const state = ensureNotNull(this._state);\n        const sources = state.orderedSources();\n        const panePrimitives = state.primitives();\n        for (const panePrimitive of panePrimitives) {\n            this._drawSourceImpl(target, paneViewsGetter, drawBackground, panePrimitive);\n        }\n        for (const source of sources) {\n            this._drawSourceImpl(target, paneViewsGetter, drawBackground, source);\n        }\n        for (const panePrimitive of panePrimitives) {\n            this._drawSourceImpl(target, paneViewsGetter, drawForeground, panePrimitive);\n        }\n        for (const source of sources) {\n            this._drawSourceImpl(target, paneViewsGetter, drawForeground, source);\n        }\n    }\n    _drawSourceImpl(target, paneViewsGetter, drawFn, source) {\n        const state = ensureNotNull(this._state);\n        const hoveredSource = state.model().hoveredSource();\n        const isHovered = hoveredSource !== null && hoveredSource.source === source;\n        const objecId = hoveredSource !== null && isHovered && hoveredSource.object !== undefined\n            ? hoveredSource.object.hitTestData\n            : undefined;\n        const drawRendererFn = (renderer) => drawFn(renderer, target, isHovered, objecId);\n        drawSourceViews(paneViewsGetter, drawRendererFn, source, state);\n    }\n    _recreatePriceAxisWidgets() {\n        if (this._state === null) {\n            return;\n        }\n        const chart = this._chart;\n        const leftAxisVisible = this._state.leftPriceScale().options().visible;\n        const rightAxisVisible = this._state.rightPriceScale().options().visible;\n        if (!leftAxisVisible && this._leftPriceAxisWidget !== null) {\n            this._leftAxisCell.removeChild(this._leftPriceAxisWidget.getElement());\n            this._leftPriceAxisWidget.destroy();\n            this._leftPriceAxisWidget = null;\n        }\n        if (!rightAxisVisible && this._rightPriceAxisWidget !== null) {\n            this._rightAxisCell.removeChild(this._rightPriceAxisWidget.getElement());\n            this._rightPriceAxisWidget.destroy();\n            this._rightPriceAxisWidget = null;\n        }\n        const rendererOptionsProvider = chart.model().rendererOptionsProvider();\n        if (leftAxisVisible && this._leftPriceAxisWidget === null) {\n            this._leftPriceAxisWidget = new PriceAxisWidget(this, chart.options(), rendererOptionsProvider, 'left');\n            this._leftAxisCell.appendChild(this._leftPriceAxisWidget.getElement());\n        }\n        if (rightAxisVisible && this._rightPriceAxisWidget === null) {\n            this._rightPriceAxisWidget = new PriceAxisWidget(this, chart.options(), rendererOptionsProvider, 'right');\n            this._rightAxisCell.appendChild(this._rightPriceAxisWidget.getElement());\n        }\n    }\n    _preventScroll(event) {\n        return event.isTouch && this._longTap || this._startTrackPoint !== null;\n    }\n    _correctXCoord(x) {\n        return Math.max(0, Math.min(x, this._size.width - 1));\n    }\n    _correctYCoord(y) {\n        return Math.max(0, Math.min(y, this._size.height - 1));\n    }\n    _setCrosshairPosition(x, y, event) {\n        this._model().setAndSaveCurrentPosition(this._correctXCoord(x), this._correctYCoord(y), event, ensureNotNull(this._state));\n    }\n    _clearCrosshairPosition() {\n        this._model().clearCurrentPosition();\n    }\n    _tryExitTrackingMode() {\n        if (this._exitTrackingModeOnNextTry) {\n            this._startTrackPoint = null;\n            this._clearCrosshairPosition();\n        }\n    }\n    _startTrackingMode(startTrackPoint, crossHairPosition, event) {\n        this._startTrackPoint = startTrackPoint;\n        this._exitTrackingModeOnNextTry = false;\n        this._setCrosshairPosition(crossHairPosition.x, crossHairPosition.y, event);\n        const crosshair = this._model().crosshairSource();\n        this._initCrosshairPosition = { x: crosshair.appliedX(), y: crosshair.appliedY() };\n    }\n    _model() {\n        return this._chart.model();\n    }\n    _endScroll(event) {\n        if (!this._isScrolling) {\n            return;\n        }\n        const model = this._model();\n        const state = this.state();\n        model.endScrollPrice(state, state.defaultPriceScale());\n        this._startScrollingPos = null;\n        this._isScrolling = false;\n        model.endScrollTime();\n        if (this._scrollXAnimation !== null) {\n            const startAnimationTime = performance.now();\n            const timeScale = model.timeScale();\n            this._scrollXAnimation.start(timeScale.rightOffset(), startAnimationTime);\n            if (!this._scrollXAnimation.finished(startAnimationTime)) {\n                model.setTimeScaleAnimation(this._scrollXAnimation);\n            }\n        }\n    }\n    _onMouseEvent() {\n        this._startTrackPoint = null;\n    }\n    _mouseTouchDownEvent() {\n        if (!this._state) {\n            return;\n        }\n        this._model().stopTimeScaleAnimation();\n        if (document.activeElement !== document.body && document.activeElement !== document.documentElement) {\n            // If any focusable element except the page itself is focused, remove the focus\n            ensureNotNull(document.activeElement).blur();\n        }\n        else {\n            // Clear selection\n            const selection = document.getSelection();\n            if (selection !== null) {\n                selection.removeAllRanges();\n            }\n        }\n        const priceScale = this._state.defaultPriceScale();\n        if (priceScale.isEmpty() || this._model().timeScale().isEmpty()) {\n            return;\n        }\n    }\n    // eslint-disable-next-line complexity\n    _pressedMouseTouchMoveEvent(event) {\n        if (this._state === null) {\n            return;\n        }\n        const model = this._model();\n        const timeScale = model.timeScale();\n        if (timeScale.isEmpty()) {\n            return;\n        }\n        const chartOptions = this._chart.options();\n        const scrollOptions = chartOptions['handleScroll'];\n        const kineticScrollOptions = chartOptions.kineticScroll;\n        if ((!scrollOptions.pressedMouseMove || event.isTouch) &&\n            (!scrollOptions.horzTouchDrag && !scrollOptions.vertTouchDrag || !event.isTouch)) {\n            return;\n        }\n        const priceScale = this._state.defaultPriceScale();\n        const now = performance.now();\n        if (this._startScrollingPos === null && !this._preventScroll(event)) {\n            this._startScrollingPos = {\n                x: event.clientX,\n                y: event.clientY,\n                timestamp: now,\n                localX: event.localX,\n                localY: event.localY,\n            };\n        }\n        if (this._startScrollingPos !== null &&\n            !this._isScrolling &&\n            (this._startScrollingPos.x !== event.clientX || this._startScrollingPos.y !== event.clientY)) {\n            if (event.isTouch && kineticScrollOptions.touch || !event.isTouch && kineticScrollOptions.mouse) {\n                const barSpacing = timeScale.barSpacing();\n                this._scrollXAnimation = new KineticAnimation(0.2 /* KineticScrollConstants.MinScrollSpeed */ / barSpacing, 7 /* KineticScrollConstants.MaxScrollSpeed */ / barSpacing, 0.997 /* KineticScrollConstants.DumpingCoeff */, 15 /* KineticScrollConstants.ScrollMinMove */ / barSpacing);\n                this._scrollXAnimation.addPosition(timeScale.rightOffset(), this._startScrollingPos.timestamp);\n            }\n            else {\n                this._scrollXAnimation = null;\n            }\n            if (!priceScale.isEmpty()) {\n                model.startScrollPrice(this._state, priceScale, event.localY);\n            }\n            model.startScrollTime(event.localX);\n            this._isScrolling = true;\n        }\n        if (this._isScrolling) {\n            // this allows scrolling not default price scales\n            if (!priceScale.isEmpty()) {\n                model.scrollPriceTo(this._state, priceScale, event.localY);\n            }\n            model.scrollTimeTo(event.localX);\n            if (this._scrollXAnimation !== null) {\n                this._scrollXAnimation.addPosition(timeScale.rightOffset(), now);\n            }\n        }\n    }\n}\n", "import { equalSizes, size, tryCreateCanvasRenderingTarget2D, } from 'fancy-canvas';\nimport { clearRect } from '../helpers/canvas-helpers';\nimport { createBoundCanvas, releaseCanvas } from './canvas-utils';\nexport class PriceAxisStub {\n    constructor(side, options, params, borderVisible, bottomColor) {\n        this._invalidated = true;\n        this._size = size({ width: 0, height: 0 });\n        this._canvasSuggestedBitmapSizeChangedHandler = () => this.paint(3 /* InvalidationLevel.Full */);\n        this._isLeft = side === 'left';\n        this._rendererOptionsProvider = params.rendererOptionsProvider;\n        this._options = options;\n        this._borderVisible = borderVisible;\n        this._bottomColor = bottomColor;\n        this._cell = document.createElement('div');\n        this._cell.style.width = '25px';\n        this._cell.style.height = '100%';\n        this._cell.style.overflow = 'hidden';\n        this._canvasBinding = createBoundCanvas(this._cell, size({ width: 16, height: 16 }));\n        this._canvasBinding.subscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n    }\n    destroy() {\n        this._canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._canvasBinding.canvasElement);\n        this._canvasBinding.dispose();\n    }\n    getElement() {\n        return this._cell;\n    }\n    getSize() {\n        return this._size;\n    }\n    setSize(newSize) {\n        if (!equalSizes(this._size, newSize)) {\n            this._size = newSize;\n            this._canvasBinding.resizeCanvasElement(newSize);\n            this._cell.style.width = `${newSize.width}px`;\n            this._cell.style.height = `${newSize.height}px`;\n            this._invalidated = true;\n        }\n    }\n    paint(type) {\n        if (type < 3 /* InvalidationLevel.Full */ && !this._invalidated) {\n            return;\n        }\n        if (this._size.width === 0 || this._size.height === 0) {\n            return;\n        }\n        this._invalidated = false;\n        this._canvasBinding.applySuggestedBitmapSize();\n        const target = tryCreateCanvasRenderingTarget2D(this._canvasBinding, {\n            colorSpace: this._options.layout.colorSpace,\n        });\n        if (target !== null) {\n            target.useBitmapCoordinateSpace((scope) => {\n                this._drawBackground(scope);\n                this._drawBorder(scope);\n            });\n        }\n    }\n    getBitmapSize() {\n        return this._canvasBinding.bitmapSize;\n    }\n    drawBitmap(ctx, x, y) {\n        const bitmapSize = this.getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._canvasBinding.canvasElement, x, y);\n        }\n    }\n    _drawBorder({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (!this._borderVisible()) {\n            return;\n        }\n        ctx.fillStyle = this._options.timeScale.borderColor;\n        const horzBorderSize = Math.floor(this._rendererOptionsProvider.options().borderSize * horizontalPixelRatio);\n        const vertBorderSize = Math.floor(this._rendererOptionsProvider.options().borderSize * verticalPixelRatio);\n        const left = (this._isLeft) ? bitmapSize.width - horzBorderSize : 0;\n        ctx.fillRect(left, 0, horzBorderSize, vertBorderSize);\n    }\n    _drawBackground({ context: ctx, bitmapSize }) {\n        clearRect(ctx, 0, 0, bitmapSize.width, bitmapSize.height, this._bottomColor());\n    }\n}\n", "import { equalSizes, size, tryCreateCanvasRenderingTarget2D, } from 'fancy-canvas';\nimport { clearRect } from '../helpers/canvas-helpers';\nimport { Delegate } from '../helpers/delegate';\nimport { makeFont } from '../helpers/make-font';\nimport { TextWidthCache } from '../model/text-width-cache';\nimport { createBoundCanvas, releaseCanvas } from './canvas-utils';\nimport { drawBackground, drawForeground, drawSourceViews } from './draw-functions';\nimport { MouseEventHandler } from './mouse-event-handler';\nimport { PriceAxisStub } from './price-axis-stub';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"BorderSize\"] = 1] = \"BorderSize\";\n    Constants[Constants[\"TickLength\"] = 5] = \"TickLength\";\n})(Constants || (Constants = {}));\nvar CursorType;\n(function (CursorType) {\n    CursorType[CursorType[\"Default\"] = 0] = \"Default\";\n    CursorType[CursorType[\"EwResize\"] = 1] = \"EwResize\";\n})(CursorType || (CursorType = {}));\nfunction buildTimeAxisViewsGetter(zOrder) {\n    return (source) => source.timePaneViews?.(zOrder) ?? [];\n}\nconst sourcePaneViews = buildTimeAxisViewsGetter('normal');\nconst sourceTopPaneViews = buildTimeAxisViewsGetter('top');\nconst sourceBottomPaneViews = buildTimeAxisViewsGetter('bottom');\nexport class TimeAxisWidget {\n    constructor(chartWidget, horzScaleBehavior) {\n        this._leftStub = null;\n        this._rightStub = null;\n        this._rendererOptions = null;\n        this._mouseDown = false;\n        this._size = size({ width: 0, height: 0 });\n        this._sizeChanged = new Delegate();\n        this._widthCache = new TextWidthCache(5);\n        this._isSettingSize = false;\n        this._canvasSuggestedBitmapSizeChangedHandler = () => {\n            if (!this._isSettingSize) {\n                this._chart.model().lightUpdate();\n            }\n        };\n        this._topCanvasSuggestedBitmapSizeChangedHandler = () => {\n            if (!this._isSettingSize) {\n                this._chart.model().lightUpdate();\n            }\n        };\n        this._chart = chartWidget;\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._options = chartWidget.options()['layout'];\n        this._element = document.createElement('tr');\n        this._leftStubCell = document.createElement('td');\n        this._leftStubCell.style.padding = '0';\n        this._rightStubCell = document.createElement('td');\n        this._rightStubCell.style.padding = '0';\n        this._cell = document.createElement('td');\n        this._cell.style.height = '25px';\n        this._cell.style.padding = '0';\n        this._dv = document.createElement('div');\n        this._dv.style.width = '100%';\n        this._dv.style.height = '100%';\n        this._dv.style.position = 'relative';\n        this._dv.style.overflow = 'hidden';\n        this._cell.appendChild(this._dv);\n        this._canvasBinding = createBoundCanvas(this._dv, size({ width: 16, height: 16 }));\n        this._canvasBinding.subscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        const canvas = this._canvasBinding.canvasElement;\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        this._topCanvasBinding = createBoundCanvas(this._dv, size({ width: 16, height: 16 }));\n        this._topCanvasBinding.subscribeSuggestedBitmapSizeChanged(this._topCanvasSuggestedBitmapSizeChangedHandler);\n        const topCanvas = this._topCanvasBinding.canvasElement;\n        topCanvas.style.position = 'absolute';\n        topCanvas.style.zIndex = '2';\n        topCanvas.style.left = '0';\n        topCanvas.style.top = '0';\n        this._element.appendChild(this._leftStubCell);\n        this._element.appendChild(this._cell);\n        this._element.appendChild(this._rightStubCell);\n        this._recreateStubs();\n        this._chart.model().priceScalesOptionsChanged().subscribe(this._recreateStubs.bind(this), this);\n        this._mouseEventHandler = new MouseEventHandler(this._topCanvasBinding.canvasElement, this, {\n            treatVertTouchDragAsPageScroll: () => true,\n            treatHorzTouchDragAsPageScroll: () => !this._chart.options()['handleScroll'].horzTouchDrag,\n        });\n    }\n    destroy() {\n        this._mouseEventHandler.destroy();\n        if (this._leftStub !== null) {\n            this._leftStub.destroy();\n        }\n        if (this._rightStub !== null) {\n            this._rightStub.destroy();\n        }\n        this._topCanvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._topCanvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._topCanvasBinding.canvasElement);\n        this._topCanvasBinding.dispose();\n        this._canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._canvasBinding.canvasElement);\n        this._canvasBinding.dispose();\n    }\n    getElement() {\n        return this._element;\n    }\n    leftStub() {\n        return this._leftStub;\n    }\n    rightStub() {\n        return this._rightStub;\n    }\n    mouseDownEvent(event) {\n        if (this._mouseDown) {\n            return;\n        }\n        this._mouseDown = true;\n        const model = this._chart.model();\n        if (model.timeScale().isEmpty() || !this._chart.options()['handleScale'].axisPressedMouseMove.time) {\n            return;\n        }\n        model.startScaleTime(event.localX);\n    }\n    touchStartEvent(event) {\n        this.mouseDownEvent(event);\n    }\n    mouseDownOutsideEvent() {\n        const model = this._chart.model();\n        if (!model.timeScale().isEmpty() && this._mouseDown) {\n            this._mouseDown = false;\n            if (this._chart.options()['handleScale'].axisPressedMouseMove.time) {\n                model.endScaleTime();\n            }\n        }\n    }\n    pressedMouseMoveEvent(event) {\n        const model = this._chart.model();\n        if (model.timeScale().isEmpty() || !this._chart.options()['handleScale'].axisPressedMouseMove.time) {\n            return;\n        }\n        model.scaleTimeTo(event.localX);\n    }\n    touchMoveEvent(event) {\n        this.pressedMouseMoveEvent(event);\n    }\n    mouseUpEvent() {\n        this._mouseDown = false;\n        const model = this._chart.model();\n        if (model.timeScale().isEmpty() && !this._chart.options()['handleScale'].axisPressedMouseMove.time) {\n            return;\n        }\n        model.endScaleTime();\n    }\n    touchEndEvent() {\n        this.mouseUpEvent();\n    }\n    mouseDoubleClickEvent() {\n        if (this._chart.options()['handleScale'].axisDoubleClickReset.time) {\n            this._chart.model().resetTimeScale();\n        }\n    }\n    doubleTapEvent() {\n        this.mouseDoubleClickEvent();\n    }\n    mouseEnterEvent() {\n        if (this._chart.model().options()['handleScale'].axisPressedMouseMove.time) {\n            this._setCursor(1 /* CursorType.EwResize */);\n        }\n    }\n    mouseLeaveEvent() {\n        this._setCursor(0 /* CursorType.Default */);\n    }\n    getSize() {\n        return this._size;\n    }\n    sizeChanged() {\n        return this._sizeChanged;\n    }\n    setSizes(timeAxisSize, leftStubWidth, rightStubWidth) {\n        if (!equalSizes(this._size, timeAxisSize)) {\n            this._size = timeAxisSize;\n            this._isSettingSize = true;\n            this._canvasBinding.resizeCanvasElement(timeAxisSize);\n            this._topCanvasBinding.resizeCanvasElement(timeAxisSize);\n            this._isSettingSize = false;\n            this._cell.style.width = `${timeAxisSize.width}px`;\n            this._cell.style.height = `${timeAxisSize.height}px`;\n            this._sizeChanged.fire(timeAxisSize);\n        }\n        if (this._leftStub !== null) {\n            this._leftStub.setSize(size({ width: leftStubWidth, height: timeAxisSize.height }));\n        }\n        if (this._rightStub !== null) {\n            this._rightStub.setSize(size({ width: rightStubWidth, height: timeAxisSize.height }));\n        }\n    }\n    optimalHeight() {\n        const rendererOptions = this._getRendererOptions();\n        return Math.ceil(\n        // rendererOptions.offsetSize +\n        rendererOptions.borderSize +\n            rendererOptions.tickLength +\n            rendererOptions.fontSize +\n            rendererOptions.paddingTop +\n            rendererOptions.paddingBottom +\n            rendererOptions.labelBottomOffset);\n    }\n    update() {\n        // this call has side-effect - it regenerates marks on the time scale\n        this._chart.model().timeScale().marks();\n    }\n    getBitmapSize() {\n        return this._canvasBinding.bitmapSize;\n    }\n    drawBitmap(ctx, x, y, addTopLayer) {\n        const bitmapSize = this.getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._canvasBinding.canvasElement, x, y);\n            if (addTopLayer) {\n                const topLayer = this._topCanvasBinding.canvasElement;\n                ctx.drawImage(topLayer, x, y);\n            }\n        }\n    }\n    paint(type) {\n        if (type === 0 /* InvalidationLevel.None */) {\n            return;\n        }\n        const canvasOptions = {\n            colorSpace: this._options.colorSpace,\n        };\n        if (type !== 1 /* InvalidationLevel.Cursor */) {\n            this._canvasBinding.applySuggestedBitmapSize();\n            const target = tryCreateCanvasRenderingTarget2D(this._canvasBinding, canvasOptions);\n            if (target !== null) {\n                target.useBitmapCoordinateSpace((scope) => {\n                    this._drawBackground(scope);\n                    this._drawBorder(scope);\n                    this._drawAdditionalSources(target, sourceBottomPaneViews);\n                });\n                this._drawTickMarks(target);\n                this._drawAdditionalSources(target, sourcePaneViews);\n                // atm we don't have sources to be drawn on time axis except crosshair which is rendered on top level canvas\n                // so let's don't call this code at all for now\n                // this._drawLabels(this._chart.model().dataSources(), target);\n            }\n            if (this._leftStub !== null) {\n                this._leftStub.paint(type);\n            }\n            if (this._rightStub !== null) {\n                this._rightStub.paint(type);\n            }\n        }\n        this._topCanvasBinding.applySuggestedBitmapSize();\n        const topTarget = tryCreateCanvasRenderingTarget2D(this._topCanvasBinding, canvasOptions);\n        if (topTarget !== null) {\n            topTarget.useBitmapCoordinateSpace(({ context: ctx, bitmapSize }) => {\n                ctx.clearRect(0, 0, bitmapSize.width, bitmapSize.height);\n            });\n            this._drawLabels([...this._chart.model().serieses(), this._chart.model().crosshairSource()], topTarget);\n            this._drawAdditionalSources(topTarget, sourceTopPaneViews);\n        }\n    }\n    _drawAdditionalSources(target, axisViewsGetter) {\n        const sources = this._chart.model().serieses();\n        for (const source of sources) {\n            drawSourceViews(axisViewsGetter, (renderer) => drawBackground(renderer, target, false, undefined), source, undefined);\n        }\n        for (const source of sources) {\n            drawSourceViews(axisViewsGetter, (renderer) => drawForeground(renderer, target, false, undefined), source, undefined);\n        }\n    }\n    _drawBackground({ context: ctx, bitmapSize }) {\n        clearRect(ctx, 0, 0, bitmapSize.width, bitmapSize.height, this._chart.model().backgroundBottomColor());\n    }\n    _drawBorder({ context: ctx, bitmapSize, verticalPixelRatio }) {\n        if (this._chart.options().timeScale.borderVisible) {\n            ctx.fillStyle = this._lineColor();\n            const borderSize = Math.max(1, Math.floor(this._getRendererOptions().borderSize * verticalPixelRatio));\n            ctx.fillRect(0, 0, bitmapSize.width, borderSize);\n        }\n    }\n    _drawTickMarks(target) {\n        const timeScale = this._chart.model().timeScale();\n        const tickMarks = timeScale.marks();\n        if (!tickMarks || tickMarks.length === 0) {\n            return;\n        }\n        const maxWeight = this._horzScaleBehavior.maxTickMarkWeight(tickMarks);\n        const rendererOptions = this._getRendererOptions();\n        const options = timeScale.options();\n        if (options.borderVisible && options.ticksVisible) {\n            target.useBitmapCoordinateSpace(({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) => {\n                ctx.strokeStyle = this._lineColor();\n                ctx.fillStyle = this._lineColor();\n                const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n                const tickOffset = Math.floor(horizontalPixelRatio * 0.5);\n                ctx.beginPath();\n                const tickLen = Math.round(rendererOptions.tickLength * verticalPixelRatio);\n                for (let index = tickMarks.length; index--;) {\n                    const x = Math.round(tickMarks[index].coord * horizontalPixelRatio);\n                    ctx.rect(x - tickOffset, 0, tickWidth, tickLen);\n                }\n                ctx.fill();\n            });\n        }\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            const yText = (rendererOptions.borderSize +\n                rendererOptions.tickLength +\n                rendererOptions.paddingTop +\n                rendererOptions.fontSize / 2);\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = this._textColor();\n            // draw base marks\n            ctx.font = this._baseFont();\n            for (const tickMark of tickMarks) {\n                if (tickMark.weight < maxWeight) {\n                    const coordinate = tickMark.needAlignCoordinate ? this._alignTickMarkLabelCoordinate(ctx, tickMark.coord, tickMark.label) : tickMark.coord;\n                    ctx.fillText(tickMark.label, coordinate, yText);\n                }\n            }\n            if (this._chart.options().timeScale.allowBoldLabels) {\n                ctx.font = this._baseBoldFont();\n            }\n            for (const tickMark of tickMarks) {\n                if (tickMark.weight >= maxWeight) {\n                    const coordinate = tickMark.needAlignCoordinate ? this._alignTickMarkLabelCoordinate(ctx, tickMark.coord, tickMark.label) : tickMark.coord;\n                    ctx.fillText(tickMark.label, coordinate, yText);\n                }\n            }\n        });\n    }\n    _alignTickMarkLabelCoordinate(ctx, coordinate, labelText) {\n        const labelWidth = this._widthCache.measureText(ctx, labelText);\n        const labelWidthHalf = labelWidth / 2;\n        const leftTextCoordinate = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        if (leftTextCoordinate < 0) {\n            coordinate = coordinate + Math.abs(0 - leftTextCoordinate);\n        }\n        else if (leftTextCoordinate + labelWidth > this._size.width) {\n            coordinate = coordinate - Math.abs(this._size.width - (leftTextCoordinate + labelWidth));\n        }\n        return coordinate;\n    }\n    _drawLabels(sources, target) {\n        const rendererOptions = this._getRendererOptions();\n        for (const source of sources) {\n            for (const view of source.timeAxisViews()) {\n                view.renderer().draw(target, rendererOptions);\n            }\n        }\n    }\n    _lineColor() {\n        return this._chart.options().timeScale.borderColor;\n    }\n    _textColor() {\n        return this._options.textColor;\n    }\n    _fontSize() {\n        return this._options.fontSize;\n    }\n    _baseFont() {\n        return makeFont(this._fontSize(), this._options.fontFamily);\n    }\n    _baseBoldFont() {\n        return makeFont(this._fontSize(), this._options.fontFamily, 'bold');\n    }\n    _getRendererOptions() {\n        if (this._rendererOptions === null) {\n            this._rendererOptions = {\n                borderSize: 1 /* Constants.BorderSize */,\n                baselineOffset: NaN,\n                paddingTop: NaN,\n                paddingBottom: NaN,\n                paddingHorizontal: NaN,\n                tickLength: 5 /* Constants.TickLength */,\n                fontSize: NaN,\n                font: '',\n                widthCache: new TextWidthCache(),\n                labelBottomOffset: 0,\n            };\n        }\n        const rendererOptions = this._rendererOptions;\n        const newFont = this._baseFont();\n        if (rendererOptions.font !== newFont) {\n            const fontSize = this._fontSize();\n            rendererOptions.fontSize = fontSize;\n            rendererOptions.font = newFont;\n            rendererOptions.paddingTop = 3 * fontSize / 12;\n            rendererOptions.paddingBottom = 3 * fontSize / 12;\n            rendererOptions.paddingHorizontal = 9 * fontSize / 12;\n            rendererOptions.baselineOffset = 0;\n            rendererOptions.labelBottomOffset = 4 * fontSize / 12;\n            rendererOptions.widthCache.reset();\n        }\n        return this._rendererOptions;\n    }\n    _setCursor(type) {\n        this._cell.style.cursor = type === 1 /* CursorType.EwResize */ ? 'ew-resize' : 'default';\n    }\n    _recreateStubs() {\n        const model = this._chart.model();\n        const options = model.options();\n        if (!options.leftPriceScale.visible && this._leftStub !== null) {\n            this._leftStubCell.removeChild(this._leftStub.getElement());\n            this._leftStub.destroy();\n            this._leftStub = null;\n        }\n        if (!options.rightPriceScale.visible && this._rightStub !== null) {\n            this._rightStubCell.removeChild(this._rightStub.getElement());\n            this._rightStub.destroy();\n            this._rightStub = null;\n        }\n        const rendererOptionsProvider = this._chart.model().rendererOptionsProvider();\n        const params = {\n            rendererOptionsProvider: rendererOptionsProvider,\n        };\n        const borderVisibleGetter = () => {\n            return options.leftPriceScale.borderVisible && model.timeScale().options().borderVisible;\n        };\n        const bottomColorGetter = () => model.backgroundBottomColor();\n        if (options.leftPriceScale.visible && this._leftStub === null) {\n            this._leftStub = new PriceAxisStub('left', options, params, borderVisibleGetter, bottomColorGetter);\n            this._leftStubCell.appendChild(this._leftStub.getElement());\n        }\n        if (options.rightPriceScale.visible && this._rightStub === null) {\n            this._rightStub = new PriceAxisStub('right', options, params, borderVisibleGetter, bottomColorGetter);\n            this._rightStubCell.appendChild(this._rightStub.getElement());\n        }\n    }\n}\n", "import { size } from 'fancy-canvas';\nimport { ensureDefined, ensureNotNull } from '../helpers/assertions';\nimport { isChromiumBased, isWindows } from '../helpers/browsers';\nimport { Delegate } from '../helpers/delegate';\nimport { warn } from '../helpers/logger';\nimport { ChartModel } from '../model/chart-model';\nimport { InvalidateMask, } from '../model/invalidate-mask';\nimport { Series } from '../model/series';\nimport { suggestChartSize, suggestPriceScaleWidth, suggestTimeScaleHeight } from './internal-layout-sizes-hints';\nimport { PaneSeparator } from './pane-separator';\nimport { PaneWidget } from './pane-widget';\nimport { TimeAxisWidget } from './time-axis-widget';\nconst windowsChrome = isChromiumBased() && isWindows();\nexport class ChartWidget {\n    constructor(container, options, horzScaleBehavior) {\n        this._paneWidgets = [];\n        this._paneSeparators = [];\n        this._drawRafId = 0;\n        this._height = 0;\n        this._width = 0;\n        this._leftPriceAxisWidth = 0;\n        this._rightPriceAxisWidth = 0;\n        this._invalidateMask = null;\n        this._drawPlanned = false;\n        this._clicked = new Delegate();\n        this._dblClicked = new Delegate();\n        this._crosshairMoved = new Delegate();\n        this._observer = null;\n        this._cursorStyleOverride = null;\n        this._container = container;\n        this._options = options;\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._element = document.createElement('div');\n        this._element.classList.add('tv-lightweight-charts');\n        this._element.style.overflow = 'hidden';\n        this._element.style.direction = 'ltr';\n        this._element.style.width = '100%';\n        this._element.style.height = '100%';\n        disableSelection(this._element);\n        this._tableElement = document.createElement('table');\n        this._tableElement.setAttribute('cellspacing', '0');\n        this._element.appendChild(this._tableElement);\n        this._onWheelBound = this._onMousewheel.bind(this);\n        if (shouldSubscribeMouseWheel(this._options)) {\n            this._setMouseWheelEventListener(true);\n        }\n        this._model = new ChartModel(this._invalidateHandler.bind(this), this._options, horzScaleBehavior);\n        this.model().crosshairMoved().subscribe(this._onPaneWidgetCrosshairMoved.bind(this), this);\n        this._timeAxisWidget = new TimeAxisWidget(this, this._horzScaleBehavior);\n        this._tableElement.appendChild(this._timeAxisWidget.getElement());\n        const usedObserver = options.autoSize && this._installObserver();\n        // observer could not fire event immediately for some cases\n        // so we have to set initial size manually\n        let width = this._options.width;\n        let height = this._options.height;\n        // ignore width/height options if observer has actually been used\n        // however respect options if installing resize observer failed\n        if (usedObserver || width === 0 || height === 0) {\n            const containerRect = container.getBoundingClientRect();\n            width = width || containerRect.width;\n            height = height || containerRect.height;\n        }\n        // BEWARE: resize must be called BEFORE _syncGuiWithModel (in constructor only)\n        // or after but with adjustSize to properly update time scale\n        this.resize(width, height);\n        this._syncGuiWithModel();\n        container.appendChild(this._element);\n        this._updateTimeAxisVisibility();\n        this._model.timeScale().optionsApplied().subscribe(this._model.fullUpdate.bind(this._model), this);\n        this._model.priceScalesOptionsChanged().subscribe(this._model.fullUpdate.bind(this._model), this);\n    }\n    model() {\n        return this._model;\n    }\n    options() {\n        return this._options;\n    }\n    paneWidgets() {\n        return this._paneWidgets;\n    }\n    timeAxisWidget() {\n        return this._timeAxisWidget;\n    }\n    destroy() {\n        this._setMouseWheelEventListener(false);\n        if (this._drawRafId !== 0) {\n            window.cancelAnimationFrame(this._drawRafId);\n        }\n        this._model.crosshairMoved().unsubscribeAll(this);\n        this._model.timeScale().optionsApplied().unsubscribeAll(this);\n        this._model.priceScalesOptionsChanged().unsubscribeAll(this);\n        this._model.destroy();\n        for (const paneWidget of this._paneWidgets) {\n            this._tableElement.removeChild(paneWidget.getElement());\n            paneWidget.clicked().unsubscribeAll(this);\n            paneWidget.dblClicked().unsubscribeAll(this);\n            paneWidget.destroy();\n        }\n        this._paneWidgets = [];\n        for (const paneSeparator of this._paneSeparators) {\n            this._destroySeparator(paneSeparator);\n        }\n        this._paneSeparators = [];\n        ensureNotNull(this._timeAxisWidget).destroy();\n        if (this._element.parentElement !== null) {\n            this._element.parentElement.removeChild(this._element);\n        }\n        this._crosshairMoved.destroy();\n        this._clicked.destroy();\n        this._dblClicked.destroy();\n        this._uninstallObserver();\n    }\n    resize(width, height, forceRepaint = false) {\n        if (this._height === height && this._width === width) {\n            return;\n        }\n        const sizeHint = suggestChartSize(size({ width, height }));\n        this._height = sizeHint.height;\n        this._width = sizeHint.width;\n        const heightStr = this._height + 'px';\n        const widthStr = this._width + 'px';\n        ensureNotNull(this._element).style.height = heightStr;\n        ensureNotNull(this._element).style.width = widthStr;\n        this._tableElement.style.height = heightStr;\n        this._tableElement.style.width = widthStr;\n        if (forceRepaint) {\n            this._drawImpl(InvalidateMask.full(), performance.now());\n        }\n        else {\n            this._model.fullUpdate();\n        }\n    }\n    paint(invalidateMask) {\n        if (invalidateMask === undefined) {\n            invalidateMask = InvalidateMask.full();\n        }\n        for (let i = 0; i < this._paneWidgets.length; i++) {\n            this._paneWidgets[i].paint(invalidateMask.invalidateForPane(i).level);\n        }\n        if (this._options.timeScale.visible) {\n            this._timeAxisWidget.paint(invalidateMask.fullInvalidation());\n        }\n    }\n    applyOptions(options) {\n        const currentlyHasMouseWheelListener = shouldSubscribeMouseWheel(this._options);\n        // we don't need to merge options here because it's done in chart model\n        // and since both model and widget share the same object it will be done automatically for widget as well\n        // not ideal solution for sure, but it work's for now \u00AF\\_(\u30C4)_/\u00AF\n        this._model.applyOptions(options);\n        const shouldHaveMouseWheelListener = shouldSubscribeMouseWheel(this._options);\n        if (shouldHaveMouseWheelListener !== currentlyHasMouseWheelListener) {\n            this._setMouseWheelEventListener(shouldHaveMouseWheelListener);\n        }\n        if (options['layout']?.panes) {\n            this._applyPanesOptions();\n        }\n        this._updateTimeAxisVisibility();\n        this._applyAutoSizeOptions(options);\n    }\n    clicked() {\n        return this._clicked;\n    }\n    dblClicked() {\n        return this._dblClicked;\n    }\n    crosshairMoved() {\n        return this._crosshairMoved;\n    }\n    takeScreenshot(addTopLayer = false) {\n        if (this._invalidateMask !== null) {\n            this._drawImpl(this._invalidateMask, performance.now());\n            this._invalidateMask = null;\n        }\n        const screeshotBitmapSize = this._traverseLayout(null);\n        const screenshotCanvas = document.createElement('canvas');\n        screenshotCanvas.width = screeshotBitmapSize.width;\n        screenshotCanvas.height = screeshotBitmapSize.height;\n        const ctx = ensureNotNull(screenshotCanvas.getContext('2d'));\n        this._traverseLayout(ctx, addTopLayer);\n        return screenshotCanvas;\n    }\n    getPriceAxisWidth(position) {\n        if (position === \"left\" /* DefaultPriceScaleId.Left */ && !this._isLeftAxisVisible()) {\n            return 0;\n        }\n        if (position === \"right\" /* DefaultPriceScaleId.Right */ && !this._isRightAxisVisible()) {\n            return 0;\n        }\n        if (this._paneWidgets.length === 0) {\n            return 0;\n        }\n        // we don't need to worry about exactly pane widget here\n        // because all pane widgets have the same width of price axis widget\n        // see _adjustSizeImpl\n        const priceAxisWidget = position === \"left\" /* DefaultPriceScaleId.Left */\n            ? this._paneWidgets[0].leftPriceAxisWidget()\n            : this._paneWidgets[0].rightPriceAxisWidget();\n        return ensureNotNull(priceAxisWidget).getWidth();\n    }\n    autoSizeActive() {\n        return this._options.autoSize && this._observer !== null;\n    }\n    element() {\n        return this._element;\n    }\n    setCursorStyle(style) {\n        this._cursorStyleOverride = style;\n        if (this._cursorStyleOverride) {\n            this.element().style.setProperty('cursor', style);\n        }\n        else {\n            this.element().style.removeProperty('cursor');\n        }\n    }\n    getCursorOverrideStyle() {\n        return this._cursorStyleOverride;\n    }\n    paneSize(paneIndex) {\n        return ensureDefined(this._paneWidgets[paneIndex]).getSize();\n    }\n    _applyPanesOptions() {\n        this._paneSeparators.forEach((separator) => {\n            separator.update();\n        });\n    }\n    // eslint-disable-next-line complexity\n    _applyAutoSizeOptions(options) {\n        if (options.autoSize === undefined && this._observer && (options.width !== undefined || options.height !== undefined)) {\n            warn(`You should turn autoSize off explicitly before specifying sizes; try adding options.autoSize: false to new options`);\n            return;\n        }\n        if (options.autoSize && !this._observer) {\n            // installing observer will override resize if successful\n            this._installObserver();\n        }\n        if (options.autoSize === false && this._observer !== null) {\n            this._uninstallObserver();\n        }\n        if (!options.autoSize && (options.width !== undefined || options.height !== undefined)) {\n            this.resize(options.width || this._width, options.height || this._height);\n        }\n    }\n    /**\n     * Traverses the widget's layout (pane and axis child widgets),\n     * draws the screenshot (if rendering context is passed) and returns the screenshot bitmap size\n     *\n     * @param ctx - if passed, used to draw the screenshot of widget\n     * @param addTopLayer - if true, the top layer with crosshair and primitives will be drawn\n     * @returns screenshot bitmap size\n     */\n    _traverseLayout(ctx, addTopLayer) {\n        let totalWidth = 0;\n        let totalHeight = 0;\n        const firstPane = this._paneWidgets[0];\n        const drawPriceAxises = (position, targetX) => {\n            let targetY = 0;\n            for (let paneIndex = 0; paneIndex < this._paneWidgets.length; paneIndex++) {\n                const paneWidget = this._paneWidgets[paneIndex];\n                const priceAxisWidget = ensureNotNull(position === 'left' ? paneWidget.leftPriceAxisWidget() : paneWidget.rightPriceAxisWidget());\n                const bitmapSize = priceAxisWidget.getBitmapSize();\n                if (ctx !== null) {\n                    priceAxisWidget.drawBitmap(ctx, targetX, targetY, addTopLayer);\n                }\n                targetY += bitmapSize.height;\n                if (paneIndex < this._paneWidgets.length - 1) {\n                    const separator = this._paneSeparators[paneIndex];\n                    const separatorBitmapSize = separator.getBitmapSize();\n                    if (ctx !== null) {\n                        separator.drawBitmap(ctx, targetX, targetY);\n                    }\n                    targetY += separatorBitmapSize.height;\n                }\n            }\n        };\n        // draw left price scale if exists\n        if (this._isLeftAxisVisible()) {\n            drawPriceAxises('left', 0);\n            const leftAxisBitmapWidth = ensureNotNull(firstPane.leftPriceAxisWidget()).getBitmapSize().width;\n            totalWidth += leftAxisBitmapWidth;\n        }\n        for (let paneIndex = 0; paneIndex < this._paneWidgets.length; paneIndex++) {\n            const paneWidget = this._paneWidgets[paneIndex];\n            const bitmapSize = paneWidget.getBitmapSize();\n            if (ctx !== null) {\n                paneWidget.drawBitmap(ctx, totalWidth, totalHeight, addTopLayer);\n            }\n            totalHeight += bitmapSize.height;\n            if (paneIndex < this._paneWidgets.length - 1) {\n                const separator = this._paneSeparators[paneIndex];\n                const separatorBitmapSize = separator.getBitmapSize();\n                if (ctx !== null) {\n                    separator.drawBitmap(ctx, totalWidth, totalHeight);\n                }\n                totalHeight += separatorBitmapSize.height;\n            }\n        }\n        const firstPaneBitmapWidth = firstPane.getBitmapSize().width;\n        totalWidth += firstPaneBitmapWidth;\n        // draw right price scale if exists\n        if (this._isRightAxisVisible()) {\n            drawPriceAxises('right', totalWidth);\n            const rightAxisBitmapWidth = ensureNotNull(firstPane.rightPriceAxisWidget()).getBitmapSize().width;\n            totalWidth += rightAxisBitmapWidth;\n        }\n        const drawStub = (position, targetX, targetY) => {\n            const stub = ensureNotNull(position === 'left' ? this._timeAxisWidget.leftStub() : this._timeAxisWidget.rightStub());\n            stub.drawBitmap(ensureNotNull(ctx), targetX, targetY);\n        };\n        // draw time scale and stubs\n        if (this._options.timeScale.visible) {\n            const timeAxisBitmapSize = this._timeAxisWidget.getBitmapSize();\n            if (ctx !== null) {\n                let targetX = 0;\n                if (this._isLeftAxisVisible()) {\n                    drawStub('left', targetX, totalHeight);\n                    targetX = ensureNotNull(firstPane.leftPriceAxisWidget()).getBitmapSize().width;\n                }\n                this._timeAxisWidget.drawBitmap(ctx, targetX, totalHeight, addTopLayer);\n                targetX += timeAxisBitmapSize.width;\n                if (this._isRightAxisVisible()) {\n                    drawStub('right', targetX, totalHeight);\n                }\n            }\n            totalHeight += timeAxisBitmapSize.height;\n        }\n        return size({\n            width: totalWidth,\n            height: totalHeight,\n        });\n    }\n    // eslint-disable-next-line complexity\n    _adjustSizeImpl() {\n        let totalStretch = 0;\n        let leftPriceAxisWidth = 0;\n        let rightPriceAxisWidth = 0;\n        for (const paneWidget of this._paneWidgets) {\n            if (this._isLeftAxisVisible()) {\n                leftPriceAxisWidth = Math.max(leftPriceAxisWidth, ensureNotNull(paneWidget.leftPriceAxisWidget()).optimalWidth(), this._options.leftPriceScale.minimumWidth);\n            }\n            if (this._isRightAxisVisible()) {\n                rightPriceAxisWidth = Math.max(rightPriceAxisWidth, ensureNotNull(paneWidget.rightPriceAxisWidget()).optimalWidth(), this._options.rightPriceScale.minimumWidth);\n            }\n            totalStretch += paneWidget.stretchFactor();\n        }\n        leftPriceAxisWidth = suggestPriceScaleWidth(leftPriceAxisWidth);\n        rightPriceAxisWidth = suggestPriceScaleWidth(rightPriceAxisWidth);\n        const width = this._width;\n        const height = this._height;\n        const paneWidth = Math.max(width - leftPriceAxisWidth - rightPriceAxisWidth, 0);\n        const separatorCount = this._paneSeparators.length;\n        const separatorHeight = 1 /* SeparatorConstants.SeparatorHeight */;\n        const separatorsHeight = separatorHeight * separatorCount;\n        const timeAxisVisible = this._options.timeScale.visible;\n        let timeAxisHeight = timeAxisVisible ? Math.max(this._timeAxisWidget.optimalHeight(), this._options.timeScale.minimumHeight) : 0;\n        timeAxisHeight = suggestTimeScaleHeight(timeAxisHeight);\n        const otherWidgetHeight = separatorsHeight + timeAxisHeight;\n        const totalPaneHeight = height < otherWidgetHeight ? 0 : height - otherWidgetHeight;\n        const stretchPixels = totalPaneHeight / totalStretch;\n        let accumulatedHeight = 0;\n        const pixelRatio = window.devicePixelRatio || 1;\n        for (let paneIndex = 0; paneIndex < this._paneWidgets.length; ++paneIndex) {\n            const paneWidget = this._paneWidgets[paneIndex];\n            paneWidget.setState(this._model.panes()[paneIndex]);\n            let paneHeight = 0;\n            let calculatePaneHeight = 0;\n            if (paneIndex === this._paneWidgets.length - 1) {\n                calculatePaneHeight = Math.ceil((totalPaneHeight - accumulatedHeight) * pixelRatio) / pixelRatio;\n            }\n            else {\n                calculatePaneHeight = Math.round(paneWidget.stretchFactor() * stretchPixels * pixelRatio) / pixelRatio;\n            }\n            paneHeight = Math.max(calculatePaneHeight, 2);\n            accumulatedHeight += paneHeight;\n            paneWidget.setSize(size({ width: paneWidth, height: paneHeight }));\n            if (this._isLeftAxisVisible()) {\n                paneWidget.setPriceAxisSize(leftPriceAxisWidth, 'left');\n            }\n            if (this._isRightAxisVisible()) {\n                paneWidget.setPriceAxisSize(rightPriceAxisWidth, 'right');\n            }\n            if (paneWidget.state()) {\n                this._model.setPaneHeight(paneWidget.state(), paneHeight);\n            }\n        }\n        this._timeAxisWidget.setSizes(size({ width: timeAxisVisible ? paneWidth : 0, height: timeAxisHeight }), timeAxisVisible ? leftPriceAxisWidth : 0, timeAxisVisible ? rightPriceAxisWidth : 0);\n        this._model.setWidth(paneWidth);\n        if (this._leftPriceAxisWidth !== leftPriceAxisWidth) {\n            this._leftPriceAxisWidth = leftPriceAxisWidth;\n        }\n        if (this._rightPriceAxisWidth !== rightPriceAxisWidth) {\n            this._rightPriceAxisWidth = rightPriceAxisWidth;\n        }\n    }\n    _setMouseWheelEventListener(add) {\n        if (add) {\n            this._element.addEventListener('wheel', this._onWheelBound, { passive: false });\n            return;\n        }\n        this._element.removeEventListener('wheel', this._onWheelBound);\n    }\n    _determineWheelSpeedAdjustment(event) {\n        switch (event.deltaMode) {\n            case event.DOM_DELTA_PAGE:\n                // one screen at time scroll mode\n                return 120;\n            case event.DOM_DELTA_LINE:\n                // one line at time scroll mode\n                return 32;\n        }\n        if (!windowsChrome) {\n            return 1;\n        }\n        // Chromium on Windows has a bug where the scroll speed isn't correctly\n        // adjusted for high density displays. We need to correct for this so that\n        // scroll speed is consistent between browsers.\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1001735\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1207308\n        return (1 / window.devicePixelRatio);\n    }\n    _onMousewheel(event) {\n        if ((event.deltaX === 0 || !this._options['handleScroll'].mouseWheel) &&\n            (event.deltaY === 0 || !this._options['handleScale'].mouseWheel)) {\n            return;\n        }\n        const scrollSpeedAdjustment = this._determineWheelSpeedAdjustment(event);\n        const deltaX = scrollSpeedAdjustment * event.deltaX / 100;\n        const deltaY = -(scrollSpeedAdjustment * event.deltaY / 100);\n        if (event.cancelable) {\n            event.preventDefault();\n        }\n        if (deltaY !== 0 && this._options['handleScale'].mouseWheel) {\n            const zoomScale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY));\n            const scrollPosition = event.clientX - this._element.getBoundingClientRect().left;\n            this.model().zoomTime(scrollPosition, zoomScale);\n        }\n        if (deltaX !== 0 && this._options['handleScroll'].mouseWheel) {\n            this.model().scrollChart(deltaX * -80); // 80 is a made up coefficient, and minus is for the \"natural\" scroll\n        }\n    }\n    _drawImpl(invalidateMask, time) {\n        const invalidationType = invalidateMask.fullInvalidation();\n        // actions for full invalidation ONLY (not shared with light)\n        if (invalidationType === 3 /* InvalidationLevel.Full */) {\n            this._updateGui();\n        }\n        // light or full invalidate actions\n        if (invalidationType === 3 /* InvalidationLevel.Full */ ||\n            invalidationType === 2 /* InvalidationLevel.Light */) {\n            this._applyMomentaryAutoScale(invalidateMask);\n            this._applyTimeScaleInvalidations(invalidateMask, time);\n            this._timeAxisWidget.update();\n            this._paneWidgets.forEach((pane) => {\n                pane.updatePriceAxisWidgets();\n            });\n            // In the case a full invalidation has been postponed during the draw, reapply\n            // the timescale invalidations. A full invalidation would mean there is a change\n            // in the timescale width (caused by price scale changes) that needs to be drawn\n            // right away to avoid flickering.\n            if (this._invalidateMask?.fullInvalidation() === 3 /* InvalidationLevel.Full */) {\n                this._invalidateMask.merge(invalidateMask);\n                this._updateGui();\n                this._applyMomentaryAutoScale(this._invalidateMask);\n                this._applyTimeScaleInvalidations(this._invalidateMask, time);\n                invalidateMask = this._invalidateMask;\n                this._invalidateMask = null;\n            }\n        }\n        this.paint(invalidateMask);\n    }\n    _applyTimeScaleInvalidations(invalidateMask, time) {\n        for (const tsInvalidation of invalidateMask.timeScaleInvalidations()) {\n            this._applyTimeScaleInvalidation(tsInvalidation, time);\n        }\n    }\n    _applyMomentaryAutoScale(invalidateMask) {\n        const panes = this._model.panes();\n        for (let i = 0; i < panes.length; i++) {\n            if (invalidateMask.invalidateForPane(i).autoScale) {\n                panes[i].momentaryAutoScale();\n            }\n        }\n    }\n    _applyTimeScaleInvalidation(invalidation, time) {\n        const timeScale = this._model.timeScale();\n        switch (invalidation.type) {\n            case 0 /* TimeScaleInvalidationType.FitContent */:\n                timeScale.fitContent();\n                break;\n            case 1 /* TimeScaleInvalidationType.ApplyRange */:\n                timeScale.setLogicalRange(invalidation.value);\n                break;\n            case 2 /* TimeScaleInvalidationType.ApplyBarSpacing */:\n                timeScale.setBarSpacing(invalidation.value);\n                break;\n            case 3 /* TimeScaleInvalidationType.ApplyRightOffset */:\n                timeScale.setRightOffset(invalidation.value);\n                break;\n            case 4 /* TimeScaleInvalidationType.Reset */:\n                timeScale.restoreDefault();\n                break;\n            case 5 /* TimeScaleInvalidationType.Animation */:\n                if (!invalidation.value.finished(time)) {\n                    timeScale.setRightOffset(invalidation.value.getPosition(time));\n                }\n                break;\n        }\n    }\n    _invalidateHandler(invalidateMask) {\n        if (this._invalidateMask !== null) {\n            this._invalidateMask.merge(invalidateMask);\n        }\n        else {\n            this._invalidateMask = invalidateMask;\n        }\n        if (!this._drawPlanned) {\n            this._drawPlanned = true;\n            this._drawRafId = window.requestAnimationFrame((time) => {\n                this._drawPlanned = false;\n                this._drawRafId = 0;\n                if (this._invalidateMask !== null) {\n                    const mask = this._invalidateMask;\n                    this._invalidateMask = null;\n                    this._drawImpl(mask, time);\n                    for (const tsInvalidation of mask.timeScaleInvalidations()) {\n                        if (tsInvalidation.type === 5 /* TimeScaleInvalidationType.Animation */ && !tsInvalidation.value.finished(time)) {\n                            this.model().setTimeScaleAnimation(tsInvalidation.value);\n                            break;\n                        }\n                    }\n                }\n            });\n        }\n    }\n    _updateGui() {\n        this._syncGuiWithModel();\n    }\n    _destroySeparator(separator) {\n        this._tableElement.removeChild(separator.getElement());\n        separator.destroy();\n    }\n    _syncGuiWithModel() {\n        const panes = this._model.panes();\n        const targetPaneWidgetsCount = panes.length;\n        const actualPaneWidgetsCount = this._paneWidgets.length;\n        // Remove (if needed) pane widgets and separators\n        for (let i = targetPaneWidgetsCount; i < actualPaneWidgetsCount; i++) {\n            const paneWidget = ensureDefined(this._paneWidgets.pop());\n            this._tableElement.removeChild(paneWidget.getElement());\n            paneWidget.clicked().unsubscribeAll(this);\n            paneWidget.dblClicked().unsubscribeAll(this);\n            paneWidget.destroy();\n            const paneSeparator = this._paneSeparators.pop();\n            if (paneSeparator !== undefined) {\n                this._destroySeparator(paneSeparator);\n            }\n        }\n        // Create (if needed) new pane widgets and separators\n        for (let i = actualPaneWidgetsCount; i < targetPaneWidgetsCount; i++) {\n            const paneWidget = new PaneWidget(this, panes[i]);\n            paneWidget.clicked().subscribe(this._onPaneWidgetClicked.bind(this, paneWidget), this);\n            paneWidget.dblClicked().subscribe(this._onPaneWidgetDblClicked.bind(this, paneWidget), this);\n            this._paneWidgets.push(paneWidget);\n            // create and insert separator\n            if (i > 0) {\n                const paneSeparator = new PaneSeparator(this, i - 1, i);\n                this._paneSeparators.push(paneSeparator);\n                this._tableElement.insertBefore(paneSeparator.getElement(), this._timeAxisWidget.getElement());\n            }\n            // insert paneWidget\n            this._tableElement.insertBefore(paneWidget.getElement(), this._timeAxisWidget.getElement());\n        }\n        for (let i = 0; i < targetPaneWidgetsCount; i++) {\n            const state = panes[i];\n            const paneWidget = this._paneWidgets[i];\n            if (paneWidget.state() !== state) {\n                paneWidget.setState(state);\n            }\n            else {\n                paneWidget.updatePriceAxisWidgetsStates();\n            }\n        }\n        this._updateTimeAxisVisibility();\n        this._adjustSizeImpl();\n    }\n    _getMouseEventParamsImpl(index, point, event, pane) {\n        const seriesData = new Map();\n        if (index !== null) {\n            const serieses = this._model.serieses();\n            serieses.forEach((s) => {\n                // TODO: replace with search left\n                const data = s.bars().search(index);\n                if (data !== null) {\n                    seriesData.set(s, data);\n                }\n            });\n        }\n        let clientTime;\n        if (index !== null) {\n            const timePoint = this._model.timeScale().indexToTimeScalePoint(index)?.originalTime;\n            if (timePoint !== undefined) {\n                clientTime = timePoint;\n            }\n        }\n        const hoveredSource = this.model().hoveredSource();\n        const hoveredSeries = hoveredSource !== null && hoveredSource.source instanceof Series\n            ? hoveredSource.source\n            : undefined;\n        const hoveredObject = hoveredSource !== null && hoveredSource.object !== undefined\n            ? hoveredSource.object.externalId\n            : undefined;\n        const paneIndex = this._getPaneIndex(pane);\n        return {\n            originalTime: clientTime,\n            index: index ?? undefined,\n            point: point ?? undefined,\n            paneIndex: paneIndex !== -1 ? paneIndex : undefined,\n            hoveredSeries,\n            seriesData,\n            hoveredObject,\n            touchMouseEventData: event ?? undefined,\n        };\n    }\n    _getPaneIndex(pane) {\n        let paneIndex = -1;\n        if (pane) {\n            paneIndex = this._paneWidgets.indexOf(pane);\n        }\n        else {\n            const crosshairPane = this.model().crosshairSource().pane();\n            if (crosshairPane !== null) {\n                paneIndex = this.model().panes().indexOf(crosshairPane);\n            }\n        }\n        return paneIndex;\n    }\n    _onPaneWidgetClicked(pane, time, point, event) {\n        this._clicked.fire(() => this._getMouseEventParamsImpl(time, point, event, pane));\n    }\n    _onPaneWidgetDblClicked(pane, time, point, event) {\n        this._dblClicked.fire(() => this._getMouseEventParamsImpl(time, point, event, pane));\n    }\n    _onPaneWidgetCrosshairMoved(time, point, event) {\n        this.setCursorStyle(this.model().hoveredSource()?.cursorStyle ?? null);\n        this._crosshairMoved.fire(() => this._getMouseEventParamsImpl(time, point, event));\n    }\n    _updateTimeAxisVisibility() {\n        const display = this._options.timeScale.visible ? '' : 'none';\n        this._timeAxisWidget.getElement().style.display = display;\n    }\n    _isLeftAxisVisible() {\n        return this._paneWidgets[0].state().leftPriceScale().options().visible;\n    }\n    _isRightAxisVisible() {\n        return this._paneWidgets[0].state().rightPriceScale().options().visible;\n    }\n    _installObserver() {\n        // eslint-disable-next-line no-restricted-syntax\n        if (!('ResizeObserver' in window)) {\n            warn('Options contains \"autoSize\" flag, but the browser does not support ResizeObserver feature. Please provide polyfill.');\n            return false;\n        }\n        else {\n            this._observer = new ResizeObserver((entries) => {\n                // There is no need to check if entry.target === this._container since there is only\n                // a single element being observed.\n                // and we want to use the last entry (if multiple) because it would be most up to date\n                // (since the browser may batch multiple updates).\n                const containerEntry = entries[entries.length - 1];\n                if (!containerEntry) {\n                    // this may be undefined if the entries array was empty.\n                    return;\n                }\n                this.resize(containerEntry.contentRect.width, containerEntry.contentRect.height);\n            });\n            this._observer.observe(this._container, { box: 'border-box' });\n            return true;\n        }\n    }\n    _uninstallObserver() {\n        if (this._observer !== null) {\n            this._observer.disconnect();\n        }\n        this._observer = null;\n    }\n}\nfunction disableSelection(element) {\n    element.style.userSelect = 'none';\n    // eslint-disable-next-line deprecation/deprecation\n    element.style.webkitUserSelect = 'none';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-member-access\n    element.style.msUserSelect = 'none';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-member-access\n    element.style.MozUserSelect = 'none';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-member-access\n    element.style.webkitTapHighlightColor = 'transparent';\n}\nfunction shouldSubscribeMouseWheel(options) {\n    return Boolean(options['handleScroll'].mouseWheel || options['handleScale'].mouseWheel);\n}\n", "export function isWhitespaceData(data) {\n    return data.open === undefined && data.value === undefined;\n}\nexport function isFulfilledData(data) {\n    return isFulfilledBarData(data) || isFulfilledLineData(data);\n}\nexport function isFulfilledBarData(data) {\n    return data.open !== undefined;\n}\nexport function isFulfilledLineData(data) {\n    return data.value !== undefined;\n}\n", "import { ensureDefined } from '../helpers/assertions';\nimport { isWhitespaceData } from './data-consumer';\nfunction getColoredLineBasedSeriesPlotRow(time, index, item, originalTime) {\n    const val = item.value;\n    const res = { index, time, value: [val, val, val, val], originalTime };\n    if (item.color !== undefined) {\n        res.color = item.color;\n    }\n    return res;\n}\nfunction getAreaSeriesPlotRow(time, index, item, originalTime) {\n    const val = item.value;\n    const res = { index, time, value: [val, val, val, val], originalTime };\n    if (item.lineColor !== undefined) {\n        res.lineColor = item.lineColor;\n    }\n    if (item.topColor !== undefined) {\n        res.topColor = item.topColor;\n    }\n    if (item.bottomColor !== undefined) {\n        res.bottomColor = item.bottomColor;\n    }\n    return res;\n}\nfunction getBaselineSeriesPlotRow(time, index, item, originalTime) {\n    const val = item.value;\n    const res = { index, time, value: [val, val, val, val], originalTime };\n    if (item.topLineColor !== undefined) {\n        res.topLineColor = item.topLineColor;\n    }\n    if (item.bottomLineColor !== undefined) {\n        res.bottomLineColor = item.bottomLineColor;\n    }\n    if (item.topFillColor1 !== undefined) {\n        res.topFillColor1 = item.topFillColor1;\n    }\n    if (item.topFillColor2 !== undefined) {\n        res.topFillColor2 = item.topFillColor2;\n    }\n    if (item.bottomFillColor1 !== undefined) {\n        res.bottomFillColor1 = item.bottomFillColor1;\n    }\n    if (item.bottomFillColor2 !== undefined) {\n        res.bottomFillColor2 = item.bottomFillColor2;\n    }\n    return res;\n}\nfunction getBarSeriesPlotRow(time, index, item, originalTime) {\n    const res = { index, time, value: [item.open, item.high, item.low, item.close], originalTime };\n    if (item.color !== undefined) {\n        res.color = item.color;\n    }\n    return res;\n}\nfunction getCandlestickSeriesPlotRow(time, index, item, originalTime) {\n    const res = { index, time, value: [item.open, item.high, item.low, item.close], originalTime };\n    if (item.color !== undefined) {\n        res.color = item.color;\n    }\n    if (item.borderColor !== undefined) {\n        res.borderColor = item.borderColor;\n    }\n    if (item.wickColor !== undefined) {\n        res.wickColor = item.wickColor;\n    }\n    return res;\n}\nfunction getCustomSeriesPlotRow(time, index, item, originalTime, dataToPlotRow) {\n    const values = ensureDefined(dataToPlotRow)(item);\n    const max = Math.max(...values);\n    const min = Math.min(...values);\n    const last = values[values.length - 1];\n    const value = [last, max, min, last];\n    const { time: excludedTime, color, ...data } = item;\n    return { index, time, value, originalTime, data, color };\n}\nexport function isSeriesPlotRow(row) {\n    return row.value !== undefined;\n}\nfunction wrapCustomValues(plotRow, bar) {\n    if (bar.customValues !== undefined) {\n        plotRow.customValues = bar.customValues;\n    }\n    return plotRow;\n}\nfunction isWhitespaceDataWithCustomCheck(bar, customIsWhitespace) {\n    if (customIsWhitespace) {\n        return customIsWhitespace(bar);\n    }\n    return isWhitespaceData(bar);\n}\nfunction wrapWhitespaceData(createPlotRowFn) {\n    return (time, index, bar, originalTime, dataToPlotRow, customIsWhitespace) => {\n        if (isWhitespaceDataWithCustomCheck(bar, customIsWhitespace)) {\n            return wrapCustomValues({ time, index, originalTime }, bar);\n        }\n        return wrapCustomValues(createPlotRowFn(time, index, bar, originalTime, dataToPlotRow), bar);\n    };\n}\nexport function getSeriesPlotRowCreator(seriesType) {\n    const seriesPlotRowFnMap = {\n        Candlestick: wrapWhitespaceData(getCandlestickSeriesPlotRow),\n        Bar: wrapWhitespaceData(getBarSeriesPlotRow),\n        Area: wrapWhitespaceData(getAreaSeriesPlotRow),\n        Baseline: wrapWhitespaceData(getBaselineSeriesPlotRow),\n        Histogram: wrapWhitespaceData(getColoredLineBasedSeriesPlotRow),\n        Line: wrapWhitespaceData(getColoredLineBasedSeriesPlotRow),\n        Custom: wrapWhitespaceData(getCustomSeriesPlotRow),\n    };\n    return seriesPlotRowFnMap[seriesType];\n}\n", "/// <reference types=\"_build-time-constants\" />\nimport { lowerBound } from '../helpers/algorithms';\nimport { ensureDefined } from '../helpers/assertions';\nimport { getSeriesPlotRowCreator, isSeriesPlotRow } from './get-series-plot-row-creator';\nfunction createEmptyTimePointData(timePoint) {\n    return { index: 0, mapping: new Map(), timePoint };\n}\nfunction seriesRowsFirstAndLastTime(seriesRows, bh) {\n    if (seriesRows === undefined || seriesRows.length === 0) {\n        return undefined;\n    }\n    return {\n        firstTime: bh.key(seriesRows[0].time),\n        lastTime: bh.key(seriesRows[seriesRows.length - 1].time),\n    };\n}\nfunction seriesUpdateInfo(seriesRows, prevSeriesRows, bh) {\n    const firstAndLastTime = seriesRowsFirstAndLastTime(seriesRows, bh);\n    const prevFirstAndLastTime = seriesRowsFirstAndLastTime(prevSeriesRows, bh);\n    if (firstAndLastTime !== undefined && prevFirstAndLastTime !== undefined) {\n        return {\n            historicalUpdate: false,\n            lastBarUpdatedOrNewBarsAddedToTheRight: firstAndLastTime.lastTime >= prevFirstAndLastTime.lastTime &&\n                firstAndLastTime.firstTime >= prevFirstAndLastTime.firstTime,\n        };\n    }\n    return undefined;\n}\nfunction timeScalePointTime(mergedPointData) {\n    let result;\n    mergedPointData.forEach((v) => {\n        if (result === undefined) {\n            result = v.originalTime;\n        }\n    });\n    return ensureDefined(result);\n}\nfunction saveOriginalTime(data) {\n    if (data.originalTime === undefined) {\n        data.originalTime = data.time;\n    }\n}\nexport class DataLayer {\n    constructor(horzScaleBehavior) {\n        // note that _pointDataByTimePoint and _seriesRowsBySeries shares THE SAME objects in their values between each other\n        // it's just different kind of maps to make usages/perf better\n        this._pointDataByTimePoint = new Map();\n        this._seriesRowsBySeries = new Map();\n        this._seriesLastTimePoint = new Map();\n        // this is kind of \"dest\" values (in opposite to \"source\" ones) - we don't need to modify it manually, the only by calling _updateTimeScalePoints or updateSeriesData methods\n        this._sortedTimePoints = [];\n        this._horzScaleBehavior = horzScaleBehavior;\n    }\n    destroy() {\n        this._pointDataByTimePoint.clear();\n        this._seriesRowsBySeries.clear();\n        this._seriesLastTimePoint.clear();\n        this._sortedTimePoints = [];\n    }\n    setSeriesData(series, data) {\n        let needCleanupPoints = this._pointDataByTimePoint.size !== 0;\n        let isTimeScaleAffected = false;\n        // save previous series rows data before it's replaced inside this._setRowsToSeries\n        const prevSeriesRows = this._seriesRowsBySeries.get(series);\n        if (prevSeriesRows !== undefined) {\n            if (this._seriesRowsBySeries.size === 1) {\n                needCleanupPoints = false;\n                isTimeScaleAffected = true;\n                // perf optimization - if there is only 1 series, then we can just clear and fill everything from scratch\n                this._pointDataByTimePoint.clear();\n            }\n            else {\n                // perf optimization - actually we have to use this._pointDataByTimePoint for going through here\n                // but as soon as this._sortedTimePoints is just a different form of _pointDataByTimePoint we can use it as well\n                for (const point of this._sortedTimePoints) {\n                    if (point.pointData.mapping.delete(series)) {\n                        isTimeScaleAffected = true;\n                    }\n                }\n            }\n        }\n        let seriesRows = [];\n        if (data.length !== 0) {\n            const originalTimes = data.map((d) => d.time);\n            const timeConverter = this._horzScaleBehavior.createConverterToInternalObj(data);\n            const createPlotRow = getSeriesPlotRowCreator(series.seriesType());\n            const dataToPlotRow = series.customSeriesPlotValuesBuilder();\n            const customWhitespaceChecker = series.customSeriesWhitespaceCheck();\n            seriesRows = data.map((item, index) => {\n                const time = timeConverter(item.time);\n                const horzItemKey = this._horzScaleBehavior.key(time);\n                let timePointData = this._pointDataByTimePoint.get(horzItemKey);\n                if (timePointData === undefined) {\n                    // the indexes will be sync later\n                    timePointData = createEmptyTimePointData(time);\n                    this._pointDataByTimePoint.set(horzItemKey, timePointData);\n                    isTimeScaleAffected = true;\n                }\n                const row = createPlotRow(time, timePointData.index, item, originalTimes[index], dataToPlotRow, customWhitespaceChecker);\n                timePointData.mapping.set(series, row);\n                return row;\n            });\n        }\n        if (needCleanupPoints) {\n            // we deleted the old data from mapping and added the new ones\n            // so there might be empty points now, let's remove them first\n            this._cleanupPointsData();\n        }\n        this._setRowsToSeries(series, seriesRows);\n        let firstChangedPointIndex = -1;\n        if (isTimeScaleAffected) {\n            // then generate the time scale points\n            // timeWeight will be updates in _updateTimeScalePoints later\n            const newTimeScalePoints = [];\n            this._pointDataByTimePoint.forEach((pointData) => {\n                newTimeScalePoints.push({\n                    timeWeight: 0,\n                    time: pointData.timePoint,\n                    pointData,\n                    originalTime: timeScalePointTime(pointData.mapping),\n                });\n            });\n            newTimeScalePoints.sort((t1, t2) => this._horzScaleBehavior.key(t1.time) - this._horzScaleBehavior.key(t2.time));\n            firstChangedPointIndex = this._replaceTimeScalePoints(newTimeScalePoints);\n        }\n        return this._getUpdateResponse(series, firstChangedPointIndex, seriesUpdateInfo(this._seriesRowsBySeries.get(series), prevSeriesRows, this._horzScaleBehavior));\n    }\n    removeSeries(series) {\n        return this.setSeriesData(series, []);\n    }\n    // eslint-disable-next-line complexity\n    updateSeriesData(series, data, historicalUpdate) {\n        // check if conflation is enabled and this is a historical update\n        if (historicalUpdate && series.isConflationEnabled()) {\n            throw new Error('Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.');\n        }\n        const extendedData = data;\n        saveOriginalTime(extendedData);\n        // convertStringToBusinessDay(data);\n        this._horzScaleBehavior.preprocessData(data);\n        const timeConverter = this._horzScaleBehavior.createConverterToInternalObj([data]);\n        const time = timeConverter(data.time);\n        const lastSeriesTime = this._seriesLastTimePoint.get(series);\n        if (!historicalUpdate && lastSeriesTime !== undefined && this._horzScaleBehavior.key(time) < this._horzScaleBehavior.key(lastSeriesTime)) {\n            // eslint-disable-next-line @typescript-eslint/no-base-to-string\n            throw new Error(`Cannot update oldest data, last time=${lastSeriesTime}, new time=${time}`);\n        }\n        let pointDataAtTime = this._pointDataByTimePoint.get(this._horzScaleBehavior.key(time));\n        if (historicalUpdate && pointDataAtTime === undefined) {\n            throw new Error('Cannot update non-existing data point when historicalUpdate is true');\n        }\n        // if no point data found for the new data item\n        // that means that we need to update scale\n        const affectsTimeScale = pointDataAtTime === undefined;\n        if (pointDataAtTime === undefined) {\n            // the indexes will be sync later\n            pointDataAtTime = createEmptyTimePointData(time);\n            this._pointDataByTimePoint.set(this._horzScaleBehavior.key(time), pointDataAtTime);\n        }\n        const createPlotRow = getSeriesPlotRowCreator(series.seriesType());\n        const dataToPlotRow = series.customSeriesPlotValuesBuilder();\n        const customWhitespaceChecker = series.customSeriesWhitespaceCheck();\n        const plotRow = createPlotRow(time, pointDataAtTime.index, data, extendedData.originalTime, dataToPlotRow, customWhitespaceChecker);\n        // For efficient conflation updates, check if this is just updating the last bar\n        const isLastBarUpdate = !historicalUpdate &&\n            !affectsTimeScale &&\n            lastSeriesTime !== undefined &&\n            this._horzScaleBehavior.key(time) === this._horzScaleBehavior.key(lastSeriesTime);\n        pointDataAtTime.mapping.set(series, plotRow);\n        if (historicalUpdate) {\n            this._updateHistoricalSeriesRow(series, plotRow, pointDataAtTime.index);\n        }\n        else if (isLastBarUpdate && series.isConflationEnabled() && isSeriesPlotRow(plotRow)) {\n            series.updateLastConflatedChunk(plotRow);\n            this._updateLastSeriesRow(series, plotRow);\n        }\n        else {\n            this._updateLastSeriesRow(series, plotRow);\n        }\n        const info = {\n            lastBarUpdatedOrNewBarsAddedToTheRight: isSeriesPlotRow(plotRow),\n            historicalUpdate,\n        };\n        // if point already exist on the time scale - we don't need to make a full update and just make an incremental one\n        if (!affectsTimeScale) {\n            return this._getUpdateResponse(series, -1, info);\n        }\n        const newPoint = {\n            timeWeight: 0,\n            time: pointDataAtTime.timePoint,\n            pointData: pointDataAtTime,\n            originalTime: timeScalePointTime(pointDataAtTime.mapping),\n        };\n        const insertIndex = lowerBound(this._sortedTimePoints, this._horzScaleBehavior.key(newPoint.time), (a, b) => this._horzScaleBehavior.key(a.time) < b);\n        // yes, I know that this array is readonly and this change is intended to make it performative\n        // we marked _sortedTimePoints array as readonly to avoid modifying this array anywhere else\n        // but this place is exceptional case due performance reasons, sorry\n        this._sortedTimePoints.splice(insertIndex, 0, newPoint);\n        for (let index = insertIndex; index < this._sortedTimePoints.length; ++index) {\n            assignIndexToPointData(this._sortedTimePoints[index].pointData, index);\n        }\n        this._horzScaleBehavior.fillWeightsForPoints(this._sortedTimePoints, insertIndex);\n        return this._getUpdateResponse(series, insertIndex, info);\n    }\n    popSeriesData(series, count) {\n        const seriesData = this._seriesRowsBySeries.get(series);\n        if (seriesData === undefined || count <= 0) {\n            return [[], this._emptyUpdateResponse()];\n        }\n        count = Math.min(count, seriesData.length);\n        const poppedData = seriesData.splice(-count).reverse();\n        if (seriesData.length === 0) {\n            this._seriesLastTimePoint.delete(series);\n        }\n        else {\n            this._seriesLastTimePoint.set(series, seriesData[seriesData.length - 1].time);\n        }\n        for (const data of poppedData) {\n            const pointData = this._pointDataByTimePoint.get(this._horzScaleBehavior.key(data.time));\n            if (!pointData) {\n                continue;\n            }\n            pointData.mapping.delete(series);\n            if (pointData.mapping.size !== 0) {\n                continue;\n            }\n            // No remaining data at this timepoint therefore we need to remove the internal\n            // timescale point and update the indices.\n            this._pointDataByTimePoint.delete(this._horzScaleBehavior.key(pointData.timePoint));\n            this._sortedTimePoints.splice(pointData.index, 1);\n            for (let index = pointData.index; index < this._sortedTimePoints.length; ++index) {\n                assignIndexToPointData(this._sortedTimePoints[index].pointData, index);\n            }\n        }\n        const info = {\n            historicalUpdate: false,\n            lastBarUpdatedOrNewBarsAddedToTheRight: false,\n        };\n        return [poppedData, this._getUpdateResponse(series, this._sortedTimePoints.length - 1, info)];\n    }\n    _updateLastSeriesRow(series, plotRow) {\n        let seriesData = this._seriesRowsBySeries.get(series);\n        if (seriesData === undefined) {\n            seriesData = [];\n            this._seriesRowsBySeries.set(series, seriesData);\n        }\n        const lastSeriesRow = seriesData.length !== 0 ? seriesData[seriesData.length - 1] : null;\n        if (lastSeriesRow === null || this._horzScaleBehavior.key(plotRow.time) > this._horzScaleBehavior.key(lastSeriesRow.time)) {\n            if (isSeriesPlotRow(plotRow)) {\n                seriesData.push(plotRow);\n            }\n        }\n        else {\n            if (isSeriesPlotRow(plotRow)) {\n                seriesData[seriesData.length - 1] = plotRow;\n            }\n            else {\n                seriesData.splice(-1, 1);\n            }\n        }\n        this._seriesLastTimePoint.set(series, plotRow.time);\n    }\n    _updateHistoricalSeriesRow(series, plotRow, pointDataIndex) {\n        const seriesData = this._seriesRowsBySeries.get(series);\n        if (seriesData === undefined) {\n            return;\n        }\n        // binary search for actual index in array.\n        const index = lowerBound(seriesData, pointDataIndex, (row, currentIndex) => row.index < currentIndex);\n        if (isSeriesPlotRow(plotRow)) {\n            seriesData[index] = plotRow;\n        }\n        else {\n            seriesData.splice(index, 1);\n        }\n    }\n    _setRowsToSeries(series, seriesRows) {\n        if (seriesRows.length !== 0) {\n            this._seriesRowsBySeries.set(series, seriesRows.filter(isSeriesPlotRow));\n            this._seriesLastTimePoint.set(series, seriesRows[seriesRows.length - 1].time);\n        }\n        else {\n            this._seriesRowsBySeries.delete(series);\n            this._seriesLastTimePoint.delete(series);\n        }\n    }\n    _cleanupPointsData() {\n        // let's treat all current points as \"potentially removed\"\n        // we could create an array with actually potentially removed points\n        // but most likely this array will be similar to _sortedTimePoints so let's avoid using additional memory\n        // note that we can use _sortedTimePoints here since a point might be removed only it was here previously\n        for (const point of this._sortedTimePoints) {\n            if (point.pointData.mapping.size === 0) {\n                this._pointDataByTimePoint.delete(this._horzScaleBehavior.key(point.time));\n            }\n        }\n    }\n    /**\n     * Sets new time scale and make indexes valid for all series\n     *\n     * @returns The index of the first changed point or `-1` if there is no change.\n     */\n    _replaceTimeScalePoints(newTimePoints) {\n        let firstChangedPointIndex = -1;\n        // search the first different point and \"syncing\" time weight by the way\n        for (let index = 0; index < this._sortedTimePoints.length && index < newTimePoints.length; ++index) {\n            const oldPoint = this._sortedTimePoints[index];\n            const newPoint = newTimePoints[index];\n            if (this._horzScaleBehavior.key(oldPoint.time) !== this._horzScaleBehavior.key(newPoint.time)) {\n                firstChangedPointIndex = index;\n                break;\n            }\n            // re-assign point's time weight for points if time is the same (and all prior times was the same)\n            newPoint.timeWeight = oldPoint.timeWeight;\n            assignIndexToPointData(newPoint.pointData, index);\n        }\n        if (firstChangedPointIndex === -1 && this._sortedTimePoints.length !== newTimePoints.length) {\n            // the common part of the prev and the new points are the same\n            // so the first changed point is the next after the common part\n            firstChangedPointIndex = Math.min(this._sortedTimePoints.length, newTimePoints.length);\n        }\n        if (firstChangedPointIndex === -1) {\n            // if no time scale changed, then do nothing\n            return -1;\n        }\n        // if time scale points are changed that means that we need to make full update to all series (with clearing points)\n        // but first we need to synchronize indexes and re-fill time weights\n        for (let index = firstChangedPointIndex; index < newTimePoints.length; ++index) {\n            assignIndexToPointData(newTimePoints[index].pointData, index);\n        }\n        // re-fill time weights for point after the first changed one\n        this._horzScaleBehavior.fillWeightsForPoints(newTimePoints, firstChangedPointIndex);\n        this._sortedTimePoints = newTimePoints;\n        return firstChangedPointIndex;\n    }\n    _getBaseIndex() {\n        if (this._seriesRowsBySeries.size === 0) {\n            // if we have no data then 'reset' the base index to null\n            return null;\n        }\n        let baseIndex = 0;\n        this._seriesRowsBySeries.forEach((data) => {\n            if (data.length !== 0) {\n                baseIndex = Math.max(baseIndex, data[data.length - 1].index);\n            }\n        });\n        return baseIndex;\n    }\n    _getUpdateResponse(updatedSeries, firstChangedPointIndex, info) {\n        const dataUpdateResponse = this._emptyUpdateResponse();\n        if (firstChangedPointIndex !== -1) {\n            // TODO: it's possible to make perf improvements by checking what series has data after firstChangedPointIndex\n            // but let's skip for now\n            this._seriesRowsBySeries.forEach((data, s) => {\n                dataUpdateResponse.series.set(s, {\n                    data,\n                    info: s === updatedSeries ? info : undefined,\n                });\n            });\n            // if the series data was set to [] it will have already been removed from _seriesRowBySeries\n            // meaning the forEach above won't add the series to the data update response\n            // so we handle that case here\n            if (!this._seriesRowsBySeries.has(updatedSeries)) {\n                dataUpdateResponse.series.set(updatedSeries, { data: [], info });\n            }\n            dataUpdateResponse.timeScale.points = this._sortedTimePoints;\n            dataUpdateResponse.timeScale.firstChangedPointIndex = firstChangedPointIndex;\n        }\n        else {\n            const seriesData = this._seriesRowsBySeries.get(updatedSeries);\n            // if no seriesData found that means that we just removed the series\n            dataUpdateResponse.series.set(updatedSeries, { data: seriesData || [], info });\n        }\n        return dataUpdateResponse;\n    }\n    _emptyUpdateResponse() {\n        return {\n            series: new Map(),\n            timeScale: {\n                baseIndex: this._getBaseIndex(),\n            },\n        };\n    }\n}\nfunction assignIndexToPointData(pointData, index) {\n    // first, nevertheless update index of point data (\"make it valid\")\n    pointData.index = index;\n    // and then we need to sync indexes for all series\n    pointData.mapping.forEach((seriesRow) => {\n        seriesRow.index = index;\n    });\n}\n", "import { lowerBound, upperBound } from '../helpers/algorithms';\nfunction lowerBoundItemsCompare(item, time) {\n    return item.time < time;\n}\nfunction upperBoundItemsCompare(item, time) {\n    return time < item.time;\n}\nexport function visibleTimedValues(items, range, extendedRange) {\n    const firstBar = range.left();\n    const lastBar = range.right();\n    const from = lowerBound(items, firstBar, lowerBoundItemsCompare);\n    const to = upperBound(items, lastBar, upperBoundItemsCompare);\n    if (!extendedRange) {\n        return { from, to };\n    }\n    let extendedFrom = from;\n    let extendedTo = to;\n    if (from > 0 && from < items.length && items[from].time >= firstBar) {\n        extendedFrom = from - 1;\n    }\n    if (to > 0 && to < items.length && items[to - 1].time <= lastBar) {\n        extendedTo = to + 1;\n    }\n    return { from: extendedFrom, to: extendedTo };\n}\n", "import { visibleTimedValues } from '../time-data';\nexport class SeriesPaneViewBase {\n    constructor(series, model, extendedVisibleRange) {\n        this._invalidated = true;\n        this._dataInvalidated = true;\n        this._optionsInvalidated = true;\n        this._items = [];\n        this._itemsVisibleRange = null;\n        this._lastConflationKey = -1;\n        this._series = series;\n        this._model = model;\n        this._extendedVisibleRange = extendedVisibleRange;\n    }\n    update(updateType) {\n        this._invalidated = true;\n        if (updateType === 'data') {\n            this._dataInvalidated = true;\n        }\n        if (updateType === 'options') {\n            this._optionsInvalidated = true;\n        }\n    }\n    renderer() {\n        if (!this._series.visible()) {\n            return null;\n        }\n        this._makeValid();\n        return this._itemsVisibleRange === null ? null : this._renderer;\n    }\n    _updateOptions() {\n        this._items = this._items.map((item) => ({\n            ...item,\n            ...this._series.barColorer().barStyle(item.time),\n        }));\n    }\n    _clearVisibleRange() {\n        this._itemsVisibleRange = null;\n    }\n    _makeValid() {\n        // If the conflation setting or factor changed (due to zoom/barSpacing),\n        // we must rebuild raw items from series data.\n        const timeScale = this._model.timeScale();\n        const conflationEnabled = timeScale.options().enableConflation;\n        const currentConflationKey = conflationEnabled ? timeScale.conflationFactor() : 0;\n        if (currentConflationKey !== this._lastConflationKey) {\n            this._dataInvalidated = true;\n            this._lastConflationKey = currentConflationKey;\n        }\n        if (this._dataInvalidated) {\n            this._fillRawPoints();\n            this._dataInvalidated = false;\n        }\n        if (this._optionsInvalidated) {\n            this._updateOptions();\n            this._optionsInvalidated = false;\n        }\n        if (this._invalidated) {\n            this._makeValidImpl();\n            this._invalidated = false;\n        }\n    }\n    _makeValidImpl() {\n        const priceScale = this._series.priceScale();\n        const timeScale = this._model.timeScale();\n        this._clearVisibleRange();\n        if (timeScale.isEmpty() || priceScale.isEmpty()) {\n            return;\n        }\n        const visibleBars = timeScale.visibleStrictRange();\n        if (visibleBars === null) {\n            return;\n        }\n        if (this._series.bars().size() === 0) {\n            return;\n        }\n        const firstValue = this._series.firstValue();\n        if (firstValue === null) {\n            return;\n        }\n        this._itemsVisibleRange = visibleTimedValues(this._items, visibleBars, this._extendedVisibleRange);\n        this._convertToCoordinates(priceScale, timeScale, firstValue.value);\n        this._prepareRendererData();\n    }\n}\n", "import { undefinedIfNull } from '../../helpers/strict-type-checks';\nimport { SeriesPaneViewBase } from './series-pane-view-base';\nclass CustomSeriesPaneRendererWrapper {\n    constructor(sourceRenderer, priceScale) {\n        this._sourceRenderer = sourceRenderer;\n        this._priceScale = priceScale;\n    }\n    draw(target, isHovered, hitTestData) {\n        this._sourceRenderer.draw(target, this._priceScale, isHovered, hitTestData);\n    }\n}\nexport class SeriesCustomPaneView extends SeriesPaneViewBase {\n    constructor(series, model, paneView) {\n        super(series, model, false);\n        this._paneView = paneView;\n        this._renderer = new CustomSeriesPaneRendererWrapper(this._paneView.renderer(), (price) => {\n            const firstValue = series.firstValue();\n            if (firstValue === null) {\n                return null;\n            }\n            return series.priceScale().priceToCoordinate(price, firstValue.value);\n        });\n    }\n    get conflationReducer() {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        return this._paneView.conflationReducer;\n    }\n    priceValueBuilder(plotRow) {\n        return this._paneView.priceValueBuilder(plotRow);\n    }\n    isWhitespace(data) {\n        return this._paneView.isWhitespace(data);\n    }\n    _fillRawPoints() {\n        const colorer = this._series.barColorer();\n        this._items = this._series\n            .conflatedBars()\n            .rows()\n            .map((row) => {\n            return {\n                time: row.index,\n                x: NaN,\n                ...colorer.barStyle(row.index),\n                originalData: row.data,\n            };\n        });\n    }\n    _convertToCoordinates(priceScale, timeScale) {\n        timeScale.indexesToCoordinates(this._items, undefinedIfNull(this._itemsVisibleRange));\n    }\n    _prepareRendererData() {\n        this._paneView.update({\n            bars: this._items.map(unwrapItemData),\n            barSpacing: this._model.timeScale().barSpacing(),\n            visibleRange: this._itemsVisibleRange,\n            conflationFactor: this._model.timeScale().conflationFactor(),\n        }, this._series.options());\n    }\n}\nfunction unwrapItemData(item) {\n    return {\n        x: item.x,\n        time: item.time,\n        originalData: item.originalData,\n        barColor: item.barColor,\n    };\n}\n", "import { ensure } from '../../helpers/assertions';\nimport { SeriesCustomPaneView } from './custom-pane-view';\nexport const customStyleDefaults = {\n    color: '#2196f3',\n};\nconst createPaneView = (series, model, customPaneView) => {\n    const paneView = ensure(customPaneView);\n    return new SeriesCustomPaneView(series, model, paneView);\n};\nexport const createCustomSeriesDefinition = (paneView) => {\n    const definition = {\n        type: 'Custom',\n        isBuiltIn: false,\n        defaultOptions: { ...customStyleDefaults, ...paneView.defaultOptions() },\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n        customPaneView: paneView,\n    };\n    return definition;\n};\n", "export const isSeriesDefinition = (value) => {\n    return value.createPaneView !== undefined;\n};\n", "function singleValueData(plotRow) {\n    const data = {\n        value: plotRow.value[3 /* PlotRowValueIndex.Close */],\n        time: plotRow.originalTime,\n    };\n    if (plotRow.customValues !== undefined) {\n        data.customValues = plotRow.customValues;\n    }\n    return data;\n}\nfunction lineData(plotRow) {\n    const result = singleValueData(plotRow);\n    if (plotRow.color !== undefined) {\n        result.color = plotRow.color;\n    }\n    return result;\n}\nfunction areaData(plotRow) {\n    const result = singleValueData(plotRow);\n    if (plotRow.lineColor !== undefined) {\n        result.lineColor = plotRow.lineColor;\n    }\n    if (plotRow.topColor !== undefined) {\n        result.topColor = plotRow.topColor;\n    }\n    if (plotRow.bottomColor !== undefined) {\n        result.bottomColor = plotRow.bottomColor;\n    }\n    return result;\n}\nfunction baselineData(plotRow) {\n    const result = singleValueData(plotRow);\n    if (plotRow.topLineColor !== undefined) {\n        result.topLineColor = plotRow.topLineColor;\n    }\n    if (plotRow.bottomLineColor !== undefined) {\n        result.bottomLineColor = plotRow.bottomLineColor;\n    }\n    if (plotRow.topFillColor1 !== undefined) {\n        result.topFillColor1 = plotRow.topFillColor1;\n    }\n    if (plotRow.topFillColor2 !== undefined) {\n        result.topFillColor2 = plotRow.topFillColor2;\n    }\n    if (plotRow.bottomFillColor1 !== undefined) {\n        result.bottomFillColor1 = plotRow.bottomFillColor1;\n    }\n    if (plotRow.bottomFillColor2 !== undefined) {\n        result.bottomFillColor2 = plotRow.bottomFillColor2;\n    }\n    return result;\n}\nfunction ohlcData(plotRow) {\n    const data = {\n        open: plotRow.value[0 /* PlotRowValueIndex.Open */],\n        high: plotRow.value[1 /* PlotRowValueIndex.High */],\n        low: plotRow.value[2 /* PlotRowValueIndex.Low */],\n        close: plotRow.value[3 /* PlotRowValueIndex.Close */],\n        time: plotRow.originalTime,\n    };\n    if (plotRow.customValues !== undefined) {\n        data.customValues = plotRow.customValues;\n    }\n    return data;\n}\nfunction barData(plotRow) {\n    const result = ohlcData(plotRow);\n    if (plotRow.color !== undefined) {\n        result.color = plotRow.color;\n    }\n    return result;\n}\nfunction candlestickData(plotRow) {\n    const result = ohlcData(plotRow);\n    const { color, borderColor, wickColor } = plotRow;\n    if (color !== undefined) {\n        result.color = color;\n    }\n    if (borderColor !== undefined) {\n        result.borderColor = borderColor;\n    }\n    if (wickColor !== undefined) {\n        result.wickColor = wickColor;\n    }\n    return result;\n}\nexport function getSeriesDataCreator(seriesType) {\n    const seriesPlotRowToDataMap = {\n        Area: (areaData),\n        Line: (lineData),\n        Baseline: (baselineData),\n        Histogram: (lineData),\n        Bar: (barData),\n        Candlestick: (candlestickData),\n        Custom: (customData),\n    };\n    return seriesPlotRowToDataMap[seriesType];\n}\nfunction customData(plotRow) {\n    const time = plotRow.originalTime;\n    return {\n        ...plotRow.data,\n        time,\n    };\n}\n", "export const crosshairOptionsDefaults = {\n    vertLine: {\n        color: '#9598A1',\n        width: 1,\n        style: 3 /* LineStyle.LargeDashed */,\n        visible: true,\n        labelVisible: true,\n        labelBackgroundColor: '#131722',\n    },\n    horzLine: {\n        color: '#9598A1',\n        width: 1,\n        style: 3 /* LineStyle.LargeDashed */,\n        visible: true,\n        labelVisible: true,\n        labelBackgroundColor: '#131722',\n    },\n    mode: 1 /* CrosshairMode.Magnet */,\n};\n", "export const gridOptionsDefaults = {\n    vertLines: {\n        color: '#D6DCDE',\n        style: 0 /* LineStyle.Solid */,\n        visible: true,\n    },\n    horzLines: {\n        color: '#D6DCDE',\n        style: 0 /* LineStyle.Solid */,\n        visible: true,\n    },\n};\n", "import { defaultFontFamily } from '../../helpers/make-font';\nexport const layoutOptionsDefaults = {\n    background: {\n        type: \"solid\" /* ColorType.Solid */,\n        color: '#FFFFFF',\n    },\n    textColor: '#191919',\n    fontSize: 12,\n    fontFamily: defaultFontFamily,\n    panes: {\n        enableResize: true,\n        separatorColor: '#E0E3EB',\n        separatorHoverColor: 'rgba(178, 181, 189, 0.2)',\n    },\n    attributionLogo: true,\n    colorSpace: 'srgb',\n    colorParsers: [],\n};\n", "export const priceScaleOptionsDefaults = {\n    autoScale: true,\n    mode: 0 /* PriceScaleMode.Normal */,\n    invertScale: false,\n    alignLabels: true,\n    borderVisible: true,\n    borderColor: '#2B2B43',\n    entireTextOnly: false,\n    visible: false,\n    ticksVisible: false,\n    scaleMargins: {\n        bottom: 0.1,\n        top: 0.2,\n    },\n    minimumWidth: 0,\n    ensureEdgeTickMarksVisible: false,\n};\n", "export const timeScaleOptionsDefaults = {\n    rightOffset: 0,\n    barSpacing: 6,\n    minBarSpacing: 0.5,\n    maxBarSpacing: 0,\n    fixLeftEdge: false,\n    fixRightEdge: false,\n    lockVisibleTimeRangeOnResize: false,\n    rightBarStaysOnScroll: false,\n    borderVisible: true,\n    borderColor: '#2B2B43',\n    visible: true,\n    timeVisible: false,\n    secondsVisible: true,\n    shiftVisibleRangeOnNewBar: true,\n    allowShiftVisibleRangeOnWhitespaceReplacement: false,\n    ticksVisible: false,\n    uniformDistribution: false,\n    minimumHeight: 0,\n    allowBoldLabels: true,\n    ignoreWhitespaceIndices: false,\n    enableConflation: false,\n    conflationThresholdFactor: 1,\n    precomputeConflationOnInit: false,\n    precomputeConflationPriority: 'background',\n};\n", "import { isRunningOnClientSide } from '../../helpers/is-running-on-client-side';\nimport { crosshairOptionsDefaults } from './crosshair-options-defaults';\nimport { gridOptionsDefaults } from './grid-options-defaults';\nimport { layoutOptionsDefaults } from './layout-options-defaults';\nimport { priceScaleOptionsDefaults } from './price-scale-options-defaults';\nimport { timeScaleOptionsDefaults } from './time-scale-options-defaults';\nexport function chartOptionsDefaults() {\n    return {\n        addDefaultPane: true,\n        width: 0,\n        height: 0,\n        autoSize: false,\n        layout: layoutOptionsDefaults,\n        crosshair: crosshairOptionsDefaults,\n        grid: gridOptionsDefaults,\n        overlayPriceScales: {\n            ...priceScaleOptionsDefaults,\n        },\n        leftPriceScale: {\n            ...priceScaleOptionsDefaults,\n            visible: false,\n        },\n        rightPriceScale: {\n            ...priceScaleOptionsDefaults,\n            visible: true,\n        },\n        timeScale: timeScaleOptionsDefaults,\n        localization: {\n            locale: isRunningOnClientSide ? navigator.language : '',\n            dateFormat: 'dd MMM \\'yy',\n        },\n        handleScroll: {\n            mouseWheel: true,\n            pressedMouseMove: true,\n            horzTouchDrag: true,\n            vertTouchDrag: true,\n        },\n        handleScale: {\n            axisPressedMouseMove: {\n                time: true,\n                price: true,\n            },\n            axisDoubleClickReset: {\n                time: true,\n                price: true,\n            },\n            mouseWheel: true,\n            pinch: true,\n        },\n        kineticScroll: {\n            mouse: false,\n            touch: true,\n        },\n        trackingMode: {\n            exitMode: 1 /* TrackingModeExitMode.OnNextTap */,\n        },\n    };\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nimport { isDefaultPriceScale } from '../model/default-price-scale';\nimport { PriceRangeImpl } from '../model/price-range-impl';\nimport { convertPriceRangeFromLog } from '../model/price-scale-conversions';\nimport { precisionByMinMove } from '../model/series-options';\nexport class PriceScaleApi {\n    constructor(chartWidget, priceScaleId, paneIndex) {\n        this._chartWidget = chartWidget;\n        this._priceScaleId = priceScaleId;\n        this._paneIndex = paneIndex ?? 0;\n    }\n    applyOptions(options) {\n        this._chartWidget.model().applyPriceScaleOptions(this._priceScaleId, options, this._paneIndex);\n    }\n    options() {\n        return this._priceScale().options();\n    }\n    width() {\n        if (!isDefaultPriceScale(this._priceScaleId)) {\n            return 0;\n        }\n        return this._chartWidget.getPriceAxisWidth(this._priceScaleId);\n    }\n    setVisibleRange(range) {\n        this.setAutoScale(false);\n        this._priceScale().setCustomPriceRange(new PriceRangeImpl(range.from, range.to));\n    }\n    getVisibleRange() {\n        let range = this._priceScale().priceRange();\n        if (range === null) {\n            return null;\n        }\n        let from;\n        let to;\n        if (this._priceScale().isLog()) {\n            const minMove = this._priceScale().minMove();\n            const minMovePrecision = precisionByMinMove(minMove);\n            range = convertPriceRangeFromLog(range, this._priceScale().getLogFormula());\n            from = Number((Math.round(range.minValue() / minMove) * minMove).toFixed(minMovePrecision));\n            to = Number((Math.round(range.maxValue() / minMove) * minMove).toFixed(minMovePrecision));\n        }\n        else {\n            from = range.minValue();\n            to = range.maxValue();\n        }\n        return {\n            from,\n            to,\n        };\n    }\n    setAutoScale(on) {\n        this.applyOptions({ autoScale: on });\n    }\n    _priceScale() {\n        return ensureNotNull(this._chartWidget.model().findPriceScale(this._priceScaleId, this._paneIndex)).priceScale;\n    }\n}\n", "import { assert } from '../helpers/assertions';\nimport { PriceScaleApi } from './price-scale-api';\nexport class PaneApi {\n    constructor(chartWidget, seriesApiGetter, pane, chartApi) {\n        this._chartWidget = chartWidget;\n        this._pane = pane;\n        this._seriesApiGetter = seriesApiGetter;\n        this._chartApi = chartApi;\n    }\n    getHeight() {\n        return this._pane.height();\n    }\n    setHeight(height) {\n        const chartModel = this._chartWidget.model();\n        const paneIndex = chartModel.getPaneIndex(this._pane);\n        chartModel.changePanesHeight(paneIndex, height);\n    }\n    getStretchFactor() {\n        return this._pane.stretchFactor();\n    }\n    setStretchFactor(stretchFactor) {\n        this._pane.setStretchFactor(stretchFactor);\n        this._chartWidget.model().fullUpdate();\n    }\n    paneIndex() {\n        return this._chartWidget.model().getPaneIndex(this._pane);\n    }\n    moveTo(paneIndex) {\n        const currentIndex = this.paneIndex();\n        if (currentIndex === paneIndex) {\n            return;\n        }\n        assert(paneIndex >= 0 && paneIndex < this._chartWidget.paneWidgets().length, 'Invalid pane index');\n        this._chartWidget.model().movePane(currentIndex, paneIndex);\n    }\n    getSeries() {\n        return this._pane.series().map((source) => this._seriesApiGetter(source)) ?? [];\n    }\n    getHTMLElement() {\n        const widgets = this._chartWidget.paneWidgets();\n        if (!widgets || widgets.length === 0 || !widgets[this.paneIndex()]) {\n            return null;\n        }\n        return widgets[this.paneIndex()].getElement();\n    }\n    attachPrimitive(primitive) {\n        // drawing tools gating is enforced at the primitive level (e.g., DrawingPrimitiveBase.attached)\n        this._pane.attachPrimitive(primitive);\n        if (primitive.attached) {\n            primitive.attached({\n                chart: this._chartApi,\n                requestUpdate: () => this._pane.model().fullUpdate(),\n            });\n        }\n    }\n    detachPrimitive(primitive) {\n        this._pane.detachPrimitive(primitive);\n    }\n    priceScale(priceScaleId) {\n        const priceScale = this._pane.priceScaleById(priceScaleId);\n        if (priceScale === null) {\n            throw new Error(`Cannot find price scale with id: ${priceScaleId}`);\n        }\n        return new PriceScaleApi(this._chartWidget, priceScaleId, this.paneIndex());\n    }\n    setPreserveEmptyPane(preserve) {\n        this._pane.setPreserveEmptyPane(preserve);\n    }\n    preserveEmptyPane() {\n        return this._pane.preserveEmptyPane();\n    }\n    addCustomSeries(customPaneView, options = {}, paneIndex = 0) {\n        return this._chartApi.addCustomSeries(customPaneView, options, paneIndex);\n    }\n    addSeries(definition, options = {}) {\n        return this._chartApi.addSeries(definition, options, this.paneIndex());\n    }\n}\n", "/// <reference types=\"_build-time-constants\" />\nimport { assert } from '../helpers/assertions';\nimport { isFulfilledData } from './data-consumer';\nexport function checkPriceLineOptions(options) {\n    if (process.env.NODE_ENV === 'production') {\n        return;\n    }\n    assert(typeof options.price === 'number', `the type of 'price' price line's property must be a number, got '${typeof options.price}'`);\n}\nexport function checkItemsAreOrdered(data, bh, allowDuplicates = false) {\n    if (process.env.NODE_ENV === 'production') {\n        return;\n    }\n    if (data.length === 0) {\n        return;\n    }\n    let prevTime = bh.key(data[0].time);\n    for (let i = 1; i < data.length; ++i) {\n        const currentTime = bh.key(data[i].time);\n        const checkResult = allowDuplicates ? prevTime <= currentTime : prevTime < currentTime;\n        assert(checkResult, `data must be asc ordered by time, index=${i}, time=${currentTime}, prev time=${prevTime}`);\n        prevTime = currentTime;\n    }\n}\nexport function checkSeriesValuesType(type, data) {\n    if (process.env.NODE_ENV === 'production') {\n        return;\n    }\n    data.forEach(getChecker(type));\n}\nexport function getChecker(type) {\n    switch (type) {\n        case 'Bar':\n        case 'Candlestick':\n            return checkBarItem.bind(null, type);\n        case 'Area':\n        case 'Baseline':\n        case 'Line':\n        case 'Histogram':\n            return checkLineItem.bind(null, type);\n        case 'Custom':\n            return checkCustomItem.bind(null);\n    }\n}\nfunction checkBarItem(type, barItem) {\n    if (!isFulfilledData(barItem)) {\n        return;\n    }\n    ['open', 'high', 'low', 'close'].forEach((key) => {\n        assert(typeof barItem[key] === 'number', `${type} series item data value of ${key} must be a number, got=${typeof barItem[key]}, value=${barItem[key]}`);\n        assert(isSafeValue(barItem[key]), `${type} series item data value of ${key} must be between ${MIN_SAFE_VALUE.toPrecision(16)} and ${MAX_SAFE_VALUE.toPrecision(16)}, got=${typeof barItem[key]}, value=${barItem[key]}`);\n    });\n}\nfunction checkLineItem(type, lineItem) {\n    if (!isFulfilledData(lineItem)) {\n        return;\n    }\n    assert(typeof lineItem.value === 'number', `${type} series item data value must be a number, got=${typeof lineItem.value}, value=${lineItem.value}`);\n    assert(isSafeValue(lineItem.value), `${type} series item data value must be between ${MIN_SAFE_VALUE.toPrecision(16)} and ${MAX_SAFE_VALUE.toPrecision(16)}, got=${typeof lineItem.value}, value=${lineItem.value}`);\n}\nfunction checkCustomItem(\n// type: 'Custom',\n// customItem: SeriesDataItemTypeMap[typeof type]\n) {\n    // Nothing to check yet...\n    return;\n}\nconst MIN_SAFE_VALUE = Number.MIN_SAFE_INTEGER / 100;\nconst MAX_SAFE_VALUE = Number.MAX_SAFE_INTEGER / 100;\nfunction isSafeValue(value) {\n    return value >= MIN_SAFE_VALUE && value <= MAX_SAFE_VALUE;\n}\n", "export const priceLineOptionsDefaults = {\n    color: '#FF0000',\n    price: 0,\n    lineStyle: 2 /* LineStyle.Dashed */,\n    lineWidth: 1,\n    lineVisible: true,\n    axisLabelVisible: true,\n    title: '',\n    axisLabelColor: '',\n    axisLabelTextColor: '',\n};\n", "export class PriceLine {\n    constructor(priceLine) {\n        this._priceLine = priceLine;\n    }\n    applyOptions(options) {\n        this._priceLine.applyOptions(options);\n    }\n    options() {\n        return this._priceLine.options();\n    }\n    priceLine() {\n        return this._priceLine;\n    }\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { clone, merge } from '../helpers/strict-type-checks';\nimport { checkItemsAreOrdered, checkPriceLineOptions, checkSeriesValuesType } from '../model/data-validators';\nimport { RangeImpl } from '../model/range-impl';\nimport { TimeScaleVisibleRange } from '../model/time-scale-visible-range';\nimport { getSeriesDataCreator } from './get-series-data-creator';\nimport { priceLineOptionsDefaults } from './options/price-line-options-defaults';\nimport { PriceLine } from './price-line-api';\nexport class SeriesApi {\n    constructor(series, dataUpdatesConsumer, priceScaleApiProvider, chartApi, horzScaleBehavior, paneApiGetter) {\n        this._dataChangedDelegate = new Delegate();\n        this._series = series;\n        this._dataUpdatesConsumer = dataUpdatesConsumer;\n        this._priceScaleApiProvider = priceScaleApiProvider;\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._chartApi = chartApi;\n        this._paneApiGetter = paneApiGetter;\n    }\n    destroy() {\n        this._dataChangedDelegate.destroy();\n    }\n    priceFormatter() {\n        return this._series.formatter();\n    }\n    priceToCoordinate(price) {\n        const firstValue = this._series.firstValue();\n        if (firstValue === null) {\n            return null;\n        }\n        return this._series.priceScale().priceToCoordinate(price, firstValue.value);\n    }\n    coordinateToPrice(coordinate) {\n        const firstValue = this._series.firstValue();\n        if (firstValue === null) {\n            return null;\n        }\n        return this._series.priceScale().coordinateToPrice(coordinate, firstValue.value);\n    }\n    barsInLogicalRange(range) {\n        if (range === null) {\n            return null;\n        }\n        // we use TimeScaleVisibleRange here to convert LogicalRange to strict range properly\n        const correctedRange = new TimeScaleVisibleRange(new RangeImpl(range.from, range.to)).strictRange();\n        const bars = this._series.bars();\n        if (bars.isEmpty()) {\n            return null;\n        }\n        const dataFirstBarInRange = bars.search(correctedRange.left(), 1 /* MismatchDirection.NearestRight */);\n        const dataLastBarInRange = bars.search(correctedRange.right(), -1 /* MismatchDirection.NearestLeft */);\n        const dataFirstIndex = ensureNotNull(bars.firstIndex());\n        const dataLastIndex = ensureNotNull(bars.lastIndex());\n        // this means that we request data in the data gap\n        // e.g. let's say we have series with data [0..10, 30..60]\n        // and we request bars info in range [15, 25]\n        // thus, dataFirstBarInRange will be with index 30 and dataLastBarInRange with 10\n        if (dataFirstBarInRange !== null && dataLastBarInRange !== null && dataFirstBarInRange.index > dataLastBarInRange.index) {\n            return {\n                barsBefore: range.from - dataFirstIndex,\n                barsAfter: dataLastIndex - range.to,\n            };\n        }\n        const barsBefore = (dataFirstBarInRange === null || dataFirstBarInRange.index === dataFirstIndex)\n            ? range.from - dataFirstIndex\n            : dataFirstBarInRange.index - dataFirstIndex;\n        const barsAfter = (dataLastBarInRange === null || dataLastBarInRange.index === dataLastIndex)\n            ? dataLastIndex - range.to\n            : dataLastIndex - dataLastBarInRange.index;\n        const result = { barsBefore, barsAfter };\n        // actually they can't exist separately\n        if (dataFirstBarInRange !== null && dataLastBarInRange !== null) {\n            result.from = dataFirstBarInRange.originalTime;\n            result.to = dataLastBarInRange.originalTime;\n        }\n        return result;\n    }\n    setData(data) {\n        checkItemsAreOrdered(data, this._horzScaleBehavior);\n        checkSeriesValuesType(this._series.seriesType(), data);\n        this._dataUpdatesConsumer.applyNewData(this._series, data);\n        this._onDataChanged('full');\n    }\n    update(bar, historicalUpdate = false) {\n        checkSeriesValuesType(this._series.seriesType(), [bar]);\n        this._dataUpdatesConsumer.updateData(this._series, bar, historicalUpdate);\n        this._onDataChanged('update');\n    }\n    pop(count = 1) {\n        const poppedRows = this._dataUpdatesConsumer.popData(this._series, count);\n        if (poppedRows.length !== 0) {\n            this._onDataChanged('update');\n        }\n        const creator = getSeriesDataCreator(this.seriesType());\n        return poppedRows.map((row) => creator(row));\n    }\n    dataByIndex(logicalIndex, mismatchDirection) {\n        const data = this._series.bars().search(logicalIndex, mismatchDirection);\n        if (data === null) {\n            // actually it can be a whitespace\n            return null;\n        }\n        const creator = getSeriesDataCreator(this.seriesType());\n        return creator(data);\n    }\n    data() {\n        const seriesCreator = getSeriesDataCreator(this.seriesType());\n        const rows = this._series.bars().rows();\n        return rows.map((row) => seriesCreator(row));\n    }\n    subscribeDataChanged(handler) {\n        this._dataChangedDelegate.subscribe(handler);\n    }\n    unsubscribeDataChanged(handler) {\n        this._dataChangedDelegate.unsubscribe(handler);\n    }\n    applyOptions(options) {\n        this._series.applyOptions(options);\n    }\n    options() {\n        return clone(this._series.options());\n    }\n    priceScale() {\n        return this._priceScaleApiProvider.priceScale(this._series.priceScale().id(), this.getPane().paneIndex());\n    }\n    createPriceLine(options) {\n        checkPriceLineOptions(options);\n        const strictOptions = merge(clone(priceLineOptionsDefaults), options);\n        const priceLine = this._series.createPriceLine(strictOptions);\n        return new PriceLine(priceLine);\n    }\n    removePriceLine(line) {\n        this._series.removePriceLine(line.priceLine());\n    }\n    priceLines() {\n        return this._series.priceLines().map((priceLine) => new PriceLine(priceLine));\n    }\n    seriesType() {\n        return this._series.seriesType();\n    }\n    lastValueData(globalLast) {\n        const result = this._series.lastValueData(globalLast);\n        if (result.noData) {\n            return {\n                noData: true,\n            };\n        }\n        return {\n            noData: false,\n            price: result.price,\n            color: result.color,\n        };\n    }\n    attachPrimitive(primitive) {\n        // drawing tools gating is enforced at the primitive level (e.g., DrawingPrimitiveBase.attached)\n        // at this point we cast the generic to unknown because we\n        // don't want the model to know the types of the API (\u25D1_\u25D1)\n        this._series.attachPrimitive(primitive);\n        if (primitive.attached) {\n            primitive.attached({\n                chart: this._chartApi,\n                series: this,\n                requestUpdate: () => this._series.model().fullUpdate(),\n                horzScaleBehavior: this._horzScaleBehavior,\n            });\n        }\n    }\n    detachPrimitive(primitive) {\n        this._series.detachPrimitive(primitive);\n        if (primitive.detached) {\n            primitive.detached();\n        }\n        this._series.model().fullUpdate();\n    }\n    getPane() {\n        const series = this._series;\n        const pane = ensureNotNull(this._series.model().paneForSource(series));\n        return this._paneApiGetter(pane);\n    }\n    moveToPane(paneIndex) {\n        this._series.model().moveSeriesToPane(this._series, paneIndex);\n    }\n    seriesOrder() {\n        const pane = this._series.model().paneForSource(this._series);\n        if (pane === null) {\n            return -1;\n        }\n        return pane.series().indexOf(this._series);\n    }\n    setSeriesOrder(order) {\n        const pane = this._series.model().paneForSource(this._series);\n        if (pane === null) {\n            return;\n        }\n        pane.setSeriesOrder(this._series, order);\n    }\n    _onDataChanged(scope) {\n        if (this._dataChangedDelegate.hasListeners()) {\n            this._dataChangedDelegate.fire(scope);\n        }\n    }\n}\n", "import { assert } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { clone } from '../helpers/strict-type-checks';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"AnimationDurationMs\"] = 1000] = \"AnimationDurationMs\";\n})(Constants || (Constants = {}));\nexport class TimeScaleApi {\n    constructor(model, timeAxisWidget, horzScaleBehavior) {\n        this._timeRangeChanged = new Delegate();\n        this._logicalRangeChanged = new Delegate();\n        this._sizeChanged = new Delegate();\n        this._model = model;\n        this._timeScale = model.timeScale();\n        this._timeAxisWidget = timeAxisWidget;\n        this._timeScale.visibleBarsChanged().subscribe(this._onVisibleBarsChanged.bind(this));\n        this._timeScale.logicalRangeChanged().subscribe(this._onVisibleLogicalRangeChanged.bind(this));\n        this._timeAxisWidget.sizeChanged().subscribe(this._onSizeChanged.bind(this));\n        this._horzScaleBehavior = horzScaleBehavior;\n    }\n    destroy() {\n        this._timeScale.visibleBarsChanged().unsubscribeAll(this);\n        this._timeScale.logicalRangeChanged().unsubscribeAll(this);\n        this._timeAxisWidget.sizeChanged().unsubscribeAll(this);\n        this._timeRangeChanged.destroy();\n        this._logicalRangeChanged.destroy();\n        this._sizeChanged.destroy();\n    }\n    scrollPosition() {\n        return this._timeScale.rightOffset();\n    }\n    scrollToPosition(position, animated) {\n        if (!animated) {\n            this._model.setRightOffset(position);\n            return;\n        }\n        this._timeScale.scrollToOffsetAnimated(position, 1000 /* Constants.AnimationDurationMs */);\n    }\n    scrollToRealTime() {\n        this._timeScale.scrollToRealTime();\n    }\n    getVisibleRange() {\n        const timeRange = this._timeScale.visibleTimeRange();\n        if (timeRange === null) {\n            return null;\n        }\n        return {\n            from: timeRange.from.originalTime,\n            to: timeRange.to.originalTime,\n        };\n    }\n    setVisibleRange(range) {\n        const convertedRange = {\n            from: this._horzScaleBehavior.convertHorzItemToInternal(range.from),\n            to: this._horzScaleBehavior.convertHorzItemToInternal(range.to),\n        };\n        const logicalRange = this._timeScale.logicalRangeForTimeRange(convertedRange);\n        this._model.setTargetLogicalRange(logicalRange);\n    }\n    getVisibleLogicalRange() {\n        const logicalRange = this._timeScale.visibleLogicalRange();\n        if (logicalRange === null) {\n            return null;\n        }\n        return {\n            from: logicalRange.left(),\n            to: logicalRange.right(),\n        };\n    }\n    setVisibleLogicalRange(range) {\n        assert(range.from <= range.to, 'The from index cannot be after the to index.');\n        this._model.setTargetLogicalRange(range);\n    }\n    resetTimeScale() {\n        this._model.resetTimeScale();\n    }\n    fitContent() {\n        this._model.fitContent();\n    }\n    logicalToCoordinate(logical) {\n        const timeScale = this._model.timeScale();\n        if (timeScale.isEmpty()) {\n            return null;\n        }\n        else {\n            return timeScale.indexToCoordinate(logical);\n        }\n    }\n    coordinateToLogical(x) {\n        if (this._timeScale.isEmpty()) {\n            return null;\n        }\n        else {\n            return this._timeScale.coordinateToIndex(x);\n        }\n    }\n    timeToIndex(time, findNearest) {\n        const timePoint = this._horzScaleBehavior.convertHorzItemToInternal(time);\n        return this._timeScale.timeToIndex(timePoint, findNearest);\n    }\n    timeToCoordinate(time) {\n        const timePointIndex = this.timeToIndex(time, false);\n        if (timePointIndex === null) {\n            return null;\n        }\n        return this._timeScale.indexToCoordinate(timePointIndex);\n    }\n    coordinateToTime(x) {\n        const timeScale = this._model.timeScale();\n        const timePointIndex = timeScale.coordinateToIndex(x);\n        const timePoint = timeScale.indexToTimeScalePoint(timePointIndex);\n        if (timePoint === null) {\n            return null;\n        }\n        return timePoint.originalTime;\n    }\n    width() {\n        return this._timeAxisWidget.getSize().width;\n    }\n    height() {\n        return this._timeAxisWidget.getSize().height;\n    }\n    subscribeVisibleTimeRangeChange(handler) {\n        this._timeRangeChanged.subscribe(handler);\n    }\n    unsubscribeVisibleTimeRangeChange(handler) {\n        this._timeRangeChanged.unsubscribe(handler);\n    }\n    subscribeVisibleLogicalRangeChange(handler) {\n        this._logicalRangeChanged.subscribe(handler);\n    }\n    unsubscribeVisibleLogicalRangeChange(handler) {\n        this._logicalRangeChanged.unsubscribe(handler);\n    }\n    subscribeSizeChange(handler) {\n        this._sizeChanged.subscribe(handler);\n    }\n    unsubscribeSizeChange(handler) {\n        this._sizeChanged.unsubscribe(handler);\n    }\n    applyOptions(options) {\n        this._timeScale.applyOptions(options);\n    }\n    options() {\n        return {\n            ...clone(this._timeScale.options()),\n            barSpacing: this._timeScale.barSpacing(),\n        };\n    }\n    _onVisibleBarsChanged() {\n        if (this._timeRangeChanged.hasListeners()) {\n            this._timeRangeChanged.fire(this.getVisibleRange());\n        }\n    }\n    _onVisibleLogicalRangeChanged() {\n        if (this._logicalRangeChanged.hasListeners()) {\n            this._logicalRangeChanged.fire(this.getVisibleLogicalRange());\n        }\n    }\n    _onSizeChanged(size) {\n        this._sizeChanged.fire(size.width, size.height);\n    }\n}\n", "/// <reference types=\"_build-time-constants\" />\nimport { ChartWidget } from '../gui/chart-widget';\nimport { assert, ensure, ensureDefined } from '../helpers/assertions';\nimport { Delegate } from '../helpers/delegate';\nimport { warn } from '../helpers/logger';\nimport { clone, isBoolean, merge } from '../helpers/strict-type-checks';\nimport { isFulfilledData } from '../model/data-consumer';\nimport { DataLayer } from '../model/data-layer';\nimport { Series } from '../model/series';\nimport { fillUpDownCandlesticksColors, precisionByMinMove, } from '../model/series-options';\nimport { createCustomSeriesDefinition } from '../model/series/custom-series';\nimport { isSeriesDefinition } from '../model/series/series-def';\nimport { getSeriesDataCreator } from './get-series-data-creator';\nimport { chartOptionsDefaults } from './options/chart-options-defaults';\nimport { seriesOptionsDefaults } from './options/series-options-defaults';\nimport { PaneApi } from './pane-api';\nimport { PriceScaleApi } from './price-scale-api';\nimport { SeriesApi } from './series-api';\nimport { TimeScaleApi } from './time-scale-api';\nfunction patchPriceFormat(priceFormat) {\n    if (priceFormat === undefined || priceFormat.type === 'custom') {\n        return;\n    }\n    const priceFormatBuiltIn = priceFormat;\n    if (priceFormatBuiltIn.minMove !== undefined && priceFormatBuiltIn.precision === undefined) {\n        priceFormatBuiltIn.precision = precisionByMinMove(priceFormatBuiltIn.minMove);\n    }\n}\nfunction migrateHandleScaleScrollOptions(options) {\n    if (isBoolean(options['handleScale'])) {\n        const handleScale = options['handleScale'];\n        options['handleScale'] = {\n            axisDoubleClickReset: {\n                time: handleScale,\n                price: handleScale,\n            },\n            axisPressedMouseMove: {\n                time: handleScale,\n                price: handleScale,\n            },\n            mouseWheel: handleScale,\n            pinch: handleScale,\n        };\n    }\n    else if (options['handleScale'] !== undefined) {\n        const { axisPressedMouseMove, axisDoubleClickReset } = options['handleScale'];\n        if (isBoolean(axisPressedMouseMove)) {\n            options['handleScale'].axisPressedMouseMove = {\n                time: axisPressedMouseMove,\n                price: axisPressedMouseMove,\n            };\n        }\n        if (isBoolean(axisDoubleClickReset)) {\n            options['handleScale'].axisDoubleClickReset = {\n                time: axisDoubleClickReset,\n                price: axisDoubleClickReset,\n            };\n        }\n    }\n    const handleScroll = options['handleScroll'];\n    if (isBoolean(handleScroll)) {\n        options['handleScroll'] = {\n            horzTouchDrag: handleScroll,\n            vertTouchDrag: handleScroll,\n            mouseWheel: handleScroll,\n            pressedMouseMove: handleScroll,\n        };\n    }\n}\nfunction toInternalOptions(options) {\n    migrateHandleScaleScrollOptions(options);\n    return options;\n}\nexport class ChartApi {\n    constructor(container, horzScaleBehavior, options) {\n        this._seriesMap = new Map();\n        this._seriesMapReversed = new Map();\n        this._clickedDelegate = new Delegate();\n        this._dblClickedDelegate = new Delegate();\n        this._crosshairMovedDelegate = new Delegate();\n        this._panes = new WeakMap();\n        this._dataLayer = new DataLayer(horzScaleBehavior);\n        const internalOptions = (options === undefined) ?\n            clone(chartOptionsDefaults()) :\n            merge(clone(chartOptionsDefaults()), toInternalOptions(options));\n        this._horzScaleBehavior = horzScaleBehavior;\n        this._chartWidget = new ChartWidget(container, internalOptions, horzScaleBehavior);\n        this._chartWidget.clicked().subscribe((paramSupplier) => {\n            if (this._clickedDelegate.hasListeners()) {\n                this._clickedDelegate.fire(this._convertMouseParams(paramSupplier()));\n            }\n        }, this);\n        this._chartWidget.dblClicked().subscribe((paramSupplier) => {\n            if (this._dblClickedDelegate.hasListeners()) {\n                this._dblClickedDelegate.fire(this._convertMouseParams(paramSupplier()));\n            }\n        }, this);\n        this._chartWidget.crosshairMoved().subscribe((paramSupplier) => {\n            if (this._crosshairMovedDelegate.hasListeners()) {\n                this._crosshairMovedDelegate.fire(this._convertMouseParams(paramSupplier()));\n            }\n        }, this);\n        const model = this._chartWidget.model();\n        this._timeScaleApi = new TimeScaleApi(model, this._chartWidget.timeAxisWidget(), this._horzScaleBehavior);\n    }\n    remove() {\n        this._chartWidget.clicked().unsubscribeAll(this);\n        this._chartWidget.dblClicked().unsubscribeAll(this);\n        this._chartWidget.crosshairMoved().unsubscribeAll(this);\n        this._timeScaleApi.destroy();\n        this._chartWidget.destroy();\n        this._seriesMap.clear();\n        this._seriesMapReversed.clear();\n        this._clickedDelegate.destroy();\n        this._dblClickedDelegate.destroy();\n        this._crosshairMovedDelegate.destroy();\n        this._dataLayer.destroy();\n    }\n    resize(width, height, forceRepaint) {\n        if (this.autoSizeActive()) {\n            // We return early here instead of checking this within the actual _chartWidget.resize method\n            // because this should only apply to external resize requests.\n            warn(`Height and width values ignored because 'autoSize' option is enabled.`);\n            return;\n        }\n        this._chartWidget.resize(width, height, forceRepaint);\n    }\n    addCustomSeries(customPaneView, options = {}, paneIndex = 0) {\n        const paneView = ensure(customPaneView);\n        const definition = createCustomSeriesDefinition(paneView);\n        return this._addSeriesImpl(definition, options, paneIndex);\n    }\n    addSeries(definition, options = {}, paneIndex = 0) {\n        return this._addSeriesImpl(definition, options, paneIndex);\n    }\n    removeSeries(seriesApi) {\n        const series = ensureDefined(this._seriesMap.get(seriesApi));\n        const update = this._dataLayer.removeSeries(series);\n        const model = this._chartWidget.model();\n        model.removeSeries(series);\n        this._sendUpdateToChart(update);\n        this._seriesMap.delete(seriesApi);\n        this._seriesMapReversed.delete(series);\n    }\n    applyNewData(series, data) {\n        this._sendUpdateToChart(this._dataLayer.setSeriesData(series, data));\n    }\n    updateData(series, data, historicalUpdate) {\n        this._sendUpdateToChart(this._dataLayer.updateSeriesData(series, data, historicalUpdate));\n    }\n    popData(series, count) {\n        const [poppedData, update] = this._dataLayer.popSeriesData(series, count);\n        if (poppedData.length !== 0) {\n            this._sendUpdateToChart(update);\n        }\n        return poppedData;\n    }\n    subscribeClick(handler) {\n        this._clickedDelegate.subscribe(handler);\n    }\n    unsubscribeClick(handler) {\n        this._clickedDelegate.unsubscribe(handler);\n    }\n    subscribeCrosshairMove(handler) {\n        this._crosshairMovedDelegate.subscribe(handler);\n    }\n    unsubscribeCrosshairMove(handler) {\n        this._crosshairMovedDelegate.unsubscribe(handler);\n    }\n    subscribeDblClick(handler) {\n        this._dblClickedDelegate.subscribe(handler);\n    }\n    unsubscribeDblClick(handler) {\n        this._dblClickedDelegate.unsubscribe(handler);\n    }\n    priceScale(priceScaleId, paneIndex = 0) {\n        return new PriceScaleApi(this._chartWidget, priceScaleId, paneIndex);\n    }\n    timeScale() {\n        return this._timeScaleApi;\n    }\n    applyOptions(options) {\n        if (process.env.NODE_ENV === 'development') {\n            const colorSpace = options.layout?.colorSpace;\n            if (colorSpace !== undefined && colorSpace !== this.options().layout.colorSpace) {\n                throw new Error(`colorSpace option should not be changed once the chart has been created.`);\n            }\n            const colorParsers = options.layout?.colorParsers;\n            if (colorParsers !== undefined && colorParsers !== this.options().layout.colorParsers) {\n                throw new Error(`colorParsers option should not be changed once the chart has been created.`);\n            }\n        }\n        this._chartWidget.applyOptions(toInternalOptions(options));\n    }\n    options() {\n        return this._chartWidget.options();\n    }\n    takeScreenshot(addTopLayer = false, includeCrosshair = false) {\n        let crosshairMode;\n        let screenshotCanvas;\n        try {\n            if (!includeCrosshair) {\n                crosshairMode = this._chartWidget.model().options().crosshair.mode;\n                this._chartWidget.applyOptions({\n                    crosshair: {\n                        mode: 2 /* CrosshairMode.Hidden */,\n                    },\n                });\n            }\n            screenshotCanvas = this._chartWidget.takeScreenshot(addTopLayer);\n        }\n        finally {\n            if (!includeCrosshair && crosshairMode !== undefined) {\n                this._chartWidget.model().applyOptions({\n                    crosshair: {\n                        mode: crosshairMode,\n                    },\n                });\n            }\n        }\n        return screenshotCanvas;\n    }\n    addPane(preserveEmptyPane = false) {\n        const pane = this._chartWidget.model().addPane();\n        pane.setPreserveEmptyPane(preserveEmptyPane);\n        return this._getPaneApi(pane);\n    }\n    removePane(index) {\n        this._chartWidget.model().removePane(index);\n    }\n    swapPanes(first, second) {\n        this._chartWidget.model().swapPanes(first, second);\n    }\n    autoSizeActive() {\n        return this._chartWidget.autoSizeActive();\n    }\n    chartElement() {\n        return this._chartWidget.element();\n    }\n    panes() {\n        return this._chartWidget.model().panes().map((pane) => this._getPaneApi(pane));\n    }\n    paneSize(paneIndex = 0) {\n        const size = this._chartWidget.paneSize(paneIndex);\n        return {\n            height: size.height,\n            width: size.width,\n        };\n    }\n    setCrosshairPosition(price, horizontalPosition, seriesApi) {\n        const series = this._seriesMap.get(seriesApi);\n        if (series === undefined) {\n            return;\n        }\n        const pane = this._chartWidget.model().paneForSource(series);\n        if (pane === null) {\n            return;\n        }\n        this._chartWidget.model().setAndSaveSyntheticPosition(price, horizontalPosition, pane);\n    }\n    clearCrosshairPosition() {\n        this._chartWidget.model().clearCurrentPosition(true);\n    }\n    horzBehaviour() {\n        return this._horzScaleBehavior;\n    }\n    _addSeriesImpl(definition, options = {}, paneIndex = 0) {\n        assert(isSeriesDefinition(definition));\n        patchPriceFormat(options.priceFormat);\n        if (definition.type === 'Candlestick') {\n            fillUpDownCandlesticksColors(options);\n        }\n        const strictOptions = merge(clone(seriesOptionsDefaults), clone(definition.defaultOptions), options);\n        const createPaneView = definition.createPaneView;\n        const series = new Series(this._chartWidget.model(), definition.type, strictOptions, createPaneView, definition.customPaneView);\n        this._chartWidget.model().addSeriesToPane(series, paneIndex);\n        const res = new SeriesApi(series, this, this, this, this._horzScaleBehavior, (pane) => this._getPaneApi(pane));\n        this._seriesMap.set(res, series);\n        this._seriesMapReversed.set(series, res);\n        return res;\n    }\n    _sendUpdateToChart(update) {\n        const model = this._chartWidget.model();\n        model.updateTimeScale(update.timeScale.baseIndex, update.timeScale.points, update.timeScale.firstChangedPointIndex);\n        update.series.forEach((value, series) => series.setData(value.data, value.info));\n        model.timeScale().recalculateIndicesWithData();\n        model.recalculateAllPanes();\n    }\n    _mapSeriesToApi(series) {\n        return ensureDefined(this._seriesMapReversed.get(series));\n    }\n    _convertMouseParams(param) {\n        const seriesData = new Map();\n        param.seriesData.forEach((plotRow, series) => {\n            const seriesType = series.seriesType();\n            const data = getSeriesDataCreator(seriesType)(plotRow);\n            if (seriesType !== 'Custom') {\n                assert(isFulfilledData(data));\n            }\n            else {\n                const customWhitespaceChecker = series.customSeriesWhitespaceCheck();\n                assert(!customWhitespaceChecker || customWhitespaceChecker(data) === false);\n            }\n            seriesData.set(this._mapSeriesToApi(series), data);\n        });\n        const hoveredSeries = param.hoveredSeries === undefined ||\n            !this._seriesMapReversed.has(param.hoveredSeries)\n            ? undefined\n            : this._mapSeriesToApi(param.hoveredSeries);\n        return {\n            time: param.originalTime,\n            logical: param.index,\n            point: param.point,\n            paneIndex: param.paneIndex,\n            hoveredSeries,\n            hoveredObjectId: param.hoveredObject,\n            seriesData,\n            sourceEvent: param.touchMouseEventData,\n        };\n    }\n    _getPaneApi(pane) {\n        let result = this._panes.get(pane);\n        if (!result) {\n            result = new PaneApi(this._chartWidget, (series) => this._mapSeriesToApi(series), pane, this);\n            this._panes.set(pane, result);\n        }\n        return result;\n    }\n}\n", "import { assert } from '../helpers/assertions';\nimport { isString } from '../helpers/strict-type-checks';\nimport { HorzScaleBehaviorTime } from '../model/horz-scale-behavior-time/horz-scale-behavior-time';\nimport { ChartApi } from './chart-api';\nexport function fetchHtmlElement(container) {\n    if (isString(container)) {\n        const element = document.getElementById(container);\n        assert(element !== null, `Cannot find element in DOM with id=${container}`);\n        return element;\n    }\n    return container;\n}\n/**\n * This function is the main entry point of the Lightweight Charting Library. If you are using time values\n * for the horizontal scale then it is recommended that you rather use the {@link createChart} function.\n *\n * @template HorzScaleItem - type of points on the horizontal scale\n * @template THorzScaleBehavior - type of horizontal axis strategy that encapsulate all the specific behaviors of the horizontal scale type\n *\n * @param container - ID of HTML element or element itself\n * @param horzScaleBehavior - Horizontal scale behavior\n * @param options - Any subset of options to be applied at start.\n * @returns An interface to the created chart\n */\nexport function createChartEx(container, horzScaleBehavior, options) {\n    const htmlElement = fetchHtmlElement(container);\n    const res = new ChartApi(htmlElement, horzScaleBehavior, options);\n    horzScaleBehavior.setOptions(res.options());\n    return res;\n}\n/**\n * This function is the simplified main entry point of the Lightweight Charting Library with time points for the horizontal scale.\n *\n * @param container - ID of HTML element or element itself\n * @param options - Any subset of options to be applied at start.\n * @returns An interface to the created chart\n */\nexport function createChart(container, options) {\n    return createChartEx(container, new HorzScaleBehaviorTime(), HorzScaleBehaviorTime.applyDefaults(options));\n}\n/**\n * Provides the default implementation of the horizontal scale (time-based) that can be used as a base for extending the horizontal scale with custom behavior.\n * This allows for the introduction of custom functionality without re-implementing the entire {@link IHorzScaleBehavior}&lt;{@link Time}&gt; interface.\n *\n * For further details, refer to the {@link createChartEx} chart constructor method.\n *\n * @returns An uninitialized class implementing the {@link IHorzScaleBehavior}&lt;{@link Time}&gt; interface\n */\nexport function defaultHorzScaleBehavior() {\n    return HorzScaleBehaviorTime;\n}\n", "import { undefinedIfNull } from '../../helpers/strict-type-checks';\nimport { SeriesPaneViewBase } from './series-pane-view-base';\nexport class LinePaneViewBase extends SeriesPaneViewBase {\n    constructor(series, model) {\n        super(series, model, true);\n    }\n    _convertToCoordinates(priceScale, timeScale, firstValue) {\n        timeScale.indexesToCoordinates(this._items, undefinedIfNull(this._itemsVisibleRange));\n        priceScale.pointsArrayToCoordinates(this._items, firstValue, undefinedIfNull(this._itemsVisibleRange));\n    }\n    _createRawItemBase(time, price) {\n        return {\n            time: time,\n            price: price,\n            x: NaN,\n            y: NaN,\n        };\n    }\n    _fillRawPoints() {\n        const colorer = this._series.barColorer();\n        this._items = this._series.conflatedBars().rows().map((row) => {\n            const isConflated = (row.originalDataCount ?? 1) > 1;\n            let value;\n            if (isConflated) {\n                const high = row.value[1 /* PlotRowValueIndex.High */];\n                const low = row.value[2 /* PlotRowValueIndex.Low */];\n                const close = row.value[3 /* PlotRowValueIndex.Close */];\n                const highMove = Math.abs(high - close);\n                const lowMove = Math.abs(low - close);\n                // in case of conflation we want to show more extreme price to represent the range\n                // and we choose the one which is further from the close price\n                value = (highMove > lowMove) ? high : low;\n            }\n            else {\n                value = row.value[3 /* PlotRowValueIndex.Close */];\n            }\n            return this._createRawItem(row.index, value, colorer);\n        });\n    }\n}\n", "export function drawSeriesPointMarkers(renderingScope, items, pointMarkersRadius, visibleRange, \n// the values returned by styleGetter are compared using the operator !==,\n// so if styleGetter returns objects, then styleGetter should return the same object for equal styles\nstyleGetter) {\n    if (visibleRange.to - visibleRange.from <= 0) {\n        return;\n    }\n    const { horizontalPixelRatio, verticalPixelRatio, context } = renderingScope;\n    let prevStyle = null;\n    const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n    const correction = (tickWidth % 2) / 2;\n    const radius = pointMarkersRadius * verticalPixelRatio + correction;\n    for (let i = visibleRange.to - 1; i >= visibleRange.from; --i) {\n        const point = items[i];\n        if (point) {\n            const style = styleGetter(renderingScope, point);\n            if (style !== prevStyle) {\n                context.beginPath();\n                if (prevStyle !== null) {\n                    context.fill();\n                }\n                context.fillStyle = style;\n                prevStyle = style;\n            }\n            const centerX = Math.round(point.x * horizontalPixelRatio) + correction; // correct x coordinate only\n            const centerY = point.y * verticalPixelRatio;\n            context.moveTo(centerX, centerY);\n            context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        }\n    }\n    context.fill();\n}\n", "// eslint-disable-next-line max-params, complexity\nexport function walkLine(renderingScope, items, lineType, visibleRange, barWidth, \n// the values returned by styleGetter are compared using the operator !==,\n// so if styleGetter returns objects, then styleGetter should return the same object for equal styles\nstyleGetter, finishStyledArea) {\n    if (items.length === 0 || visibleRange.from >= items.length || visibleRange.to <= 0) {\n        return;\n    }\n    const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n    const firstItem = items[visibleRange.from];\n    let currentStyle = styleGetter(renderingScope, firstItem);\n    let currentStyleFirstItem = firstItem;\n    if (visibleRange.to - visibleRange.from < 2) {\n        const halfBarWidth = barWidth / 2;\n        ctx.beginPath();\n        const item1 = { x: firstItem.x - halfBarWidth, y: firstItem.y };\n        const item2 = { x: firstItem.x + halfBarWidth, y: firstItem.y };\n        ctx.moveTo(item1.x * horizontalPixelRatio, item1.y * verticalPixelRatio);\n        ctx.lineTo(item2.x * horizontalPixelRatio, item2.y * verticalPixelRatio);\n        finishStyledArea(renderingScope, currentStyle, item1, item2);\n    }\n    else {\n        const changeStyle = (newStyle, currentItem) => {\n            finishStyledArea(renderingScope, currentStyle, currentStyleFirstItem, currentItem);\n            ctx.beginPath();\n            currentStyle = newStyle;\n            currentStyleFirstItem = currentItem;\n        };\n        let currentItem = currentStyleFirstItem;\n        ctx.beginPath();\n        ctx.moveTo(firstItem.x * horizontalPixelRatio, firstItem.y * verticalPixelRatio);\n        for (let i = visibleRange.from + 1; i < visibleRange.to; ++i) {\n            currentItem = items[i];\n            const itemStyle = styleGetter(renderingScope, currentItem);\n            switch (lineType) {\n                case 0 /* LineType.Simple */:\n                    ctx.lineTo(currentItem.x * horizontalPixelRatio, currentItem.y * verticalPixelRatio);\n                    break;\n                case 1 /* LineType.WithSteps */:\n                    ctx.lineTo(currentItem.x * horizontalPixelRatio, items[i - 1].y * verticalPixelRatio);\n                    if (itemStyle !== currentStyle) {\n                        changeStyle(itemStyle, currentItem);\n                        ctx.lineTo(currentItem.x * horizontalPixelRatio, items[i - 1].y * verticalPixelRatio);\n                    }\n                    ctx.lineTo(currentItem.x * horizontalPixelRatio, currentItem.y * verticalPixelRatio);\n                    break;\n                case 2 /* LineType.Curved */: {\n                    const [cp1, cp2] = getControlPoints(items, i - 1, i);\n                    ctx.bezierCurveTo(cp1.x * horizontalPixelRatio, cp1.y * verticalPixelRatio, cp2.x * horizontalPixelRatio, cp2.y * verticalPixelRatio, currentItem.x * horizontalPixelRatio, currentItem.y * verticalPixelRatio);\n                    break;\n                }\n            }\n            if (lineType !== 1 /* LineType.WithSteps */ && itemStyle !== currentStyle) {\n                changeStyle(itemStyle, currentItem);\n                ctx.moveTo(currentItem.x * horizontalPixelRatio, currentItem.y * verticalPixelRatio);\n            }\n        }\n        if (currentStyleFirstItem !== currentItem || currentStyleFirstItem === currentItem && lineType === 1 /* LineType.WithSteps */) {\n            finishStyledArea(renderingScope, currentStyle, currentStyleFirstItem, currentItem);\n        }\n    }\n}\nconst curveTension = 6;\nfunction subtract(p1, p2) {\n    return { x: p1.x - p2.x, y: p1.y - p2.y };\n}\nfunction add(p1, p2) {\n    return { x: p1.x + p2.x, y: p1.y + p2.y };\n}\nfunction divide(p1, n) {\n    return { x: p1.x / n, y: p1.y / n };\n}\n/**\n * @returns Two control points that can be used as arguments to {@link CanvasRenderingContext2D.bezierCurveTo} to draw a curved line between `points[fromPointIndex]` and `points[toPointIndex]`.\n */\nexport function getControlPoints(points, fromPointIndex, toPointIndex) {\n    const beforeFromPointIndex = Math.max(0, fromPointIndex - 1);\n    const afterToPointIndex = Math.min(points.length - 1, toPointIndex + 1);\n    const cp1 = add(points[fromPointIndex], divide(subtract(points[toPointIndex], points[beforeFromPointIndex]), curveTension));\n    const cp2 = subtract(points[toPointIndex], divide(subtract(points[afterToPointIndex], points[fromPointIndex]), curveTension));\n    return [cp1, cp2];\n}\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { setLineStyle } from './draw-line';\nimport { drawSeriesPointMarkers } from './draw-series-point-markers';\nimport { walkLine } from './walk-line';\nfunction finishStyledArea(scope, style) {\n    const ctx = scope.context;\n    ctx.strokeStyle = style;\n    ctx.stroke();\n}\nexport class PaneRendererLineBase extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    _drawImpl(renderingScope) {\n        if (this._data === null) {\n            return;\n        }\n        const { items, visibleRange, barWidth, lineType, lineWidth, lineStyle, pointMarkersRadius } = this._data;\n        if (visibleRange === null) {\n            return;\n        }\n        const ctx = renderingScope.context;\n        ctx.lineCap = 'butt';\n        ctx.lineWidth = lineWidth * renderingScope.verticalPixelRatio;\n        setLineStyle(ctx, lineStyle);\n        ctx.lineJoin = 'round';\n        const styleGetter = this._strokeStyle.bind(this);\n        if (lineType !== undefined) {\n            walkLine(renderingScope, items, lineType, visibleRange, barWidth, styleGetter, finishStyledArea);\n        }\n        if (pointMarkersRadius) {\n            drawSeriesPointMarkers(renderingScope, items, pointMarkersRadius, visibleRange, styleGetter);\n        }\n    }\n}\n", "import { PaneRendererLineBase } from './line-renderer-base';\nexport class PaneRendererLine extends PaneRendererLineBase {\n    _strokeStyle(renderingScope, item) {\n        return item.lineColor;\n    }\n}\n", "import { LinePaneViewBase } from '../../model/series/line-pane-view-base';\nimport { PaneRendererLine } from '../../renderers/line-renderer';\nexport class SeriesLinePaneView extends LinePaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._renderer = new PaneRendererLine();\n    }\n    _createRawItem(time, price, colorer) {\n        return {\n            ...this._createRawItemBase(time, price),\n            ...colorer.barStyle(time),\n        };\n    }\n    _prepareRendererData() {\n        const options = this._series.options();\n        const data = {\n            items: this._items,\n            lineStyle: options.lineStyle,\n            lineType: options.lineVisible ? options.lineType : undefined,\n            lineWidth: options.lineWidth,\n            pointMarkersRadius: options.pointMarkersVisible ? (options.pointMarkersRadius || options.lineWidth / 2 + 2) : undefined,\n            visibleRange: this._itemsVisibleRange,\n            barWidth: this._model.timeScale().barSpacing(),\n        };\n        this._renderer.setData(data);\n    }\n}\n", "import { SeriesLinePaneView } from './line-pane-view';\nexport const lineStyleDefaults = {\n    color: '#2196f3',\n    lineStyle: 0 /* LineStyle.Solid */,\n    lineWidth: 3,\n    lineType: 0 /* LineType.Simple */,\n    lineVisible: true,\n    crosshairMarkerVisible: true,\n    crosshairMarkerRadius: 4,\n    crosshairMarkerBorderColor: '',\n    crosshairMarkerBorderWidth: 2,\n    crosshairMarkerBackgroundColor: '',\n    lastPriceAnimation: 0 /* LastPriceAnimationMode.Disabled */,\n    pointMarkersVisible: false,\n};\nconst createPaneView = (series, model) => new SeriesLinePaneView(series, model);\nexport const createLineSeries = () => {\n    const definition = {\n        type: 'Line',\n        isBuiltIn: true,\n        defaultOptions: lineStyleDefaults,\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n    };\n    return definition;\n};\nexport const lineSeries = createLineSeries();\n", "import { Delegate } from '../../helpers/delegate';\nfunction createDebouncedMicroTaskHandler(callback) {\n    let scheduled = false;\n    return function (...args) {\n        if (!scheduled) {\n            scheduled = true;\n            queueMicrotask(() => {\n                callback(...args);\n                scheduled = false;\n            });\n        }\n    };\n}\nfunction markWithGreaterWeight(a, b) {\n    return a.weight > b.weight ? a : b;\n}\nfunction toInternalHorzScaleItem(item) {\n    return item;\n}\nfunction fromInternalHorzScaleItem(item) {\n    return item;\n}\nexport class YieldCurveHorzScaleBehavior {\n    constructor() {\n        this._pointsChangedDelegate = new Delegate();\n        this._invalidateWhitespace = createDebouncedMicroTaskHandler(() => this._pointsChangedDelegate.fire(this._largestIndex));\n        this._largestIndex = 0;\n    }\n    /** Data changes might require that the whitespace be generated again */\n    whitespaceInvalidated() {\n        return this._pointsChangedDelegate;\n    }\n    destroy() {\n        this._pointsChangedDelegate.destroy();\n    }\n    options() {\n        return this._options;\n    }\n    setOptions(options) {\n        this._options = options;\n    }\n    preprocessData(data) {\n        // No preprocessing needed for yield curve data\n    }\n    updateFormatter(options) {\n        if (!this._options) {\n            return;\n        }\n        this._options.localization = options;\n    }\n    createConverterToInternalObj(data) {\n        this._invalidateWhitespace();\n        return (time) => {\n            if (time > this._largestIndex) {\n                this._largestIndex = time;\n            }\n            return toInternalHorzScaleItem(time);\n        };\n    }\n    key(internalItem) {\n        return internalItem;\n    }\n    cacheKey(internalItem) {\n        return fromInternalHorzScaleItem(internalItem);\n    }\n    convertHorzItemToInternal(item) {\n        return toInternalHorzScaleItem(item);\n    }\n    formatHorzItem(item) {\n        return this._formatTime(item);\n    }\n    formatTickmark(item) {\n        return this._formatTime(item.time);\n    }\n    maxTickMarkWeight(marks) {\n        return marks.reduce(markWithGreaterWeight, marks[0]).weight;\n    }\n    fillWeightsForPoints(sortedTimePoints, startIndex) {\n        const timeWeight = (time) => {\n            if (time % 120 === 0) {\n                return 10;\n            }\n            if (time % 60 === 0) {\n                return 9;\n            }\n            if (time % 36 === 0) {\n                return 8;\n            }\n            if (time % 12 === 0) {\n                return 7;\n            }\n            if (time % 6 === 0) {\n                return 6;\n            }\n            if (time % 3 === 0) {\n                return 5;\n            }\n            if (time % 1 === 0) {\n                return 4;\n            }\n            return 0;\n        };\n        for (let index = startIndex; index < sortedTimePoints.length; ++index) {\n            sortedTimePoints[index].timeWeight = timeWeight(fromInternalHorzScaleItem(sortedTimePoints[index].time));\n        }\n        this._largestIndex = fromInternalHorzScaleItem(sortedTimePoints[sortedTimePoints.length - 1].time);\n        this._invalidateWhitespace();\n    }\n    _formatTime(months) {\n        if (this._options.localization?.timeFormatter) {\n            return this._options.localization.timeFormatter(months);\n        }\n        if (months < 12) {\n            return `${months}M`;\n        }\n        const years = Math.floor(months / 12);\n        const remainingMonths = months % 12;\n        if (remainingMonths === 0) {\n            return `${years}Y`;\n        }\n        return `${years}Y${remainingMonths}M`;\n    }\n}\n", "export const yieldChartOptionsDefaults = {\n    baseResolution: 1,\n    minimumTimeRange: 120,\n    startTimeRange: 0,\n};\n", "import { merge } from '../helpers/strict-type-checks';\nimport { lineSeries } from '../model/series/line-series';\nimport { YieldCurveHorzScaleBehavior } from '../model/yield-curve-horz-scale-behavior/yield-curve-horz-scale-behavior';\nimport { ChartApi } from './chart-api';\nimport { yieldChartOptionsDefaults } from './options/yield-curve-chart-options-defaults';\nfunction generateWhitespaceData({ start, end, resolution, }) {\n    return Array.from({ length: Math.floor((end - start) / resolution) + 1 }, \n    // eslint-disable-next-line quote-props\n    (item, i) => ({ 'time': start + i * resolution }));\n}\nfunction buildWhitespaceState(options, lastIndex) {\n    return {\n        start: Math.max(0, options.startTimeRange),\n        end: Math.max(0, options.minimumTimeRange, lastIndex || 0),\n        resolution: Math.max(1, options.baseResolution),\n    };\n}\nconst generateWhitespaceHash = ({ start, end, resolution, }) => `${start}~${end}~${resolution}`;\nconst defaultOptions = {\n    yieldCurve: yieldChartOptionsDefaults,\n    // and add sensible default options for yield charts which\n    // are different from the usual defaults.\n    timeScale: {\n        ignoreWhitespaceIndices: true,\n    },\n    leftPriceScale: {\n        visible: true,\n    },\n    rightPriceScale: {\n        visible: false,\n    },\n    localization: {\n        priceFormatter: (value) => {\n            return value.toFixed(3) + '%';\n        },\n    },\n};\nconst lineStyleDefaultOptionOverrides = {\n    lastValueVisible: false,\n    priceLineVisible: false,\n};\nexport class YieldChartApi extends ChartApi {\n    constructor(container, options) {\n        const fullOptions = merge(defaultOptions, options || {});\n        const horzBehaviour = new YieldCurveHorzScaleBehavior();\n        super(container, horzBehaviour, fullOptions);\n        horzBehaviour.setOptions(this.options());\n        this._initWhitespaceSeries();\n    }\n    addSeries(definition, options = {}, paneIndex = 0) {\n        if (definition.isBuiltIn && ['Area', 'Line'].includes(definition.type) === false) {\n            throw new Error('Yield curve only support Area and Line series');\n        }\n        const optionOverrides = {\n            ...lineStyleDefaultOptionOverrides,\n            ...options,\n        };\n        return super.addSeries(definition, optionOverrides, paneIndex);\n    }\n    _initWhitespaceSeries() {\n        const horzBehaviour = this.horzBehaviour();\n        const whiteSpaceSeries = this.addSeries(lineSeries);\n        let currentWhitespaceHash;\n        function updateWhitespace(lastIndex) {\n            const newWhitespaceState = buildWhitespaceState(horzBehaviour.options().yieldCurve, lastIndex);\n            const newWhitespaceHash = generateWhitespaceHash(newWhitespaceState);\n            if (newWhitespaceHash !== currentWhitespaceHash) {\n                currentWhitespaceHash = newWhitespaceHash;\n                whiteSpaceSeries.setData(generateWhitespaceData(newWhitespaceState));\n            }\n        }\n        updateWhitespace(0);\n        horzBehaviour.whitespaceInvalidated().subscribe(updateWhitespace);\n    }\n}\n", "import { fetchHtmlElement } from './create-chart';\nimport { YieldChartApi } from './yield-chart-api';\n/**\n * Creates a yield curve chart with the specified options.\n *\n * A yield curve chart differs from the default chart type\n * in the following ways:\n * - Horizontal scale is linearly spaced, and defined in monthly\n * time duration units\n * - Whitespace is ignored for the crosshair and grid lines\n *\n * @param container - ID of HTML element or element itself\n * @param options - The yield chart options.\n * @returns An interface to the created chart\n */\nexport function createYieldCurveChart(container, options) {\n    const htmlElement = fetchHtmlElement(container);\n    const chartApi = new YieldChartApi(htmlElement, options);\n    return chartApi;\n}\n", "function markWithGreaterWeight(a, b) {\n    return a.weight > b.weight ? a : b;\n}\nexport class HorzScaleBehaviorPrice {\n    options() {\n        return this._options;\n    }\n    setOptions(options) {\n        this._options = options;\n    }\n    preprocessData(data) { }\n    updateFormatter(options) {\n        if (!this._options) {\n            return;\n        }\n        this._options.localization = options;\n    }\n    createConverterToInternalObj(data) {\n        return (price) => price;\n    }\n    key(internalItem) {\n        return internalItem;\n    }\n    cacheKey(internalItem) {\n        return internalItem;\n    }\n    convertHorzItemToInternal(item) {\n        return item;\n    }\n    formatHorzItem(item) {\n        return item.toFixed(this._precision());\n    }\n    formatTickmark(item, localizationOptions) {\n        return item.time.toFixed(this._precision());\n    }\n    maxTickMarkWeight(marks) {\n        return marks.reduce(markWithGreaterWeight, marks[0]).weight;\n    }\n    fillWeightsForPoints(sortedTimePoints, startIndex) {\n        const priceWeight = (price) => {\n            if (price === Math.ceil(price / 100) * 100) {\n                return 8;\n            }\n            if (price === Math.ceil(price / 50) * 50) {\n                return 7;\n            }\n            if (price === Math.ceil(price / 25) * 25) {\n                return 6;\n            }\n            if (price === Math.ceil(price / 10) * 10) {\n                return 5;\n            }\n            if (price === Math.ceil(price / 5) * 5) {\n                return 4;\n            }\n            if (price === Math.ceil(price)) {\n                return 3;\n            }\n            if (price * 2 === Math.ceil(price * 2)) {\n                return 1;\n            }\n            return 0;\n        };\n        for (let index = startIndex; index < sortedTimePoints.length; ++index) {\n            sortedTimePoints[index].timeWeight = priceWeight(sortedTimePoints[index].time);\n        }\n    }\n    _precision() {\n        return this._options.localization\n            .precision;\n    }\n}\n", "import { HorzScaleBehaviorPrice } from '../model/horz-scale-behavior-price/horz-scale-behaviour-price';\nimport { createChartEx } from './create-chart';\n/**\n * Creates an 'options' chart with price values on the horizontal scale.\n *\n * This function is used to create a specialized chart type where the horizontal scale\n * represents price values instead of time. It's particularly useful for visualizing\n * option chains, price distributions, or any data where price is the primary x-axis metric.\n *\n * @param container - The DOM element or its id where the chart will be rendered.\n * @param options - Optional configuration options for the price chart.\n * @returns An instance of IChartApiBase configured for price-based horizontal scaling.\n */\nexport function createOptionsChart(container, options) {\n    return createChartEx(container, new HorzScaleBehaviorPrice(), options);\n}\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { setLineStyle } from './draw-line';\nimport { walkLine } from './walk-line';\nfunction finishStyledArea(baseLevelCoordinate, scope, style, areaFirstItem, newAreaFirstItem) {\n    const { context, horizontalPixelRatio, verticalPixelRatio } = scope;\n    context.lineTo(newAreaFirstItem.x * horizontalPixelRatio, baseLevelCoordinate * verticalPixelRatio);\n    context.lineTo(areaFirstItem.x * horizontalPixelRatio, baseLevelCoordinate * verticalPixelRatio);\n    context.closePath();\n    context.fillStyle = style;\n    context.fill();\n}\nexport class PaneRendererAreaBase extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    _drawImpl(renderingScope) {\n        if (this._data === null) {\n            return;\n        }\n        const { items, visibleRange, barWidth, lineWidth, lineStyle, lineType } = this._data;\n        const baseLevelCoordinate = this._data.baseLevelCoordinate ??\n            (this._data.invertFilledArea ? 0 : renderingScope.mediaSize.height);\n        if (visibleRange === null) {\n            return;\n        }\n        const ctx = renderingScope.context;\n        ctx.lineCap = 'butt';\n        ctx.lineJoin = 'round';\n        ctx.lineWidth = lineWidth;\n        setLineStyle(ctx, lineStyle);\n        // walk lines with width=1 to have more accurate gradient's filling\n        ctx.lineWidth = 1;\n        walkLine(renderingScope, items, lineType, visibleRange, barWidth, this._fillStyle.bind(this), finishStyledArea.bind(null, baseLevelCoordinate));\n    }\n}\n", "import { clamp } from '../helpers/mathex';\nexport class GradientStyleCache {\n    // eslint-disable-next-line complexity\n    get(scope, params) {\n        const cachedParams = this._params;\n        const { topColor1, topColor2, bottomColor1, bottomColor2, baseLevelCoordinate, topCoordinate, bottomCoordinate, } = params;\n        if (this._cachedValue === undefined ||\n            cachedParams === undefined ||\n            cachedParams.topColor1 !== topColor1 ||\n            cachedParams.topColor2 !== topColor2 ||\n            cachedParams.bottomColor1 !== bottomColor1 ||\n            cachedParams.bottomColor2 !== bottomColor2 ||\n            cachedParams.baseLevelCoordinate !== baseLevelCoordinate ||\n            cachedParams.topCoordinate !== topCoordinate ||\n            cachedParams.bottomCoordinate !== bottomCoordinate) {\n            const { verticalPixelRatio } = scope;\n            const multiplier = baseLevelCoordinate || topCoordinate > 0 ? verticalPixelRatio : 1;\n            const top = topCoordinate * multiplier;\n            const bottom = bottomCoordinate === scope.bitmapSize.height ? bottomCoordinate : bottomCoordinate * multiplier;\n            const baseline = (baseLevelCoordinate ?? 0) * multiplier;\n            const gradient = scope.context.createLinearGradient(0, top, 0, bottom);\n            gradient.addColorStop(0, topColor1);\n            if (baseLevelCoordinate !== null && baseLevelCoordinate !== undefined) {\n                const range = bottom - top;\n                const baselineRatio = clamp(((baseline - top) / range), 0, 1);\n                gradient.addColorStop(baselineRatio, topColor2);\n                gradient.addColorStop(baselineRatio, bottomColor1);\n            }\n            gradient.addColorStop(1, bottomColor2);\n            this._cachedValue = gradient;\n            this._params = params;\n        }\n        return this._cachedValue;\n    }\n}\n", "import { PaneRendererAreaBase } from './area-renderer-base';\nimport { GradientStyleCache } from './gradient-style-cache';\nexport class PaneRendererBaselineArea extends PaneRendererAreaBase {\n    constructor() {\n        super(...arguments);\n        this._fillCache = new GradientStyleCache();\n    }\n    _fillStyle(renderingScope, item) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const data = this._data;\n        return this._fillCache.get(renderingScope, {\n            topColor1: item.topFillColor1,\n            topColor2: item.topFillColor2,\n            bottomColor1: item.bottomFillColor1,\n            bottomColor2: item.bottomFillColor2,\n            baseLevelCoordinate: data.baseLevelCoordinate,\n            topCoordinate: data.topCoordinate ?? 0,\n            bottomCoordinate: data.bottomCoordinate ?? renderingScope.bitmapSize.height,\n        });\n    }\n}\n", "import { GradientStyleCache } from './gradient-style-cache';\nimport { PaneRendererLineBase } from './line-renderer-base';\nexport class PaneRendererBaselineLine extends PaneRendererLineBase {\n    constructor() {\n        super(...arguments);\n        this._strokeCache = new GradientStyleCache();\n    }\n    _strokeStyle(renderingScope, item) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const data = this._data;\n        return this._strokeCache.get(renderingScope, {\n            topColor1: item.topLineColor,\n            topColor2: item.topLineColor,\n            bottomColor1: item.bottomLineColor,\n            bottomColor2: item.bottomLineColor,\n            baseLevelCoordinate: data.baseLevelCoordinate,\n            topCoordinate: data.topCoordinate ?? 0,\n            bottomCoordinate: data.bottomCoordinate ?? renderingScope.bitmapSize.height,\n        });\n    }\n}\n", "import { PaneRendererBaselineArea } from '../../renderers/baseline-renderer-area';\nimport { PaneRendererBaselineLine } from '../../renderers/baseline-renderer-line';\nimport { CompositeRenderer } from '../../renderers/composite-renderer';\nimport { LinePaneViewBase } from './line-pane-view-base';\nexport class SeriesBaselinePaneView extends LinePaneViewBase {\n    constructor(series, model) {\n        super(series, model);\n        this._renderer = new CompositeRenderer();\n        this._baselineAreaRenderer = new PaneRendererBaselineArea();\n        this._baselineLineRenderer = new PaneRendererBaselineLine();\n        this._renderer.setRenderers([this._baselineAreaRenderer, this._baselineLineRenderer]);\n    }\n    _createRawItem(time, price, colorer) {\n        return {\n            ...this._createRawItemBase(time, price),\n            ...colorer.barStyle(time),\n        };\n    }\n    _prepareRendererData() {\n        const firstValue = this._series.firstValue();\n        if (firstValue === null) {\n            return;\n        }\n        const options = this._series.options();\n        const baseLevelCoordinate = this._series.priceScale().priceToCoordinate(options.baseValue.price, firstValue.value);\n        const barWidth = this._model.timeScale().barSpacing();\n        if (this._itemsVisibleRange === null || this._items.length === 0) {\n            return;\n        }\n        let topCoordinate;\n        let bottomCoordinate;\n        if (options.relativeGradient) {\n            topCoordinate = this._items[this._itemsVisibleRange.from].y;\n            bottomCoordinate = this._items[this._itemsVisibleRange.from].y;\n            for (let i = this._itemsVisibleRange.from; i < this._itemsVisibleRange.to; i++) {\n                const item = this._items[i];\n                if (item.y < topCoordinate) {\n                    topCoordinate = item.y;\n                }\n                if (item.y > bottomCoordinate) {\n                    bottomCoordinate = item.y;\n                }\n            }\n        }\n        this._baselineAreaRenderer.setData({\n            items: this._items,\n            lineWidth: options.lineWidth,\n            lineStyle: options.lineStyle,\n            lineType: options.lineType,\n            baseLevelCoordinate,\n            topCoordinate,\n            bottomCoordinate,\n            invertFilledArea: false,\n            visibleRange: this._itemsVisibleRange,\n            barWidth,\n        });\n        this._baselineLineRenderer.setData({\n            items: this._items,\n            lineWidth: options.lineWidth,\n            lineStyle: options.lineStyle,\n            lineType: options.lineVisible ? options.lineType : undefined,\n            pointMarkersRadius: options.pointMarkersVisible ? (options.pointMarkersRadius || options.lineWidth / 2 + 2) : undefined,\n            baseLevelCoordinate,\n            topCoordinate,\n            bottomCoordinate,\n            visibleRange: this._itemsVisibleRange,\n            barWidth,\n        });\n    }\n}\n", "import { SeriesBaselinePaneView } from './baseline-pane-view';\nexport const baselineStyleDefaults = {\n    baseValue: {\n        type: 'price',\n        price: 0,\n    },\n    relativeGradient: false,\n    topFillColor1: 'rgba(38, 166, 154, 0.28)',\n    topFillColor2: 'rgba(38, 166, 154, 0.05)',\n    topLineColor: 'rgba(38, 166, 154, 1)',\n    bottomFillColor1: 'rgba(239, 83, 80, 0.05)',\n    bottomFillColor2: 'rgba(239, 83, 80, 0.28)',\n    bottomLineColor: 'rgba(239, 83, 80, 1)',\n    lineWidth: 3,\n    lineStyle: 0 /* LineStyle.Solid */,\n    lineType: 0 /* LineType.Simple */,\n    lineVisible: true,\n    crosshairMarkerVisible: true,\n    crosshairMarkerRadius: 4,\n    crosshairMarkerBorderColor: '',\n    crosshairMarkerBorderWidth: 2,\n    crosshairMarkerBackgroundColor: '',\n    lastPriceAnimation: 0 /* LastPriceAnimationMode.Disabled */,\n    pointMarkersVisible: false,\n};\nconst createPaneView = (series, model) => new SeriesBaselinePaneView(series, model);\nexport const createSeries = () => {\n    const definition = {\n        type: 'Baseline',\n        isBuiltIn: true,\n        defaultOptions: baselineStyleDefaults,\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n    };\n    return definition;\n};\nexport const baselineSeries = createSeries();\n", "import { PaneRendererAreaBase } from './area-renderer-base';\nimport { GradientStyleCache } from './gradient-style-cache';\nexport class PaneRendererArea extends PaneRendererAreaBase {\n    constructor() {\n        super(...arguments);\n        this._fillCache = new GradientStyleCache();\n    }\n    _fillStyle(renderingScope, item) {\n        return this._fillCache.get(renderingScope, {\n            topColor1: item.topColor,\n            topColor2: '',\n            bottomColor1: '',\n            bottomColor2: item.bottomColor,\n            topCoordinate: this._data?.topCoordinate ?? 0,\n            bottomCoordinate: renderingScope.bitmapSize.height,\n        });\n    }\n}\n", "import { PaneRendererArea } from '../../renderers/area-renderer';\nimport { CompositeRenderer } from '../../renderers/composite-renderer';\nimport { PaneRendererLine } from '../../renderers/line-renderer';\nimport { LinePaneViewBase } from './line-pane-view-base';\nexport class SeriesAreaPaneView extends LinePaneViewBase {\n    constructor(series, model) {\n        super(series, model);\n        this._renderer = new CompositeRenderer();\n        this._areaRenderer = new PaneRendererArea();\n        this._lineRenderer = new PaneRendererLine();\n        this._renderer.setRenderers([this._areaRenderer, this._lineRenderer]);\n    }\n    _createRawItem(time, price, colorer) {\n        return {\n            ...this._createRawItemBase(time, price),\n            ...colorer.barStyle(time),\n        };\n    }\n    _prepareRendererData() {\n        const options = this._series.options();\n        if (this._itemsVisibleRange === null || this._items.length === 0) {\n            return;\n        }\n        let topCoordinate;\n        if (options.relativeGradient) {\n            topCoordinate = this._items[this._itemsVisibleRange.from].y;\n            for (let i = this._itemsVisibleRange.from; i < this._itemsVisibleRange.to; i++) {\n                const item = this._items[i];\n                if (item.y < topCoordinate) {\n                    topCoordinate = item.y;\n                }\n            }\n        }\n        this._areaRenderer.setData({\n            lineType: options.lineType,\n            items: this._items,\n            lineStyle: options.lineStyle,\n            lineWidth: options.lineWidth,\n            baseLevelCoordinate: null,\n            topCoordinate,\n            invertFilledArea: options.invertFilledArea,\n            visibleRange: this._itemsVisibleRange,\n            barWidth: this._model.timeScale().barSpacing(),\n        });\n        this._lineRenderer.setData({\n            lineType: options.lineVisible ? options.lineType : undefined,\n            items: this._items,\n            lineStyle: options.lineStyle,\n            lineWidth: options.lineWidth,\n            visibleRange: this._itemsVisibleRange,\n            barWidth: this._model.timeScale().barSpacing(),\n            pointMarkersRadius: options.pointMarkersVisible ? (options.pointMarkersRadius || options.lineWidth / 2 + 2) : undefined,\n        });\n    }\n}\n", "import { SeriesAreaPaneView } from './area-pane-view';\nexport const areaStyleDefaults = {\n    topColor: 'rgba( 46, 220, 135, 0.4)',\n    bottomColor: 'rgba( 40, 221, 100, 0)',\n    invertFilledArea: false,\n    relativeGradient: false,\n    lineColor: '#33D778',\n    lineStyle: 0 /* LineStyle.Solid */,\n    lineWidth: 3,\n    lineType: 0 /* LineType.Simple */,\n    lineVisible: true,\n    crosshairMarkerVisible: true,\n    crosshairMarkerRadius: 4,\n    crosshairMarkerBorderColor: '',\n    crosshairMarkerBorderWidth: 2,\n    crosshairMarkerBackgroundColor: '',\n    lastPriceAnimation: 0 /* LastPriceAnimationMode.Disabled */,\n    pointMarkersVisible: false,\n};\nconst createPaneView = (series, model) => new SeriesAreaPaneView(series, model);\nexport const createSeries = () => {\n    const definition = {\n        type: 'Area',\n        isBuiltIn: true,\n        defaultOptions: areaStyleDefaults,\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n    };\n    return definition;\n};\nexport const areaSeries = createSeries();\n", "export function optimalBarWidth(barSpacing, pixelRatio) {\n    return Math.floor(barSpacing * 0.3 * pixelRatio);\n}\nexport function optimalCandlestickWidth(barSpacing, pixelRatio) {\n    const barSpacingSpecialCaseFrom = 2.5;\n    const barSpacingSpecialCaseTo = 4;\n    const barSpacingSpecialCaseCoeff = 3;\n    if (barSpacing >= barSpacingSpecialCaseFrom && barSpacing <= barSpacingSpecialCaseTo) {\n        return Math.floor(barSpacingSpecialCaseCoeff * pixelRatio);\n    }\n    // coeff should be 1 on small barspacing and go to 0.8 while groing bar spacing\n    const barSpacingReducingCoeff = 0.2;\n    const coeff = 1 - barSpacingReducingCoeff * Math.atan(Math.max(barSpacingSpecialCaseTo, barSpacing) - barSpacingSpecialCaseTo) / (Math.PI * 0.5);\n    const res = Math.floor(barSpacing * coeff * pixelRatio);\n    const scaledBarSpacing = Math.floor(barSpacing * pixelRatio);\n    const optimal = Math.min(res, scaledBarSpacing);\n    return Math.max(Math.floor(pixelRatio), optimal);\n}\n", "import { ensureNotNull } from '../helpers/assertions';\nimport { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { optimalBarWidth } from './optimal-bar-width';\nexport class PaneRendererBars extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n        this._barWidth = 0;\n        this._barLineWidth = 0;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    // eslint-disable-next-line complexity\n    _drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null || this._data.bars.length === 0 || this._data.visibleRange === null) {\n            return;\n        }\n        this._barWidth = this._calcBarWidth(horizontalPixelRatio);\n        // grid and crosshair have line width = Math.floor(pixelRatio)\n        // if this value is odd, we have to make bars' width odd\n        // if this value is even, we have to make bars' width even\n        // in order of keeping crosshair-over-bar drawing symmetric\n        if (this._barWidth >= 2) {\n            const lineWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n            if ((lineWidth % 2) !== (this._barWidth % 2)) {\n                this._barWidth--;\n            }\n        }\n        // if scale is compressed, bar could become less than 1 CSS pixel\n        this._barLineWidth = this._data.thinBars ? Math.min(this._barWidth, Math.floor(horizontalPixelRatio)) : this._barWidth;\n        let prevColor = null;\n        const drawOpenClose = this._barLineWidth <= this._barWidth && this._data.barSpacing >= Math.floor(1.5 * horizontalPixelRatio);\n        for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; ++i) {\n            const bar = this._data.bars[i];\n            if (prevColor !== bar.barColor) {\n                ctx.fillStyle = bar.barColor;\n                prevColor = bar.barColor;\n            }\n            const bodyWidthHalf = Math.floor(this._barLineWidth * 0.5);\n            const bodyCenter = Math.round(bar.x * horizontalPixelRatio);\n            const bodyLeft = bodyCenter - bodyWidthHalf;\n            const bodyWidth = this._barLineWidth;\n            const bodyRight = bodyLeft + bodyWidth - 1;\n            const high = Math.min(bar.highY, bar.lowY);\n            const low = Math.max(bar.highY, bar.lowY);\n            const bodyTop = Math.round(high * verticalPixelRatio) - bodyWidthHalf;\n            const bodyBottom = Math.round(low * verticalPixelRatio) + bodyWidthHalf;\n            const bodyHeight = Math.max((bodyBottom - bodyTop), this._barLineWidth);\n            ctx.fillRect(bodyLeft, bodyTop, bodyWidth, bodyHeight);\n            const sideWidth = Math.ceil(this._barWidth * 1.5);\n            if (drawOpenClose) {\n                if (this._data.openVisible) {\n                    const openLeft = bodyCenter - sideWidth;\n                    let openTop = Math.max(bodyTop, Math.round(bar.openY * verticalPixelRatio) - bodyWidthHalf);\n                    let openBottom = openTop + bodyWidth - 1;\n                    if (openBottom > bodyTop + bodyHeight - 1) {\n                        openBottom = bodyTop + bodyHeight - 1;\n                        openTop = openBottom - bodyWidth + 1;\n                    }\n                    ctx.fillRect(openLeft, openTop, bodyLeft - openLeft, openBottom - openTop + 1);\n                }\n                const closeRight = bodyCenter + sideWidth;\n                let closeTop = Math.max(bodyTop, Math.round(bar.closeY * verticalPixelRatio) - bodyWidthHalf);\n                let closeBottom = closeTop + bodyWidth - 1;\n                if (closeBottom > bodyTop + bodyHeight - 1) {\n                    closeBottom = bodyTop + bodyHeight - 1;\n                    closeTop = closeBottom - bodyWidth + 1;\n                }\n                ctx.fillRect(bodyRight + 1, closeTop, closeRight - bodyRight, closeBottom - closeTop + 1);\n            }\n        }\n    }\n    _calcBarWidth(pixelRatio) {\n        const limit = Math.floor(pixelRatio);\n        return Math.max(limit, Math.floor(optimalBarWidth(ensureNotNull(this._data).barSpacing, pixelRatio)));\n    }\n}\n", "import { undefinedIfNull } from '../../helpers/strict-type-checks';\nimport { SeriesPaneViewBase } from './series-pane-view-base';\nexport class BarsPaneViewBase extends SeriesPaneViewBase {\n    constructor(series, model) {\n        super(series, model, false);\n    }\n    _convertToCoordinates(priceScale, timeScale, firstValue) {\n        timeScale.indexesToCoordinates(this._items, undefinedIfNull(this._itemsVisibleRange));\n        priceScale.barPricesToCoordinates(this._items, firstValue, undefinedIfNull(this._itemsVisibleRange));\n    }\n    _createDefaultItem(time, bar, colorer) {\n        return {\n            time: time,\n            open: bar.value[0 /* PlotRowValueIndex.Open */],\n            high: bar.value[1 /* PlotRowValueIndex.High */],\n            low: bar.value[2 /* PlotRowValueIndex.Low */],\n            close: bar.value[3 /* PlotRowValueIndex.Close */],\n            x: NaN,\n            openY: NaN,\n            highY: NaN,\n            lowY: NaN,\n            closeY: NaN,\n        };\n    }\n    _fillRawPoints() {\n        const colorer = this._series.barColorer();\n        this._items = this._series.conflatedBars().rows().map((row) => this._createRawItem(row.index, row, colorer));\n    }\n}\n", "import { PaneRendererBars, } from '../../renderers/bars-renderer';\nimport { BarsPaneViewBase } from './bars-pane-view-base';\nexport class SeriesBarsPaneView extends BarsPaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._renderer = new PaneRendererBars();\n    }\n    _createRawItem(time, bar, colorer) {\n        return {\n            ...this._createDefaultItem(time, bar, colorer),\n            ...colorer.barStyle(time),\n        };\n    }\n    _prepareRendererData() {\n        const barStyleProps = this._series.options();\n        this._renderer.setData({\n            bars: this._items,\n            barSpacing: this._model.timeScale().barSpacing(),\n            openVisible: barStyleProps.openVisible,\n            thinBars: barStyleProps.thinBars,\n            visibleRange: this._itemsVisibleRange,\n        });\n    }\n}\n", "import { SeriesBarsPaneView } from './bars-pane-view';\nexport const barStyleDefaults = {\n    upColor: '#26a69a',\n    downColor: '#ef5350',\n    openVisible: true,\n    thinBars: true,\n};\nconst createPaneView = (series, model) => new SeriesBarsPaneView(series, model);\nexport const createSeries = () => {\n    const definition = {\n        type: 'Bar',\n        isBuiltIn: true,\n        defaultOptions: barStyleDefaults,\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n    };\n    return definition;\n};\nexport const barSeries = createSeries();\n", "import { fillRectInnerBorder } from '../helpers/canvas-helpers';\nimport { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nimport { optimalCandlestickWidth } from './optimal-bar-width';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"BarBorderWidth\"] = 1] = \"BarBorderWidth\";\n})(Constants || (Constants = {}));\nexport class PaneRendererCandlesticks extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n        // scaled with pixelRatio\n        this._barWidth = 0;\n    }\n    setData(data) {\n        this._data = data;\n    }\n    _drawImpl(renderingScope) {\n        if (this._data === null || this._data.bars.length === 0 || this._data.visibleRange === null) {\n            return;\n        }\n        const { horizontalPixelRatio } = renderingScope;\n        // now we know pixelRatio and we could calculate barWidth effectively\n        this._barWidth = optimalCandlestickWidth(this._data.barSpacing, horizontalPixelRatio);\n        // grid and crosshair have line width = Math.floor(pixelRatio)\n        // if this value is odd, we have to make candlesticks' width odd\n        // if this value is even, we have to make candlesticks' width even\n        // in order of keeping crosshair-over-candlesticks drawing symmetric\n        if (this._barWidth >= 2) {\n            const wickWidth = Math.floor(horizontalPixelRatio);\n            if ((wickWidth % 2) !== (this._barWidth % 2)) {\n                this._barWidth--;\n            }\n        }\n        const bars = this._data.bars;\n        if (this._data.wickVisible) {\n            this._drawWicks(renderingScope, bars, this._data.visibleRange);\n        }\n        if (this._data.borderVisible) {\n            this._drawBorder(renderingScope, bars, this._data.visibleRange);\n        }\n        const borderWidth = this._calculateBorderWidth(horizontalPixelRatio);\n        if (!this._data.borderVisible || this._barWidth > borderWidth * 2) {\n            this._drawCandles(renderingScope, bars, this._data.visibleRange);\n        }\n    }\n    _drawWicks(renderingScope, bars, visibleRange) {\n        if (this._data === null) {\n            return;\n        }\n        const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n        let prevWickColor = '';\n        let wickWidth = Math.min(Math.floor(horizontalPixelRatio), Math.floor(this._data.barSpacing * horizontalPixelRatio));\n        wickWidth = Math.max(Math.floor(horizontalPixelRatio), Math.min(wickWidth, this._barWidth));\n        const wickOffset = Math.floor(wickWidth * 0.5);\n        let prevEdge = null;\n        for (let i = visibleRange.from; i < visibleRange.to; i++) {\n            const bar = bars[i];\n            if (bar.barWickColor !== prevWickColor) {\n                ctx.fillStyle = bar.barWickColor;\n                prevWickColor = bar.barWickColor;\n            }\n            const top = Math.round(Math.min(bar.openY, bar.closeY) * verticalPixelRatio);\n            const bottom = Math.round(Math.max(bar.openY, bar.closeY) * verticalPixelRatio);\n            const high = Math.round(bar.highY * verticalPixelRatio);\n            const low = Math.round(bar.lowY * verticalPixelRatio);\n            const scaledX = Math.round(horizontalPixelRatio * bar.x);\n            let left = scaledX - wickOffset;\n            const right = left + wickWidth - 1;\n            if (prevEdge !== null) {\n                left = Math.max(prevEdge + 1, left);\n                left = Math.min(left, right);\n            }\n            const width = right - left + 1;\n            ctx.fillRect(left, high, width, top - high);\n            ctx.fillRect(left, bottom + 1, width, low - bottom);\n            prevEdge = right;\n        }\n    }\n    _calculateBorderWidth(pixelRatio) {\n        let borderWidth = Math.floor(1 /* Constants.BarBorderWidth */ * pixelRatio);\n        if (this._barWidth <= 2 * borderWidth) {\n            borderWidth = Math.floor((this._barWidth - 1) * 0.5);\n        }\n        const res = Math.max(Math.floor(pixelRatio), borderWidth);\n        if (this._barWidth <= res * 2) {\n            // do not draw bodies, restore original value\n            return Math.max(Math.floor(pixelRatio), Math.floor(1 /* Constants.BarBorderWidth */ * pixelRatio));\n        }\n        return res;\n    }\n    _drawBorder(renderingScope, bars, visibleRange) {\n        if (this._data === null) {\n            return;\n        }\n        const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n        let prevBorderColor = '';\n        const borderWidth = this._calculateBorderWidth(horizontalPixelRatio);\n        let prevEdge = null;\n        for (let i = visibleRange.from; i < visibleRange.to; i++) {\n            const bar = bars[i];\n            if (bar.barBorderColor !== prevBorderColor) {\n                ctx.fillStyle = bar.barBorderColor;\n                prevBorderColor = bar.barBorderColor;\n            }\n            let left = Math.round(bar.x * horizontalPixelRatio) - Math.floor(this._barWidth * 0.5);\n            // this is important to calculate right before patching left\n            const right = left + this._barWidth - 1;\n            const top = Math.round(Math.min(bar.openY, bar.closeY) * verticalPixelRatio);\n            const bottom = Math.round(Math.max(bar.openY, bar.closeY) * verticalPixelRatio);\n            if (prevEdge !== null) {\n                left = Math.max(prevEdge + 1, left);\n                left = Math.min(left, right);\n            }\n            if (this._data.barSpacing * horizontalPixelRatio > 2 * borderWidth) {\n                fillRectInnerBorder(ctx, left, top, right - left + 1, bottom - top + 1, borderWidth);\n            }\n            else {\n                const width = right - left + 1;\n                ctx.fillRect(left, top, width, bottom - top + 1);\n            }\n            prevEdge = right;\n        }\n    }\n    _drawCandles(renderingScope, bars, visibleRange) {\n        if (this._data === null) {\n            return;\n        }\n        const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n        let prevBarColor = '';\n        const borderWidth = this._calculateBorderWidth(horizontalPixelRatio);\n        for (let i = visibleRange.from; i < visibleRange.to; i++) {\n            const bar = bars[i];\n            let top = Math.round(Math.min(bar.openY, bar.closeY) * verticalPixelRatio);\n            let bottom = Math.round(Math.max(bar.openY, bar.closeY) * verticalPixelRatio);\n            let left = Math.round(bar.x * horizontalPixelRatio) - Math.floor(this._barWidth * 0.5);\n            let right = left + this._barWidth - 1;\n            if (bar.barColor !== prevBarColor) {\n                const barColor = bar.barColor;\n                ctx.fillStyle = barColor;\n                prevBarColor = barColor;\n            }\n            if (this._data.borderVisible) {\n                left += borderWidth;\n                top += borderWidth;\n                right -= borderWidth;\n                bottom -= borderWidth;\n            }\n            if (top > bottom) {\n                continue;\n            }\n            ctx.fillRect(left, top, right - left + 1, bottom - top + 1);\n        }\n    }\n}\n", "import { PaneRendererCandlesticks, } from '../../renderers/candlesticks-renderer';\nimport { BarsPaneViewBase } from './bars-pane-view-base';\nexport class SeriesCandlesticksPaneView extends BarsPaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._renderer = new PaneRendererCandlesticks();\n    }\n    _createRawItem(time, bar, colorer) {\n        return {\n            ...this._createDefaultItem(time, bar, colorer),\n            ...colorer.barStyle(time),\n        };\n    }\n    _prepareRendererData() {\n        const candlestickStyleProps = this._series.options();\n        this._renderer.setData({\n            bars: this._items,\n            barSpacing: this._model.timeScale().barSpacing(),\n            wickVisible: candlestickStyleProps.wickVisible,\n            borderVisible: candlestickStyleProps.borderVisible,\n            visibleRange: this._itemsVisibleRange,\n        });\n    }\n}\n", "import { SeriesCandlesticksPaneView } from './candlesticks-pane-view';\nexport const candlestickStyleDefaults = {\n    upColor: '#26a69a',\n    downColor: '#ef5350',\n    wickVisible: true,\n    borderVisible: true,\n    borderColor: '#378658',\n    borderUpColor: '#26a69a',\n    borderDownColor: '#ef5350',\n    wickColor: '#737375',\n    wickUpColor: '#26a69a',\n    wickDownColor: '#ef5350',\n};\nconst createPaneView = (series, model) => new SeriesCandlesticksPaneView(series, model);\nexport const createSeries = () => {\n    const definition = {\n        type: 'Candlestick',\n        isBuiltIn: true,\n        defaultOptions: candlestickStyleDefaults,\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n    };\n    return definition;\n};\nexport const candlestickSeries = createSeries();\n", "import { BitmapCoordinatesPaneRenderer } from './bitmap-coordinates-pane-renderer';\nconst showSpacingMinimalBarWidth = 1;\nconst alignToMinimalWidthLimit = 4;\nexport class PaneRendererHistogram extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._data = null;\n        this._precalculatedCache = [];\n    }\n    setData(data) {\n        this._data = data;\n        this._precalculatedCache = [];\n    }\n    _drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null || this._data.items.length === 0 || this._data.visibleRange === null) {\n            return;\n        }\n        if (!this._precalculatedCache.length) {\n            this._fillPrecalculatedCache(horizontalPixelRatio);\n        }\n        const tickWidth = Math.max(1, Math.floor(verticalPixelRatio));\n        const histogramBase = Math.round((this._data.histogramBase) * verticalPixelRatio);\n        const topHistogramBase = histogramBase - Math.floor(tickWidth / 2);\n        const bottomHistogramBase = topHistogramBase + tickWidth;\n        for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; i++) {\n            const item = this._data.items[i];\n            const current = this._precalculatedCache[i - this._data.visibleRange.from];\n            const y = Math.round(item.y * verticalPixelRatio);\n            ctx.fillStyle = item.barColor;\n            let top;\n            let bottom;\n            if (y <= topHistogramBase) {\n                top = y;\n                bottom = bottomHistogramBase;\n            }\n            else {\n                top = topHistogramBase;\n                bottom = y - Math.floor(tickWidth / 2) + tickWidth;\n            }\n            ctx.fillRect(current.left, top, current.right - current.left + 1, bottom - top);\n        }\n    }\n    // eslint-disable-next-line complexity\n    _fillPrecalculatedCache(pixelRatio) {\n        if (this._data === null || this._data.items.length === 0 || this._data.visibleRange === null) {\n            this._precalculatedCache = [];\n            return;\n        }\n        const spacing = Math.ceil(this._data.barSpacing * pixelRatio) <= showSpacingMinimalBarWidth ? 0 : Math.max(1, Math.floor(pixelRatio));\n        const columnWidth = Math.round(this._data.barSpacing * pixelRatio) - spacing;\n        this._precalculatedCache = new Array(this._data.visibleRange.to - this._data.visibleRange.from);\n        for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; i++) {\n            const item = this._data.items[i];\n            // force cast to avoid ensureDefined call\n            const x = Math.round(item.x * pixelRatio);\n            let left;\n            let right;\n            if (columnWidth % 2) {\n                const halfWidth = (columnWidth - 1) / 2;\n                left = x - halfWidth;\n                right = x + halfWidth;\n            }\n            else {\n                // shift pixel to left\n                const halfWidth = columnWidth / 2;\n                left = x - halfWidth;\n                right = x + halfWidth - 1;\n            }\n            this._precalculatedCache[i - this._data.visibleRange.from] = {\n                left,\n                right,\n                roundedCenter: x,\n                center: (item.x * pixelRatio),\n                time: item.time,\n            };\n        }\n        // correct positions\n        for (let i = this._data.visibleRange.from + 1; i < this._data.visibleRange.to; i++) {\n            const current = this._precalculatedCache[i - this._data.visibleRange.from];\n            const prev = this._precalculatedCache[i - this._data.visibleRange.from - 1];\n            if (current.time !== prev.time + 1) {\n                continue;\n            }\n            if (current.left - prev.right !== (spacing + 1)) {\n                // have to align\n                if (prev.roundedCenter > prev.center) {\n                    // prev wasshifted to left, so add pixel to right\n                    prev.right = current.left - spacing - 1;\n                }\n                else {\n                    // extend current to left\n                    current.left = prev.right + spacing + 1;\n                }\n            }\n        }\n        let minWidth = Math.ceil(this._data.barSpacing * pixelRatio);\n        for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; i++) {\n            const current = this._precalculatedCache[i - this._data.visibleRange.from];\n            // this could happen if barspacing < 1\n            if (current.right < current.left) {\n                current.right = current.left;\n            }\n            const width = current.right - current.left + 1;\n            minWidth = Math.min(width, minWidth);\n        }\n        if (spacing > 0 && minWidth < alignToMinimalWidthLimit) {\n            for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; i++) {\n                const current = this._precalculatedCache[i - this._data.visibleRange.from];\n                const width = current.right - current.left + 1;\n                if (width > minWidth) {\n                    if (current.roundedCenter > current.center) {\n                        current.right -= 1;\n                    }\n                    else {\n                        current.left += 1;\n                    }\n                }\n            }\n        }\n    }\n}\n", "import { ensureNotNull } from '../../helpers/assertions';\nimport { PaneRendererHistogram } from '../../renderers/histogram-renderer';\nimport { LinePaneViewBase } from './line-pane-view-base';\nexport class SeriesHistogramPaneView extends LinePaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._renderer = new PaneRendererHistogram();\n    }\n    _createRawItem(time, price, colorer) {\n        return {\n            ...this._createRawItemBase(time, price),\n            ...colorer.barStyle(time),\n        };\n    }\n    _prepareRendererData() {\n        const data = {\n            items: this._items,\n            barSpacing: this._model.timeScale().barSpacing(),\n            visibleRange: this._itemsVisibleRange,\n            histogramBase: this._series.priceScale().priceToCoordinate(this._series.options().base, ensureNotNull(this._series.firstValue()).value),\n        };\n        this._renderer.setData(data);\n    }\n}\n", "import { SeriesHistogramPaneView } from './histogram-pane-view';\nexport const histogramStyleDefaults = {\n    color: '#26a69a',\n    base: 0,\n};\nconst createPaneView = (series, model) => new SeriesHistogramPaneView(series, model);\nexport const createSeries = () => {\n    const definition = {\n        type: 'Histogram',\n        isBuiltIn: true,\n        defaultOptions: histogramStyleDefaults,\n        /**\n         * @internal\n         */\n        createPaneView: createPaneView,\n    };\n    return definition;\n};\nexport const histogramSeries = createSeries();\n", "export class PanePrimitiveWrapper {\n    constructor(pane, primitive) {\n        this._pane = pane;\n        this._primitive = primitive;\n        this._attach();\n    }\n    detach() {\n        this._pane.detachPrimitive(this._primitive);\n    }\n    getPane() {\n        return this._pane;\n    }\n    applyOptions(options) {\n        this._primitive.applyOptions?.(options);\n    }\n    _attach() {\n        this._pane.attachPrimitive(this._primitive);\n    }\n}\n", "import { defaultFontFamily } from '../../helpers/make-font';\nexport const textWatermarkOptionsDefaults = {\n    visible: true,\n    horzAlign: 'center',\n    vertAlign: 'center',\n    lines: [],\n};\nexport const textWatermarkLineOptionsDefaults = {\n    color: 'rgba(0, 0, 0, 0.5)',\n    fontSize: 48,\n    fontFamily: defaultFontFamily,\n    fontStyle: '',\n    text: '',\n};\n", "export class TextWatermarkRenderer {\n    constructor(options) {\n        this._metricsCache = new Map();\n        this._data = options;\n    }\n    draw(target) {\n        target.useMediaCoordinateSpace((scope) => {\n            if (!this._data.visible) {\n                return;\n            }\n            const { context: ctx, mediaSize } = scope;\n            let textHeight = 0;\n            for (const line of this._data.lines) {\n                if (line.text.length === 0) {\n                    continue;\n                }\n                ctx.font = line.font;\n                const textWidth = this._metrics(ctx, line.text);\n                if (textWidth > mediaSize.width) {\n                    line.zoom = mediaSize.width / textWidth;\n                }\n                else {\n                    line.zoom = 1;\n                }\n                textHeight += line.lineHeight * line.zoom;\n            }\n            let vertOffset = 0;\n            switch (this._data.vertAlign) {\n                case 'top':\n                    vertOffset = 0;\n                    break;\n                case 'center':\n                    vertOffset = Math.max((mediaSize.height - textHeight) / 2, 0);\n                    break;\n                case 'bottom':\n                    vertOffset = Math.max(mediaSize.height - textHeight, 0);\n                    break;\n            }\n            for (const line of this._data.lines) {\n                ctx.save();\n                ctx.fillStyle = line.color;\n                let horzOffset = 0;\n                switch (this._data.horzAlign) {\n                    case 'left':\n                        ctx.textAlign = 'left';\n                        horzOffset = line.lineHeight / 2;\n                        break;\n                    case 'center':\n                        ctx.textAlign = 'center';\n                        horzOffset = mediaSize.width / 2;\n                        break;\n                    case 'right':\n                        ctx.textAlign = 'right';\n                        horzOffset = mediaSize.width - 1 - line.lineHeight / 2;\n                        break;\n                }\n                ctx.translate(horzOffset, vertOffset);\n                ctx.textBaseline = 'top';\n                ctx.font = line.font;\n                ctx.scale(line.zoom, line.zoom);\n                ctx.fillText(line.text, 0, line.vertOffset);\n                ctx.restore();\n                vertOffset += line.lineHeight * line.zoom;\n            }\n        });\n    }\n    _metrics(ctx, text) {\n        const fontCache = this._fontCache(ctx.font);\n        let result = fontCache.get(text);\n        if (result === undefined) {\n            result = ctx.measureText(text).width;\n            fontCache.set(text, result);\n        }\n        return result;\n    }\n    _fontCache(font) {\n        let fontCache = this._metricsCache.get(font);\n        if (fontCache === undefined) {\n            fontCache = new Map();\n            this._metricsCache.set(font, fontCache);\n        }\n        return fontCache;\n    }\n}\n", "import { makeFont } from '../../helpers/make-font';\nimport { TextWatermarkRenderer, } from './pane-renderer';\nexport class TextWatermarkPaneView {\n    constructor(options) {\n        this._options = buildRendererOptions(options);\n    }\n    update(options) {\n        this._options = buildRendererOptions(options);\n    }\n    renderer() {\n        return new TextWatermarkRenderer(this._options);\n    }\n}\nfunction buildRendererLineOptions(lineOption) {\n    return {\n        ...lineOption,\n        font: makeFont(lineOption.fontSize, lineOption.fontFamily, lineOption.fontStyle),\n        lineHeight: lineOption.lineHeight || lineOption.fontSize * 1.2,\n        vertOffset: 0,\n        zoom: 0,\n    };\n}\nfunction buildRendererOptions(options) {\n    return {\n        ...options,\n        lines: options.lines.map(buildRendererLineOptions),\n    };\n}\n", "import { PanePrimitiveWrapper } from '../pane-primitive-wrapper';\nimport { textWatermarkLineOptionsDefaults, textWatermarkOptionsDefaults, } from './options';\nimport { TextWatermarkPaneView } from './pane-view';\nfunction mergeLineOptionsWithDefaults(options) {\n    return {\n        ...textWatermarkLineOptionsDefaults,\n        ...options,\n    };\n}\nfunction mergeOptionsWithDefaults(options) {\n    return {\n        ...textWatermarkOptionsDefaults,\n        ...options,\n        lines: options.lines?.map(mergeLineOptionsWithDefaults) ?? [],\n    };\n}\nclass TextWatermark {\n    constructor(options) {\n        this._options = mergeOptionsWithDefaults(options);\n        this._paneViews = [new TextWatermarkPaneView(this._options)];\n    }\n    updateAllViews() {\n        this._paneViews.forEach((pw) => pw.update(this._options));\n    }\n    paneViews() {\n        return this._paneViews;\n    }\n    attached({ requestUpdate }) {\n        this.requestUpdate = requestUpdate;\n    }\n    detached() {\n        this.requestUpdate = undefined;\n    }\n    applyOptions(options) {\n        this._options = mergeOptionsWithDefaults({ ...this._options, ...options });\n        if (this.requestUpdate) {\n            this.requestUpdate();\n        }\n    }\n}\n/**\n * Creates an image watermark.\n *\n * @param pane - Target pane.\n * @param options - Watermark options.\n *\n * @returns Image watermark wrapper.\n *\n * @example\n * ```js\n * import { createTextWatermark } from 'lightweight-charts';\n *\n * const firstPane = chart.panes()[0];\n * const textWatermark = createTextWatermark(firstPane, {\n * \t  horzAlign: 'center',\n * \t  vertAlign: 'center',\n * \t  lines: [\n * \t    {\n * \t      text: 'Hello',\n * \t      color: 'rgba(255,0,0,0.5)',\n * \t      fontSize: 100,\n * \t      fontStyle: 'bold',\n * \t    },\n * \t    {\n * \t      text: 'This is a text watermark',\n * \t      color: 'rgba(0,0,255,0.5)',\n * \t      fontSize: 50,\n * \t      fontStyle: 'italic',\n * \t      fontFamily: 'monospace',\n * \t    },\n * \t  ],\n * });\n * // to change options\n * textWatermark.applyOptions({ horzAlign: 'left' });\n * // to remove watermark from the pane\n * textWatermark.detach();\n * ```\n */\nexport function createTextWatermark(pane, options) {\n    return new PanePrimitiveWrapper(pane, new TextWatermark(options));\n}\n", "export const imageWatermarkOptionsDefaults = {\n    alpha: 1,\n    padding: 0,\n};\n", "export class ImageWatermarkRenderer {\n    constructor(data) {\n        this._data = data;\n    }\n    draw(target) {\n        target.useMediaCoordinateSpace((scope) => {\n            const ctx = scope.context;\n            const pos = this._determinePlacement(this._data, scope.mediaSize);\n            if (!pos || !this._data.imgElement) {\n                return;\n            }\n            ctx.globalAlpha = this._data.alpha ?? 1;\n            ctx.drawImage(this._data.imgElement, pos.x, pos.y, pos.width, pos.height);\n        });\n    }\n    _determinePlacement(data, paneSize) {\n        const { maxHeight, maxWidth, imgHeight, imgWidth, padding } = data;\n        const plotCentreX = Math.round(paneSize.width / 2);\n        const plotCentreY = Math.round(paneSize.height / 2);\n        const paddingSize = padding ?? 0;\n        let availableWidth = paneSize.width - 2 * paddingSize;\n        let availableHeight = paneSize.height - 2 * paddingSize;\n        if (maxHeight) {\n            availableHeight = Math.min(availableHeight, maxHeight);\n        }\n        if (maxWidth) {\n            availableWidth = Math.min(availableWidth, maxWidth);\n        }\n        const scaleX = availableWidth / imgWidth;\n        const scaleY = availableHeight / imgHeight;\n        const scaleToUse = Math.min(scaleX, scaleY);\n        const drawWidth = imgWidth * scaleToUse;\n        const drawHeight = imgHeight * scaleToUse;\n        const x = plotCentreX - 0.5 * drawWidth;\n        const y = plotCentreY - 0.5 * drawHeight;\n        return {\n            x,\n            y,\n            height: drawHeight,\n            width: drawWidth,\n        };\n    }\n}\n", "import { ImageWatermarkRenderer, } from './pane-renderer';\nexport class ImageWatermarkPaneView {\n    constructor(options) {\n        this._image = null;\n        this._imageWidth = 0; // don't draw until loaded\n        this._imageHeight = 0;\n        this._options = options;\n        this._rendererOptions = buildRendererOptions(this._options, this._image, this._imageWidth, this._imageHeight);\n    }\n    stateUpdate(state) {\n        if (state.imageWidth !== undefined) {\n            this._imageWidth = state.imageWidth;\n        }\n        if (state.imageHeight !== undefined) {\n            this._imageHeight = state.imageHeight;\n        }\n        if (state.image !== undefined) {\n            this._image = state.image;\n        }\n        this.update();\n    }\n    optionsUpdate(options) {\n        this._options = options;\n        this.update();\n    }\n    zOrder() {\n        return 'bottom';\n    }\n    update() {\n        this._rendererOptions = buildRendererOptions(this._options, this._image, this._imageWidth, this._imageHeight);\n    }\n    renderer() {\n        return new ImageWatermarkRenderer(this._rendererOptions);\n    }\n}\nfunction buildRendererOptions(options, imgElement, imgWidth, imgHeight) {\n    return {\n        ...options,\n        imgElement,\n        imgWidth,\n        imgHeight,\n    };\n}\n", "import { PanePrimitiveWrapper } from '../pane-primitive-wrapper';\nimport { imageWatermarkOptionsDefaults, } from './options';\nimport { ImageWatermarkPaneView } from './pane-view';\nfunction mergeOptionsWithDefaults(options) {\n    return {\n        ...imageWatermarkOptionsDefaults,\n        ...options,\n    };\n}\nclass ImageWatermark {\n    constructor(imageUrl, options) {\n        this._imgElement = null;\n        this._imageUrl = imageUrl;\n        this._options = mergeOptionsWithDefaults(options);\n        this._paneViews = [new ImageWatermarkPaneView(this._options)];\n    }\n    updateAllViews() {\n        this._paneViews.forEach((pw) => pw.update());\n    }\n    paneViews() {\n        return this._paneViews;\n    }\n    attached(attachedParams) {\n        const { requestUpdate } = attachedParams;\n        this._requestUpdate = requestUpdate;\n        this._imgElement = new Image();\n        this._imgElement.onload = () => {\n            const imageHeight = this._imgElement?.naturalHeight ?? 1;\n            const imageWidth = this._imgElement?.naturalWidth ?? 1;\n            this._paneViews.forEach((pv) => pv.stateUpdate({\n                imageHeight,\n                imageWidth,\n                image: this._imgElement,\n            }));\n            if (this._requestUpdate) {\n                this._requestUpdate();\n            }\n        };\n        this._imgElement.src = this._imageUrl;\n    }\n    detached() {\n        this._requestUpdate = undefined;\n        this._imgElement = null;\n    }\n    applyOptions(options) {\n        this._options = mergeOptionsWithDefaults({ ...this._options, ...options });\n        this._updateOptions();\n        if (this.requestUpdate) {\n            this.requestUpdate();\n        }\n    }\n    requestUpdate() {\n        if (this._requestUpdate) {\n            this._requestUpdate();\n        }\n    }\n    _updateOptions() {\n        this._paneViews.forEach((pw) => pw.optionsUpdate(this._options));\n    }\n}\n/**\n * Creates an image watermark.\n *\n * @param pane - Target pane.\n * @param imageUrl - Image URL.\n * @param options - Watermark options.\n *\n * @returns Image watermark wrapper.\n *\n * @example\n * ```js\n * import { createImageWatermark } from 'lightweight-charts';\n *\n * const firstPane = chart.panes()[0];\n * const imageWatermark = createImageWatermark(firstPane, '/images/my-image.png', {\n *   alpha: 0.5,\n *   padding: 20,\n * });\n * // to change options\n * imageWatermark.applyOptions({ padding: 10 });\n * // to remove watermark from the pane\n * imageWatermark.detach();\n * ```\n */\nexport function createImageWatermark(pane, imageUrl, options) {\n    return new PanePrimitiveWrapper(pane, new ImageWatermark(imageUrl, options));\n}\n", "export class SeriesPrimitiveAdapter {\n    constructor(series, primitive) {\n        this._series = series;\n        this._primitive = primitive;\n        this._attach();\n    }\n    detach() {\n        this._series.detachPrimitive(this._primitive);\n    }\n    getSeries() {\n        return this._series;\n    }\n    applyOptions(options) {\n        if (this._primitive && this._primitive.applyOptions) {\n            this._primitive.applyOptions(options);\n        }\n    }\n    _attach() {\n        this._series.attachPrimitive(this._primitive);\n    }\n}\n", "export const seriesMarkerOptionsDefaults = {\n    autoScale: true,\n    zOrder: 'normal',\n};\n", "import { ceiledEven, ceiledOdd } from '../../helpers/mathex';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"MinShapeSize\"] = 12] = \"MinShapeSize\";\n    Constants[Constants[\"MaxShapeSize\"] = 30] = \"MaxShapeSize\";\n    Constants[Constants[\"MinShapeMargin\"] = 3] = \"MinShapeMargin\";\n})(Constants || (Constants = {}));\nfunction size(barSpacing, coeff) {\n    const result = Math.min(Math.max(barSpacing, 12 /* Constants.MinShapeSize */), 30 /* Constants.MaxShapeSize */) * coeff;\n    return ceiledOdd(result);\n}\nexport function shapeSize(shape, originalSize) {\n    switch (shape) {\n        case 'arrowDown':\n        case 'arrowUp':\n            return size(originalSize, 1);\n        case 'circle':\n            return size(originalSize, 0.8);\n        case 'square':\n            return size(originalSize, 0.7);\n    }\n}\nexport function calculateShapeHeight(barSpacing) {\n    return ceiledEven(size(barSpacing, 1));\n}\nexport function shapeMargin(barSpacing) {\n    return Math.max(size(barSpacing, 0.1), 3 /* Constants.MinShapeMargin */);\n}\nexport function calculateAdjustedMargin(margin, hasSide, hasInBar) {\n    if (hasSide) {\n        return margin;\n    }\n    else if (hasInBar) {\n        return Math.ceil(margin / 2);\n    }\n    return 0;\n}\n", "import { ceiledOdd } from '../../helpers/mathex';\nimport { shapeSize } from './utils';\nexport function drawArrow(up, ctx, coords, size) {\n    const arrowSize = shapeSize('arrowUp', size);\n    const halfArrowSize = ((arrowSize - 1) / 2) * coords.pixelRatio;\n    const baseSize = ceiledOdd(size / 2);\n    const halfBaseSize = ((baseSize - 1) / 2) * coords.pixelRatio;\n    ctx.beginPath();\n    if (up) {\n        ctx.moveTo(coords.x - halfArrowSize, coords.y);\n        ctx.lineTo(coords.x, coords.y - halfArrowSize);\n        ctx.lineTo(coords.x + halfArrowSize, coords.y);\n        ctx.lineTo(coords.x + halfBaseSize, coords.y);\n        ctx.lineTo(coords.x + halfBaseSize, coords.y + halfArrowSize);\n        ctx.lineTo(coords.x - halfBaseSize, coords.y + halfArrowSize);\n        ctx.lineTo(coords.x - halfBaseSize, coords.y);\n    }\n    else {\n        ctx.moveTo(coords.x - halfArrowSize, coords.y);\n        ctx.lineTo(coords.x, coords.y + halfArrowSize);\n        ctx.lineTo(coords.x + halfArrowSize, coords.y);\n        ctx.lineTo(coords.x + halfBaseSize, coords.y);\n        ctx.lineTo(coords.x + halfBaseSize, coords.y - halfArrowSize);\n        ctx.lineTo(coords.x - halfBaseSize, coords.y - halfArrowSize);\n        ctx.lineTo(coords.x - halfBaseSize, coords.y);\n    }\n    ctx.fill();\n}\nexport function hitTestArrow(up, centerX, centerY, size, x, y) {\n    const arrowSize = shapeSize('arrowUp', size);\n    const halfArrowSize = (arrowSize - 1) / 2;\n    const baseSize = ceiledOdd(size / 2);\n    const halfBaseSize = (baseSize - 1) / 2;\n    const triangleTolerance = 3;\n    const rectTolerance = 2;\n    const baseLeft = centerX - halfBaseSize - rectTolerance;\n    const baseRight = centerX + halfBaseSize + rectTolerance;\n    const baseTop = up ? centerY : centerY - halfArrowSize;\n    const baseBottom = up ? centerY + halfArrowSize : centerY;\n    if (x >= baseLeft && x <= baseRight &&\n        y >= baseTop - rectTolerance && y <= baseBottom + rectTolerance) {\n        return true;\n    }\n    const isInTriangleBounds = () => {\n        const headLeft = centerX - halfArrowSize - triangleTolerance;\n        const headRight = centerX + halfArrowSize + triangleTolerance;\n        const headTop = up ? centerY - halfArrowSize - triangleTolerance : centerY;\n        const headBottom = up ? centerY : centerY + halfArrowSize + triangleTolerance;\n        if (x < headLeft || x > headRight ||\n            y < headTop || y > headBottom) {\n            return false;\n        }\n        const dx = Math.abs(x - centerX);\n        const dy = up\n            ? Math.abs(y - centerY) // up arrow\n            : Math.abs(y - centerY); // down arrow\n        return dy + triangleTolerance >= dx / 2;\n    };\n    return isInTriangleBounds();\n}\n", "import { shapeSize } from './utils';\nexport function drawCircle(ctx, coords, size) {\n    const circleSize = shapeSize('circle', size);\n    const halfSize = (circleSize - 1) / 2;\n    ctx.beginPath();\n    ctx.arc(coords.x, coords.y, halfSize * coords.pixelRatio, 0, 2 * Math.PI, false);\n    ctx.fill();\n}\nexport function hitTestCircle(centerX, centerY, size, x, y) {\n    const circleSize = shapeSize('circle', size);\n    const tolerance = 2 + circleSize / 2;\n    const xOffset = centerX - x;\n    const yOffset = centerY - y;\n    const dist = Math.sqrt(xOffset * xOffset + yOffset * yOffset);\n    return dist <= tolerance;\n}\n", "import { shapeSize } from './utils';\nexport function drawSquare(ctx, coords, size) {\n    const squareSize = shapeSize('square', size);\n    const halfSize = ((squareSize - 1) * coords.pixelRatio) / 2;\n    const left = coords.x - halfSize;\n    const top = coords.y - halfSize;\n    ctx.fillRect(left, top, squareSize * coords.pixelRatio, squareSize * coords.pixelRatio);\n}\nexport function hitTestSquare(centerX, centerY, size, x, y) {\n    const squareSize = shapeSize('square', size);\n    const halfSize = (squareSize - 1) / 2;\n    const left = centerX - halfSize;\n    const top = centerY - halfSize;\n    return x >= left && x <= left + squareSize &&\n        y >= top && y <= top + squareSize;\n}\n", "export function drawText(ctx, text, x, y, horizontalPixelRatio, verticalPixelRatio) {\n    ctx.save();\n    ctx.scale(horizontalPixelRatio, verticalPixelRatio);\n    ctx.fillText(text, x, y);\n    ctx.restore();\n}\nexport function hitTestText(textX, textY, textWidth, textHeight, x, y) {\n    const halfHeight = textHeight / 2;\n    return x >= textX && x <= textX + textWidth &&\n        y >= textY - halfHeight && y <= textY + halfHeight;\n}\n", "import { ensureNever } from '../../helpers/assertions';\nimport { makeFont } from '../../helpers/make-font';\nimport { TextWidthCache } from '../../model/text-width-cache';\nimport { drawArrow, hitTestArrow } from './series-markers-arrow';\nimport { drawCircle, hitTestCircle } from './series-markers-circle';\nimport { drawSquare, hitTestSquare } from './series-markers-square';\nimport { drawText, hitTestText } from './series-markers-text';\nexport class SeriesMarkersRenderer {\n    constructor() {\n        this._data = null;\n        this._textWidthCache = new TextWidthCache();\n        this._fontSize = -1;\n        this._fontFamily = '';\n        this._font = '';\n        this._zOrder = 'normal';\n    }\n    setData(data) {\n        this._data = data;\n    }\n    setParams(fontSize, fontFamily, zOrder) {\n        if (this._fontSize !== fontSize || this._fontFamily !== fontFamily) {\n            this._fontSize = fontSize;\n            this._fontFamily = fontFamily;\n            this._font = makeFont(fontSize, fontFamily);\n            this._textWidthCache.reset();\n        }\n        this._zOrder = zOrder;\n    }\n    hitTest(x, y) {\n        if (this._data === null || this._data.visibleRange === null) {\n            return null;\n        }\n        for (let i = this._data.visibleRange.from; i < this._data.visibleRange.to; i++) {\n            const item = this._data.items[i];\n            if (item && hitTestItem(item, x, y)) {\n                return {\n                    zOrder: 'normal',\n                    externalId: item.externalId ?? '',\n                };\n            }\n        }\n        return null;\n    }\n    draw(target) {\n        if (this._zOrder === 'aboveSeries') {\n            return;\n        }\n        target.useBitmapCoordinateSpace((scope) => {\n            this._drawImpl(scope);\n        });\n    }\n    drawBackground(target) {\n        if (this._zOrder !== 'aboveSeries') {\n            return;\n        }\n        target.useBitmapCoordinateSpace((scope) => {\n            this._drawImpl(scope);\n        });\n    }\n    _drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._data === null || this._data.visibleRange === null) {\n            return;\n        }\n        ctx.textBaseline = 'middle';\n        ctx.font = this._font;\n        for (let index = this._data.visibleRange.from; index < this._data.visibleRange.to; index++) {\n            const item = this._data.items[index];\n            if (item.text !== undefined) {\n                item.text.width = this._textWidthCache.measureText(ctx, item.text.content);\n                item.text.height = this._fontSize;\n                item.text.x = item.x - item.text.width / 2;\n            }\n            drawItem(item, ctx, horizontalPixelRatio, verticalPixelRatio);\n        }\n    }\n}\nfunction bitmapShapeItemCoordinates(item, horizontalPixelRatio, verticalPixelRatio) {\n    const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n    const correction = (tickWidth % 2) / 2;\n    return {\n        x: Math.round(item.x * horizontalPixelRatio) + correction,\n        y: item.y * verticalPixelRatio,\n        pixelRatio: horizontalPixelRatio,\n    };\n}\nfunction drawItem(item, ctx, horizontalPixelRatio, verticalPixelRatio) {\n    ctx.fillStyle = item.color;\n    if (item.text !== undefined) {\n        drawText(ctx, item.text.content, item.text.x, item.text.y, horizontalPixelRatio, verticalPixelRatio);\n    }\n    drawShape(item, ctx, bitmapShapeItemCoordinates(item, horizontalPixelRatio, verticalPixelRatio));\n}\nfunction drawShape(item, ctx, coordinates) {\n    if (item.size === 0) {\n        return;\n    }\n    switch (item.shape) {\n        case 'arrowDown':\n            drawArrow(false, ctx, coordinates, item.size);\n            return;\n        case 'arrowUp':\n            drawArrow(true, ctx, coordinates, item.size);\n            return;\n        case 'circle':\n            drawCircle(ctx, coordinates, item.size);\n            return;\n        case 'square':\n            drawSquare(ctx, coordinates, item.size);\n            return;\n    }\n    ensureNever(item.shape);\n}\nfunction hitTestItem(item, x, y) {\n    if (item.text !== undefined && hitTestText(item.text.x, item.text.y, item.text.width, item.text.height, x, y)) {\n        return true;\n    }\n    return hitTestShape(item, x, y);\n}\nfunction hitTestShape(item, x, y) {\n    if (item.size === 0) {\n        return false;\n    }\n    switch (item.shape) {\n        case 'arrowDown':\n            return hitTestArrow(true, item.x, item.y, item.size, x, y);\n        case 'arrowUp':\n            return hitTestArrow(false, item.x, item.y, item.size, x, y);\n        case 'circle':\n            return hitTestCircle(item.x, item.y, item.size, x, y);\n        case 'square':\n            return hitTestSquare(item.x, item.y, item.size, x, y);\n    }\n}\n", "import { ensureNever, ensureNotNull } from '../../helpers/assertions';\nimport { isNumber } from '../../helpers/strict-type-checks';\nimport { RangeImpl } from '../../model/range-impl';\nimport { visibleTimedValues } from '../../model/time-data';\nimport { SeriesMarkersRenderer, } from './renderer';\nimport { calculateShapeHeight, shapeMargin as calculateShapeMargin, } from './utils';\nvar Constants;\n(function (Constants) {\n    Constants[Constants[\"TextMargin\"] = 0.1] = \"TextMargin\";\n})(Constants || (Constants = {}));\nfunction isPriceMarker(position) {\n    return position === 'atPriceTop' || position === 'atPriceBottom' || position === 'atPriceMiddle';\n}\nfunction getPrice(seriesData, marker, isInverted) {\n    if (isPriceMarker(marker.position) && marker.price !== undefined) {\n        return marker.price;\n    }\n    if (isValueData(seriesData)) {\n        return seriesData.value;\n    }\n    if (isOhlcData(seriesData)) {\n        if (marker.position === 'inBar') {\n            return seriesData.close;\n        }\n        if (marker.position === 'aboveBar') {\n            if (!isInverted) {\n                return seriesData.high;\n            }\n            return seriesData.low;\n        }\n        if (marker.position === 'belowBar') {\n            if (!isInverted) {\n                return seriesData.low;\n            }\n            return seriesData.high;\n        }\n    }\n    return;\n}\n// eslint-disable-next-line max-params, complexity\nfunction fillSizeAndY(rendererItem, marker, seriesData, offsets, textHeight, shapeMargin, series, chart) {\n    const price = getPrice(seriesData, marker, series.priceScale().options().invertScale);\n    if (price === undefined) {\n        return;\n    }\n    const ignoreOffset = isPriceMarker(marker.position);\n    const timeScale = chart.timeScale();\n    const sizeMultiplier = isNumber(marker.size) ? Math.max(marker.size, 0) : 1;\n    const shapeSize = calculateShapeHeight(timeScale.options().barSpacing) * sizeMultiplier;\n    const halfSize = shapeSize / 2;\n    rendererItem.size = shapeSize;\n    const position = marker.position;\n    switch (position) {\n        case 'inBar':\n        case 'atPriceMiddle': {\n            rendererItem.y = ensureNotNull(series.priceToCoordinate(price));\n            if (rendererItem.text !== undefined) {\n                rendererItem.text.y = rendererItem.y + halfSize + shapeMargin + textHeight * (0.5 + 0.1 /* Constants.TextMargin */);\n            }\n            return;\n        }\n        case 'aboveBar':\n        case 'atPriceTop': {\n            const offset = ignoreOffset ? 0 : offsets.aboveBar;\n            rendererItem.y = (ensureNotNull(series.priceToCoordinate(price)) - halfSize - offset);\n            if (rendererItem.text !== undefined) {\n                rendererItem.text.y = rendererItem.y - halfSize - textHeight * (0.5 + 0.1 /* Constants.TextMargin */);\n                offsets.aboveBar += textHeight * (1 + 2 * 0.1 /* Constants.TextMargin */);\n            }\n            if (!ignoreOffset) {\n                offsets.aboveBar += shapeSize + shapeMargin;\n            }\n            return;\n        }\n        case 'belowBar':\n        case 'atPriceBottom': {\n            const offset = ignoreOffset ? 0 : offsets.belowBar;\n            rendererItem.y = (ensureNotNull(series.priceToCoordinate(price)) + halfSize + offset);\n            if (rendererItem.text !== undefined) {\n                rendererItem.text.y = (rendererItem.y + halfSize + shapeMargin + textHeight * (0.5 + 0.1 /* Constants.TextMargin */));\n                offsets.belowBar += textHeight * (1 + 2 * 0.1 /* Constants.TextMargin */);\n            }\n            if (!ignoreOffset) {\n                offsets.belowBar += shapeSize + shapeMargin;\n            }\n            return;\n        }\n    }\n    ensureNever(position);\n}\nfunction isValueData(data) {\n    // eslint-disable-next-line no-restricted-syntax\n    return 'value' in data && typeof data.value === 'number';\n}\nfunction isOhlcData(data) {\n    // eslint-disable-next-line no-restricted-syntax\n    return 'open' in data && 'high' in data && 'low' in data && 'close' in data;\n}\nexport class SeriesMarkersPaneView {\n    constructor(series, chart, options) {\n        this._markers = [];\n        this._invalidated = true;\n        this._dataInvalidated = true;\n        this._renderer = new SeriesMarkersRenderer();\n        this._series = series;\n        this._chart = chart;\n        this._data = {\n            items: [],\n            visibleRange: null,\n        };\n        this._options = options;\n    }\n    renderer() {\n        if (!this._series.options().visible) {\n            return null;\n        }\n        if (this._invalidated) {\n            this._makeValid();\n        }\n        const layout = this._chart.options()['layout'];\n        this._renderer.setParams(layout.fontSize, layout.fontFamily, this._options.zOrder);\n        this._renderer.setData(this._data);\n        return this._renderer;\n    }\n    setMarkers(markers) {\n        this._markers = markers;\n        this.update('data');\n    }\n    update(updateType) {\n        this._invalidated = true;\n        if (updateType === 'data') {\n            this._dataInvalidated = true;\n        }\n    }\n    updateOptions(options) {\n        this._invalidated = true;\n        this._options = options;\n    }\n    zOrder() {\n        return this._options.zOrder === 'aboveSeries' ? 'top' : this._options.zOrder;\n    }\n    _makeValid() {\n        const timeScale = this._chart.timeScale();\n        const seriesMarkers = this._markers;\n        if (this._dataInvalidated) {\n            this._data.items = seriesMarkers.map((marker) => ({\n                time: marker.time,\n                x: 0,\n                y: 0,\n                size: 0,\n                shape: marker.shape,\n                color: marker.color,\n                externalId: marker.id,\n                internalId: marker.internalId,\n                text: undefined,\n            }));\n            this._dataInvalidated = false;\n        }\n        const layoutOptions = this._chart.options()['layout'];\n        this._data.visibleRange = null;\n        const visibleBars = timeScale.getVisibleLogicalRange();\n        if (visibleBars === null) {\n            return;\n        }\n        const visibleBarsRange = new RangeImpl(Math.floor(visibleBars.from), Math.ceil(visibleBars.to));\n        const firstValue = this._series.data()[0];\n        if (firstValue === null) {\n            return;\n        }\n        if (this._data.items.length === 0) {\n            return;\n        }\n        let prevTimeIndex = NaN;\n        const shapeMargin = calculateShapeMargin(timeScale.options().barSpacing);\n        const offsets = {\n            aboveBar: shapeMargin,\n            belowBar: shapeMargin,\n        };\n        this._data.visibleRange = visibleTimedValues(this._data.items, visibleBarsRange, true);\n        for (let index = this._data.visibleRange.from; index < this._data.visibleRange.to; index++) {\n            const marker = seriesMarkers[index];\n            if (marker.time !== prevTimeIndex) {\n                // new bar, reset stack counter\n                offsets.aboveBar = shapeMargin;\n                offsets.belowBar = shapeMargin;\n                prevTimeIndex = marker.time;\n            }\n            const rendererItem = this._data.items[index];\n            rendererItem.x = ensureNotNull(timeScale.logicalToCoordinate(marker.time));\n            if (marker.text !== undefined && marker.text.length > 0) {\n                rendererItem.text = {\n                    content: marker.text,\n                    x: 0,\n                    y: 0,\n                    width: 0,\n                    height: 0,\n                };\n            }\n            const dataAt = this._series.dataByIndex(marker.time, 0 /* MismatchDirection.None */);\n            if (dataAt === null) {\n                continue;\n            }\n            fillSizeAndY(rendererItem, marker, dataAt, offsets, layoutOptions.fontSize, shapeMargin, this._series, this._chart);\n        }\n        this._invalidated = false;\n    }\n}\n", "import { ensureNotNull } from '../../helpers/assertions';\nimport { seriesMarkerOptionsDefaults } from './options';\nimport { SeriesMarkersPaneView } from './pane-view';\nimport { calculateAdjustedMargin, calculateShapeHeight, shapeMargin as calculateShapeMargin, } from './utils';\nfunction mergeOptionsWithDefaults(options) {\n    return {\n        ...seriesMarkerOptionsDefaults,\n        ...options,\n    };\n}\nexport class SeriesMarkersPrimitive {\n    constructor(options) {\n        this._paneView = null;\n        this._markers = [];\n        this._indexedMarkers = [];\n        this._dataChangedHandler = null;\n        this._series = null;\n        this._chart = null;\n        this._autoScaleMarginsInvalidated = true;\n        this._autoScaleMargins = null;\n        this._markersPositions = null;\n        this._cachedBarSpacing = null;\n        this._recalculationRequired = true;\n        this._options = mergeOptionsWithDefaults(options);\n    }\n    attached(param) {\n        this._recalculateMarkers();\n        this._chart = param.chart;\n        this._series = param.series;\n        this._paneView = new SeriesMarkersPaneView(this._series, ensureNotNull(this._chart), this._options);\n        this._requestUpdate = param.requestUpdate;\n        this._series.subscribeDataChanged((scope) => this._onDataChanged(scope));\n        this._recalculationRequired = true;\n        this.requestUpdate();\n    }\n    requestUpdate() {\n        if (this._requestUpdate) {\n            this._requestUpdate();\n        }\n    }\n    detached() {\n        if (this._series && this._dataChangedHandler) {\n            this._series.unsubscribeDataChanged(this._dataChangedHandler);\n        }\n        this._chart = null;\n        this._series = null;\n        this._paneView = null;\n        this._dataChangedHandler = null;\n    }\n    setMarkers(markers) {\n        this._recalculationRequired = true;\n        this._markers = markers;\n        this._recalculateMarkers();\n        this._autoScaleMarginsInvalidated = true;\n        this._markersPositions = null;\n        this.requestUpdate();\n    }\n    markers() {\n        return this._markers;\n    }\n    paneViews() {\n        return this._paneView ? [this._paneView] : [];\n    }\n    updateAllViews() {\n        this._updateAllViews();\n    }\n    hitTest(x, y) {\n        if (this._paneView) {\n            return this._paneView.renderer()?.hitTest(x, y) ?? null;\n        }\n        return null;\n    }\n    autoscaleInfo(startTimePoint, endTimePoint) {\n        if (this._options.autoScale && this._paneView) {\n            const margins = this._getAutoScaleMargins();\n            if (margins) {\n                return {\n                    priceRange: null,\n                    margins: margins,\n                };\n            }\n        }\n        return null;\n    }\n    applyOptions(options) {\n        this._options = mergeOptionsWithDefaults({ ...this._options, ...options });\n        if (this.requestUpdate) {\n            this.requestUpdate();\n        }\n    }\n    _getAutoScaleMargins() {\n        const chart = ensureNotNull(this._chart);\n        const barSpacing = chart.timeScale().options().barSpacing;\n        if (this._autoScaleMarginsInvalidated || barSpacing !== this._cachedBarSpacing) {\n            this._cachedBarSpacing = barSpacing;\n            if (this._markers.length > 0) {\n                const shapeMargin = calculateShapeMargin(barSpacing);\n                const marginValue = calculateShapeHeight(barSpacing) * 1.5 + shapeMargin * 2;\n                const positions = this._getMarkerPositions();\n                this._autoScaleMargins = {\n                    above: calculateAdjustedMargin(marginValue, positions.aboveBar, positions.inBar),\n                    below: calculateAdjustedMargin(marginValue, positions.belowBar, positions.inBar),\n                };\n            }\n            else {\n                this._autoScaleMargins = null;\n            }\n            this._autoScaleMarginsInvalidated = false;\n        }\n        return this._autoScaleMargins;\n    }\n    _getMarkerPositions() {\n        if (this._markersPositions === null) {\n            this._markersPositions = this._markers.reduce((acc, marker) => {\n                if (!acc[marker.position]) {\n                    acc[marker.position] = true;\n                }\n                return acc;\n            }, {\n                inBar: false,\n                aboveBar: false,\n                belowBar: false,\n                atPriceTop: false,\n                atPriceBottom: false,\n                atPriceMiddle: false,\n            });\n        }\n        return this._markersPositions;\n    }\n    _recalculateMarkers() {\n        if (!this._recalculationRequired || !this._chart || !this._series) {\n            return;\n        }\n        const timeScale = this._chart.timeScale();\n        const seriesData = this._series?.data();\n        if (timeScale.getVisibleLogicalRange() == null || !this._series || seriesData.length === 0) {\n            this._indexedMarkers = [];\n            return;\n        }\n        const firstDataIndex = timeScale.timeToIndex(ensureNotNull(seriesData[0].time), true);\n        this._indexedMarkers = this._markers.map((marker, index) => {\n            const timePointIndex = timeScale.timeToIndex(marker.time, true);\n            const searchMode = timePointIndex < firstDataIndex ? 1 /* MismatchDirection.NearestRight */ : -1 /* MismatchDirection.NearestLeft */;\n            const seriesDataByIndex = ensureNotNull(this._series).dataByIndex(timePointIndex, searchMode);\n            const finalIndex = timeScale.timeToIndex(ensureNotNull(seriesDataByIndex).time, false);\n            // You must explicitly define the types so that the minification build processes the field names correctly\n            const baseMarker = {\n                time: finalIndex,\n                position: marker.position,\n                shape: marker.shape,\n                color: marker.color,\n                id: marker.id,\n                internalId: index,\n                text: marker.text,\n                size: marker.size,\n                price: marker.price,\n                originalTime: marker.time,\n            };\n            if (marker.position === 'atPriceTop' ||\n                marker.position === 'atPriceBottom' ||\n                marker.position === 'atPriceMiddle') {\n                if (marker.price === undefined) {\n                    throw new Error(`Price is required for position ${marker.position}`);\n                }\n                return {\n                    ...baseMarker,\n                    position: marker.position, // TypeScript knows this is SeriesMarkerPricePosition\n                    price: marker.price,\n                };\n            }\n            else {\n                return {\n                    ...baseMarker,\n                    position: marker.position, // TypeScript knows this is SeriesMarkerBarPosition\n                    price: marker.price, // Optional for bar positions\n                };\n            }\n        });\n        this._recalculationRequired = false;\n    }\n    _updateAllViews(updateType) {\n        if (this._paneView) {\n            this._recalculateMarkers();\n            this._paneView.setMarkers(this._indexedMarkers);\n            this._paneView.updateOptions(this._options);\n            this._paneView.update(updateType);\n        }\n    }\n    _onDataChanged(scope) {\n        this._recalculationRequired = true;\n        this.requestUpdate();\n    }\n}\n", "import { SeriesPrimitiveAdapter } from '../series-primitive-adapter';\nimport { SeriesMarkersPrimitive } from './primitive';\nclass SeriesMarkersPrimitiveWrapper extends SeriesPrimitiveAdapter {\n    constructor(series, primitive, markers) {\n        super(series, primitive);\n        if (markers) {\n            this.setMarkers(markers);\n        }\n    }\n    setMarkers(markers) {\n        this._primitive.setMarkers(markers);\n    }\n    markers() {\n        return this._primitive.markers();\n    }\n}\n/**\n * A function to create a series markers primitive.\n *\n * @param series - The series to which the primitive will be attached.\n *\n * @param markers - An array of markers to be displayed on the series.\n *\n * @param options - Options for the series markers plugin.\n *\n * @example\n * ```js\n * import { createSeriesMarkers } from 'lightweight-charts';\n *\n *\tconst seriesMarkers = createSeriesMarkers(\n *\t\tseries,\n *\t\t[\n *\t\t\t{\n *\t\t\t\tcolor: 'green',\n *\t\t\t\tposition: 'inBar',\n * \t\t\t\tshape: 'arrowDown',\n *\t\t\t\ttime: 1556880900,\n *\t\t\t},\n *\t\t]\n *\t);\n *  // and then you can modify the markers\n *  // set it to empty array to remove all markers\n *  seriesMarkers.setMarkers([]);\n *\n *  // `seriesMarkers.markers()` returns current markers\n * ```\n */\nexport function createSeriesMarkers(series, markers, options) {\n    const wrapper = new SeriesMarkersPrimitiveWrapper(series, new SeriesMarkersPrimitive(options ?? {}));\n    if (markers) {\n        wrapper.setMarkers(markers);\n    }\n    return wrapper;\n}\n", "export class ExpiringMarkerManager {\n    constructor(updateCallback) {\n        this._markers = new Map();\n        this._updateCallback = updateCallback;\n    }\n    setMarker(marker, key, timeout) {\n        this.clearMarker(key);\n        if (timeout !== undefined) {\n            const timeoutId = window.setTimeout(() => {\n                this._markers.delete(key);\n                this._triggerUpdate();\n            }, timeout);\n            const markerWithTimeout = {\n                ...marker,\n                timeoutId,\n                expiresAt: Date.now() + timeout,\n            };\n            this._markers.set(key, markerWithTimeout);\n        }\n        else {\n            // For markers without timeout, we set timeoutId and expiresAt to undefined\n            this._markers.set(key, {\n                ...marker,\n                timeoutId: undefined,\n                expiresAt: undefined,\n            });\n        }\n        this._triggerUpdate();\n    }\n    clearMarker(key) {\n        const marker = this._markers.get(key);\n        if (marker && marker.timeoutId !== undefined) {\n            window.clearTimeout(marker.timeoutId);\n        }\n        this._markers.delete(key);\n        this._triggerUpdate();\n    }\n    clearAllMarkers() {\n        for (const [point] of this._markers) {\n            this.clearMarker(point);\n        }\n    }\n    getMarkers() {\n        const now = Date.now();\n        const activeMarkers = [];\n        for (const [time, marker] of this._markers) {\n            if (!marker.expiresAt || marker.expiresAt > now) {\n                activeMarkers.push({ time: marker.time, sign: marker.sign, value: marker.value });\n            }\n            else {\n                this.clearMarker(time);\n            }\n        }\n        return activeMarkers;\n    }\n    setUpdateCallback(callback) {\n        this._updateCallback = callback;\n    }\n    _triggerUpdate() {\n        if (this._updateCallback) {\n            this._updateCallback();\n        }\n    }\n}\n", "export const upDownMarkersPluginOptionDefaults = {\n    positiveColor: '#22AB94',\n    negativeColor: '#F7525F',\n    updateVisibilityDuration: 5000,\n};\n", "var Constants;\n(function (Constants) {\n    Constants[Constants[\"Radius\"] = 4] = \"Radius\";\n    Constants[Constants[\"ArrowSize\"] = 4.7] = \"ArrowSize\";\n    Constants[Constants[\"ArrowOffset\"] = 7] = \"ArrowOffset\";\n    Constants[Constants[\"ArrowLineWidth\"] = 2] = \"ArrowLineWidth\";\n    Constants[Constants[\"VerticalScale\"] = 0.5] = \"VerticalScale\";\n})(Constants || (Constants = {}));\nexport class MarkersPrimitiveRenderer {\n    constructor(data, neutralColor, negativeColor, positiveColor) {\n        this._data = data;\n        this._neutralColor = neutralColor;\n        this._negativeColor = negativeColor;\n        this._positiveColor = positiveColor;\n    }\n    draw(target) {\n        target.useBitmapCoordinateSpace((scope) => {\n            const ctx = scope.context;\n            const tickWidth = Math.max(1, Math.floor(scope.horizontalPixelRatio));\n            const correction = (tickWidth % 2) / 2;\n            const rad = 4 /* Constants.Radius */ * scope.verticalPixelRatio + correction;\n            this._data.forEach((item) => {\n                const centreX = Math.round(item.x * scope.horizontalPixelRatio) + correction;\n                ctx.beginPath();\n                const color = this._getColor(item.sign);\n                ctx.fillStyle = color;\n                ctx.arc(centreX, item.y * scope.verticalPixelRatio, rad, 0, 2 * Math.PI, false);\n                ctx.fill();\n                if (item.sign) {\n                    ctx.strokeStyle = color;\n                    ctx.lineWidth = Math.floor(2 /* Constants.ArrowLineWidth */ * scope.horizontalPixelRatio);\n                    ctx.beginPath();\n                    ctx.moveTo((item.x - 4.7 /* Constants.ArrowSize */) * scope.horizontalPixelRatio + correction, (item.y - 7 /* Constants.ArrowOffset */ * item.sign) *\n                        scope.verticalPixelRatio);\n                    ctx.lineTo(item.x * scope.horizontalPixelRatio + correction, (item.y -\n                        7 /* Constants.ArrowOffset */ * item.sign -\n                        7 /* Constants.ArrowOffset */ * item.sign * 0.5 /* Constants.VerticalScale */) *\n                        scope.verticalPixelRatio);\n                    ctx.lineTo((item.x + 4.7 /* Constants.ArrowSize */) * scope.horizontalPixelRatio + correction, (item.y - 7 /* Constants.ArrowOffset */ * item.sign) *\n                        scope.verticalPixelRatio);\n                    ctx.stroke();\n                }\n            });\n        });\n    }\n    _getColor(sign) {\n        if (sign === 0) {\n            return this._neutralColor;\n        }\n        return sign > 0 ? this._positiveColor : this._negativeColor;\n    }\n}\n", "import { ensureNotNull } from '../../helpers/assertions';\nimport { notNull } from '../../helpers/strict-type-checks';\nimport { MarkersPrimitiveRenderer } from './renderer';\nfunction isAreaStyleOptions(opts, seriesType) {\n    return seriesType === 'Area';\n}\nfunction getNeutralColor(opts, seriesType) {\n    if (isAreaStyleOptions(opts, seriesType)) {\n        return opts.lineColor;\n    }\n    return opts.color;\n}\nexport class MarkersPrimitivePaneView {\n    constructor(series, timeScale, options) {\n        this._data = [];\n        this._series = series;\n        this._timeScale = timeScale;\n        this._options = options;\n    }\n    update(markers) {\n        this._data = markers.map((marker) => {\n            const y = this._series.priceToCoordinate(marker.value);\n            if (y === null) {\n                return null;\n            }\n            const x = ensureNotNull(this._timeScale.timeToCoordinate(marker.time));\n            return {\n                x,\n                y,\n                sign: marker.sign,\n            };\n        })\n            .filter(notNull);\n    }\n    renderer() {\n        const options = this._series.options();\n        const seriesType = this._series.seriesType();\n        const neutralColor = getNeutralColor(options, seriesType);\n        return new MarkersPrimitiveRenderer(this._data, neutralColor, this._options.negativeColor, this._options.positiveColor);\n    }\n}\n", "import { ensureDefined } from '../../helpers/assertions';\nimport { isFulfilledData, isWhitespaceData } from '../../model/data-consumer';\nimport { ExpiringMarkerManager } from './expiring-markers-manager';\nimport { upDownMarkersPluginOptionDefaults, } from './options';\nimport { MarkersPrimitivePaneView } from './view';\nfunction isLineData(item, type) {\n    return type === 'Line' || type === 'Area';\n}\nexport class UpDownMarkersPrimitive {\n    constructor(options) {\n        this._chart = undefined;\n        this._series = undefined;\n        this._paneViews = [];\n        this._horzScaleBehavior = null;\n        this._managedDataPoints = new Map();\n        this._markersManager = new ExpiringMarkerManager(() => this.requestUpdate());\n        this._options = {\n            ...upDownMarkersPluginOptionDefaults,\n            ...options,\n        };\n    }\n    applyOptions(options) {\n        this._options = {\n            ...this._options,\n            ...options,\n        };\n        this.requestUpdate();\n    }\n    setMarkers(markers) {\n        this._markersManager.clearAllMarkers();\n        const horzBehaviour = this._horzScaleBehavior;\n        if (!horzBehaviour) {\n            return;\n        }\n        markers.forEach((marker) => {\n            this._markersManager.setMarker(marker, horzBehaviour.key(marker.time));\n        });\n    }\n    markers() {\n        return this._markersManager.getMarkers();\n    }\n    requestUpdate() {\n        this._requestUpdate?.();\n    }\n    attached(params) {\n        const { chart, series, requestUpdate, horzScaleBehavior, } = params;\n        this._chart = chart;\n        this._series = series;\n        this._horzScaleBehavior = horzScaleBehavior;\n        const seriesType = this._series.seriesType();\n        if (seriesType !== 'Area' && seriesType !== 'Line') {\n            throw new Error('UpDownMarkersPrimitive is only supported for Area and Line series types');\n        }\n        this._paneViews = [\n            new MarkersPrimitivePaneView(this._series, this._chart.timeScale(), this._options),\n        ];\n        this._requestUpdate = requestUpdate;\n        this.requestUpdate();\n    }\n    detached() {\n        this._chart = undefined;\n        this._series = undefined;\n        this._requestUpdate = undefined;\n    }\n    chart() {\n        return ensureDefined(this._chart);\n    }\n    series() {\n        return ensureDefined(this._series);\n    }\n    updateAllViews() {\n        this._paneViews.forEach((pw) => pw.update(this.markers()));\n    }\n    paneViews() {\n        return this._paneViews;\n    }\n    setData(data) {\n        if (!this._series) {\n            throw new Error('Primitive not attached to series');\n        }\n        const seriesType = this._series.seriesType();\n        this._managedDataPoints.clear();\n        const horzBehaviour = this._horzScaleBehavior;\n        if (horzBehaviour) {\n            data.forEach((d) => {\n                if (isFulfilledData(d) && isLineData(d, seriesType)) {\n                    this._managedDataPoints.set(horzBehaviour.key(d.time), d.value);\n                }\n            });\n        }\n        ensureDefined(this._series).setData(data);\n    }\n    update(data, historicalUpdate) {\n        if (!this._series || !this._horzScaleBehavior) {\n            throw new Error('Primitive not attached to series');\n        }\n        const seriesType = this._series.seriesType();\n        const horzKey = this._horzScaleBehavior.key(data.time);\n        if (isWhitespaceData(data)) {\n            this._managedDataPoints.delete(horzKey);\n        }\n        if (isFulfilledData(data) && isLineData(data, seriesType)) {\n            const existingPrice = this._managedDataPoints.get(horzKey);\n            if (existingPrice) {\n                this._markersManager.setMarker({\n                    time: data.time,\n                    value: data.value,\n                    sign: getSign(data.value, existingPrice),\n                }, horzKey, this._options.updateVisibilityDuration);\n            }\n        }\n        ensureDefined(this._series).update(data, historicalUpdate);\n    }\n    clearMarkers() {\n        this._markersManager.clearAllMarkers();\n    }\n}\nfunction getSign(newValue, oldValue) {\n    if (newValue === oldValue) {\n        return 0;\n    }\n    return newValue - oldValue > 0 ? 1 : -1;\n}\n", "import { SeriesPrimitiveAdapter, } from '../series-primitive-adapter';\nimport { UpDownMarkersPrimitive } from './primitive';\nclass SeriesUpDownMarkerPrimitiveWrapper extends SeriesPrimitiveAdapter {\n    setData(data) {\n        return this._primitive.setData(data);\n    }\n    update(data, historicalUpdate) {\n        return this._primitive.update(data, historicalUpdate);\n    }\n    markers() {\n        return this._primitive.markers();\n    }\n    setMarkers(markers) {\n        return this._primitive.setMarkers(markers);\n    }\n    clearMarkers() {\n        return this._primitive.clearMarkers();\n    }\n}\n/**\n * Creates and attaches the Series Up Down Markers Plugin.\n *\n * @param series - Series to which attach the Up Down Markers Plugin\n * @param options - options for the Up Down Markers Plugin\n *\n * @returns Api for Series Up Down Marker Plugin. {@link ISeriesUpDownMarkerPluginApi}\n *\n * @example\n * ```js\n * import { createUpDownMarkers, createChart, LineSeries } from 'lightweight-charts';\n *\n * const chart = createChart('container');\n * const lineSeries = chart.addSeries(LineSeries);\n * const upDownMarkers = createUpDownMarkers(lineSeries, {\n *     positiveColor: '#22AB94',\n *     negativeColor: '#F7525F',\n *     updateVisibilityDuration: 5000,\n * });\n * // to add some data\n * upDownMarkers.setData(\n *     [\n *         { time: '2020-02-02', value: 12.34 },\n *         //... more line series data\n *     ]\n * );\n * // ... Update some values\n * upDownMarkers.update({ time: '2020-02-02', value: 13.54 }, true);\n * // to remove plugin from the series\n * upDownMarkers.detach();\n * ```\n */\nexport function createUpDownMarkers(series, options = {}) {\n    const wrapper = new SeriesUpDownMarkerPrimitiveWrapper(series, new UpDownMarkersPrimitive(options));\n    return wrapper;\n}\n", "/**\n * Internal TTL + capacity FIFO cache used by drawing runtime.\n * - Eviction policy: FIFO by insertion order (not LRU)\n * - Freshness: entry usable if now - stamp <= ttlMs\n */\nexport class TTLCache {\n    constructor(limit, ttlMs, nowProvider) {\n        const l = Math.max(1, Math.floor(Number.isFinite(limit) ? limit : 1));\n        this._limit = l;\n        this._ttlMs = Math.max(0, Math.floor(Number.isFinite(ttlMs) ? ttlMs : 0));\n        this._now = nowProvider ?? (() => Date.now());\n        this._map = new Map();\n    }\n    get(key) {\n        const e = this._map.get(key);\n        if (!e) {\n            return undefined;\n        }\n        if (this._isFresh(e.stamp)) {\n            return e.value;\n        }\n        return undefined;\n    }\n    set(key, value) {\n        if (!this._map.has(key) && this._map.size >= this._limit) {\n            this._evictOne();\n        }\n        this._map.set(key, { value, stamp: this._now() });\n    }\n    getOrCompute(key, compute) {\n        const now = this._now();\n        const e = this._map.get(key);\n        if (e && this._isFresh(e.stamp, now)) {\n            return e.value;\n        }\n        const value = compute();\n        if (!this._map.has(key) && this._map.size >= this._limit) {\n            this._evictOne();\n        }\n        this._map.set(key, { value, stamp: now });\n        return value;\n    }\n    clear() {\n        this._map.clear();\n    }\n    _evictOne() {\n        const it = this._map.keys();\n        const first = it.next();\n        if (!first.done) {\n            this._map.delete(first.value);\n        }\n    }\n    _isFresh(stamp, now) {\n        const n = now ?? this._now();\n        return (n - stamp) <= this._ttlMs;\n    }\n}\n", "/**\n * Convert chart MouseEventParams into DrawingPointerEvent used by drawing runtime.\n * Returns null when point is missing (e.g., mouse leave).\n */\nexport function pointerEventFromParams(params, type) {\n    if (!params.point) {\n        return null;\n    }\n    const source = params.sourceEvent;\n    const pointX = params.point.x;\n    const pointY = params.point.y;\n    const price = params.hoveredSeries ? params.hoveredSeries.coordinateToPrice(pointY) : null;\n    return {\n        clientX: source?.clientX ?? pointX,\n        clientY: source?.clientY ?? pointY,\n        point: { x: pointX, y: pointY },\n        rawEvent: createSyntheticMouseEvent(type, source),\n        time: params.time,\n        logical: params.logical,\n        price: price ?? undefined,\n        pointerType: 'mouse',\n        isPrimary: true,\n        altKey: source?.altKey ?? false,\n        ctrlKey: source?.ctrlKey ?? false,\n        metaKey: source?.metaKey ?? false,\n        shiftKey: source?.shiftKey ?? false,\n    };\n}\n/**\n * Create a synthetic MouseEvent with minimal fields used by pointers pipeline.\n * In Node/test environments where MouseEvent is not available, returns a plain object with { type }.\n */\nexport function createSyntheticMouseEvent(type, data) {\n    if (typeof globalThis.MouseEvent === 'function') {\n        return new MouseEvent(type, {\n            clientX: data?.clientX,\n            clientY: data?.clientY,\n            screenX: data?.screenX,\n            screenY: data?.screenY,\n            ctrlKey: data?.ctrlKey ?? false,\n            altKey: data?.altKey ?? false,\n            shiftKey: data?.shiftKey ?? false,\n            metaKey: data?.metaKey ?? false,\n        });\n    }\n    return { type };\n}\n", "/**\n * Subscribe to click/crosshairMove and optionally to dblclick (if chart supports it).\n * Returns a handle with a single unsubscribe() to clean up.\n */\nexport function subscribeAll(chart, handlers) {\n    chart.subscribeClick(handlers.click);\n    chart.subscribeCrosshairMove(handlers.move);\n    const chartWithDbl = chart;\n    let dblClickSubscribed = false;\n    if (handlers.dblClick && typeof chartWithDbl.subscribeDblClick === 'function') {\n        chartWithDbl.subscribeDblClick(handlers.dblClick);\n        dblClickSubscribed = true;\n    }\n    return {\n        dblClickSubscribed,\n        unsubscribe: () => {\n            chart.unsubscribeClick(handlers.click);\n            chart.unsubscribeCrosshairMove(handlers.move);\n            if (dblClickSubscribed && typeof chartWithDbl.unsubscribeDblClick === 'function' && handlers.dblClick) {\n                chartWithDbl.unsubscribeDblClick(handlers.dblClick);\n            }\n        },\n    };\n}\n", "export class HandleController {\n    constructor() {\n        this._handles = new Map();\n    }\n    add(handle) {\n        this._handles.set(handle.id(), handle);\n    }\n    upsert(handle) {\n        this._handles.set(handle.id(), handle);\n    }\n    delete(id) {\n        this._handles.delete(id);\n    }\n    clear() {\n        this._handles.clear();\n    }\n    has(id) {\n        return this._handles.has(id);\n    }\n    get(id) {\n        return this._handles.get(id);\n    }\n    handles() {\n        return this._handles.values();\n    }\n    setHovered(id) {\n        for (const handle of this._handles.values()) {\n            handle.setHovered(handle.id() === id);\n        }\n    }\n    setActive(id) {\n        for (const handle of this._handles.values()) {\n            handle.setActive(handle.id() === id);\n        }\n    }\n    hitTest(x, y) {\n        for (const handle of Array.from(this._handles.values()).reverse()) {\n            const descriptor = handle.descriptor();\n            if (this._containsPoint(descriptor, x, y)) {\n                return { handle, descriptor };\n            }\n        }\n        return null;\n    }\n    _containsPoint(descriptor, x, y) {\n        const size = descriptor.style.size ?? 8;\n        const half = size / 2;\n        const left = descriptor.position.x - half;\n        const top = descriptor.position.y - half;\n        const right = descriptor.position.x + half;\n        const bottom = descriptor.position.y + half;\n        return x >= left && x <= right && y >= top && y <= bottom;\n    }\n}\n", "/**\n * Minimal event-driven state machine for drawing tool interactions.\n */\nexport class DrawingStateMachine {\n    constructor(initial) {\n        this._states = new Map();\n        this._afterTransitionHook = null;\n        this._initialState = initial;\n        this._currentState = initial;\n    }\n    registerState(id, handlers) {\n        this._states.set(id, handlers);\n    }\n    state() {\n        return this._currentState;\n    }\n    setAfterTransitionHook(hook) {\n        this._afterTransitionHook = hook;\n    }\n    transition(next, context) {\n        if (this._currentState === next) {\n            return;\n        }\n        this._states.get(this._currentState)?.onExit?.();\n        const previous = this._currentState;\n        this._currentState = next;\n        this._states.get(this._currentState)?.onEnter?.(context);\n        this._afterTransitionHook?.(previous, next, context);\n    }\n    pointerClick(context) {\n        this._states.get(this._currentState)?.onPointerClick?.(context);\n    }\n    pointerMove(context) {\n        this._states.get(this._currentState)?.onPointerMove?.(context);\n    }\n    pointerCancel() {\n        this._states.get(this._currentState)?.onPointerCancel?.();\n    }\n    reset() {\n        this._states.get(this._currentState)?.onReset?.();\n        if (this._currentState !== this._initialState) {\n            this._states.get(this._currentState)?.onExit?.();\n            const previous = this._currentState;\n            this._currentState = this._initialState;\n            this._states.get(this._currentState)?.onEnter?.();\n            this._afterTransitionHook?.(previous, this._currentState);\n        }\n    }\n}\n", "import { ensureDefined } from '../helpers/assertions';\nimport { TTLCache } from './internal/TTLCache';\nimport { pointerEventFromParams, createSyntheticMouseEvent } from './internal/PointerEventUtils';\nimport { subscribeAll } from './internal/ChartSubscriptions';\nimport { HandleController } from './handles/handle-controller';\nimport { DrawingStateMachine } from './state/state-machine';\nconst RAF_FALLBACK_TIMEOUT = 16;\nconst DEFAULT_CACHE_LIMIT = 256;\nconst DEFAULT_CACHE_TTL = 32;\n/**\n * Base class for drawing primitives attached to a series. Provides common lifecycle handling,\n * coordinate caching, request batching, and pointer event conversion. Concrete tools should\n * extend this class and wire their state machine + geometry via {@link configureStateMachine}.\n */\nexport class DrawingPrimitiveBase {\n    constructor(initialState = 'idle', cacheLimit = DEFAULT_CACHE_LIMIT, cacheTtl = DEFAULT_CACHE_TTL) {\n        this._handleController = new HandleController();\n        this._pendingFrame = null;\n        this._pendingTimeout = null;\n        // ------------------------------------------------------------------------------------\n        // Internal helpers\n        // ------------------------------------------------------------------------------------\n        this._handleChartClick = (params) => {\n            if (!this._environment) {\n                return;\n            }\n            const pointerEvent = pointerEventFromParams(params, 'click');\n            if (!pointerEvent) {\n                return;\n            }\n            this._stateMachine.pointerClick(pointerEvent);\n            this.handlePointerClick(pointerEvent);\n        };\n        this._handleCrosshairMove = (params) => {\n            if (!this._environment) {\n                return;\n            }\n            const pointerEvent = pointerEventFromParams(params, 'mousemove');\n            if (!pointerEvent) {\n                this._stateMachine.pointerCancel();\n                this.handlePointerCancel();\n                return;\n            }\n            this._stateMachine.pointerMove(pointerEvent);\n            this.handlePointerMove(pointerEvent);\n        };\n        this._handleChartDblClick = () => {\n            // Allow subclass to consume dblclick (e.g., enter editing mode).\n            if (this.handlePointerDblClick()) {\n                return;\n            }\n            this._stateMachine.reset();\n        };\n        this._flushUpdate = () => {\n            this._pendingFrame = null;\n            this._pendingTimeout = null;\n            this._clearCoordinateCaches();\n            this._requestUpdateInternal?.();\n        };\n        this._stateMachine = new DrawingStateMachine(initialState);\n        this._coordinateCacheLimit = cacheLimit;\n        this._coordinateCacheTtl = cacheTtl;\n        this._priceToCoordinateCache = new TTLCache(this._coordinateCacheLimit, this._coordinateCacheTtl);\n        this._coordinateToPriceCache = new TTLCache(this._coordinateCacheLimit, this._coordinateCacheTtl);\n        this._timeToCoordinateCache = new TTLCache(this._coordinateCacheLimit, this._coordinateCacheTtl);\n        this._coordinateToTimeCache = new TTLCache(this._coordinateCacheLimit, this._coordinateCacheTtl);\n        this._stateMachine.setAfterTransitionHook(this._afterTransitionHook.bind(this));\n        this.configureStateMachine(this._stateMachine);\n    }\n    // ------------------------------------------------------------------------------------\n    // ISeriesPrimitive implementation\n    // ------------------------------------------------------------------------------------\n    attached(param) {\n        const { chart, series, requestUpdate } = param;\n        this._clearCoordinateCaches();\n        this._environment = {\n            chart,\n            series: series,\n            requestUpdate: () => this.requestUpdate(),\n            coordinateTransform: {\n                priceToCoordinate: (price) => this._priceToCoordinateCache.getOrCompute(price, () => series.priceToCoordinate(price)),\n                coordinateToPrice: (y) => this._coordinateToPriceCache.getOrCompute(y, () => series.coordinateToPrice(y)),\n                timeToCoordinate: (time) => this._timeToCoordinateCache.getOrCompute(time, () => chart.timeScale().timeToCoordinate(time)),\n                coordinateToTime: (x) => this._coordinateToTimeCache.getOrCompute(x, () => chart.timeScale().coordinateToTime(x)),\n            },\n        };\n        this._requestUpdateInternal = requestUpdate;\n        this._subscriptions = subscribeAll(chart, {\n            click: this._handleChartClick,\n            move: this._handleCrosshairMove,\n            dblClick: this._handleChartDblClick,\n        });\n        // dblclick subscription handled by _subscriptions handle\n        this._stateMachine.reset();\n        this.updateAllGeometry();\n        this.requestUpdate();\n    }\n    detached() {\n        if (!this._environment) {\n            return;\n        }\n        this._subscriptions?.unsubscribe();\n        this._cancelScheduledUpdate();\n        this._clearCoordinateCaches();\n        this._environment = undefined;\n        this._requestUpdateInternal = undefined;\n        // dblclick subscription state is derived from _subscriptions; nothing to reset\n        this._subscriptions = undefined;\n        this._stateMachine.reset();\n    }\n    // Backwards-compatible aliases (some external code/tests may use attach/detach)\n    attach(param) {\n        this.attached(param);\n    }\n    detach() {\n        this.detached();\n    }\n    updateAllViews() {\n        this._clearCoordinateCaches();\n        this.updateAllGeometry();\n        this.requestUpdate();\n    }\n    paneViews() {\n        return this.collectViews().pane;\n    }\n    priceAxisViews() {\n        return this.collectViews().priceAxis ?? [];\n    }\n    timeAxisViews() {\n        return this.collectViews().timeAxis ?? [];\n    }\n    priceAxisPaneViews() {\n        return this.collectViews().priceAxisPane ?? [];\n    }\n    timeAxisPaneViews() {\n        return this.collectViews().timeAxisPane ?? [];\n    }\n    hitTest(x, y) {\n        if (!this._environment) {\n            return null;\n        }\n        const pointerEvent = {\n            clientX: x,\n            clientY: y,\n            point: { x, y },\n            rawEvent: createSyntheticMouseEvent('mousemove'),\n            pointerType: 'mouse',\n            isPrimary: true,\n            altKey: false,\n            ctrlKey: false,\n            metaKey: false,\n            shiftKey: false,\n        };\n        const hoverResult = this.performHitTest(pointerEvent);\n        if (!hoverResult) {\n            return null;\n        }\n        return {\n            cursorStyle: hoverResult.cursor,\n            externalId: hoverResult.externalId ?? '__drawing__',\n            zOrder: this.zOrderToPane(hoverResult.zOrder),\n            isBackground: hoverResult.isBackground ?? false,\n        };\n    }\n    // ------------------------------------------------------------------------------------\n    // Protected helper API\n    // ------------------------------------------------------------------------------------\n    environment() {\n        return ensureDefined(this._environment);\n    }\n    stateMachine() {\n        return this._stateMachine;\n    }\n    requestUpdate() {\n        const g = (typeof globalThis !== 'undefined') ? globalThis : undefined;\n        const w = g?.window;\n        const raf = g?.requestAnimationFrame ?? w?.requestAnimationFrame;\n        // already scheduled via RAF - coalesce\n        if (this._pendingFrame !== null) {\n            return;\n        }\n        // if previously scheduled via setTimeout but RAF is now available, upgrade to RAF\n        if (this._pendingTimeout !== null) {\n            if (typeof raf === 'function') {\n                clearTimeout(this._pendingTimeout);\n                this._pendingTimeout = null;\n                this._pendingFrame = raf(this._flushUpdate);\n            }\n            return;\n        }\n        // schedule fresh\n        if (typeof raf === 'function') {\n            this._pendingFrame = raf(this._flushUpdate);\n        }\n        else {\n            this._pendingTimeout = setTimeout(this._flushUpdate, RAF_FALLBACK_TIMEOUT);\n        }\n    }\n    renderScope(target) {\n        return {\n            target,\n            horizontalPixelRatio: target.horizontalPixelRatio,\n            verticalPixelRatio: target.verticalPixelRatio,\n        };\n    }\n    zOrderToPane(zOrder) {\n        switch (zOrder) {\n            case 'bottom':\n            case 'normal':\n            case 'top':\n                return zOrder;\n            default:\n                return 'normal';\n        }\n    }\n    handlesController() {\n        return this._handleController;\n    }\n    setAfterTransitionHook(hook) {\n        this._stateMachine.setAfterTransitionHook(hook);\n    }\n    // Optional extension point\n    onAfterStateTransition(_from, _to, _context) {\n        // Subclasses may override.\n    }\n    // Optional dblclick hook; return true to consume and prevent default reset\n    // Subclasses may override to implement dblclick semantics (e.g., enter editing).\n    // No event is passed because dblclick coordinates aren't provided by ChartSubscriptions.\n    // Tools should decide based on their current state/anchors.\n    // Default: not handled (returns false).\n    handlePointerDblClick() {\n        return false;\n    }\n    _clearCoordinateCaches() {\n        this._priceToCoordinateCache.clear();\n        this._coordinateToPriceCache.clear();\n        this._timeToCoordinateCache.clear();\n        this._coordinateToTimeCache.clear();\n    }\n    _cancelScheduledUpdate() {\n        const g = (typeof globalThis !== 'undefined') ? globalThis : undefined;\n        const w = g?.window;\n        const caf = g?.cancelAnimationFrame ?? w?.cancelAnimationFrame;\n        if (this._pendingFrame !== null && typeof caf === 'function') {\n            caf(this._pendingFrame);\n        }\n        if (this._pendingTimeout !== null) {\n            clearTimeout(this._pendingTimeout);\n        }\n        this._pendingFrame = null;\n        this._pendingTimeout = null;\n    }\n    _afterTransitionHook(from, to, context) {\n        this.onAfterStateTransition(from, to, context);\n    }\n}\n", "/**\n * Basic implementation of a drawing handle that stores descriptor data and delegates rendering\n * to an injected {@link HandleRenderer}. Higher level tools can extend this class to add custom\n * behaviour (e.g. constrained movement, snapping) while still benefiting from the shared\n * descriptor/update logic.\n */\nexport class BaseHandle {\n    constructor(id, position, renderer, shape, style = {}, cursor, metadata) {\n        this._renderer = renderer;\n        this._descriptor = {\n            id,\n            position: { x: position.x, y: position.y },\n            shape,\n            style: { ...style },\n            cursor,\n            metadata: metadata ? { ...metadata } : undefined,\n            halo: style.size,\n            isHovered: false,\n            isActive: false,\n        };\n    }\n    id() {\n        return this._descriptor.id;\n    }\n    position() {\n        return this._descriptor.position;\n    }\n    descriptor() {\n        return this._descriptor;\n    }\n    renderer() {\n        return this._renderer;\n    }\n    setPosition(position) {\n        this._descriptor = {\n            ...this._descriptor,\n            position: { x: position.x, y: position.y },\n        };\n    }\n    setHovered(hovered) {\n        if (this._descriptor.isHovered === hovered) {\n            return;\n        }\n        this._descriptor = {\n            ...this._descriptor,\n            isHovered: hovered,\n        };\n    }\n    setActive(active) {\n        if (this._descriptor.isActive === active) {\n            return;\n        }\n        this._descriptor = {\n            ...this._descriptor,\n            isActive: active,\n        };\n    }\n    updateStyle(style) {\n        const nextStyle = {\n            ...this._descriptor.style,\n            ...style,\n        };\n        this._descriptor = {\n            ...this._descriptor,\n            style: nextStyle,\n            halo: style.size ?? this._descriptor.halo,\n        };\n    }\n    updateMetadata(metadata) {\n        this._descriptor = {\n            ...this._descriptor,\n            metadata: {\n                ...(this._descriptor.metadata ?? {}),\n                ...metadata,\n            },\n        };\n    }\n}\n", "// Default handle rendering style for drawing tools\n// Centralized to avoid per-tool hardcoding; tools may read and override selectively via options\nexport const DEFAULT_HANDLE_STYLE = Object.freeze({\n    // Visual size in CSS pixels (scaled by canvas pixel ratio in renderer)\n    size: 8,\n    // Base colors\n    fill: '#ffffff',\n    stroke: '#333333',\n    lineWidth: 1,\n    // Interaction variants\n    hoverFill: '#ffeeaa',\n    activeFill: '#ffcc66',\n});\n", "// Centralized keyboard event dispatcher for drawing tools\n// MVP: manage a set of registered tools and forward keydown events to the most recently active tool\nclass DrawingToolControllerImpl {\n    constructor() {\n        this._installed = false;\n        this._stack = [];\n        this._onKeyDown = (ev) => {\n            // Forward to the most recent registered tool (top of stack)\n            const last = this._stack[this._stack.length - 1];\n            if (last && typeof last.onKeyDownFromController === 'function') {\n                try {\n                    last.onKeyDownFromController(ev);\n                }\n                catch (_err) {\n                    void _err;\n                }\n            }\n        };\n    }\n    register(tool) {\n        // Move to top if already in stack (re-attach)\n        const i = this._stack.indexOf(tool);\n        if (i >= 0) {\n            this._stack.splice(i, 1);\n        }\n        this._stack.push(tool);\n        this._ensureInstalled();\n    }\n    deregister(tool) {\n        const i = this._stack.indexOf(tool);\n        if (i >= 0) {\n            this._stack.splice(i, 1);\n        }\n        this._teardownIfIdle();\n    }\n    _ensureInstalled() {\n        if (this._installed) {\n            return;\n        }\n        try {\n            const g = (typeof globalThis !== 'undefined') ? globalThis : undefined;\n            const w = g?.window ?? g;\n            if (w && typeof w.addEventListener === 'function') {\n                w.addEventListener('keydown', this._onKeyDown, true);\n                this._installed = true;\n            }\n        }\n        catch {\n            // ignore in non-DOM environments\n        }\n    }\n    _teardownIfIdle() {\n        if (this._stack.length > 0 || !this._installed) {\n            return;\n        }\n        try {\n            const g = (typeof globalThis !== 'undefined') ? globalThis : undefined;\n            const w = g?.window ?? g;\n            if (w && typeof w.removeEventListener === 'function') {\n                w.removeEventListener('keydown', this._onKeyDown, true);\n                this._installed = false;\n            }\n        }\n        catch {\n            // ignore\n        }\n    }\n}\nlet singleton = null;\nexport function getDrawingToolController() {\n    if (singleton == null) {\n        singleton = new DrawingToolControllerImpl();\n    }\n    return singleton;\n}\n", "/* @generated by drawing-tools-generator. DO NOT EDIT. */\nexport const rectangleSpec = {\n    \"toolId\": \"rectangle\",\n    \"featureFlag\": \"drawingTools.rectangle\",\n    \"description\": \"Price/time anchored rectangle drawing tool with four corner handles and axis labels.\",\n    \"anchors\": [\n        {\n            \"id\": \"start\",\n            \"type\": \"price-time\",\n            \"description\": \"First corner anchor defined by price/time.\"\n        },\n        {\n            \"id\": \"end\",\n            \"type\": \"price-time\",\n            \"description\": \"Opposite corner anchor defined by price/time.\"\n        }\n    ],\n    \"states\": [\n        \"idle\",\n        \"anchoring\",\n        \"preview\",\n        \"editing\",\n        \"completed\"\n    ],\n    \"handles\": [\n        {\n            \"id\": \"topLeft\",\n            \"type\": \"corner\",\n            \"cursor\": \"nwse-resize\"\n        },\n        {\n            \"id\": \"topRight\",\n            \"type\": \"corner\",\n            \"cursor\": \"nesw-resize\"\n        },\n        {\n            \"id\": \"bottomLeft\",\n            \"type\": \"corner\",\n            \"cursor\": \"nesw-resize\"\n        },\n        {\n            \"id\": \"bottomRight\",\n            \"type\": \"corner\",\n            \"cursor\": \"nwse-resize\"\n        }\n    ],\n    \"views\": {\n        \"pane\": {\n            \"renderer\": \"rectangle-fill\",\n            \"zOrder\": \"normal\",\n            \"supportsPreview\": true\n        },\n        \"handles\": {\n            \"renderer\": \"square-handle\",\n            \"zOrder\": \"top\"\n        },\n        \"timeAxis\": {\n            \"labels\": [\n                {\n                    \"anchor\": \"start\"\n                },\n                {\n                    \"anchor\": \"end\"\n                }\n            ]\n        },\n        \"priceAxis\": {\n            \"labels\": [\n                {\n                    \"anchor\": \"start\"\n                },\n                {\n                    \"anchor\": \"end\"\n                }\n            ]\n        }\n    },\n    \"autoscale\": {\n        \"mode\": \"vertical-bounds\",\n        \"padding\": 0\n    },\n    \"serialization\": {\n        \"version\": 1,\n        \"snapshot\": [\n            \"anchors.start\",\n            \"anchors.end\",\n            \"options\"\n        ]\n    },\n    \"options\": [\n        {\n            \"name\": \"fillColor\",\n            \"type\": \"color\",\n            \"default\": \"rgba(200, 50, 100, 0.75)\"\n        },\n        {\n            \"name\": \"previewFillColor\",\n            \"type\": \"color\",\n            \"default\": \"rgba(200, 50, 100, 0.25)\"\n        },\n        {\n            \"name\": \"labelColor\",\n            \"type\": \"color\",\n            \"default\": \"rgba(200, 50, 100, 1)\"\n        },\n        {\n            \"name\": \"labelTextColor\",\n            \"type\": \"color\",\n            \"default\": \"#ffffff\"\n        },\n        {\n            \"name\": \"showLabels\",\n            \"type\": \"boolean\",\n            \"default\": true\n        }\n    ],\n    \"testing\": {\n        \"unit\": [\n            \"geometry normalization\",\n            \"state machine transitions\",\n            \"handles movement\",\n            \"autoscale info\",\n            \"serialization round-trip\"\n        ],\n        \"e2e\": [\n            \"add-preview-complete\",\n            \"handle-drag-edit\",\n            \"delete-undo-redo\",\n            \"autoscale verification\"\n        ],\n        \"performance\": {\n            \"maxInstances\": 200,\n            \"targetFps\": 60\n        }\n    }\n};\n", "/**\n * Compute rectangle bounds in pixel space from 2 price-time anchors.\n * Returns null if coordinate transforms cannot produce valid pixels.\n */\nexport function rectBoundsPx(env, start, end) {\n    if (!start || !end) {\n        return null;\n    }\n    const x1 = env.coordinateTransform.timeToCoordinate(start.time);\n    const x2 = env.coordinateTransform.timeToCoordinate(end.time);\n    const y1 = env.coordinateTransform.priceToCoordinate(start.price);\n    const y2 = env.coordinateTransform.priceToCoordinate(end.price);\n    if (x1 == null || x2 == null || y1 == null || y2 == null) {\n        return null;\n    }\n    const left = Math.min(x1, x2);\n    const right = Math.max(x1, x2);\n    const top = Math.min(y1, y2);\n    const bottom = Math.max(y1, y2);\n    return { left, right, top, bottom };\n}\n/**\n * Compute rectangle corner positions in pixel space from 2 price-time anchors.\n * Returns null if bounds cannot be produced.\n */\nexport function rectCornersPx(env, start, end) {\n    const bounds = rectBoundsPx(env, start, end);\n    if (!bounds) {\n        return null;\n    }\n    return {\n        topLeft: { x: bounds.left, y: bounds.top },\n        topRight: { x: bounds.right, y: bounds.top },\n        bottomLeft: { x: bounds.left, y: bounds.bottom },\n        bottomRight: { x: bounds.right, y: bounds.bottom },\n    };\n}\n", "/* eslint-disable max-classes-per-file */\n// @generated-entry\n// Stable entry acknowledged by generator checks. This entry is allowed to import from __generated__; production code outside this dir must not.\nimport { DrawingPrimitiveBase } from '../drawing-primitive-base';\nimport { BaseHandle } from '../handles/base-handle';\nimport { DEFAULT_HANDLE_STYLE } from '../handles/default-handle-style';\nimport { getDrawingToolController } from '../controller/drawing-tool-controller';\nimport { rectangleSpec } from './__generated__/rectangle';\nimport { rectBoundsPx, rectCornersPx } from '../runtime/geometry';\nexport class RectangleDrawingPrimitive extends DrawingPrimitiveBase {\n    constructor() {\n        super(rectangleSpec.states?.[0] ?? 'idle');\n        this._start = null;\n        this._end = null;\n        // Cache pixel positions of anchors to support hit-testing under non-linear/non-indexed time transforms (e.g., BusinessDay)\n        this._startPxCache = null;\n        this._endPxCache = null;\n        this._options = {\n            fillColor: rectangleSpec.options.find(o => o.name === 'fillColor')?.default ?? 'rgba(200, 50, 100, 0.75)',\n            previewFillColor: rectangleSpec.options.find(o => o.name === 'previewFillColor')?.default ?? 'rgba(200, 50, 100, 0.25)',\n            labelColor: rectangleSpec.options.find(o => o.name === 'labelColor')?.default ?? 'rgba(200, 50, 100, 1)',\n            labelTextColor: rectangleSpec.options.find(o => o.name === 'labelTextColor')?.default ?? '#ffffff',\n            showLabels: rectangleSpec.options.find(o => o.name === 'showLabels')?.default ?? true,\n            priceLabelFormatter: (p) => String(p),\n            timeLabelFormatter: (t) => String(t),\n        };\n        this._undoStack = [];\n        this._redoStack = [];\n        // Drag/editing state\n        this._dragTarget = 'none';\n        this._activeHandleId = null;\n        this._origStart = null;\n        this._origEnd = null;\n        this._dragStartPx = null;\n        /* eslint-disable-next-line complexity */\n        this._onKeyDown = (ev) => {\n            const kobj = ev;\n            const keyRaw = String(kobj?.key ?? kobj?.code ?? '');\n            const key = keyRaw.toLowerCase();\n            const state = this.stateMachine().state();\n            // ESC: cancel current operation\n            if (key === 'escape' || key === 'esc') {\n                // Cancel anchoring/preview \u2192 back to idle and clear anchors\n                if (state === 'anchoring' || state === 'preview') {\n                    this._pushUndo();\n                    this._start = null;\n                    this._end = null;\n                    this.handlesController().clear();\n                    this.stateMachine().transition('idle');\n                    this.requestUpdate();\n                    return;\n                }\n                // Cancel editing \u2192 revert to original anchors if present and finish editing\n                if (state === 'editing') {\n                    if (this._origStart && this._origEnd) {\n                        this._start = { price: this._origStart.price, time: this._origStart.time };\n                        this._end = { price: this._origEnd.price, time: this._origEnd.time };\n                        this.updateAllGeometry();\n                    }\n                    this._dragTarget = 'none';\n                    this._activeHandleId = null;\n                    this._origStart = null;\n                    this._origEnd = null;\n                    this.stateMachine().transition('completed');\n                    this.requestUpdate();\n                    return;\n                }\n            }\n            // Delete / Backspace: delete the rectangle\n            if (key === 'delete' || key === 'backspace') {\n                if (this._start && this._end) {\n                    this.deleteSelf();\n                }\n            }\n        };\n        this._paneFillView = new RectanglePaneView(this);\n        this._handlesView = new RectangleHandlesPaneView(this);\n        this._priceAxisPaneView = new RectanglePriceAxisPaneView(this);\n        this._timeAxisPaneView = new RectangleTimeAxisPaneView(this);\n    }\n    getStartAnchor() { return this._start; }\n    getEndAnchor() { return this._end; }\n    configureStateMachine(machine) {\n        machine.registerState('idle', {});\n        machine.registerState('anchoring', {});\n        machine.registerState('preview', {});\n        machine.registerState('editing', {});\n        machine.registerState('completed', {});\n    }\n    /* eslint-disable-next-line complexity */\n    handlePointerClick(event) {\n        const state = this.stateMachine().state();\n        // First anchor\n        if (this._start === null && event.price != null && event.time != null) {\n            this._beginAnchoring(event);\n            return;\n        }\n        // While anchoring/preview, click should complete the rectangle even if _end already set by move\n        if (this._start !== null && (state === 'anchoring' || state === 'preview')) {\n            this._completeAnchoring(event);\n            return;\n        }\n        // Completed rectangle: determine edit target (handle vs body) and enter editing\n        if (this._start !== null && this._end !== null) {\n            // Prefer handle under cursor\n            const hit = (event.point && event.point.x != null && event.point.y != null)\n                ? this.handlesController().hitTest(event.point.x, event.point.y)\n                : null;\n            if (hit) {\n                this._beginHandleEdit(hit.handle.id(), event);\n                return;\n            }\n            // Fallback to body hit\n            const bounds = this._boundsPx();\n            if (event.point && event.point.x != null && event.point.y != null) {\n                let inside = false;\n                if (bounds) {\n                    const { left, right, top, bottom } = bounds;\n                    inside = event.point.x >= left && event.point.x <= right && event.point.y >= top && event.point.y <= bottom;\n                }\n                // Fallback: use cached pixel anchors when time->px transform is non-linear or does not map BusinessDay to viewport coordinates\n                if (!inside && this._startPxCache && this._endPxCache) {\n                    const l = Math.min(this._startPxCache.x, this._endPxCache.x);\n                    const r = Math.max(this._startPxCache.x, this._endPxCache.x);\n                    const t = Math.min(this._startPxCache.y, this._endPxCache.y);\n                    const b = Math.max(this._startPxCache.y, this._endPxCache.y);\n                    inside = event.point.x >= l && event.point.x <= r && event.point.y >= t && event.point.y <= b;\n                }\n                if (inside) {\n                    this._beginBodyDrag(event);\n                    return;\n                }\n            }\n            // If neither handle nor body: toggle out of editing if currently editing, else ignore\n            if (state === 'editing') {\n                this._dragTarget = 'none';\n                this._activeHandleId = null;\n                this._origStart = null;\n                this._origEnd = null;\n                this.stateMachine().transition('completed', event);\n            }\n            return;\n        }\n    }\n    /* eslint-disable-next-line complexity */\n    handlePointerMove(event) {\n        const state = this.stateMachine().state();\n        // Anchoring \u2192 preview\n        if (state === 'anchoring' && this._start !== null && event.price != null && event.time != null) {\n            this._end = { price: event.price, time: event.time };\n            // update pixel cache for fallback hit-testing\n            if (event.point && event.point.x != null && event.point.y != null) {\n                this._endPxCache = { x: event.point.x, y: event.point.y };\n            }\n            this.stateMachine().transition('preview', event);\n            this.updateAllGeometry();\n            this.requestUpdate();\n            return;\n        }\n        // Editing: handle or body drag\n        if (state === 'editing' && this._start !== null && this._end !== null) {\n            // Handle drag (prefer explicit selection from click; fallback to hit under cursor)\n            const handleId = this._dragTarget === 'handle'\n                ? this._activeHandleId\n                : (event.point && event.point.x != null && event.point.y != null\n                    ? this.handlesController().hitTest(event.point.x, event.point.y)?.handle.id()\n                    : undefined);\n            if (handleId && event.price != null && event.time != null) {\n                this._applyHandleDelta(handleId, event);\n                return;\n            }\n            // Body drag: move both anchors by delta using pixel-space transform to support all time types\n            if (this._dragTarget === 'body' && this._origStart && this._origEnd && this._dragStartPx && event.point && event.point.x != null && event.point.y != null) {\n                this._applyBodyDelta(event);\n            }\n        }\n    }\n    handlePointerCancel() {\n        this._pointerCancel();\n    }\n    // Interaction primitives (skeletons) to reduce complexity and enable reuse across tools\n    // These helpers intentionally keep current behavior intact; wiring will be incremental.\n    _pointerCancel() {\n        const state = this.stateMachine().state();\n        // Mirror ESC semantics for safety\n        if (state === 'anchoring' || state === 'preview') {\n            this._pushUndo();\n            this._start = null;\n            this._end = null;\n            this.handlesController().clear();\n            this.stateMachine().transition('idle');\n            this.requestUpdate();\n            return;\n        }\n        if (state === 'editing') {\n            if (this._origStart && this._origEnd) {\n                this._start = { price: this._origStart.price, time: this._origStart.time };\n                this._end = { price: this._origEnd.price, time: this._origEnd.time };\n                this.updateAllGeometry();\n            }\n            this._dragTarget = 'none';\n            this._activeHandleId = null;\n            this._origStart = null;\n            this._origEnd = null;\n            this.stateMachine().transition('completed');\n            this.requestUpdate();\n        }\n    }\n    // Start anchoring with first click (keeps original behavior)\n    _beginAnchoring(event) {\n        this._pushUndo();\n        if (event.price != null && event.time != null) {\n            this._start = { price: event.price, time: event.time };\n        }\n        // record pixel position for fallback hit-testing under BusinessDay/complex time types\n        if (event.point && event.point.x != null && event.point.y != null) {\n            this._startPxCache = { x: event.point.x, y: event.point.y };\n        }\n        this.stateMachine().transition('anchoring', event);\n        this.requestUpdate();\n    }\n    // Complete anchoring \u2192 completed\n    _completeAnchoring(event) {\n        if (event.price != null && event.time != null) {\n            this._pushUndo();\n            this._end = { price: event.price, time: event.time };\n        }\n        // record the final pixel position for fallback hit-testing\n        if (event.point && event.point.x != null && event.point.y != null) {\n            this._endPxCache = { x: event.point.x, y: event.point.y };\n        }\n        this.stateMachine().transition('completed', event);\n        this.updateAllGeometry();\n        this.requestUpdate();\n    }\n    // Enter handle editing given a handle id\n    _beginHandleEdit(handleId, event) {\n        this._pushUndo();\n        this._origStart = this._start ? { price: this._start.price, time: this._start.time } : null;\n        this._origEnd = this._end ? { price: this._end.price, time: this._end.time } : null;\n        this._dragTarget = 'handle';\n        this._activeHandleId = handleId;\n        this.stateMachine().transition('editing', event);\n    }\n    // Apply handle delta on pointer move\n    _applyHandleDelta(handleId, event) {\n        if (event.price == null || event.time == null || this._start == null || this._end == null) {\n            return;\n        }\n        switch (handleId) {\n            case 'topLeft':\n                this._start = { price: event.price, time: event.time };\n                break;\n            case 'bottomRight':\n                this._end = { price: event.price, time: event.time };\n                break;\n            case 'topRight':\n                this._start = { price: event.price, time: this._start.time };\n                this._end = { price: this._end.price, time: event.time };\n                break;\n            case 'bottomLeft':\n                this._start = { price: this._start.price, time: event.time };\n                this._end = { price: event.price, time: this._end.time };\n                break;\n        }\n        this.updateAllGeometry();\n        this.requestUpdate();\n    }\n    // Enter body drag editing\n    _beginBodyDrag(event) {\n        this._pushUndo();\n        this._dragTarget = 'body';\n        this._activeHandleId = null;\n        this._origStart = this._start ? { price: this._start.price, time: this._start.time } : null;\n        this._origEnd = this._end ? { price: this._end.price, time: this._end.time } : null;\n        this._dragStartPx = (event.point && event.point.x != null && event.point.y != null) ? { x: event.point.x, y: event.point.y } : null;\n        this.stateMachine().transition('editing', event);\n    }\n    // Apply body delta using pixel transform (reduced complexity via helpers)\n    _applyBodyDelta(event) {\n        if (!this._canApplyBodyDelta(event)) {\n            return;\n        }\n        const env = this.environment();\n        const dx = (event.point.x - this._dragStartPx.x);\n        const dy = (event.point.y - this._dragStartPx.y);\n        const coords = this._resolveAnchorCoordinates(this._origStart, this._origEnd, env);\n        if (!coords) {\n            return;\n        }\n        const next = this._computeNextAnchorsFromDelta(dx, dy, coords, env);\n        if (!next) {\n            return;\n        }\n        this._start = next.start;\n        this._end = next.end;\n        this.updateAllGeometry();\n        this.requestUpdate();\n    }\n    // Narrow pointer event for body-drag applicability to reduce complexity inside _applyBodyDelta\n    _canApplyBodyDelta(event) {\n        if (this._origStart == null || this._origEnd == null) {\n            return false;\n        }\n        if (this._dragStartPx == null) {\n            return false;\n        }\n        const p = event.point;\n        if (!p) {\n            return false;\n        }\n        if (p.x == null || p.y == null) {\n            return false;\n        }\n        return true;\n    }\n    // Resolve pixel coordinates of current anchors; returns null if any transform is unavailable\n    _resolveAnchorCoordinates(start, end, env) {\n        const sTimePx = env.coordinateTransform.timeToCoordinate(start.time);\n        const eTimePx = env.coordinateTransform.timeToCoordinate(end.time);\n        const sPricePx = env.coordinateTransform.priceToCoordinate(start.price);\n        const ePricePx = env.coordinateTransform.priceToCoordinate(end.price);\n        if (sTimePx == null || eTimePx == null || sPricePx == null || ePricePx == null) {\n            return null;\n        }\n        return {\n            sTimePx: sTimePx,\n            eTimePx: eTimePx,\n            sPricePx: sPricePx,\n            ePricePx: ePricePx,\n        };\n    }\n    // Compute next anchors after applying dx/dy in pixel space and mapping back via environment transforms\n    _computeNextAnchorsFromDelta(dx, dy, coords, env) {\n        const nextStartTime = env.coordinateTransform.coordinateToTime((coords.sTimePx + dx));\n        const nextEndTime = env.coordinateTransform.coordinateToTime((coords.eTimePx + dx));\n        const nextStartPrice = env.coordinateTransform.coordinateToPrice((coords.sPricePx + dy));\n        const nextEndPrice = env.coordinateTransform.coordinateToPrice((coords.ePricePx + dy));\n        if (nextStartPrice == null || nextEndPrice == null || nextStartTime == null || nextEndTime == null) {\n            return null;\n        }\n        return {\n            start: { price: nextStartPrice, time: nextStartTime },\n            end: { price: nextEndPrice, time: nextEndTime },\n        };\n    }\n    collectViews() {\n        const priceAxis = [];\n        const timeAxis = [];\n        if (this._options.showLabels) {\n            if (this._start) {\n                priceAxis.push(new RectAxisLabelViewPrice(this, 'start'));\n                timeAxis.push(new RectAxisLabelViewTime(this, 'start'));\n            }\n            if (this._end) {\n                priceAxis.push(new RectAxisLabelViewPrice(this, 'end'));\n                timeAxis.push(new RectAxisLabelViewTime(this, 'end'));\n            }\n        }\n        return {\n            pane: [this._paneFillView, this._handlesView],\n            priceAxis,\n            timeAxis,\n            priceAxisPane: [this._priceAxisPaneView],\n            timeAxisPane: [this._timeAxisPaneView],\n        };\n    }\n    performHitTest(event) {\n        // Guard against missing pointer coordinates (e.g., keyboard-driven events)\n        if (!event.point || event.point.x == null || event.point.y == null) {\n            this.handlesController().setHovered(null);\n            return null;\n        }\n        const hit = this.handlesController().hitTest(event.point.x, event.point.y);\n        if (hit) {\n            this.handlesController().setHovered(hit.handle.id());\n            return {\n                cursor: hit.descriptor.cursor ?? 'default',\n                externalId: `rectangle-handle-${hit.handle.id()}`,\n                zOrder: 'top',\n            };\n        }\n        this.handlesController().setHovered(null);\n        const bounds = this._boundsPx();\n        if (!bounds) {\n            return null;\n        }\n        const { left, right, top, bottom } = bounds;\n        const inside = event.point.x >= left && event.point.x <= right && event.point.y >= top && event.point.y <= bottom;\n        if (!inside) {\n            return null;\n        }\n        return {\n            cursor: 'move',\n            externalId: 'rectangle-body',\n            zOrder: 'normal',\n        };\n    }\n    updateAllGeometry() {\n        const h = this.handlesController();\n        const corners = this._cornerPositionsPx();\n        if (!corners) {\n            h.clear();\n            return;\n        }\n        const style = DEFAULT_HANDLE_STYLE;\n        const renderer = new SquareHandleRenderer();\n        const upsert = (id, pos, cursor) => {\n            const existing = h.get(id);\n            if (existing) {\n                existing.setPosition(pos);\n                existing.updateStyle(style);\n                existing.updateMetadata({ corner: id });\n            }\n            else {\n                const handle = new BaseHandle(id, pos, renderer, 'square', style, cursor, { corner: id });\n                h.add(handle);\n            }\n        };\n        upsert('topLeft', corners.topLeft, 'nwse-resize');\n        upsert('topRight', corners.topRight, 'nesw-resize');\n        upsert('bottomLeft', corners.bottomLeft, 'nesw-resize');\n        upsert('bottomRight', corners.bottomRight, 'nwse-resize');\n    }\n    autoscaleInfo(startLogical, endLogical) {\n        if (this._start === null || this._end === null) {\n            return null;\n        }\n        const min = Math.min(this._start.price, this._end.price);\n        const max = Math.max(this._start.price, this._end.price);\n        // Maintain consistent autoscale semantics across preview/completed,\n        // and provide explicit margins to avoid UI jitter.\n        return {\n            priceRange: { minValue: min, maxValue: max },\n            margins: { above: 0, below: 0 },\n        };\n    }\n    _boundsPx() {\n        return rectBoundsPx(this.environment(), this._start, this._end);\n    }\n    _cornerPositionsPx() {\n        return rectCornersPx(this.environment(), this._start, this._end);\n    }\n    // Public proxies for renderers\n    getBoundsPxForView() { return this._boundsPx(); }\n    getOptions() { return this._options; }\n    getState() { return this.stateMachine().state(); }\n    drawHandlesToTarget(target) {\n        target.useBitmapCoordinateSpace(scope => {\n            for (const handle of this.handlesController().handles()) {\n                handle.renderer().draw(handle.descriptor(), scope.context, {\n                    pixelRatio: { horizontal: scope.horizontalPixelRatio, vertical: scope.verticalPixelRatio },\n                });\n            }\n        });\n    }\n    _snapshot() {\n        return {\n            version: 1,\n            anchors: { start: this._start, end: this._end },\n            options: {\n                fillColor: this._options.fillColor,\n                previewFillColor: this._options.previewFillColor,\n                labelColor: this._options.labelColor,\n                labelTextColor: this._options.labelTextColor,\n                showLabels: this._options.showLabels,\n            },\n        };\n    }\n    _applySnapshot(s) {\n        this._start = s.anchors.start;\n        this._end = s.anchors.end;\n        this._options = { ...this._options, ...s.options };\n        // Set state based on anchors to support undo/redo and JSON restore flows.\n        if (this._start && this._end) {\n            this.stateMachine().transition('completed');\n        }\n        else {\n            this.stateMachine().transition('idle');\n        }\n        this.updateAllGeometry();\n        this.requestUpdate();\n    }\n    _pushUndo() {\n        this._undoStack.push(this._snapshot());\n        this._redoStack.length = 0;\n        if (this._undoStack.length > 64) {\n            this._undoStack.shift();\n        }\n    }\n    toJSON() { return this._snapshot(); }\n    static fromJSON(snapshot) {\n        const inst = new RectangleDrawingPrimitive();\n        if (snapshot && snapshot.version === 1) {\n            inst._start = snapshot.anchors.start;\n            inst._end = snapshot.anchors.end;\n            inst._options = { ...inst._options, ...snapshot.options };\n            if (snapshot.anchors.start && snapshot.anchors.end) {\n                inst.stateMachine().transition('completed');\n            }\n            // Defer geometry until attached(): environment() isn't available pre-attach.\n            // DrawingPrimitiveBase.attached() will call updateAllGeometry() and requestUpdate().\n        }\n        return inst;\n    }\n    undo() {\n        if (this._undoStack.length === 0) {\n            return false;\n        }\n        const prev = this._undoStack.pop();\n        const current = this._snapshot();\n        // Push current state so that redo can re-apply it after undo.\n        this._redoStack.push(current);\n        this._applySnapshot(prev);\n        return true;\n    }\n    redo() {\n        if (this._redoStack.length === 0) {\n            return false;\n        }\n        const next = this._redoStack.pop();\n        const current = this._snapshot();\n        this._undoStack.push(current);\n        this._applySnapshot(next);\n        return true;\n    }\n    deleteSelf() {\n        this._pushUndo();\n        this._start = null;\n        this._end = null;\n        this._dragTarget = 'none';\n        this._activeHandleId = null;\n        this._origStart = null;\n        this._origEnd = null;\n        this.handlesController().clear();\n        this.stateMachine().transition('idle');\n        this.requestUpdate();\n    }\n    // Ensure state restoration after attach (e.g., fromJSON or undo/redo) when anchors exist.\n    attached(param) {\n        super.attached(param);\n        // Reset transient drag state\n        this._dragTarget = 'none';\n        this._activeHandleId = null;\n        this._origStart = null;\n        this._origEnd = null;\n        // Register to centralized drawing tool controller for keyboard dispatch\n        getDrawingToolController().register(this);\n        this._dragStartPx = null;\n        if (this._start && this._end) {\n            this.stateMachine().transition('completed');\n            this.updateAllGeometry();\n            this.requestUpdate();\n        }\n    }\n    // Enter editing mode on double-click when anchors exist (consumes dblclick)\n    handlePointerDblClick() {\n        if (this._start && this._end) {\n            // reset transient drag state\n            this._dragTarget = 'none';\n            this._activeHandleId = null;\n            this._origStart = null;\n            this._origEnd = null;\n            this.stateMachine().transition('editing');\n            this.requestUpdate();\n            return true;\n        }\n        return false;\n    }\n    detached() {\n        // Deregister from centralized drawing tool controller\n        getDrawingToolController().deregister(this);\n        // Clear transient drag state\n        this._dragTarget = 'none';\n        this._activeHandleId = null;\n        this._dragStartPx = null;\n        this._origStart = null;\n        this._origEnd = null;\n        super.detached();\n    }\n    // Controller entrypoint: forward centralized key events to internal handler\n    onKeyDownFromController(ev) {\n        this._onKeyDown(ev);\n    }\n}\nclass RectanglePaneRenderer {\n    constructor(p) { this._primitive = p; }\n    draw(target, _utils) {\n        const bounds = this._primitive.getBoundsPxForView();\n        if (!bounds) {\n            return;\n        }\n        const state = this._primitive.getState();\n        const fill = (state === 'preview') ? this._primitive.getOptions().previewFillColor : this._primitive.getOptions().fillColor;\n        target.useBitmapCoordinateSpace(scope => {\n            const ctx = scope.context;\n            ctx.save();\n            ctx.fillStyle = fill;\n            const w = Math.max(0, bounds.right - bounds.left);\n            const h = Math.max(0, bounds.bottom - bounds.top);\n            ctx.fillRect(bounds.left, bounds.top, w, h);\n            ctx.restore();\n        });\n    }\n}\nclass SquareHandleRenderer {\n    draw(descriptor, ctx, _context) {\n        const size = descriptor.style.size ?? 8;\n        const half = size / 2;\n        const x = descriptor.position.x - half;\n        const y = descriptor.position.y - half;\n        const fill = descriptor.isActive ? (descriptor.style.activeFill ?? descriptor.style.fill ?? '#fff')\n            : descriptor.isHovered ? (descriptor.style.hoverFill ?? descriptor.style.fill ?? '#fff')\n                : (descriptor.style.fill ?? '#fff');\n        const stroke = descriptor.style.stroke ?? '#333';\n        const lw = descriptor.style.lineWidth ?? 1;\n        ctx.save();\n        ctx.lineWidth = lw;\n        ctx.strokeStyle = stroke;\n        ctx.fillStyle = fill;\n        if (descriptor.style.shadowBlur && descriptor.style.shadowColor) {\n            ctx.shadowBlur = descriptor.style.shadowBlur;\n            ctx.shadowColor = descriptor.style.shadowColor;\n        }\n        ctx.beginPath();\n        ctx.rect(x, y, size, size);\n        ctx.fill();\n        ctx.stroke();\n        ctx.restore();\n    }\n}\nclass RectangleHandlesRenderer {\n    constructor(p) { this._primitive = p; }\n    draw(target) {\n        this._primitive.drawHandlesToTarget(target);\n    }\n}\nclass RectanglePaneView {\n    constructor(p) { this._renderer = new RectanglePaneRenderer(p); }\n    renderer() { return this._renderer; }\n    zOrder() { return 'normal'; }\n}\nclass RectangleHandlesPaneView {\n    constructor(p) { this._renderer = new RectangleHandlesRenderer(p); }\n    renderer() { return this._renderer; }\n    zOrder() { return 'top'; }\n}\nclass RectAxisLabelViewPrice {\n    constructor(p, anchor) { this._primitive = p; this._anchor = anchor; }\n    coordinate() {\n        if (!this._primitive.getOptions().showLabels) {\n            return -1;\n        }\n        const env = this._primitive.environment();\n        const a = this._anchor === 'start' ? this._primitive.getStartAnchor() : this._primitive.getEndAnchor();\n        if (!a) {\n            return -1;\n        }\n        const y = env.coordinateTransform.priceToCoordinate(a.price);\n        return (y ?? -1);\n    }\n    fixedCoordinate() { return undefined; }\n    text() {\n        const a = this._anchor === 'start' ? this._primitive.getStartAnchor() : this._primitive.getEndAnchor();\n        const fmt = this._primitive.getOptions().priceLabelFormatter;\n        return a ? (fmt ? fmt(a.price) : String(a.price)) : '';\n    }\n    textColor() { return this._primitive.getOptions().labelTextColor; }\n    backColor() { return this._primitive.getOptions().labelColor; }\n    visible() {\n        const a = this._anchor === 'start' ? this._primitive.getStartAnchor() : this._primitive.getEndAnchor();\n        return this._primitive.getOptions().showLabels && !!a;\n    }\n    tickVisible() { return true; }\n}\nclass RectAxisLabelViewTime {\n    constructor(p, anchor) { this._primitive = p; this._anchor = anchor; }\n    coordinate() {\n        if (!this._primitive.getOptions().showLabels) {\n            return -1;\n        }\n        const env = this._primitive.environment();\n        const a = this._anchor === 'start' ? this._primitive.getStartAnchor() : this._primitive.getEndAnchor();\n        if (!a) {\n            return -1;\n        }\n        const x = env.coordinateTransform.timeToCoordinate(a.time);\n        return (x ?? -1);\n    }\n    fixedCoordinate() { return undefined; }\n    text() {\n        const a = this._anchor === 'start' ? this._primitive.getStartAnchor() : this._primitive.getEndAnchor();\n        const fmt = this._primitive.getOptions().timeLabelFormatter;\n        return a ? (fmt ? fmt(a.time) : String(a.time)) : '';\n    }\n    textColor() { return this._primitive.getOptions().labelTextColor; }\n    backColor() { return this._primitive.getOptions().labelColor; }\n    visible() {\n        const a = this._anchor === 'start' ? this._primitive.getStartAnchor() : this._primitive.getEndAnchor();\n        return this._primitive.getOptions().showLabels && !!a;\n    }\n    tickVisible() { return true; }\n}\nclass RectangleAxisPaneRenderer {\n    constructor(p, vertical) {\n        this._primitive = p;\n        this._vertical = vertical;\n    }\n    draw(target) {\n        const start = this._primitive.getStartAnchor();\n        const end = this._primitive.getEndAnchor();\n        if (!start || !end) {\n            return;\n        }\n        const env = this._primitive.environment();\n        const c1 = this._vertical\n            ? env.coordinateTransform.priceToCoordinate(start.price)\n            : env.coordinateTransform.timeToCoordinate(start.time);\n        const c2 = this._vertical\n            ? env.coordinateTransform.priceToCoordinate(end.price)\n            : env.coordinateTransform.timeToCoordinate(end.time);\n        if (c1 == null || c2 == null) {\n            return;\n        }\n        const a = Math.min(c1, c2);\n        const b = Math.max(c1, c2);\n        target.useBitmapCoordinateSpace(scope => {\n            const ctx = scope.context;\n            ctx.save();\n            ctx.globalAlpha = 0.5;\n            ctx.fillStyle = this._primitive.getOptions().labelColor;\n            if (this._vertical) {\n                const h = Math.max(0, b - a);\n                const w = Math.max(2, 12 * scope.horizontalPixelRatio);\n                ctx.fillRect(0, a, w, h);\n            }\n            else {\n                const w = Math.max(0, b - a);\n                const h = Math.max(2, 12 * scope.verticalPixelRatio);\n                ctx.fillRect(a, 0, w, h);\n            }\n            ctx.restore();\n        });\n    }\n}\nclass RectanglePriceAxisPaneView {\n    constructor(p) { this._renderer = new RectangleAxisPaneRenderer(p, true); }\n    renderer() { return this._renderer; }\n    zOrder() { return 'bottom'; }\n}\nclass RectangleTimeAxisPaneView {\n    constructor(p) { this._renderer = new RectangleAxisPaneRenderer(p, false); }\n    renderer() { return this._renderer; }\n    zOrder() { return 'bottom'; }\n}\nexport class RectangleDrawingTool {\n    constructor() {\n        this.spec = rectangleSpec;\n    }\n}\nexport { rectangleSpec } from './__generated__/rectangle';\n", "/// <reference types=\"_build-time-constants\" />\nimport { customStyleDefaults, seriesOptionsDefaults } from './api/options/series-options-defaults';\nexport { LineStyle, LineType } from './renderers/draw-line';\nexport { TrackingModeExitMode } from './model/chart-model';\nexport { CrosshairMode } from './model/crosshair';\nexport { MismatchDirection } from './model/plot-list';\nexport { PriceScaleMode } from './model/price-scale';\nexport { PriceLineSource, LastPriceAnimationMode } from './model/series-options';\nexport { ColorType } from './model/layout-options';\nexport { isBusinessDay, isUTCTimestamp } from './model/horz-scale-behavior-time/types';\nexport { TickMarkType } from './model/horz-scale-behavior-time/types';\nexport const customSeriesDefaultOptions = {\n    ...seriesOptionsDefaults,\n    ...customStyleDefaults,\n};\nexport { createChart, createChartEx, defaultHorzScaleBehavior } from './api/create-chart';\nexport { createYieldCurveChart } from './api/create-yield-curve-chart';\nexport { createOptionsChart } from './api/create-options-chart';\nexport { lineSeries as LineSeries } from './model/series/line-series';\nexport { baselineSeries as BaselineSeries } from './model/series/baseline-series';\nexport { areaSeries as AreaSeries } from './model/series/area-series';\nexport { barSeries as BarSeries } from './model/series/bar-series';\nexport { candlestickSeries as CandlestickSeries } from './model/series/candlestick-series';\nexport { histogramSeries as HistogramSeries } from './model/series/histogram-series';\n/*\n    Plugins\n*/\nexport { createTextWatermark } from './plugins/text-watermark/primitive';\nexport { createImageWatermark } from './plugins/image-watermark/primitive';\nexport { createSeriesMarkers } from './plugins/series-markers/wrapper';\nexport { createUpDownMarkers } from './plugins/up-down-markers-plugin/wrapper';\n/* eslint-disable-next-line spaced-comment */\n// Drawing tools exports are always-on\nexport { RectangleDrawingPrimitive, RectangleDrawingTool, rectangleSpec } from './drawing/tools/rectangle';\n/**\n * Returns the current version as a string. For example `'3.3.0'`.\n */\nexport function version() {\n    return process.env.BUILD_VERSION;\n}\n"],
  "mappings": "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",
  "names": ["LineType", "LineStyle", "size", "RendererConstants", "radius", "CrosshairMode", "DefaultPriceScaleId", "InvalidationLevel", "TimeScaleInvalidationType", "size", "optimizationReplacementRe", "Constants", "Constants", "radius", "MismatchDirection", "min", "createPaneView", "radius", "min", "Constants", "PriceScaleMode", "min", "size", "Constants", "BackgroundColorSide", "TrackingModeExitMode", "LastPriceAnimationMode", "PriceAxisLastValueMode", "PriceLineSource", "ColorType", "TickMarkType", "TickMarkWeight", "Observable", "DevicePixelContentBoxBinding", "size", "entry", "CanvasRenderingTarget2D", "Delay", "Constants", "SeparatorConstants", "Constants", "size", "CursorType", "Constants", "KineticScrollConstants", "Constants", "CursorType", "sourcePaneViews", "sourceTopPaneViews", "sourceBottomPaneViews", "add", "min", "customStyleDefaults", "Constants", "size", "size", "createPaneView", "radius", "finishStyledArea", "currentItem", "createPaneView", "markWithGreaterWeight", "markWithGreaterWeight", "finishStyledArea", "createPaneView", "createPaneView", "createSeries", "createPaneView", "createSeries", "Constants", "createPaneView", "createSeries", "createPaneView", "createSeries", "PanePrimitiveWrapper", "PanePrimitiveWrapper", "buildRendererOptions", "mergeOptionsWithDefaults", "PanePrimitiveWrapper", "Constants", "size", "size", "size", "size", "Constants", "shapeMargin", "shapeSize", "mergeOptionsWithDefaults", "shapeMargin", "Constants", "size", "min", "size"]
}
